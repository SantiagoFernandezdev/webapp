(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{"5yQV":function(e,t,r){"use strict";r.d(t,"a",function(){return h});var o=r("AytR"),n=r("tk/3"),a=r("coGc"),i=r("lJxs"),s=r("IzEk"),c=r("MtjB"),p=r("PqYM"),l=r("fXoL");let h=(()=>{class e{constructor(e){this.http=e}hanflerError(e){return e.pipe(Object(a.a)(()=>Object(p.a)(3e3)),Object(i.a)(e=>{if(console.log("Entramos a intentos"),e instanceof ErrorEvent)throw new Error("Error de Red");if(404===e.status)throw new Error(" P\xe1gina no encontrada")}),Object(s.a)(3))}crearInventario(e,t){const r={headers:new n.c({"x-token":e})};return this.http.post(`${o.a}/ivt/tipo/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}actualizarInventario(e,t){const r={headers:new n.c({"x-token":e})};return this.http.put(`${o.a}/ivt/cierre/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}leerInventarios(e){const t={headers:new n.c({"x-token":e})};return this.http.get(`${o.a}/ivt/tipo/`,t).pipe(Object(c.a)(e=>this.hanflerError(e)))}leerInventario(e,t){const r={headers:new n.c({"x-token":e,"x-id":t})};return this.http.get(`${o.a}/ivt/tipo/uno`,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}editarAcceso(e,t){const r={headers:new n.c({"x-token":e})};return this.http.put(`${o.a}/ivt/tipo/accesos/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}BuscarUsuarios(e,t){const r={headers:new n.c({"x-token":e})};return this.http.put(`${o.a}/empleados/buscar/`,{patron:t},r).pipe(Object(c.a)(e=>this.hanflerError(e)))}crearEmpleado(e,t){const r={headers:new n.c({"x-token":e})};return this.http.post(`${o.a}/empleados/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}editarEmpleado(e,t){const r={headers:new n.c({"x-token":e})};return this.http.put(`${o.a}/empleados/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}leerEmpleados(e){const t={headers:new n.c({"x-token":e})};return this.http.get(`${o.a}/empleados/`,t).pipe(Object(c.a)(e=>this.hanflerError(e)))}eliminarEmpleados(e,t){const r={headers:new n.c({"x-token":e,"x-id":t})};return this.http.delete(`${o.a}/empleados/`,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}crearProveedor(e,t){const r={headers:new n.c({"x-token":e})};return this.http.post(`${o.a}/ivt/proveedores/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}editarProveedor(e,t){const r={headers:new n.c({"x-token":e})};return this.http.put(`${o.a}/ivt/proveedores/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}eliminarProveedor(e,t){const r={headers:new n.c({"x-token":e,"x-id":t})};return this.http.delete(`${o.a}/ivt/proveedores/`,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}leerProveedor(e,t){const r={headers:new n.c({"x-token":e,"x-ivt":t})};return this.http.get(`${o.a}/ivt/proveedores/`,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}crearCategoria(e,t){const r={headers:new n.c({"x-token":e})};return this.http.post(`${o.a}/ivt/categorias/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}editarCategoria(e,t){const r={headers:new n.c({"x-token":e})};return this.http.put(`${o.a}/ivt/categorias/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}eliminarCategoria(e,t){const r={headers:new n.c({"x-token":e,"x-id":t})};return this.http.delete(`${o.a}/ivt/categorias/`,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}leerCategoria(e,t){const r={headers:new n.c({"x-token":e,"x-ivt":t})};return this.http.get(`${o.a}/ivt/categorias/`,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}crearProducto(e,t){const r={headers:new n.c({"x-token":e})};return this.http.post(`${o.a}/ivt/productos/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}editarProducto(e,t){const r={headers:new n.c({"x-token":e})};return this.http.put(`${o.a}/ivt/productos/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}eliminarProducto(e,t){const r={headers:new n.c({"x-token":e,"x-id":t})};return this.http.delete(`${o.a}/ivt/productos/`,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}leerProducto(e,t){const r={headers:new n.c({"x-token":e})};return this.http.put(`${o.a}/ivt/productos/filtro/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}leerProductoEstadistica(e,t){const r={headers:new n.c({"x-token":e})};return this.http.put(`${o.a}/ivt/productos/filtro/estadistica/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}leerProductosPorInventario(e,t){const r={headers:new n.c({"x-token":e})};return this.http.put(`${o.a}/ivt/productos/buscarivt/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}buscarProducto(e,t){const r={headers:new n.c({"x-token":e})};return this.http.put(`${o.a}/ivt/productos/buscar`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}buscarProductoEntrada(e,t){const r={headers:new n.c({"x-token":e})};return this.http.put(`${o.a}/ivt/productos/buscar/entrada`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}crearEntrada(e,t){const r={headers:new n.c({"x-token":e})};return this.http.post(`${o.a}/ivt/entradas/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}leerEntrada(e,t){const r={headers:new n.c({"x-token":e})};return this.http.put(`${o.a}/ivt/entradas/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}filtrarEntradas(e,t){const r={headers:new n.c({"x-token":e})};return this.http.put(`${o.a}/ivt/entradas/buscar/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}filtrarEntradasPatron(e,t){const r={headers:new n.c({"x-token":e})};return this.http.put(`${o.a}/ivt/entradas/buscar/patron/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}crearSalida(e,t){const r={headers:new n.c({"x-token":e})};return this.http.post(`${o.a}/ivt/salidas/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}leerSalida(e,t){const r={headers:new n.c({"x-token":e})};return this.http.put(`${o.a}/ivt/salidas/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}filtrarSalidas(e,t){const r={headers:new n.c({"x-token":e})};return this.http.put(`${o.a}/ivt/salidas/buscar/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}filtrarSalidasPatron(e,t){const r={headers:new n.c({"x-token":e})};return this.http.put(`${o.a}/ivt/salidas/buscar/patron/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}CargarInventarios(e,t){const r={headers:new n.c({"x-token":e})};return this.http.put(`${o.a}/ivt/tipo/almacen/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}CierresInventario(e,t){const r={headers:new n.c({"x-token":e})};return this.http.put(`${o.a}/ivt/cierre/buscar/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}MovCantidades(e,t){const r={headers:new n.c({"x-token":e})};return this.http.put(`${o.a}/ivt/mov/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}MovCantidades2(e,t){const r={headers:new n.c({"x-token":e})};return this.http.put(`${o.a}/ivt/mov/salidas/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}leerMovmientos(e,t){const r={headers:new n.c({"x-token":e})};return this.http.put(`${o.a}/ivt/movimientos/filtro/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}leerAgotados(e,t){const r={headers:new n.c({"x-token":e})};return this.http.put(`${o.a}/ivt/productos/agotados/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}leerProximos(e,t){const r={headers:new n.c({"x-token":e})};return this.http.put(`${o.a}/ivt/productos/proximos/`,t,r).pipe(Object(c.a)(e=>this.hanflerError(e)))}}return e.\u0275fac=function(t){return new(t||e)(l.Sb(n.a))},e.\u0275prov=l.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},sTCq:function(e,t,r){"use strict";r.r(t),r.d(t,"EmpleadosPageModule",function(){return x});var o=r("ofXK"),n=r("3Pt+"),a=r("TEn/"),i=r("tyNb"),s=r("mrSG"),c=r("fXoL"),p=r("5yQV"),l=r("fsfq"),h=r("fmoy");function d(e,t){if(1&e){const e=c.Pb();c.Ob(0,"ion-item",11),c.Wb("click",function(){c.pc(e);const r=t.$implicit;return c.Yb(2).agregar(r)}),c.Ob(1,"ion-avatar",2),c.Mb(2,"img",12),c.Nb(),c.Ob(3,"ion-label"),c.Ob(4,"strong"),c.wc(5),c.Nb(),c.Mb(6,"br"),c.wc(7),c.Nb(),c.Nb()}if(2&e){const e=t.$implicit;c.Ab(2),c.fc("src",e.imagen,c.qc),c.Ab(3),c.xc(e.nombrecompleto),c.Ab(2),c.yc(" @",e.nombreusuario," ")}}function u(e,t){if(1&e&&(c.Ob(0,"ion-list"),c.vc(1,d,8,3,"ion-item",10),c.Nb()),2&e){const e=c.Yb();c.Ab(1),c.fc("ngForOf",e.buscados)}}function b(e,t){1&e&&(c.Ob(0,"div",13),c.Mb(1,"img",14),c.Ob(2,"h3",15),c.wc(3,"No tiene empleados registrados, buscalos para agregarlos a la lista"),c.Nb(),c.Nb())}function m(e,t){if(1&e&&(c.Ob(0,"div",29),c.wc(1),c.Nb()),2&e){const e=c.Yb().$implicit;c.Ab(1),c.yc("Cargo: ",e.cargo,"")}}function f(e,t){if(1&e&&(c.Ob(0,"div",29),c.wc(1),c.Nb()),2&e){const e=c.Yb().$implicit;c.Ab(1),c.yc("Al\xedas: ",e.alias,"")}}function g(e,t){if(1&e){const e=c.Pb();c.Ob(0,"ion-item-sliding"),c.Ob(1,"ion-item"),c.Ob(2,"ion-avatar",2),c.Mb(3,"img",12),c.Nb(),c.Ob(4,"ion-label"),c.Ob(5,"span"),c.wc(6),c.Nb(),c.Mb(7,"br"),c.Ob(8,"strong",22),c.wc(9),c.Nb(),c.vc(10,m,2,1,"div",23),c.vc(11,f,2,1,"div",23),c.Nb(),c.Nb(),c.Ob(12,"ion-item-options",24),c.Ob(13,"ion-item-option",25),c.Wb("click",function(){c.pc(e);const r=t.$implicit;return c.Yb(2).editar(r)}),c.Mb(14,"ion-icon",26),c.Nb(),c.Ob(15,"ion-item-option",27),c.Wb("click",function(){c.pc(e);const r=t.$implicit;return c.Yb(2).eliminar(r)}),c.Mb(16,"ion-icon",28),c.Nb(),c.Nb(),c.Nb()}if(2&e){const e=t.$implicit;c.Ab(3),c.fc("src",e.usuario.imagen,c.qc),c.Ab(3),c.xc(e.usuario.nombrecompleto),c.Ab(3),c.yc("@",e.usuario.nombreusuario,""),c.Ab(1),c.fc("ngIf",e.cargo),c.Ab(1),c.fc("ngIf",e.alias)}}function v(e,t){if(1&e&&(c.Ob(0,"ion-list"),c.Ob(1,"ion-item-divider",16),c.Ob(2,"div",17),c.Ob(3,"div",18),c.Ob(4,"h3"),c.wc(5,"Registrados"),c.Nb(),c.Nb(),c.Ob(6,"div",19),c.Mb(7,"img",20),c.Ob(8,"h3"),c.wc(9),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.vc(10,g,17,5,"ion-item-sliding",21),c.Nb()),2&e){const e=c.Yb();c.Ab(9),c.xc(e.empleados.length),c.Ab(1),c.fc("ngForOf",e.empleados)}}const O=[{path:"",component:(()=>{class e{constructor(e,t,r,o){this.IVTapi=e,this.almacenamiento=t,this.alertCtrl=r,this.toast=o,this.empleados=[],this.buscados=[],this.texto=""}ngOnInit(){}ionViewWillEnter(){this.traerEmpleados()}refrescando(e){this.traerEmpleados().then(()=>{e.target.complete()}).catch(()=>{e.target.complete()})}traerEmpleados(){return Object(s.a)(this,void 0,void 0,function*(){const e=yield this.almacenamiento.obtenerToken();e&&this.IVTapi.leerEmpleados(e.token).subscribe(e=>{e.exe&&(e.response.forEach(e=>{e.usuario.imagen=e.usuario.imagen[0].path.includes("notfound")?"/assets/notfound.png":`https://motocaliapp.com/${e.usuario.imagen[0].path}`}),this.empleados=e.response)})})}buscarEmpleados(e){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&""!==e.detail.value?this.IVTapi.BuscarUsuarios(t.token,e.detail.value).subscribe(e=>{e.exe&&(e.response.forEach(e=>{e.imagen=e.imagen.length>0?`https://motocaliapp.com/19927613410/${e.imagen[0].path}`:"/assets/notfound.png"}),this.buscados=e.response)}):this.buscados=[]})}agregar(e){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.alertCtrl.create({header:"Marcar usuario como empleado",message:`\xbfEstas seguro de marcar a ${e.nombrecompleto} como empleado?`,buttons:[{role:"cancel",text:"Cancelar"},{text:"Aceptar",handler:()=>Object(s.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&(console.log(e),this.IVTapi.crearEmpleado(t.token,{nombre:e.nombrecompleto,_id:e._id}).subscribe(e=>{console.log(e,"empleado"),e.exe?e.repetido?this.toast.toastError("El usuario ya es un empleado tuyo"):(this.toast.toastExitoso("Usuario agregado a la lista de empleados"),this.traerEmpleados()):this.toast.toastError("No se pudo agregar el usuario, int\xe9ntelo m\xe1s tarde")},e=>{this.toast.toastError("No se pudo agregar el usuario, int\xe9ntelo m\xe1s tarde")}))})}]});return yield t.present()})}eliminar(e){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.alertCtrl.create({header:"Eliminar Empleado",message:`\xbfEstas seguro de eliminar a ${e.usuario.nombrecompleto} como empleado?`,buttons:[{role:"cancel",text:"Cancelar"},{text:"Aceptar",handler:()=>Object(s.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&this.IVTapi.eliminarEmpleados(t.token,e._id).subscribe(e=>{e.exe?this.traerEmpleados():this.toast.toastError("No se pudo eliminar el empleado")},e=>{this.toast.toastError("No se pudo eliminar el empleado, intentelo m\xe1s tarde")})})}]});return yield t.present()})}editar(e){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.alertCtrl.create({header:"Editar Empleado",message:"Edita la informaci\xf3n del empleado",inputs:[{type:"text",name:"cargo",placeholder:`Escriba el cargo ${e.usuario.nombrecompleto}`},{type:"text",name:"alias",placeholder:"Escribe un al\xedas"}],buttons:[{role:"cancel",text:"Cancelar"},{text:"Aceptar",handler:t=>Object(s.a)(this,void 0,void 0,function*(){const r=yield this.almacenamiento.obtenerToken();r&&this.IVTapi.editarEmpleado(r.token,{_id:e._id,cargo:t.cargo,alias:t.alias}).subscribe(e=>{e.exe?this.traerEmpleados():this.toast.toastError("No se pudo editar el empleado")},e=>{this.toast.toastError("No se pudo editar el empleado, intentelo m\xe1s tarde")})})}]});return yield t.present()})}}return e.\u0275fac=function(t){return new(t||e)(c.Lb(p.a),c.Lb(l.a),c.Lb(a.b),c.Lb(h.a))},e.\u0275cmp=c.Fb({type:e,selectors:[["app-empleados"]],decls:14,vars:3,consts:[[1,"ion-no-border"],["color","oscuro"],["slot","start"],["icon","chevron-back-outline","defaultHref","/central/menu"],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],["mode","ios","placeholder","Buscar Usuario",3,"ionChange"],[4,"ngIf"],[1,"divider","light"],["class","cen",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["width","100%","height","100%","alt","",3,"src"],[1,"cen"],["src","/assets/Empleados.png","width","100px","alt",""],[1,"tituloGrande"],["lines","none","color","muro"],[1,"padreflex"],[1,"titulo"],[1,"numero"],["src","/assets/Empleadoslista.png","width","25px","height","25px","alt",""],[4,"ngFor","ngForOf"],[1,"verdei"],["class","rojoi",4,"ngIf"],["side","end"],["color","warning",3,"click"],["name","pencil-outline","slot","icon-only"],["color","danger",3,"click"],["name","trash-outline","slot","icon-only"],[1,"rojoi"]],template:function(e,t){1&e&&(c.Ob(0,"ion-header",0),c.Ob(1,"ion-toolbar",1),c.Ob(2,"ion-buttons",2),c.Mb(3,"ion-back-button",3),c.Nb(),c.Ob(4,"ion-title"),c.wc(5,"Empleados"),c.Nb(),c.Nb(),c.Nb(),c.Ob(6,"ion-content"),c.Ob(7,"ion-refresher",4),c.Wb("ionRefresh",function(e){return t.refrescando(e)}),c.Mb(8,"ion-refresher-content",5),c.Nb(),c.Ob(9,"ion-searchbar",6),c.Wb("ionChange",function(e){return t.buscarEmpleados(e)}),c.Nb(),c.vc(10,u,2,1,"ion-list",7),c.Mb(11,"div",8),c.vc(12,b,4,0,"div",9),c.vc(13,v,11,2,"ion-list",7),c.Nb()),2&e&&(c.Ab(10),c.fc("ngIf",t.buscados.length>0),c.Ab(2),c.fc("ngIf",0===t.empleados.length),c.Ab(1),c.fc("ngIf",t.empleados.length>0))},directives:[a.z,a.lb,a.k,a.g,a.h,a.jb,a.t,a.Q,a.R,a.U,a.yb,o.j,a.L,o.i,a.F,a.f,a.K,a.G,a.J,a.I,a.H,a.A],styles:[".cen[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.tituloGrande[_ngcontent-%COMP%]{width:300px;text-align:center}.verdei[_ngcontent-%COMP%]{color:#1e8c4a}ion-item-divider[_ngcontent-%COMP%]{border:0!important;margin-bottom:15px}.padreflex[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.numero[_ngcontent-%COMP%], .padreflex[_ngcontent-%COMP%]{display:flex;align-items:center}.numero[_ngcontent-%COMP%]{padding-right:10px}.rojoi[_ngcontent-%COMP%]{color:#c1302c}"]}),e})()}];let E=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.Jb({type:e}),e.\u0275inj=c.Ib({imports:[[i.j.forChild(O)],i.j]}),e})(),x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.Jb({type:e}),e.\u0275inj=c.Ib({imports:[[o.b,n.e,a.mb,E]]}),e})()}}]);