(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{E7SW:function(i,t,n){"use strict";n.r(t),n.d(t,"NotificacionesPageModule",function(){return L});var o=n("ofXK"),a=n("3Pt+"),e=n("TEn/"),c=n("tyNb"),r=n("mrSG"),s=n("fXoL"),u=n("fsfq"),d=n("oQG1"),l=n("fmoy"),p=n("SpuA");const b=["inifinito"];function f(i,t){1&i&&(s.Mb(0,"h3",9),s.rc(1,"La bandeja de notificaciones est\xe1 vac\xeda"),s.Lb())}function g(i,t){if(1&i&&s.Kb(0,"ion-img",17),2&i){const i=s.Wb().$implicit;s.fc("src","https://motocaliapp.com/",i.imagen,"")}}function h(i,t){if(1&i&&s.Kb(0,"ion-img",17),2&i){const i=s.Wb().$implicit;s.ec("src",i.rutaApp)}}function m(i,t){if(1&i){const i=s.Nb();s.Mb(0,"ion-item",12),s.Ub("click",function(){s.lc(i);const n=t.$implicit;return s.Wb(2).navegar(n)}),s.Mb(1,"ion-avatar",13),s.qc(2,g,1,1,"ion-img",14),s.qc(3,h,1,1,"ion-img",14),s.Lb(),s.Mb(4,"ion-label",15),s.Mb(5,"strong"),s.rc(6),s.Lb(),s.Kb(7,"br"),s.Mb(8,"div"),s.rc(9),s.Lb(),s.Mb(10,"div",16),s.rc(11),s.Xb(12,"cambioUTC"),s.Lb(),s.Lb(),s.Lb()}if(2&i){const i=t.$implicit;s.dc("color",i.abierta?"blanco":"light"),s.zb(2),s.dc("ngIf",i.cd),s.zb(1),s.dc("ngIf",!i.cd),s.zb(3),s.sc(i.titulo),s.zb(3),s.sc(i.mensaje),s.zb(2),s.sc(s.Yb(12,6,i.fechaCreado))}}function v(i,t){if(1&i&&(s.Mb(0,"ion-list",10),s.qc(1,m,13,8,"ion-item",11),s.Lb()),2&i){const i=s.Wb();s.zb(1),s.dc("ngForOf",i.notificaciones)}}function M(i,t){if(1&i){const i=s.Nb();s.Mb(0,"ion-infinite-scroll",18,19),s.Ub("ionInfinite",function(t){return s.lc(i),s.Wb().loadData(t)}),s.Kb(2,"ion-infinite-scroll-content",20),s.Lb()}}const C=[{path:"",component:(()=>{class i{constructor(i,t,n,o){this.almacenamiento=i,this.usuarioApi=t,this.toastCtrl=n,this.router=o,this.notificaciones=[""],this.desde=0,this.carga=!1}ngOnInit(){}ionViewWillEnter(){this.inicio()}inicio(){return Object(r.a)(this,void 0,void 0,function*(){const i=yield this.almacenamiento.obtenerToken();i&&this.usuarioApi.traerMisNotificaciones(i.token,this.desde).subscribe(i=>{i.exe?(i.response.forEach(i=>{i.usuarioCreador?(i.cd=!0,i.usuarioCreador.imagen.length>0&&(i.imagen=i.usuarioCreador.imagen[0].path)):i.cd=!1}),this.notificaciones=i.response,this.carga=!0):this.toastCtrl.alertApplication("No se pudo traer las notificaciones, intentelo m\xe1s tarde",!1)},i=>{this.toastCtrl.alertApplication("No se pudo traer las notificaciones, intentelo m\xe1s tarde",!1)})})}refrescando(i){this.desde=0,this.inicio().then(()=>{i.detail.complete()})}loadData(i){return Object(r.a)(this,void 0,void 0,function*(){this.desde=this.desde+10;const t=yield this.almacenamiento.obtenerToken();t&&this.usuarioApi.traerMisNotificaciones(t.token,this.desde).subscribe(t=>{t.exe?t.response.length>0?(t.response.forEach(i=>{i.usuarioCreador?(i.cd=!0,i.usuarioCreador.imagen.length>0&&(i.imagen=i.usuarioCreador.imagen[0].path)):i.cd=!1,this.notificaciones.push(i)}),i.target.complete()):(i.target.disabled=!0,this.desde=0):this.toastCtrl.alertApplication("No se pudo traer las notificaciones, intentelo m\xe1s tarde",!1)},i=>{this.toastCtrl.alertApplication("No se pudo traer las notificaciones, intentelo m\xe1s tarde",!1)})})}navegar(i){return Object(r.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&this.usuarioApi.ActualizarNotificaciones(t.token,i._id).subscribe(t=>{t.exe&&("Seguimiento"===i.accion.tipo?this.router.navigate(["/central/menu/solicitudes"]):"SeguimientoAceptado"===i.accion.tipo?this.router.navigate(["/central/buscar/perfil-visita/",i.usuarioCreador.nombreusuario]):"Productos"===i.accion.tipo?this.router.navigate(["/central/menu/ivt-miinventario/",i.accion.data.id,"productos",i.accion.data.id]):"SalidaIVT"===i.accion.tipo?this.router.navigate(["/central/menu/ivt-miinventario/",i.accion.data.id,"salidas",i.accion.data.id,i.accion.data.creador]):"EntradaIVT"===i.accion.tipo?this.router.navigate(["/central/menu/ivt-miinventario/",i.accion.data.id,"entradas",i.accion.data.id]):"Publicacion"===i.accion.tipo?this.router.navigate(["/igtmpublic/",i.accion.data.id,"publicacion"]):"Historia"===i.accion.tipo?this.router.navigate(["/igtmpublic/",i.accion.data.id,"historia"]):"Ticket"===i.accion.tipo?this.router.navigate(["/central/menu/tickets/",i.accion.data.id]):"TicketRechazado"===i.accion.tipo||"TicketProcesado"===i.accion.tipo?this.router.navigate(["/central/menu/tickets"]):"Pedido"===i.accion.tipo?this.router.navigate(["/central/menu/pedidos/info",i.accion.data.id]):"Chat"===i.accion.tipo?this.router.navigate(["/central/citas",i.accion.data.idChat]):"patinada"===i.accion.tipo?this.router.navigate(["/central/menu/patinadas/bandeja"]):"mispatinadas"===i.accion.tipo?this.router.navigate(["/central/menu/patinadas/lista"]):"grua"===i.accion.tipo?this.router.navigate(["/central/menu/monitoreo/listado"]):"gruasacados"===i.accion.tipo||"eliminargrua"===i.accion.tipo||"finalizargrua"===t.tipo?this.router.navigate(["/central/menu/monitoreo"]):"misgrua"===i.accion.tipo||"gruaempleadoc"===i.accion.tipo?this.router.navigate(["/central/menu/monitoreo/grua"]):"gruaempleado"===i.accion.tipo?this.router.navigate(["/central/menu/monitoreo/listado-compartidos"]):"gruaaprobar"===i.accion.tipo?this.router.navigate(["/central/menu/monitoreo/listado-agregados"]):"seguimientogrupo"===i.accion.tipo?this.router.navigate(["/interfaz-grupo",i.accion.data.grupo,"inicio",i.accion.data.grupo]):"chatgrupo"===i.accion.tipo&&this.router.navigate(["/interfaz-grupo",i.accion.data.id,"inicio",i.accion.data.id]))})})}}return i.\u0275fac=function(t){return new(t||i)(s.Jb(u.a),s.Jb(d.a),s.Jb(l.a),s.Jb(c.g))},i.\u0275cmp=s.Db({type:i,selectors:[["app-notificaciones"]],viewQuery:function(i,t){if(1&i&&s.vc(b,1),2&i){let i;s.kc(i=s.Vb())&&(t.infinite=i.first)}},decls:12,vars:3,consts:[[1,"ion-no-border"],["color","oscuro"],["slot","start"],["icon","chevron-back-outline","defaultHref","/central/menu/"],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],["class","tituloGrande",4,"ngIf"],["class","blanco ",4,"ngIf"],["threshold","100px",3,"ionInfinite",4,"ngIf"],[1,"tituloGrande"],[1,"blanco"],["lines","none",3,"color","click",4,"ngFor","ngForOf"],["lines","none",3,"color","click"],["slot","start",1,"avatar"],[3,"src",4,"ngIf"],[1,"ion-text-wrap"],[1,"ion-text-right"],[3,"src"],["threshold","100px",3,"ionInfinite"],["inifinito",""],["loadingSpinner","bubbles","loadingText","Cargando entradas..."]],template:function(i,t){1&i&&(s.Mb(0,"ion-header",0),s.Mb(1,"ion-toolbar",1),s.Mb(2,"ion-buttons",2),s.Kb(3,"ion-back-button",3),s.Lb(),s.Mb(4,"ion-title"),s.rc(5,"Notificaciones"),s.Lb(),s.Lb(),s.Lb(),s.Mb(6,"ion-content"),s.Mb(7,"ion-refresher",4),s.Ub("ionRefresh",function(i){return t.refrescando(i)}),s.Kb(8,"ion-refresher-content",5),s.Lb(),s.qc(9,f,2,0,"h3",6),s.qc(10,v,2,1,"ion-list",7),s.qc(11,M,3,0,"ion-infinite-scroll",8),s.Lb()),2&i&&(s.zb(9),s.dc("ngIf",0===t.notificaciones.length),s.zb(1),s.dc("ngIf",t.notificaciones.length>0),s.zb(1),s.dc("ngIf",t.carga))},directives:[e.z,e.kb,e.k,e.g,e.h,e.ib,e.t,e.Q,e.R,o.j,e.L,o.i,e.F,e.f,e.K,e.B,e.C,e.D],pipes:[p.a],styles:[".avatar[_ngcontent-%COMP%]{width:80px;height:80px}.moto-padre[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.tituloGrande[_ngcontent-%COMP%]{margin:50px auto;opacity:.5;text-align:center;width:300px}ion-item[_ngcontent-%COMP%]{border-bottom:2px solid rgba(0,0,0,.1)}"]}),i})()}];let k=(()=>{class i{}return i.\u0275mod=s.Hb({type:i}),i.\u0275inj=s.Gb({factory:function(t){return new(t||i)},imports:[[c.i.forChild(C)],c.i]}),i})();var w=n("iTUp");let L=(()=>{class i{}return i.\u0275mod=s.Hb({type:i}),i.\u0275inj=s.Gb({factory:function(t){return new(t||i)},imports:[[o.b,a.e,e.lb,k,w.a]]}),i})()},SpuA:function(i,t,n){"use strict";n.d(t,"a",function(){return e});var o=n("wd/R"),a=n("fXoL");let e=(()=>{class i{transform(i){console.log(i,"fechin");let t=o.utc(i).toDate();return o(t).format("dddd, DD MMMM YYYY h:mm:a")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=a.Ib({name:"cambioUTC",type:i,pure:!0}),i})()}}]);