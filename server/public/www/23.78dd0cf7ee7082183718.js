(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{erKi:function(i,t,e){"use strict";e.r(t),e.d(t,"SolicitudesPageModule",function(){return M});var n=e("ofXK"),o=e("3Pt+"),a=e("TEn/"),r=e("tyNb"),s=e("R0Ic"),c=e("fXoL"),l=e("Gq8O"),b=e("fsfq"),u=e("fmoy"),d=e("cb8P");function p(i,t){if(1&i){const i=c.Nb();c.Mb(0,"ion-item",13),c.Mb(1,"ion-avatar",14),c.Kb(2,"ion-img",15),c.Lb(),c.Mb(3,"ion-label",16),c.Mb(4,"strong",17),c.rc(5),c.Lb(),c.Kb(6,"br"),c.Mb(7,"div"),c.rc(8),c.Lb(),c.Mb(9,"div",18),c.Mb(10,"ion-button",19),c.Ub("click",function(){c.lc(i);const e=t.$implicit,n=t.index;return c.Wb(2).aceptar(e,n)}),c.rc(11,"Aceptar"),c.Lb(),c.Mb(12,"ion-button",20),c.Ub("click",function(){c.lc(i);const e=t.$implicit,n=t.index;return c.Wb(2).eliminar(e,n)}),c.rc(13,"Eliminar"),c.Lb(),c.Lb(),c.Lb(),c.Lb()}if(2&i){const i=t.$implicit;c.zb(2),c.fc("src","https://motocaliapp.com/",i.imagen,""),c.zb(3),c.sc(i.usuarioEmisor.nombrecompleto),c.zb(3),c.tc("@",i.usuarioEmisor.nombreusuario,"")}}function m(i,t){if(1&i&&(c.Mb(0,"ion-list",11),c.qc(1,p,14,3,"ion-item",12),c.Lb()),2&i){const i=c.Wb();c.dc("@solicitudes",i.seguimientos.length),c.zb(1),c.dc("ngForOf",i.seguimientos)}}const h=function(i){return{"hauto centrar":i}},g=[{path:"",component:(()=>{class i{constructor(i,t,e,n){this.apiSeguimiento=i,this.almacenamiento=t,this.toastUtilidad=e,this.cargarElementos=n,this.seguimientos=[],this.red="wifi",this.cargarElementos.$cargarRed.subscribe(i=>{this.red=i,"none"!==this.red&&this.arrancar()})}ngOnInit(){}ionViewDidEnter(){"none"!==this.red&&this.arrancar()}refrescando(i){this.arrancar(),i.detail.complete()}arrancar(){this.almacenamiento.obtenerToken().then(i=>{this.cancelSuscribe=this.apiSeguimiento.solicitudesRecibidas(i.token).subscribe(i=>{this.seguimientos=[];const t=i.response.SeguimientoData;t.length>0&&t.forEach(i=>{i.imagen=i.usuarioEmisor.imagen.length>0?i.usuarioEmisor.imagen[0].path:"",this.seguimientos.push(i)})},i=>{this.toastUtilidad.alertApplication("No se pudo aceptar la solicitud",!1)})})}aceptar(i,t){this.almacenamiento.obtenerToken().then(e=>{this.apiSeguimiento.aceptarSolicitud(e.token,i.usuarioEmisor._id).subscribe(i=>{this.toastUtilidad.alertApplication("Solicitud aceptada",!0),this.seguimientos.splice(t,1)},i=>{this.toastUtilidad.alertApplication("No se pudo aceptar la solicitud",!1)})})}eliminar(i,t){this.almacenamiento.obtenerToken().then(e=>{this.apiSeguimiento.cancelarSolicitud(e.token,i.usuarioEmisor._id,"0").subscribe(()=>{this.seguimientos.splice(t,1)},i=>{this.toastUtilidad.alertApplication("No se pudo aceptar la solicitud",!1)})})}ionViewDidLeave(){}}return i.\u0275fac=function(t){return new(t||i)(c.Jb(l.a),c.Jb(b.a),c.Jb(u.a),c.Jb(d.a))},i.\u0275cmp=c.Db({type:i,selectors:[["app-solicitudes"]],decls:16,vars:5,consts:[[1,"ion-no-border"],["color","oscuro"],["slot","start","defaultHref","/central/menu/","icon","chevron-back-outline"],[1,"medium"],["color","light"],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],["color","warning"],[1,"divider","light"],[1,"blanco",3,"ngClass"],["class","blanco ",4,"ngIf"],[1,"blanco"],["lines","none","color","blanco",4,"ngFor","ngForOf"],["lines","none","color","blanco"],["slot","start",1,"avatar"],[3,"src"],[1,"ion-text-wrap"],[1,"small"],[1,"moto-padre"],["color","barra","shape","round","mode","ios",3,"click"],["color","oscuro","shape","round","mode","ios",3,"click"]],template:function(i,t){1&i&&(c.Mb(0,"ion-header",0),c.Mb(1,"ion-toolbar",1),c.Kb(2,"ion-back-button",2),c.Mb(3,"ion-title",3),c.rc(4,"Solicitudes de Seguimiento "),c.Lb(),c.Lb(),c.Lb(),c.Mb(5,"ion-content",4),c.Mb(6,"ion-refresher",5),c.Ub("ionRefresh",function(i){return t.refrescando(i)}),c.Kb(7,"ion-refresher-content",6),c.Lb(),c.Mb(8,"ion-item-divider",7),c.Mb(9,"ion-label"),c.rc(10,"Solicitudes "),c.Mb(11,"strong"),c.rc(12),c.Lb(),c.Lb(),c.Lb(),c.Kb(13,"div",8),c.Mb(14,"div",9),c.qc(15,m,2,2,"ion-list",10),c.Lb(),c.Lb()),2&i&&(c.zb(12),c.sc(t.seguimientos.length),c.zb(2),c.dc("ngClass",c.hc(3,h,0===t.seguimientos.length)),c.zb(1),c.dc("ngIf",t.seguimientos.length>0))},directives:[a.z,a.kb,a.g,a.h,a.ib,a.t,a.Q,a.R,a.G,a.K,n.h,n.j,a.L,n.i,a.F,a.f,a.B,a.j],styles:[".avatar[_ngcontent-%COMP%]{width:80px;height:80px}.moto-padre[_ngcontent-%COMP%]{display:flex}.moto-padre[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:calc(50% - 2px);max-width:200px}ion-button[_ngcontent-%COMP%]{width:200px!important;max-width:300px!important;height:50px;margin:5px;padding:5px}"],data:{animation:[Object(s.l)("solicitudes",[Object(s.k)("* => *",[Object(s.f)(":enter",[Object(s.j)({opacity:0,transform:"translateY(400px)"}),Object(s.h)(300,[Object(s.e)("500ms",Object(s.j)({opacity:1,transform:"none"}))])],{optional:!0}),Object(s.f)(":leave",[Object(s.j)({opacity:1,transform:"none"}),Object(s.h)(300,[Object(s.e)("500ms",Object(s.j)({opacity:0,transform:"translateY(-100%)"}))])],{optional:!0})])])]}}),i})()}];let f=(()=>{class i{}return i.\u0275mod=c.Hb({type:i}),i.\u0275inj=c.Gb({factory:function(t){return new(t||i)},imports:[[r.i.forChild(g)],r.i]}),i})(),M=(()=>{class i{}return i.\u0275mod=c.Hb({type:i}),i.\u0275inj=c.Gb({factory:function(t){return new(t||i)},imports:[[n.b,o.e,a.lb,f]]}),i})()}}]);