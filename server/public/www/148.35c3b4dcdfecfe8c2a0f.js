(window.webpackJsonp=window.webpackJsonp||[]).push([[148],{oaNa:function(t,o,e){"use strict";e.r(o),e.d(o,"IVTcategoriasPageModule",function(){return x});var i=e("ofXK"),n=e("3Pt+"),a=e("TEn/"),r=e("tyNb"),s=e("mrSG"),c=e("SQQW"),l=e("fXoL"),b=e("fsfq"),d=e("5yQV"),g=e("fmoy");function m(t,o){1&t&&(l.Ob(0,"div",15),l.Mb(1,"img",16),l.Ob(2,"h3",17),l.wc(3,"No tiene categor\xedas registradas"),l.Nb(),l.Nb())}function h(t,o){1&t&&(l.Ob(0,"ion-item"),l.Mb(1,"ion-skeleton-text",20),l.Ob(2,"ion-label"),l.Mb(3,"ion-skeleton-text",21),l.Mb(4,"ion-skeleton-text",22),l.Nb(),l.Nb())}const u=function(){return[1,1,1,1,1]};function p(t,o){1&t&&(l.Ob(0,"div",18),l.Ob(1,"ion-list"),l.vc(2,h,5,0,"ion-item",19),l.Nb(),l.Nb()),2&t&&(l.Ab(2),l.fc("ngForOf",l.kc(1,u)))}function f(t,o){if(1&t){const t=l.Pb();l.Ob(0,"ion-item-sliding"),l.Ob(1,"ion-item"),l.Ob(2,"ion-avatar",2),l.Mb(3,"img",23),l.Nb(),l.Ob(4,"ion-label"),l.wc(5),l.Mb(6,"br"),l.Nb(),l.Nb(),l.Ob(7,"ion-item-options",24),l.Ob(8,"ion-item-option",25),l.Wb("click",function(){l.pc(t);const e=o.$implicit,i=o.index;return l.Yb(2).editar(e,i)}),l.Mb(9,"ion-icon",26),l.Nb(),l.Ob(10,"ion-item-option",27),l.Wb("click",function(){l.pc(t);const e=o.$implicit,i=o.index;return l.Yb(2).eliminar(e,i)}),l.Mb(11,"ion-icon",28),l.Nb(),l.Nb(),l.Nb()}if(2&t){const t=o.$implicit;l.Ab(5),l.yc(" ",t.nombre," ")}}function v(t,o){if(1&t&&(l.Ob(0,"ion-list"),l.vc(1,f,12,1,"ion-item-sliding",19),l.Nb()),2&t){const t=l.Yb();l.Ab(1),l.fc("ngForOf",t.categorias)}}const O=[{path:"",component:(()=>{class t{constructor(t,o,e,i,n,a){this.modalCtrl=t,this.almacenamiento=o,this.ivtApi=e,this.toast=i,this.alertCtrl=n,this.activeRoute=a,this.categorias=[],this.load=!1}ngOnInit(){}ionViewWillEnter(){this.cargarCategorias()}refrescando(t){this.cargarCategorias().then(()=>{t.target.complete()}).catch(()=>t.target.complete())}cargarCategorias(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&this.ivtApi.leerCategoria(t.token,this.activeRoute.snapshot.paramMap.get("id")).subscribe(t=>{t.exe?this.categorias=t.response:this.toast.toastError("No se pudo cargar los datos, intentelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo cargar los datos, intentelo m\xe1s tarde")})})}modal(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:c.a,componentProps:{tipo:"categorias",inventario:this.activeRoute.snapshot.paramMap.get("id")}});yield t.present();const o=yield t.onWillDismiss();o.data&&o.data.exe&&this.cargarCategorias()})}editar(t,o){return Object(s.a)(this,void 0,void 0,function*(){const e=yield this.alertCtrl.create({header:"Editar Categor\xeda",inputs:[{type:"text",name:"nombre",placeholder:"Escriba el nombre de la categor\xeda",value:t.nombre}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Aceptar",handler:e=>Object(s.a)(this,void 0,void 0,function*(){const i=yield this.almacenamiento.obtenerToken();i&&this.ivtApi.editarCategoria(i.token,{nombre:e.nombre,_id:t._id}).subscribe(t=>{t.exe?(this.toast.toastExitoso("Categor\xeda editado!"),this.categorias[o].nombre=t.response.nombre):this.toast.toastError("No se pudo editar la categor\xeda, intentelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo editar la categor\xeda, intentelo m\xe1s tarde")})})}]});yield e.present()})}eliminar(t,o){return Object(s.a)(this,void 0,void 0,function*(){const e=yield this.almacenamiento.obtenerToken();e&&this.ivtApi.eliminarCategoria(e.token,t._id).subscribe(t=>{t.exe?(this.toast.toastExitoso("Categor\xeda eliminada!"),this.categorias.splice(o,1)):this.toast.toastError("No se pudo eliminar la categor\xeda, intentelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo eliminar la categor\xeda, intentelo m\xe1s tarde")})})}}return t.\u0275fac=function(o){return new(o||t)(l.Lb(a.qb),l.Lb(b.a),l.Lb(d.a),l.Lb(g.a),l.Lb(a.b),l.Lb(r.a))},t.\u0275cmp=l.Fb({type:t,selectors:[["app-ivtcategorias"]],decls:18,vars:3,consts:[[1,"ion-no-border"],["color","oscuro"],["slot","start"],["icon","chevron-back-outline","defaultHref","/central/menu/ivt-inicio"],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],["mode","ios","placeholder","Buscar Categor\xeda"],[1,"divider","light"],[1,"divider"],["class","cen",4,"ngIf"],["class","carga",4,"ngIf"],[4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],["color","oscuro",3,"click"],["name","add-outline"],[1,"cen"],["src","/assets/Categorias.png","width","100px","alt",""],[1,"tituloGrande"],[1,"carga"],[4,"ngFor","ngForOf"],["slot","start","animated","",2,"width","50px","height","50px"],["animated","",2,"width","50%","height","20px"],["animated","",2,"width","90%","height","20px"],["src","/assets/Categorias.png"],["side","end"],["color","warning",3,"click"],["name","pencil-outline","slot","icon-only"],["color","danger",3,"click"],["name","trash-outline","slot","icon-only"]],template:function(t,o){1&t&&(l.Ob(0,"ion-header",0),l.Ob(1,"ion-toolbar",1),l.Ob(2,"ion-buttons",2),l.Mb(3,"ion-back-button",3),l.Nb(),l.Ob(4,"ion-title"),l.wc(5,"Categor\xedas"),l.Nb(),l.Nb(),l.Nb(),l.Ob(6,"ion-content"),l.Ob(7,"ion-refresher",4),l.Wb("ionRefresh",function(t){return o.refrescando(t)}),l.Mb(8,"ion-refresher-content",5),l.Nb(),l.Mb(9,"ion-searchbar",6),l.Mb(10,"div",7),l.Mb(11,"div",8),l.vc(12,m,4,0,"div",9),l.vc(13,p,3,2,"div",10),l.vc(14,v,2,1,"ion-list",11),l.Ob(15,"ion-fab",12),l.Ob(16,"ion-fab-button",13),l.Wb("click",function(){return o.modal()}),l.Mb(17,"ion-icon",14),l.Nb(),l.Nb(),l.Nb()),2&t&&(l.Ab(12),l.fc("ngIf",0===o.categorias.length),l.Ab(1),l.fc("ngIf",o.load),l.Ab(1),l.fc("ngIf",o.categorias.length>0))},directives:[a.z,a.lb,a.k,a.g,a.h,a.jb,a.t,a.Q,a.R,a.U,a.yb,i.j,a.v,a.w,a.A,a.L,i.i,a.F,a.Z,a.K,a.J,a.f,a.I,a.H],styles:[".cen[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.tituloGrande[_ngcontent-%COMP%]{width:300px;text-align:center}.verdei[_ngcontent-%COMP%]{color:#1e8c4a}ion-item-divider[_ngcontent-%COMP%]{border:0!important;margin-bottom:15px}.rojoi[_ngcontent-%COMP%]{color:#c1302c}ion-item-sliding[_ngcontent-%COMP%]:nth-child(odd)   ion-item[_ngcontent-%COMP%]{--background:var(--ion-color-light)!important}"]}),t})()}];let N=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=l.Jb({type:t}),t.\u0275inj=l.Ib({imports:[[r.j.forChild(O)],r.j]}),t})(),x=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=l.Jb({type:t}),t.\u0275inj=l.Ib({imports:[[i.b,n.e,a.mb,N]]}),t})()}}]);