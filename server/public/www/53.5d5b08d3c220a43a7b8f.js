(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{aPkV:function(t,e,r){"use strict";r.r(e),r.d(e,"InicioGruposPageModule",function(){return x});var o=r("ofXK"),n=r("3Pt+"),i=r("TEn/"),a=r("tyNb"),s=r("mrSG"),c=r("fXoL"),p=r("fsfq"),h=r("oQG1"),u=r("fmoy"),l=r("vLoH");function b(t,e){1&t&&(c.Ob(0,"ion-item"),c.Ob(1,"ion-avatar",13),c.Mb(2,"ion-skeleton-text",14),c.Nb(),c.Ob(3,"ion-label"),c.Mb(4,"ion-skeleton-text",15),c.Mb(5,"ion-skeleton-text",16),c.Nb(),c.Nb())}const f=function(){return[1,1,1,1]};function d(t,e){1&t&&(c.Ob(0,"ion-list"),c.vc(1,b,6,0,"ion-item",12),c.Nb()),2&t&&(c.Ab(1),c.fc("ngForOf",c.kc(1,f)))}function g(t,e){1&t&&(c.Ob(0,"div",17),c.Mb(1,"img",18),c.Ob(2,"h3"),c.wc(3,"No tiene grupos por el momento"),c.Nb(),c.Nb())}function m(t,e){if(1&t&&(c.Ob(0,"ion-avatar",13),c.Mb(1,"img",24),c.Nb()),2&t){const t=c.Yb().$implicit;c.Ab(1),c.hc("src","https://motocaliapp.com/",t.usuario.imagen[0].path,"",c.qc)}}function v(t,e){1&t&&(c.Ob(0,"ion-avatar",13),c.Mb(1,"img",25),c.Nb())}function j(t,e){if(1&t){const t=c.Pb();c.Ob(0,"ion-item",19),c.Wb("click",function(){c.pc(t);const r=e.$implicit;return c.Yb().interfaz(r._id)}),c.vc(1,m,2,1,"ion-avatar",20),c.vc(2,v,2,0,"ion-avatar",20),c.Ob(3,"ion-label",21),c.Ob(4,"div",22),c.wc(5),c.Nb(),c.Ob(6,"div",23),c.Ob(7,"strong"),c.wc(8),c.Nb(),c.Nb(),c.Ob(9,"div"),c.Ob(10,"strong"),c.wc(11),c.Nb(),c.Nb(),c.Nb(),c.Nb()}if(2&t){const t=e.$implicit;c.Ab(1),c.fc("ngIf",t.usuario.imagen.length>0&&"notfound.png"!==t.usuario.imagen[0].path),c.Ab(1),c.fc("ngIf","notfound.png"===t.usuario.imagen[0].path),c.Ab(3),c.xc(t.nombre),c.Ab(3),c.yc("",t.kilometros," Km"),c.Ab(3),c.zc("",t.ciudad,", ",t.pais,"")}}const w=[{path:"",component:(()=>{class t{constructor(t,e,r,o,n){this.almacenamiento=t,this.apiUsuario=e,this.toast=r,this.apiGrupos=o,this.router=n,this.grupos=[],this.cargado=!1}ngOnInit(){}ionViewWillEnter(){this.listar()}refrescando(t){this.cargado=!1,this.listar().then(()=>{t.target.complete()}).catch(()=>{t.target.complete()})}interfaz(t){this.router.navigate(["/interfaz-grupo",t,"inicio",t])}listar(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&this.apiGrupos.listarGrupos(t.token,{}).subscribe(t=>{console.log(t),t.exe?this.grupos=t.response:this.toast.toastError("No se pudo consultar los grupos, int\xe9ntelo m\xe1s tarde"),this.cargado=!0},t=>{this.toast.toastError("No se pudo consultar los grupos, int\xe9ntelo m\xe1s tarde"),this.cargado=!0})})}crear(){this.router.navigate(["/interactivo/grupos/crear"])}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(p.a),c.Lb(h.a),c.Lb(u.a),c.Lb(l.a),c.Lb(a.g))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-inicio-grupos"]],decls:15,vars:3,consts:[[1,""],["color","oscuro"],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],["mode","ios","placeholder","Buscar en mis grupos"],[1,"divider"],[4,"ngIf"],["class","fcenter",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["color","oscuro",3,"click"],["name","add-outline"],[4,"ngFor","ngForOf"],["slot","start"],["animted","",2,"width","100%","height","100%"],["animted","",2,"width","100%","height","20px"],["animted","",2,"width","50%","height","20px"],[1,"fcenter"],["src","/assets/Grupos.png","width","100px","alt",""],[3,"click"],["slot","start",4,"ngIf"],[1,"ion-text-wrap"],[1,"nombre"],[1,"az"],[3,"src"],["src","/assets/Grupos.png"]],template:function(t,e){1&t&&(c.Ob(0,"ion-header",0),c.Ob(1,"ion-toolbar",1),c.Ob(2,"ion-title"),c.wc(3,"Mis Grupos"),c.Nb(),c.Nb(),c.Nb(),c.Ob(4,"ion-content"),c.Ob(5,"ion-refresher",2),c.Wb("ionRefresh",function(t){return e.refrescando(t)}),c.Mb(6,"ion-refresher-content",3),c.Nb(),c.Mb(7,"ion-searchbar",4),c.Mb(8,"div",5),c.vc(9,d,2,2,"ion-list",6),c.vc(10,g,4,0,"div",7),c.vc(11,j,12,6,"ion-item",8),c.Ob(12,"ion-fab",9),c.Ob(13,"ion-fab-button",10),c.Wb("click",function(){return e.crear()}),c.Mb(14,"ion-icon",11),c.Nb(),c.Nb(),c.Nb()),2&t&&(c.Ab(9),c.fc("ngIf",!e.cargado),c.Ab(1),c.fc("ngIf",e.cargado&&0===e.grupos.length),c.Ab(1),c.fc("ngForOf",e.grupos))},directives:[i.z,i.lb,i.jb,i.t,i.Q,i.R,i.U,i.yb,o.j,o.i,i.v,i.w,i.A,i.L,i.F,i.f,i.Z,i.K],styles:[".fcenter[_ngcontent-%COMP%]{margin:auto;display:flex;flex-direction:column;justify-content:center;align-items:center;width:300px;text-align:center}.az[_ngcontent-%COMP%]{color:var(--ion-color-verde)}"]}),t})()}];let O=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({imports:[[a.j.forChild(w)],a.j]}),t})(),x=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({imports:[[o.b,n.e,i.mb,O]]}),t})()},vLoH:function(t,e,r){"use strict";r.d(e,"a",function(){return g});var o=r("tk/3"),n=r("PqYM"),i=r("Cfvw"),a=r("coGc"),s=r("lJxs"),c=r("IzEk"),p=r("MtjB"),h=r("JIr8"),u=r("AytR"),l=r("fXoL"),b=r("B7Rs"),f=r("fsfq"),d=r("TEn/");let g=(()=>{class t{constructor(t,e,r,o){this.http=t,this.transfer=e,this.almacenamiento=r,this.navCtrl=o}hanflerError(t){let e=0;return t.pipe(Object(a.a)(()=>Object(n.a)(5e3)),Object(s.a)(t=>{if(e++,console.log("Entramos a intentos"),t instanceof ErrorEvent){if(3===e)throw new Error("Error de Red")}else{if(!(t instanceof ProgressEvent))throw 404===t.status?new Error(" al realizar la solicictud "):401===t.status?(this.almacenamiento.terminarPartida().then(()=>{this.navCtrl.navigateRoot("/home")}),new Error("No tiene permisos para realizar la petici\xf3n ")):(console.log(t,"Error de servidor"),new Error(" No se pudo realizar la petici\xf3n, intentalo m\xe1s tarde "));if(3===e)throw new Error("Error de Red")}}),Object(c.a)(3))}crearGrupo(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${u.a}/grupos/crear`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}listarGrupos(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${u.a}/grupos/lista`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}info(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${u.a}/grupos/info`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}integrantes(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${u.a}/grupos/integrantes`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}fotoPerfilUsuarioMoto(t,e,r,o){const n={fileKey:"archivo",httpMethod:"PUT",headers:{"x-token":t,"x-id":o},params:{tipo:r}},a=this.transfer.create();return Object(i.a)(a.upload(e,`${u.a}/upload/grupos`,n)).pipe(Object(h.a)(t=>{throw console.log("No se pudo subir la imagen "),new Error("No se pudo subir la imagen ")}))}subirweb(t,e,r){const n={headers:new o.c({"x-token":t,"x-id":r})};return this.http.put(`${u.a}/upload/grupos`,e,n).pipe(Object(p.a)(t=>this.hanflerError(t)))}leerProducto(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${u.a}/grupos/filtrar`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}chat(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${u.a}/grupos/chat`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}descarga(t,e){return this.http.get(`https://api.mapbox.com/directions/v5/mapbox/driving-traffic/${e.coordsIniciales.lng},${e.coordsIniciales.lat};${e.coordsFinales.lng},${e.coordsFinales.lat}?geometries=geojson&steps=true&language=es&access_token=${t}`).pipe(Object(p.a)(t=>this.hanflerError(t)))}dibujar(t,e){return this.http.get(`https://api.mapbox.com/directions/v5/mapbox/driving-traffic/${e.lng},${e.lat};${e.lngf},${e.latf}?geometries=geojson&steps=true&language=es&access_token=${t}`).pipe(Object(p.a)(t=>this.hanflerError(t)))}viaje(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${u.a}/grupos/viajes`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}irgrupo(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${u.a}/grupos/bu`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}podio(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${u.a}/grupos/podio`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}tabla(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${u.a}/grupos/tabla`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}viajechao(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${u.a}/grupos/viajes/eliminar`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}fotospodio(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${u.a}/grupos/podio/fotos`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}viajeBuscarUno(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${u.a}/grupos/buscar`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}viajeBuscar(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${u.a}/grupos/viajes/filtrar`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}fotoviaje(t,e,r){const o={fileKey:"archivo",httpMethod:"PUT",headers:{"x-token":e,"x-viaje":r}},n=this.transfer.create();return Object(i.a)(n.upload(t,`${u.a}/grupos/viaje/upload`,o)).pipe(Object(h.a)(t=>{throw new Error("No se pudo subir la imagen ")}))}subirweb2(t,e,r){const n={headers:new o.c({"x-token":t,"x-viaje":r})};return this.http.put(`${u.a}/grupos/viaje/upload`,e,n).pipe(Object(p.a)(t=>this.hanflerError(t)))}fotosviaje(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${u.a}/grupos/viaje/fotos`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}destino(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${u.a}/grupos/viaje/destino`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}eliminarviaje(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${u.a}/grupos/viaje/eliminar`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}eliminarFoto(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${u.a}/grupos/viaje/eliminarfoto`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}km(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${u.a}/grupos/km`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}}return t.\u0275fac=function(e){return new(e||t)(l.Sb(o.a),l.Sb(b.a),l.Sb(f.a),l.Sb(d.rb))},t.\u0275prov=l.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);