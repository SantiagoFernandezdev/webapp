(window.webpackJsonp=window.webpackJsonp||[]).push([[163],{"8+ML":function(o,i,e){"use strict";e.r(i),e.d(i,"RegistroPageModule",function(){return k});var n=e("ofXK"),t=e("3Pt+"),a=e("tyNb"),r=e("TEn/"),c=e("mrSG"),s=e("h7Pn"),l=e("fXoL"),b=e("oQG1"),u=e("fmoy"),d=e("3qam"),h=e("fsfq");let m=(()=>{class o{constructor(o){this.alertCtrl=o}alertBasicApplication(o,i,e){return Object(c.a)(this,void 0,void 0,function*(){const n=yield this.alertCtrl.create({header:o,message:i,buttons:[{role:"cancel",text:"Cancelar"},{text:"Confirmar",handler:()=>{e()}}]});return yield n.present()})}}return o.\u0275fac=function(i){return new(i||o)(l.Sb(r.b))},o.\u0275prov=l.Hb({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const p=["slide"],O=["content"];function g(o,i){1&o&&(l.Ob(0,"div",49),l.Ob(1,"div",50),l.Mb(2,"ion-spinner",51),l.Ob(3,"p"),l.wc(4,"Validando Usuario..."),l.Nb(),l.Nb(),l.Nb())}function f(o,i){if(1&o){const o=l.Pb();l.Ob(0,"ion-item-sliding"),l.Ob(1,"ion-item",52),l.Ob(2,"ion-input",53),l.Wb("ionChange",function(e){l.pc(o);const n=i.index;return l.Yb(2).cambioVehiculoPlaca(e,n)}),l.Nb(),l.Ob(3,"ion-select",54),l.Wb("ionChange",function(e){l.pc(o);const n=i.index;return l.Yb(2).cambioVehiculo(e,n)}),l.Ob(4,"ion-select-option",55),l.wc(5,"Moto"),l.Nb(),l.Ob(6,"ion-select-option",56),l.wc(7,"Carro"),l.Nb(),l.Nb(),l.Nb(),l.Ob(8,"ion-item-options",57),l.Ob(9,"ion-item-option",58),l.Wb("click",function(){l.pc(o);const e=i.index;return l.Yb(2).eliminarvehiculo(e)}),l.Mb(10,"ion-icon",59),l.Nb(),l.Nb(),l.Nb()}}function v(o,i){if(1&o&&(l.Ob(0,"ion-select-option",60),l.wc(1),l.Nb()),2&o){const o=i.$implicit;l.fc("value",o),l.Ab(1),l.xc(o.nombre)}}function N(o,i){1&o&&(l.Ob(0,"ion-item",27),l.Ob(1,"ion-chip",28),l.wc(2,"Requerido"),l.Nb(),l.Nb())}function C(o,i){if(1&o&&(l.Ob(0,"ion-select-option",60),l.wc(1),l.Nb()),2&o){const o=i.$implicit;l.gc("value",o.nombre),l.Ab(1),l.xc(o.nombre)}}function w(o,i){if(1&o){const o=l.Pb();l.Ob(0,"ion-item",35),l.Ob(1,"ion-label",22),l.wc(2,"Selecciona la ciudad"),l.Nb(),l.Ob(3,"ion-select",36),l.Wb("ionChange",function(i){return l.pc(o),l.Yb(2).seleccionarCiudad(i)}),l.vc(4,C,2,2,"ion-select-option",37),l.Nb(),l.Nb()}if(2&o){const o=l.Yb(2);l.Ab(4),l.fc("ngForOf",o.ciudades)}}function S(o,i){1&o&&(l.Ob(0,"div",49),l.Ob(1,"ion-spinner",51),l.wc(2," Guardando informaci\xf3n"),l.Nb(),l.Nb())}function x(o,i){if(1&o){const o=l.Pb();l.Ob(0,"ion-slides",15,16),l.Ob(2,"ion-slide",17),l.Ob(3,"div",18),l.Ob(4,"ion-grid"),l.Ob(5,"ion-row"),l.Ob(6,"ion-col",19),l.Mb(7,"p",20),l.Ob(8,"ion-item",21),l.Ob(9,"ion-label",22),l.wc(10,"Escriba su nombre completo de Persona o negocio correspondiente"),l.Nb(),l.Nb(),l.Ob(11,"ion-item",23),l.Ob(12,"ion-input",24),l.Wb("ionChange",function(){l.pc(o);const i=l.Yb();return i.changeOne([i.forma.controls.nombreCompleto.errors])}),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(13,"ion-slide",17),l.Ob(14,"div",18),l.Ob(15,"ion-grid"),l.Ob(16,"ion-row"),l.Ob(17,"ion-col",19),l.Ob(18,"ion-item",21),l.Ob(19,"ion-label",22),l.wc(20,"Escriba un nombre de usuario para la aplicaci\xf3n"),l.Nb(),l.Nb(),l.Ob(21,"ion-item",23),l.Ob(22,"ion-input",25),l.Wb("ionChange",function(i){return l.pc(o),l.Yb().comprobarUsuario(i)}),l.Nb(),l.Nb(),l.Nb(),l.Ob(23,"ion-col",19),l.Mb(24,"br"),l.Nb(),l.Ob(25,"ion-col",19),l.Mb(26,"br"),l.vc(27,g,5,0,"div",26),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(28,"ion-slide",17),l.Ob(29,"div",18),l.Ob(30,"ion-grid"),l.Ob(31,"ion-row"),l.Ob(32,"ion-col",19),l.Ob(33,"ion-item",27),l.Ob(34,"ion-chip",28),l.wc(35,"Requerido"),l.Nb(),l.Nb(),l.Ob(36,"ion-item",29),l.Ob(37,"ion-label",22),l.wc(38,"A\xf1adir Veh\xedculo"),l.Nb(),l.Ob(39,"ion-buttons",12),l.Ob(40,"ion-button",30),l.Wb("click",function(){return l.pc(o),l.Yb().agregarvehiculo()}),l.Mb(41,"ion-icon",31),l.Nb(),l.Nb(),l.Nb(),l.vc(42,f,11,0,"ion-item-sliding",32),l.Ob(43,"ion-item",27),l.Ob(44,"ion-chip",28),l.wc(45,"Requerido"),l.Nb(),l.Nb(),l.Ob(46,"ion-item",21),l.Ob(47,"ion-label",22),l.wc(48,"Escriba su correo electr\xf3nico (obligatorio)"),l.Nb(),l.Nb(),l.Ob(49,"ion-item",23),l.Ob(50,"ion-input",33),l.Wb("ionChange",function(i){return l.pc(o),l.Yb().correom(i)}),l.Nb(),l.Nb(),l.Ob(51,"ion-item",21),l.Ob(52,"ion-label",22),l.wc(53,"Escriba su tel\xe9fono celular (opcional)"),l.Nb(),l.Nb(),l.Ob(54,"ion-item",23),l.Ob(55,"ion-input",34),l.Wb("ionChange",function(){l.pc(o);const i=l.Yb();return i.changeOne([i.forma.controls.correo.errors,i.forma.controls.tel.errors])}),l.Nb(),l.Nb(),l.Ob(56,"ion-item",27),l.Ob(57,"ion-chip",28),l.wc(58,"Requerido"),l.Nb(),l.Nb(),l.Ob(59,"ion-item",35),l.Ob(60,"ion-label",22),l.wc(61,"Selecciona el Pa\xeds"),l.Nb(),l.Ob(62,"ion-select",36),l.Wb("ionChange",function(i){return l.pc(o),l.Yb().listarCiudades(i)}),l.vc(63,v,2,2,"ion-select-option",37),l.Nb(),l.Nb(),l.wc(64,"\xb4 "),l.vc(65,N,3,0,"ion-item",38),l.vc(66,w,5,1,"ion-item",39),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(67,"ion-slide",17),l.Ob(68,"div",18),l.Ob(69,"ion-grid"),l.Ob(70,"ion-row"),l.Ob(71,"ion-col",19),l.Ob(72,"ion-item",40),l.Ob(73,"ion-label",22),l.wc(74,"Contrase\xf1a de m\xednimo 8 caracteres"),l.Nb(),l.Nb(),l.Ob(75,"ion-item",40),l.Ob(76,"ion-label",22),l.wc(77,"Mostrar clave"),l.Nb(),l.Ob(78,"ion-toggle",41),l.Wb("ionChange",function(i){return l.pc(o),l.Yb().cambiocl(i)}),l.Nb(),l.Nb(),l.Ob(79,"ion-item",21),l.Ob(80,"ion-label",22),l.wc(81,"Escriba su contrase\xf1a"),l.Nb(),l.Nb(),l.Ob(82,"ion-item",23),l.Ob(83,"ion-input",42),l.Wb("ionChange",function(){l.pc(o);const i=l.Yb();return i.changeOne([i.forma.controls.clave.errors,i.forma.controls.confirmarClave.errors])}),l.Nb(),l.Nb(),l.Nb(),l.Ob(84,"ion-col",19),l.Ob(85,"ion-item",21),l.Ob(86,"ion-label",22),l.wc(87,"Confirmar la contrase\xf1a"),l.Nb(),l.Nb(),l.Ob(88,"ion-item",23),l.Ob(89,"ion-input",43),l.Wb("ionChange",function(){l.pc(o);const i=l.Yb();return i.changeOne([i.forma.controls.clave.errors,i.forma.controls.confirmarClave.errors])}),l.Nb(),l.Nb(),l.Ob(90,"h4",44),l.wc(91,"Clave Privada"),l.Nb(),l.Mb(92,"br"),l.Mb(93,"br"),l.Nb(),l.Ob(94,"ion-col",19),l.Ob(95,"ion-item",45),l.Wb("click",function(){return l.pc(o),l.Yb().politicas()}),l.Ob(96,"ion-label",46),l.wc(97,"Leer pol\xedticas de datos"),l.Nb(),l.Nb(),l.Ob(98,"ion-item",47),l.Ob(99,"ion-checkbox",48),l.Wb("ionChange",function(i){return l.pc(o),l.Yb().aceptar(i)}),l.Nb(),l.Ob(100,"ion-label",22),l.wc(101,"Acepto pol\xedticas de datos"),l.Nb(),l.Nb(),l.Mb(102,"br"),l.Mb(103,"br"),l.Nb(),l.Ob(104,"ion-col",19),l.Mb(105,"br"),l.vc(106,S,3,0,"div",26),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb()}if(2&o){const o=l.Yb();l.Ab(27),l.fc("ngIf",!o.usuarioValido),l.Ab(15),l.fc("ngForOf",o.vehiculos),l.Ab(21),l.fc("ngForOf",o.paises),l.Ab(2),l.fc("ngIf",o.ciudad),l.Ab(1),l.fc("ngIf",o.ciudad),l.Ab(17),l.fc("type",o.tipocl),l.Ab(6),l.fc("type",o.tipocl),l.Ab(17),l.fc("ngIf",!o.usuarioValido)}}let y=(()=>{class o{constructor(o,i,e,n,a,r,c,s,l){this.usuarioService=o,this.toastService=i,this.router=e,this.navCtrl=n,this.registroService=a,this.almacenamiento=r,this.platform=c,this.alertService=s,this.modal=l,this.tipocl="password",this.usuarioValido=!0,this.colorStatus="blanco",this.mensaje="Ingresa su nombre completo",this.usuarioID="",this.paises=[],this.ciudades=[],this.ciudad=!1,this.load=!1,this.correo="",this.pais="",this.miciudad="",this.placa="",this.index=0,this.acepto=!1,this.vehiculos=[],this.forma=new t.c({nombreCompleto:new t.a("",[t.m.required,t.m.minLength(10)]),nombreUsuario:new t.a("",[t.m.required,t.m.minLength(5)]),clave:new t.a("",[t.m.required,t.m.minLength(8)]),confirmarClave:new t.a,tel:new t.a("",[t.m.required])}),this.forma.controls.confirmarClave.setValidators([t.m.required,t.m.minLength(8),this.compareClaves.bind(this.forma)]),this.OSSignal.$usuarioID.subscribe(o=>{this.usuarioID=o})}ngOnInit(){}ionViewWillEnter(){this.colorStatus="blanco",this.mensaje="Ingresa su nombre completo",this.paises=[],this.ciudades=[],this.vehiculos=[],this.ciudad=!1,this.load=!1,this.correo="",this.pais="",this.miciudad="",this.placa="",this.index=0,this.probar(),this.listarPaises()}cambiocl(o){console.log(o),this.tipocl=o.detail.checked?"text":"password"}listarPaises(){this.usuarioService.listarPaises().subscribe(o=>{o.exe?this.paises=o.response:this.paises.push("Colombia")},o=>{this.paises.push("Colombia")})}correom(o){this.correo=o.detail.value}placam(o){this.placa=o.detail.value}agregarvehiculo(){this.vehiculos.push({placa:"",tipo:"Moto",nombre:"",modelo:"",marca:""}),this.changeOne2()}eliminarvehiculo(o){this.vehiculos.splice(o,1),this.changeOne2()}cambioVehiculoPlaca(o,i){this.vehiculos[i].placa=o.detail.value,this.changeOne2()}cambioVehiculo(o,i){this.vehiculos[i].tipo=o.detail.value,this.changeOne2()}listarCiudades(o){this.ciudad=!0,this.pais=o.detail.value.nombre,this.miciudad="",this.usuarioService.listarCiudades(o.detail.value._id).subscribe(o=>{o.exe?(this.ciudades=o.response,this.changeOne2()):this.toastService.toastError("No se pudo traer las ciudades, intente registrarse m\xe1s tarde")},o=>{this.toastService.toastError("No se pudo traer las ciudades, intente registrarse m\xe1s tarde")})}seleccionarCiudad(o){this.miciudad=o.detail.value,this.changeOne2()}probar(){return Object(c.a)(this,void 0,void 0,function*(){this.load=!0,(yield this.almacenamiento.obtenerToken())&&this.Slide.lockSwipes(!0).then(()=>{})})}changeOne2(){return Object(c.a)(this,void 0,void 0,function*(){this.colorStatus=1===this.index&&""!==this.pais&&""!==this.miciudad&&this.vehiculos.length>0&&0===this.vehiculos.filter(o=>""===o.tipo||""===o.placa).length&&""!==this.correo||1!==this.index?"success":"blanco"})}changeOne(o){return Object(c.a)(this,void 0,void 0,function*(){o.filter(o=>null===o).length===o.length?1===this.index&&""!==this.pais&&""!==this.miciudad||(this.colorStatus=1!==this.index?"success":"blanco"):this.colorStatus="blanco"})}retroceso(){this.alertService.alertBasicApplication("Mensaje","\xbfEstas seguro de que deseas cancelar el registro?",()=>{this.registroService.cambioEstado(!0),this.navCtrl.navigateBack("/home")})}compareClaves(o){return o.value!==this.controls.clave.value?{compare:!0}:null}guardarCambios(){const o=this.forma.value;o.usuarioID=""===this.usuarioID?"hola":this.usuarioID,o.pais=this.pais,o.ciudad=this.miciudad,o.vehiculos=this.vehiculos,o.correo=this.correo,o.acepto=this.acepto,this.acepto?(this.usuarioValido=!1,this.usuarioService.registrar(o).subscribe(o=>{this.usuarioValido=!0,delete o.clave,o.clave=this.forma.controls.clave.value,o.usuarioID="hola",this.almacenamiento.guardarUsuario(o).then(()=>{this.toastService.alertApplication("Usuario registrado corectamente",!0),this.registroService.cambioEstado(!0),this.almacenamiento.cambiarEstado(!1),this.navCtrl.navigateForward(["/central"])},o=>{this.usuarioValido=!0,this.toastService.alertApplication(o,!1)})},o=>{this.toastService.alertApplication(o,!1),this.usuarioValido=!0},()=>{})):this.toastService.toastError("Debe aceptar las pol\xedticas de la aplicaci\xf3n")}comprobarUsuario(o){this.forma.controls.nombreUsuario.errors?this.colorStatus="blanco":(this.usuarioValido=!1,this.usuarioService.usuario(o.detail.value).subscribe(o=>Object(c.a)(this,void 0,void 0,function*(){o.exe?(this.usuarioValido=!0,this.colorStatus="blanco",this.mensaje="El usuario ya existe, por favor escoge otro nombre"):(this.colorStatus="success",this.usuarioValido=!0,this.mensaje="El nombre de usuario esta disponible")}),o=>Object(c.a)(this,void 0,void 0,function*(){yield this.toastService.alertApplication(o,!1),this.usuarioValido=!0}),()=>{}))}next(){return Object(c.a)(this,void 0,void 0,function*(){"success"===this.colorStatus&&(yield this.Content.scrollToTop(100),this.Slide.getActiveIndex().then(o=>{this.index=o,3!==o?(0===o?this.mensaje="Escge un nombre de usuario personalizado":1===o?this.mensaje="Ingresa un correo y n\xfamero celular v\xe1lido al cual se contacten contigo":2===o&&(this.mensaje="T\xfa contrase\xf1a debe tener almenos 8 caracteres"),this.avanzar()):this.guardarCambios()}))})}avanzar(){return Object(c.a)(this,void 0,void 0,function*(){this.colorStatus="blanco",this.registroService.cambioEstado(!1),yield this.Slide.lockSwipes(!1),yield this.Slide.lockSwipeToPrev(!0),yield this.Slide.slideNext(300),yield this.Slide.lockSwipeToNext(!0)})}politicas(){return Object(c.a)(this,void 0,void 0,function*(){const o=yield this.modal.create({component:s.a});yield o.present()})}aceptar(o){this.acepto=o.detail.checked}ioniewDidLeave(){this.Slide.lockSwipes(!0).then(()=>{})}}return o.\u0275fac=function(i){return new(i||o)(l.Lb(b.a),l.Lb(u.a),l.Lb(a.g),l.Lb(r.rb),l.Lb(d.a),l.Lb(h.a),l.Lb(r.tb),l.Lb(m),l.Lb(r.qb))},o.\u0275cmp=l.Fb({type:o,selectors:[["app-registro"]],viewQuery:function(o,i){if(1&o&&(l.Ac(p,1),l.Ac(O,1)),2&o){let o;l.oc(o=l.Xb())&&(i.Slide=o.first),l.oc(o=l.Xb())&&(i.Content=o.first)}},decls:19,vars:3,consts:[["color","",1,"ion-no-border"],["color","oscuro"],["slot","start"],["fill","clear",1,"cancelar",3,"click"],["name","arrow-back-outline","slot","icon-only"],["color","blanco"],["content",""],[1,"contenedor"],[3,"formGroup","ngSubmit"],["class","slide-full",4,"ngIf"],["mode","md"],[3,"color","click"],["slot","end"],["fill","clear"],["name","arrow-round-forward","slot","icon-only"],[1,"slide-full"],["slide",""],[1,"slide"],[1,"content",2,"width","100%"],["size","12"],[1,"ion-margin-top"],["lines","none","mode","md",1,"ion-margin-top"],[1,"ion-text-wrap"],["lines","none","mode","ios",1,"campo","ion-margin-top"],["placeholder","Nombre Completo","type","text","formControlName","nombreCompleto",3,"ionChange"],["placeholder","Moto_28","type","text","formControlName","nombreUsuario",3,"ionChange"],["class","contenido",4,"ngIf"],["lines","none","mode","md",1,"ion-margin-top","sinfondo"],["color","danger"],["lines","none","color","light","mode","md",1,"ion-margin-top"],["color","barra",3,"click"],["name","add","slot","icon-only"],[4,"ngFor","ngForOf"],["placeholder","Correo Electr\xf3nico","type","email",3,"ionChange"],["placeholder","N\xfamero de Celular","type","tel","formControlName","tel",3,"ionChange"],["lines","none","mode","md",1,""],["okText","Aceptar","cancelText","Cancelar",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],["lines","none","class"," ion-margin-top sinfondo","mode","md",4,"ngIf"],["lines","none","class"," ","mode","md",4,"ngIf"],["lines","none","mode","md","color","light",1,"ion-margin-top"],["slot","end","mode","ios","color","primary",3,"ionChange"],["formControlName","clave",3,"type","ionChange"],["formControlName","confirmarClave",3,"type","ionChange"],[1,"ion-text-center","ion-margin-top","opacity"],["color","light","lines","none","mode","md",1,"noborder","ion-margin-top",3,"click"],[1,"ion-text-wrap","azul"],["lines","none","color","light","mode","md",1,"noborder","ion-margin-top"],["color","barra","slot","start",3,"ionChange"],[1,"contenido"],[1,"load"],["color","primary","name","crescent"],["lines","none","mode","ios",1,"sinfondo","sep"],["placeholder","N\xfamero de Placa","type","text",3,"ionChange"],["value","Moto","placeholder","Tipo",3,"ionChange"],["value","Moto"],["value","Carro"],["side","end"],["color","danger",3,"click"],["name","trash","slot","icon-only"],[3,"value"]],template:function(o,i){1&o&&(l.Ob(0,"ion-header",0),l.Ob(1,"ion-toolbar",1),l.Ob(2,"ion-buttons",2),l.Ob(3,"ion-button",3),l.Wb("click",function(){return i.retroceso()}),l.Mb(4,"ion-icon",4),l.Nb(),l.Nb(),l.Ob(5,"ion-title"),l.wc(6,"Crear cuenta"),l.Nb(),l.Nb(),l.Nb(),l.Ob(7,"ion-content",5,6),l.Ob(9,"div",7),l.Ob(10,"form",8),l.Wb("ngSubmit",function(){return i.guardarCambios()}),l.vc(11,x,107,8,"ion-slides",9),l.Nb(),l.Nb(),l.Nb(),l.Ob(12,"ion-footer",10),l.Ob(13,"ion-toolbar",11),l.Wb("click",function(){return i.next()}),l.Ob(14,"ion-title",2),l.wc(15,"Continuar"),l.Nb(),l.Ob(16,"ion-buttons",12),l.Ob(17,"ion-button",13),l.Mb(18,"ion-icon",14),l.Nb(),l.Nb(),l.Nb(),l.Nb()),2&o&&(l.Ab(10),l.fc("formGroup",i.forma),l.Ab(1),l.fc("ngIf",i.load),l.Ab(2),l.fc("color",i.colorStatus))},directives:[r.z,r.lb,r.k,r.j,r.A,r.jb,r.t,t.n,t.j,t.d,n.j,r.x,r.bb,r.ab,r.y,r.T,r.s,r.F,r.K,r.E,r.yb,t.i,t.b,r.r,n.i,r.X,r.xb,r.kb,r.d,r.q,r.cb,r.J,r.Y,r.I,r.H],styles:[".contenedor[_ngcontent-%COMP%]{width:auto;max-width:600px;margin:auto}.cancelar[_ngcontent-%COMP%]{display:flex;align-items:center}ion-item[_ngcontent-%COMP%]{width:100%!important}.campo[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.3)}.contenido[_ngcontent-%COMP%]   .load[_ngcontent-%COMP%]{width:100%;justify-content:center}.contenido[_ngcontent-%COMP%], .contenido[_ngcontent-%COMP%]   .load[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.contenido[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;width:80%;opacity:.7}.message[_ngcontent-%COMP%]{background:#ffeec0}.sizeM[_ngcontent-%COMP%]{font-size:14px}.sep[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.1);margin-bottom:5px}"]}),o})();var M=e("zon2");const P=[{path:"",component:y}];let k=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=l.Jb({type:o}),o.\u0275inj=l.Ib({imports:[[n.b,t.e,t.l,r.mb,a.j.forChild(P),M.a]]}),o})()}}]);