(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{LwKO:function(t,i,n){"use strict";n.r(i),n.d(i,"IVTentradasPageModule",function(){return I});var e=n("ofXK"),o=n("3Pt+"),a=n("TEn/"),r=n("tyNb"),s=n("mrSG"),c=n("SQQW"),l=n("fXoL"),b=n("fsfq"),d=n("5yQV"),h=n("fmoy"),f=n("fqim"),p=n("SpuA");const u=["inifinito"],m=["contenido"];function g(t,i){if(1&t){const t=l.Pb();l.Ob(0,"ion-button",5),l.Wb("click",function(){return l.pc(t),l.Yb().borrar()}),l.Mb(1,"ion-icon",13),l.Nb()}}function v(t,i){if(1&t){const t=l.Pb();l.Ob(0,"div",14),l.Ob(1,"ion-item"),l.Ob(2,"ion-label",15),l.wc(3,"Seleccionar desde que fecha"),l.Nb(),l.Ob(4,"ion-datetime",16),l.Wb("ionChange",function(i){return l.pc(t),l.Yb().filtro(i,1)}),l.Nb(),l.Nb(),l.Ob(5,"ion-item"),l.Ob(6,"ion-label",15),l.wc(7,"Seleccionar hasta que fecha"),l.Nb(),l.Ob(8,"ion-datetime",17),l.Wb("ionChange",function(i){return l.pc(t),l.Yb().filtro(i,2)}),l.Nb(),l.Nb(),l.Ob(9,"div",18),l.Ob(10,"ion-button",19),l.Wb("click",function(){return l.pc(t),l.Yb().toggleFiltro()}),l.wc(11,"CERRAR"),l.Nb(),l.Ob(12,"ion-button",20),l.Wb("click",function(){return l.pc(t),l.Yb().filtrar()}),l.wc(13,"BUSCAR"),l.Nb(),l.Nb(),l.Nb()}}function O(t,i){1&t&&(l.Ob(0,"div",32),l.Mb(1,"img",33),l.Ob(2,"h3",34),l.wc(3,"No tiene entradas registrados"),l.Nb(),l.Nb())}function N(t,i){1&t&&(l.Ob(0,"ion-item"),l.Mb(1,"ion-skeleton-text",37),l.Ob(2,"ion-label"),l.Mb(3,"ion-skeleton-text",38),l.Mb(4,"ion-skeleton-text",39),l.Nb(),l.Nb())}const A=function(){return[1,1,1,1,1]};function M(t,i){1&t&&(l.Ob(0,"div",35),l.Ob(1,"ion-list"),l.vc(2,N,5,0,"ion-item",36),l.Nb(),l.Nb()),2&t&&(l.Ab(2),l.fc("ngForOf",l.kc(1,A)))}function w(t,i){if(1&t&&(l.Ob(0,"div"),l.Mb(1,"br"),l.Ob(2,"strong",43),l.wc(3,"Inventario Origen: "),l.Ob(4,"span",52),l.wc(5),l.Nb(),l.Nb(),l.Nb()),2&t){const t=l.Yb().$implicit;l.Ab(5),l.xc(t.origenivt.name)}}function x(t,i){if(1&t){const t=l.Pb();l.Ob(0,"ion-item-sliding"),l.Ob(1,"ion-item"),l.Ob(2,"ion-avatar",2),l.Mb(3,"img",40),l.Nb(),l.Ob(4,"ion-label"),l.Ob(5,"div",41),l.wc(6),l.Nb(),l.Ob(7,"div",42),l.Mb(8,"br"),l.Ob(9,"strong",43),l.wc(10,"Cantidad: "),l.Ob(11,"span",44),l.wc(12),l.Nb(),l.Nb(),l.Ob(13,"strong",43),l.wc(14,"Precio Unitario: "),l.Ob(15,"span",44),l.wc(16),l.Zb(17,"decimales"),l.Nb(),l.Nb(),l.Ob(18,"strong",43),l.wc(19,"Costo Total : "),l.Ob(20,"span",44),l.wc(21),l.Zb(22,"decimales"),l.Nb(),l.Nb(),l.Mb(23,"br"),l.Ob(24,"strong",43),l.wc(25,"Creador: "),l.Ob(26,"span",45),l.wc(27),l.Nb(),l.Nb(),l.Ob(28,"strong",43),l.wc(29,"Fecha: "),l.Ob(30,"span",46),l.wc(31),l.Zb(32,"cambioUTC"),l.Nb(),l.Nb(),l.vc(33,w,6,1,"div",12),l.Nb(),l.Nb(),l.Nb(),l.Ob(34,"ion-item-options",47),l.Ob(35,"ion-item-option",48),l.Wb("click",function(){l.pc(t);const n=i.$implicit;return l.Yb(3).editar(n)}),l.Mb(36,"ion-icon",49),l.Nb(),l.Ob(37,"ion-item-option",50),l.Wb("click",function(){l.pc(t);const n=i.$implicit,e=i.index;return l.Yb(3).eliminar(n,e)}),l.Mb(38,"ion-icon",51),l.Nb(),l.Nb(),l.Nb()}if(2&t){const t=i.$implicit;l.Ab(6),l.xc(t.producto.nombre),l.Ab(6),l.xc(t.cantidad),l.Ab(4),l.yc("$",l.bc(17,7,t.precio,"es-CO"),""),l.Ab(5),l.yc(" $",l.bc(22,10,t.total,"es-CO"),""),l.Ab(6),l.xc(t.creador.nombrecompleto),l.Ab(4),l.xc(l.ac(32,13,t.fecha)),l.Ab(2),l.fc("ngIf",""!==t.origenivt&&t.origenivt)}}function k(t,i){if(1&t&&(l.Ob(0,"ion-list"),l.vc(1,x,39,15,"ion-item-sliding",36),l.Nb()),2&t){const t=l.Yb(2);l.Ab(1),l.fc("ngForOf",t.entradas)}}function E(t,i){if(1&t){const t=l.Pb();l.Ob(0,"ion-infinite-scroll",53,54),l.Wb("ionInfinite",function(i){return l.pc(t),l.Yb(2).loadData(i)}),l.Mb(2,"ion-infinite-scroll-content",55),l.Nb()}}function C(t,i){if(1&t){const t=l.Pb();l.Ob(0,"ion-content",null,21),l.Ob(2,"ion-refresher",22),l.Wb("ionRefresh",function(i){return l.pc(t),l.Yb().refrescando(i)}),l.Mb(3,"ion-refresher-content",23),l.Nb(),l.Mb(4,"div",24),l.Mb(5,"div",25),l.vc(6,O,4,0,"div",26),l.vc(7,M,3,2,"div",27),l.vc(8,k,2,1,"ion-list",12),l.vc(9,E,3,0,"ion-infinite-scroll",28),l.Ob(10,"ion-fab",29),l.Ob(11,"ion-fab-button",30),l.Wb("click",function(){return l.pc(t),l.Yb().modal()}),l.Mb(12,"ion-icon",31),l.Nb(),l.Nb(),l.Nb()}if(2&t){const t=l.Yb();l.Ab(6),l.fc("ngIf",0===t.entradas.length),l.Ab(1),l.fc("ngIf",t.load),l.Ab(1),l.fc("ngIf",t.entradas.length>0),l.Ab(1),l.fc("ngIf",t.carga)}}const y=[{path:"",component:(()=>{class t{constructor(t,i,n,e,o,a){this.modalCtrl=t,this.almacenamiento=i,this.ivtApi=n,this.toast=e,this.alertCtrl=o,this.ActiveRouter=a,this.entradas=[],this.load=!1,this.fecha1="",this.fecha2="",this.formato1="AAAA-MM-DDTHH: mm: ssTZD",this.formato2="AAAA-MM-DDTHH: mm: ssTZD",this.filtros=!1,this.partida=0,this.partida2=0,this.patron="",this.carga=!0}ngOnInit(){}ionViewWillEnter(){this.cargarEntradas()}refrescando(t){this.partida=0,this.partida2=0,this.cargarEntradas().then(()=>{t.target.complete()}).catch(()=>t.target.complete())}cargarEntradas(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&(this.carga=!0,this.ivtApi.leerEntrada(t.token,{ivt:this.ActiveRouter.snapshot.paramMap.get("id"),partida:this.partida2,patron:this.patron}).subscribe(t=>{t.exe?this.entradas=t.response:this.toast.toastError("No se pudo listar las entradas, intentelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo listar las entradas, intentelo m\xe1s tarde")}))})}modal(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:c.a,componentProps:{tipo:"entradas",inventario:this.ActiveRouter.snapshot.paramMap.get("id")}});yield t.present();const i=yield t.onWillDismiss();i.data&&i.data.exe&&this.cargarEntradas()})}eliminar(t,i){return Object(s.a)(this,void 0,void 0,function*(){})}editar(t){return Object(s.a)(this,void 0,void 0,function*(){})}filtro(t,i){1===i?this.fecha1=t.detail.value:this.fecha2=t.detail.value}filtrar(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&(this.partida=0,""!==this.fecha1&&""!==this.fecha2?this.ivtApi.filtrarEntradas(t.token,{desde:this.fecha1,hasta:this.fecha2,partida:this.partida}).subscribe(t=>{t.exe?(this.entradas=t.response,this.filtros=!1):this.toast.toastError("No se pudo consultar las entradas, intentelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo consultar las entradas, intentelo m\xe1s tarde")}):this.toast.toastError("Debe de especificar las fechas (desde, hasta)"))})}loadData(t){return Object(s.a)(this,void 0,void 0,function*(){this.partida=this.partida+10;const i=yield this.almacenamiento.obtenerToken();i&&(""!==this.fecha1&&""!==this.fecha2?this.ivtApi.filtrarEntradas(i.token,{desde:this.fecha1,hasta:this.fecha2,partida:this.partida,patron:this.patron}).subscribe(i=>{i.exe?i.response.length>0?(i.response.forEach(t=>{this.entradas.push(t)}),t.target.complete()):(t.target.disabled=!0,this.partida=0):this.toast.toastError("No se pudo consultar las entradas, intentelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo consultar las entradas, intentelo m\xe1s tarde")}):(this.partida2=this.partida2+10,this.ivtApi.leerEntrada(i.token,{ivt:this.ActiveRouter.snapshot.paramMap.get("id"),partida:this.partida2,patron:this.patron}).subscribe(i=>{i.exe?i.response.length>0?(i.response.forEach(t=>{this.entradas.push(t)}),t.target.complete()):(t.target.disabled=!0,this.partida2=0):this.toast.toastError("No se pudo listar las entradas, intentelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo listar las entradas, intentelo m\xe1s tarde")})))})}buscarProducto(t){return Object(s.a)(this,void 0,void 0,function*(){this.partida=0,this.partida2=0;const i=yield this.almacenamiento.obtenerToken();yield this.contenido.scrollToTop(),i&&(""===t.detail.value?""!==this.fecha1&&""!==this.fecha2&&this.filtros?this.filtrar():this.cargarEntradas():(this.patron=t.detail.value,""!==this.fecha1&&""!==this.fecha2&&this.filtros?this.ivtApi.filtrarEntradasPatron(i.token,{desde:this.fecha1,hasta:this.fecha2,patron:t.detail.value,tipo:"filtro"}).subscribe(t=>{t.exe?(this.inifinito.disabled=!(t.response.length>0),this.entradas=t.response):this.toast.toastError("No se pudo consultar las entradas, intentelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo consultar las entradas, intentelo m\xe1s tarde")}):this.ivtApi.filtrarEntradasPatron(i.token,{patron:t.detail.value,tipo:"normal"}).subscribe(t=>{t.exe?(this.inifinito.disabled=!(t.response.length>0),this.entradas=t.response):this.toast.toastError("No se pudo consultar las entradas, intentelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo consultar las entradas, intentelo m\xe1s tarde")})))})}borrar(){return Object(s.a)(this,void 0,void 0,function*(){this.fecha1="",this.fecha2="",yield this.contenido.scrollToTop(),this.partida=0,this.partida2=0,this.inifinito.disabled=!1,this.cargarEntradas()})}toggleFiltro(){this.filtros=!this.filtros}}return t.\u0275fac=function(i){return new(i||t)(l.Lb(a.qb),l.Lb(b.a),l.Lb(d.a),l.Lb(h.a),l.Lb(a.b),l.Lb(r.a))},t.\u0275cmp=l.Fb({type:t,selectors:[["app-ivtentradas"]],viewQuery:function(t,i){if(1&t&&(l.Ac(u,1),l.Ac(m,1)),2&t){let t;l.oc(t=l.Xb())&&(i.inifinito=t.first),l.oc(t=l.Xb())&&(i.contenido=t.first)}},decls:18,vars:4,consts:[[1,"ion-no-border"],["color","oscuro"],["slot","start"],["icon","chevron-back-outline","defaultHref","/central/menu/ivt-inicio"],["slot","end"],[3,"click"],["name","search-outline","slot","icon-only"],[3,"click",4,"ngIf"],["class","filtros blanco",4,"ngIf"],[1,"buscar"],["mode","ios","placeholder","Buscar Productos",3,"ionChange"],[1,"divider","verdeo"],[4,"ngIf"],["name","trash-outline","slot","icon-only"],[1,"filtros","blanco"],["position","floating"],["displayFormat","DD-MM-YYYY hh:mm:a","pickerFormat","DD MM YYYY, hh:mm:a","done-text","Aceptar","cancel-text","Cancelar","placeholder","Seleccione Desde",3,"ionChange"],["displayFormat","DD-MM-YYYY hh:mm:a","pickerFormat","DD MM YYYY, hh:mm:a","done-text","Aceptar","placeholder","Seleccione Hasta","cancel-text","Cancelar",3,"ionChange"],[1,"btns","divider"],["color","medium","shape","round","mode","ios",3,"click"],["color","warning","shape","round","mode","ios",3,"click"],["contenido",""],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],[1,"divider","light"],[1,"divider"],["class","cen",4,"ngIf"],["class","carga",4,"ngIf"],["threshold","100px",3,"ionInfinite",4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],["color","oscuro",3,"click"],["name","add-outline"],[1,"cen"],["src","/assets/Entradas.png","width","100px","alt",""],[1,"tituloGrande"],[1,"carga"],[4,"ngFor","ngForOf"],["slot","start","animated","",2,"width","50px","height","50px"],["animated","",2,"width","50%","height","20px"],["animated","",2,"width","90%","height","20px"],["src","/assets/Entradas.png","width","100%","heigth","100%"],[1,"titulo"],[1,"info"],[1,"flexbet"],[1,"verdei"],[1,"rojoi"],[1,"grisi"],["side","end"],["color","warning",3,"click"],["slot","icon-only","name","pencil-outline"],["color","danger",3,"click"],["slot","icon-only","name","trash-outline"],[1,"amarilloi"],["threshold","100px",3,"ionInfinite"],["inifinito",""],["loadingSpinner","bubbles","loadingText","Cargando entradas..."]],template:function(t,i){1&t&&(l.Ob(0,"ion-header",0),l.Ob(1,"ion-toolbar",1),l.Ob(2,"ion-buttons",2),l.Mb(3,"ion-back-button",3),l.Nb(),l.Ob(4,"ion-title"),l.wc(5,"Inventario - Entradas"),l.Nb(),l.Ob(6,"ion-buttons",4),l.Ob(7,"ion-button",5),l.Wb("click",function(){return i.toggleFiltro()}),l.Mb(8,"ion-icon",6),l.Nb(),l.vc(9,g,2,0,"ion-button",7),l.Nb(),l.Nb(),l.vc(10,v,14,0,"div",8),l.Ob(11,"div",9),l.Ob(12,"ion-searchbar",10),l.Wb("ionChange",function(t){return i.buscarProducto(t)}),l.Nb(),l.Nb(),l.Ob(13,"div",11),l.wc(14," CANTIDAD DE ENTRADAS "),l.Ob(15,"strong"),l.wc(16),l.Nb(),l.Nb(),l.Nb(),l.vc(17,C,13,4,"ion-content",12)),2&t&&(l.Ab(9),l.fc("ngIf",""!==i.fecha1&&""!==i.fecha2),l.Ab(1),l.fc("ngIf",i.filtros),l.Ab(6),l.yc(" ",i.entradas.length,""),l.Ab(1),l.fc("ngIf",i.carga))},directives:[a.z,a.lb,a.k,a.g,a.h,a.jb,a.j,a.A,e.j,a.U,a.yb,a.F,a.K,a.u,a.xb,a.t,a.Q,a.R,a.v,a.w,a.L,e.i,a.Z,a.J,a.f,a.I,a.H,a.C,a.D],pipes:[f.a,p.a],styles:[".cen[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.tituloGrande[_ngcontent-%COMP%]{width:300px;text-align:center}.verdei[_ngcontent-%COMP%]{color:#1e8c4a}ion-item-divider[_ngcontent-%COMP%]{border:0!important;margin-bottom:15px}.rojoi[_ngcontent-%COMP%]{color:#c1302c}.grisi[_ngcontent-%COMP%]{color:#aaa}.amarilloi[_ngcontent-%COMP%]{color:#f5ad45}.flexbet[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.btns[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.verdeo[_ngcontent-%COMP%]{background-color:#fef4c5;color:#333}"]}),t})()}];let Y=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=l.Jb({type:t}),t.\u0275inj=l.Ib({imports:[[r.j.forChild(y)],r.j]}),t})();var D=n("iTUp");let I=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=l.Jb({type:t}),t.\u0275inj=l.Ib({imports:[[e.b,o.e,a.mb,Y,D.a]]}),t})()},SpuA:function(t,i,n){"use strict";n.d(i,"a",function(){return a});var e=n("wd/R"),o=n("fXoL");let a=(()=>{class t{transform(t){console.log(t,"fechin");let i=e.utc(t).toDate();return e(i).format("dddd, DD MMMM YYYY h:mm:a")}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=o.Kb({name:"cambioUTC",type:t,pure:!0}),t})()}}]);