(window.webpackJsonp=window.webpackJsonp||[]).push([[138],{"4stX":function(i,t,o){"use strict";o.r(t),o.d(t,"InterfazGrupoSolicitudesPageModule",function(){return f});var e=o("ofXK"),n=o("3Pt+"),a=o("TEn/"),s=o("tyNb"),r=o("fXoL"),c=o("Gq8O"),l=o("fsfq"),b=o("fmoy"),u=o("cb8P");function p(i,t){if(1&i){const i=r.Pb();r.Ob(0,"ion-item",13),r.Ob(1,"ion-avatar",14),r.Mb(2,"ion-img",15),r.Nb(),r.Ob(3,"ion-label",16),r.Ob(4,"strong",17),r.wc(5),r.Nb(),r.Mb(6,"br"),r.Ob(7,"div"),r.wc(8),r.Nb(),r.Ob(9,"div",18),r.Ob(10,"ion-button",19),r.Wb("click",function(){r.pc(i);const o=t.$implicit,e=t.index;return r.Yb(2).aceptar(o,e)}),r.wc(11,"Aceptar"),r.Nb(),r.Ob(12,"ion-button",20),r.Wb("click",function(){r.pc(i);const o=t.$implicit,e=t.index;return r.Yb(2).eliminar(o,e)}),r.wc(13,"Eliminar"),r.Nb(),r.Nb(),r.Nb(),r.Nb()}if(2&i){const i=t.$implicit;r.Ab(2),r.hc("src","https://motocaliapp.com/",i.imagen,""),r.Ab(3),r.xc(i.usuarioEmisor.nombrecompleto),r.Ab(3),r.yc("@",i.usuarioEmisor.nombreusuario,"")}}function d(i,t){if(1&i&&(r.Ob(0,"ion-list",10),r.vc(1,p,14,3,"ion-item",11),r.Mb(2,"div",12),r.Nb()),2&i){const i=r.Yb();r.Ab(1),r.fc("ngForOf",i.seguimientos)}}const m=function(i){return{"hauto centrar":i}},h=[{path:"",component:(()=>{class i{constructor(i,t,o,e,n){this.apiSeguimiento=i,this.almacenamiento=t,this.toastUtilidad=o,this.cargarElementos=e,this.active=n,this.seguimientos=[],this.red="wifi"}ngOnInit(){}ionViewDidEnter(){"none"!==this.red&&this.arrancar()}refrescando(i){this.arrancar(),i.detail.complete()}arrancar(){this.almacenamiento.obtenerToken().then(i=>{this.cancelSuscribe=this.apiSeguimiento.solicitudesRecibidasGrupos(i.token,{id:this.active.snapshot.paramMap.get("grupo")}).subscribe(i=>{this.seguimientos=[];const t=i.response.SeguimientoData;t.length>0&&t.forEach(i=>{i.imagen=i.usuarioEmisor.imagen.length>0?i.usuarioEmisor.imagen[0].path:"",this.seguimientos.push(i)})},i=>{this.toastUtilidad.alertApplication("No se pudo aceptar la solicitud",!1)})})}aceptar(i,t){console.log(i.usuarioEmisor._id),this.almacenamiento.obtenerToken().then(o=>{this.apiSeguimiento.aceptarSolicitudGrupo(o.token,i.usuarioEmisor._id,{grupo:this.active.snapshot.paramMap.get("id"),usuario:this.active.snapshot.paramMap.get("grupo")}).subscribe(i=>{console.log(i," Solicitud aceptada"),this.toastUtilidad.alertApplication("Solicitud aceptada",!0),this.seguimientos.splice(t,1)},i=>{this.toastUtilidad.alertApplication("No se pudo aceptar la solicitud",!1)})})}eliminar(i,t){this.almacenamiento.obtenerToken().then(o=>{this.apiSeguimiento.cancelarSolicitud(o.token,i.usuarioEmisor._id,"0").subscribe(()=>{this.seguimientos.splice(t,1)},i=>{this.toastUtilidad.alertApplication("No se pudo aceptar la solicitud",!1)})})}ionViewDidLeave(){}}return i.\u0275fac=function(t){return new(t||i)(r.Lb(c.a),r.Lb(l.a),r.Lb(b.a),r.Lb(u.a),r.Lb(s.a))},i.\u0275cmp=r.Fb({type:i,selectors:[["app-interfaz-grupo-solicitudes"]],decls:16,vars:5,consts:[[1,"ion-no-border"],["color","oscuro"],["slot","start","defaultHref","/interactivo/grupos","icon","chevron-back-outline"],[1,"medium"],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],["color","warning"],[1,"divider","light"],[1,"blanco",3,"ngClass"],["class","blanco ",4,"ngIf"],[1,"blanco"],["color","blanco",4,"ngFor","ngForOf"],[1,"divider"],["color","blanco"],["slot","start",1,"avatar"],[3,"src"],[1,"ion-text-wrap"],[1,"small"],[1,"moto-padre"],["color","barra","shape","round","mode","ios",3,"click"],["color","oscuro","shape","round","mode","ios",3,"click"]],template:function(i,t){1&i&&(r.Ob(0,"ion-header",0),r.Ob(1,"ion-toolbar",1),r.Mb(2,"ion-back-button",2),r.Ob(3,"ion-title",3),r.wc(4,"Solicitudes de Grupos "),r.Nb(),r.Nb(),r.Nb(),r.Ob(5,"ion-content"),r.Ob(6,"ion-refresher",4),r.Wb("ionRefresh",function(i){return t.refrescando(i)}),r.Mb(7,"ion-refresher-content",5),r.Nb(),r.Ob(8,"ion-item-divider",6),r.Ob(9,"ion-label"),r.wc(10,"Solicitudes "),r.Ob(11,"strong"),r.wc(12),r.Nb(),r.Nb(),r.Nb(),r.Mb(13,"div",7),r.Ob(14,"div",8),r.vc(15,d,3,1,"ion-list",9),r.Nb(),r.Nb()),2&i&&(r.Ab(12),r.xc(t.seguimientos.length),r.Ab(2),r.fc("ngClass",r.lc(3,m,0===t.seguimientos.length)),r.Ab(1),r.fc("ngIf",t.seguimientos.length>0))},directives:[a.z,a.lb,a.g,a.h,a.jb,a.t,a.Q,a.R,a.G,a.K,e.h,e.j,a.L,e.i,a.F,a.f,a.B,a.j],styles:[""]}),i})()}];let g=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=r.Jb({type:i}),i.\u0275inj=r.Ib({imports:[[s.j.forChild(h)],s.j]}),i})(),f=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=r.Jb({type:i}),i.\u0275inj=r.Ib({imports:[[e.b,n.e,a.mb,g]]}),i})()}}]);