(window.webpackJsonp=window.webpackJsonp||[]).push([[127],{kMg8:function(t,e,o){"use strict";o.r(e),o.d(e,"TiendaCategoriasPageModule",function(){return j});var n=o("ofXK"),a=o("3Pt+"),i=o("TEn/"),r=o("tyNb"),s=o("mrSG"),c=o("R0Ic"),l=o("fXoL"),b=o("fsfq"),d=o("8A7y"),m=o("fmoy");function p(t,e){if(1&t&&l.Mb(0,"ion-spinner",10),2&t){const t=l.Yb();l.fc("color",t.color)}}function g(t,e){1&t&&(l.Ob(0,"span"),l.wc(1,"Creando categoria"),l.Nb())}let h=(()=>{class t{constructor(t,e,o,n){this.almacenamiento=t,this.modalCtrl=e,this.empresa=o,this.toast=n,this.color="danger",this.nombre="",this.load=!1}ngOnInit(){}ionViewWillEnter(){this.nombre=this.nombreCategoria}crear(){return Object(s.a)(this,void 0,void 0,function*(){this.load=!0;const t=yield this.almacenamiento.obtenerToken();t&&("crear"===this.tipo?this.empresa.crearCategoria(t.token,{nombre:this.nombre,tienda:this.tienda}).subscribe(t=>{console.log(t," data global"),t.exe?this.modalCtrl.dismiss(t.response):this.toast.toastError("No se pudo crear la categoria, int\xe8ntelo m\xe0s tarde"),this.load=!1},t=>{this.load=!1,this.toast.toastError("No se pudo crear la categoria, int\xe8ntelo m\xe0s tarde")}):this.empresa.editarCategoria(t.token,{nombre:this.nombre,tienda:this.tienda,id:this.id}).subscribe(t=>{console.log(t," data global"),t.exe?this.modalCtrl.dismiss(t.response):this.toast.toastError("No se pudo crear la categoria, int\xe8ntelo m\xe0s tarde"),this.load=!1},t=>{this.load=!1,this.toast.toastError("No se pudo crear la categoria, int\xe8ntelo m\xe0s tarde")}))})}cerrar(){this.modalCtrl.dismiss()}}return t.\u0275fac=function(e){return new(e||t)(l.Lb(b.a),l.Lb(i.qb),l.Lb(d.a),l.Lb(m.a))},t.\u0275cmp=l.Fb({type:t,selectors:[["app-modal-categoria-tienda"]],inputs:{tienda:"tienda",nombreCategoria:"nombreCategoria",tipo:"tipo",id:"id"},decls:18,vars:5,consts:[[3,"color"],["slot","end"],[3,"click"],["name","close","slot","icon-only"],[1,"ion-padding"],[1,"main"],["placeholder","Escribe un nombre",1,"campo",3,"ngModel","ngModelChange"],["mode","ios","shape","round",3,"color","click"],["name","crescent","mode","ios",3,"color",4,"ngIf"],[4,"ngIf"],["name","crescent","mode","ios",3,"color"]],template:function(t,e){1&t&&(l.Ob(0,"ion-header"),l.Ob(1,"ion-toolbar",0),l.Ob(2,"ion-title"),l.wc(3,"Creando Categoria"),l.Nb(),l.Ob(4,"ion-buttons",1),l.Ob(5,"ion-button",2),l.Wb("click",function(){return e.cerrar()}),l.Mb(6,"ion-icon",3),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(7,"ion-content",4),l.Ob(8,"div",5),l.Ob(9,"h3"),l.wc(10,"Nombre de la categoria"),l.Nb(),l.Ob(11,"ion-input",6),l.Wb("ngModelChange",function(t){return e.nombre=t}),l.Nb(),l.Ob(12,"ion-button",7),l.Wb("click",function(){return e.crear()}),l.wc(13,"Guardar Categoria"),l.Nb(),l.Mb(14,"br"),l.Mb(15,"br"),l.vc(16,p,1,1,"ion-spinner",8),l.vc(17,g,2,0,"span",9),l.Nb(),l.Nb()),2&t&&(l.Ab(1),l.fc("color",e.color),l.Ab(10),l.fc("ngModel",e.nombre),l.Ab(1),l.fc("color",e.color),l.Ab(4),l.fc("ngIf",e.load),l.Ab(1),l.fc("ngIf",e.load))},directives:[i.z,i.lb,i.jb,i.k,i.j,i.A,i.t,i.E,i.yb,a.i,a.k,n.j,i.cb],styles:[".campo[_ngcontent-%COMP%]{width:90%;padding:20px 10px;border-radius:15px;box-shadow:0 1px 20px 2px rgba(0,0,0,.1)}.campo[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{margin-bottom:20px}.main[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin:20px auto}"]}),t})();var u=o("FlrC");function f(t,e){1&t&&(l.Ob(0,"h3",9),l.wc(1,"Administrador de categorias"),l.Nb())}function O(t,e){1&t&&(l.Ob(0,"div",10),l.Mb(1,"img",11),l.Ob(2,"h3"),l.wc(3,"No existen categorias creadas por el momento"),l.Nb(),l.Nb())}function x(t,e){1&t&&(l.Ob(0,"div",12),l.Mb(1,"img",11),l.Ob(2,"h3"),l.wc(3,"Consultando categorias, espere un momento"),l.Nb(),l.Nb())}function C(t,e){if(1&t){const t=l.Pb();l.Ob(0,"ion-item",16),l.Mb(1,"ion-checkbox",17),l.Ob(2,"ion-label"),l.Ob(3,"strong"),l.wc(4),l.Nb(),l.Mb(5,"br"),l.Ob(6,"span"),l.wc(7,"Datos extras de la categoria"),l.Nb(),l.Nb(),l.Ob(8,"ion-buttons",18),l.Ob(9,"ion-button",19),l.Wb("click",function(){l.pc(t);const o=e.$implicit,n=e.index;return l.Yb(2).editar(o,n)}),l.Mb(10,"ion-icon",20),l.Nb(),l.Ob(11,"ion-button",19),l.Wb("click",function(){l.pc(t);const o=e.$implicit,n=e.index;return l.Yb(2).eliminar(o,n)}),l.Mb(12,"ion-icon",21),l.Nb(),l.Nb(),l.Nb()}if(2&t){const t=e.$implicit,o=l.Yb(2);l.fc("@entrada",void 0),l.Ab(1),l.fc("checked",t.activa)("color",o.color),l.Ab(3),l.xc(t.nombre)}}function y(t,e){if(1&t&&(l.Ob(0,"div",13),l.Mb(1,"ion-searchbar",14),l.vc(2,C,13,4,"ion-item",15),l.Nb()),2&t){const t=l.Yb();l.fc("@animated",void 0),l.Ab(2),l.fc("ngForOf",t.categorias)}}const v=[{path:"",component:(()=>{class t{constructor(t,e,o,n,a,i,r,s,c){this.almacenamiento=t,this.empresa=e,this.toast=o,this.router=n,this.menu=a,this.entrada=i,this.modalCtrl=r,this.activeRoute=s,this.alertCtrl=c,this.color="danger",this.categorias=[],this.load=!1,this.id=""}ngOnInit(){}ionViewWillEnter(){this.menu.enable(!1,"perfil"),this.menu.enable(!1,"panel"),this.menu.enable(!0,"tienda"),this.id=this.activeRoute.snapshot.paramMap.get("id"),this.entrada.Tienda(this.id),this.carga()}crear(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:h,componentProps:{tienda:this.id,tipo:"crear"}});yield t.present();const e=yield t.onWillDismiss();if(e){if(!e.data)return;this.categorias.push(e.data)}})}editar(t,e){return Object(s.a)(this,void 0,void 0,function*(){const o=yield this.modalCtrl.create({component:h,componentProps:{tienda:this.id,nombreCategoria:t.nombre,id:t._id,tipo:"editar"}});yield o.present();const n=yield o.onWillDismiss();if(n){if(!n.data)return;this.categorias[e].nombre=n.data.nombre}})}carga(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&this.empresa.listarCategorias(t.token,{tienda:this.id}).subscribe(t=>{console.log(t,"datica"),t.exe?this.categorias=t.response:this.toast.toastError("No se pudo traer la categoria, int\xe8ntelo m\xe0s tarde"),this.load=!0},t=>{this.toast.toastError("No se pudo traer la categoria, int\xe8ntelo m\xe0s tarde")})})}eliminar(t,e){return Object(s.a)(this,void 0,void 0,function*(){const o=yield this.alertCtrl.create({header:"\xbfQuieres eliminar esta categoria?",message:"Esta acci\xf2n ser\xe0 de forma permanente",buttons:[{text:"Cancelar",role:"cancel",cssClass:"cancelarNoti",handler:()=>{}},{text:"Eliminar",cssClass:"botonalerta",handler:()=>Object(s.a)(this,void 0,void 0,function*(){const o=yield this.almacenamiento.obtenerToken();o&&this.empresa.eliminarCategoria(o.token,{id:t._id}).subscribe(t=>{t.exe?this.categorias.splice(e,1):this.toast.toastError("No se pudo eliminar la categoria, int\xe8ntelo m\xe0s tarde")},t=>{this.toast.toastError("No se pudo eliminar la categoria, int\xe8ntelo m\xe0s tarde")})})}]});yield o.present()})}}return t.\u0275fac=function(e){return new(e||t)(l.Lb(b.a),l.Lb(d.a),l.Lb(m.a),l.Lb(r.g),l.Lb(i.pb),l.Lb(u.a),l.Lb(i.qb),l.Lb(r.a),l.Lb(i.b))},t.\u0275cmp=l.Fb({type:t,selectors:[["app-tienda-categorias"]],decls:12,vars:7,consts:[[1,"no-border",3,"translucent"],[3,"color"],["class","titulo",4,"ngIf"],["class","alerta",4,"ngIf"],["class","loader",4,"ngIf"],["class","padre",4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],[3,"color","click"],["name","add"],[1,"titulo"],[1,"alerta"],["src","/assets/CategoriasTienda.png","width","300px","alt",""],[1,"loader"],[1,"padre"],["mode","ios","placeholder","Buscar categoria"],["mode","ios","lines","none","class","tienda sinfondo",4,"ngFor","ngForOf"],["mode","ios","lines","none",1,"tienda","sinfondo"],["slot","start","mode","ios",3,"checked","color"],["slot","end"],[3,"click"],["slot","icon-only","name","pencil","color","warning"],["slot","icon-only","name","trash","color","danger"]],template:function(t,e){1&t&&(l.Ob(0,"ion-header",0),l.Ob(1,"ion-toolbar",1),l.Ob(2,"ion-title"),l.wc(3,"Categorias"),l.Nb(),l.Nb(),l.Nb(),l.Ob(4,"ion-content"),l.vc(5,f,2,0,"h3",2),l.vc(6,O,4,0,"div",3),l.vc(7,x,4,0,"div",4),l.vc(8,y,3,2,"div",5),l.Ob(9,"ion-fab",6),l.Ob(10,"ion-fab-button",7),l.Wb("click",function(){return e.crear()}),l.Mb(11,"ion-icon",8),l.Nb(),l.Nb(),l.Nb()),2&t&&(l.fc("translucent",!0),l.Ab(1),l.fc("color",e.color),l.Ab(4),l.fc("ngIf",e.categorias.length>0),l.Ab(1),l.fc("ngIf",0===e.categorias.length&&e.load),l.Ab(1),l.fc("ngIf",!e.load),l.Ab(1),l.fc("ngIf",e.load&&e.categorias.length>0),l.Ab(2),l.fc("color",e.color))},directives:[i.z,i.lb,i.jb,i.t,n.j,i.v,i.w,i.A,i.U,i.yb,n.i,i.F,i.q,i.d,i.K,i.k,i.j],styles:[".titulo[_ngcontent-%COMP%]{width:90%;margin:30px auto}.padre[_ngcontent-%COMP%]{width:90%;display:flex;flex-direction:column;justify-content:center;align-items:center;box-shadow:0 2px 30px 3px rgba(0,0,0,.2)}.padre[_ngcontent-%COMP%], .tienda[_ngcontent-%COMP%]{margin:auto;padding:20px}.tienda[_ngcontent-%COMP%]{width:100%;border-bottom:1px solid rgba(0,0,0,.1);transition:all .5s}.tienda[_ngcontent-%COMP%]:nth-child(2n){--background:#fef4d5!important}.tienda[_ngcontent-%COMP%]:hover{box-shadow:0 2px 10px 1px rgba(0,0,0,.1);transform:scale(1.01)}.loader[_ngcontent-%COMP%]{margin:auto;animation:carga 2s ease-in-out infinite}.alerta[_ngcontent-%COMP%], .loader[_ngcontent-%COMP%]{width:90%;padding:20px;display:flex;flex-direction:column;justify-content:center;align-items:center}.alerta[_ngcontent-%COMP%]{margin:50px auto;opacity:.7;text-align:center;box-shadow:0 3px 40px 4px rgba(0,0,0,.1)}.alerta[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{max-width:300px}@keyframes carga{0%{opacity:.3;transform:translateY(40px)}50%{opacity:1;transform:translateY(0)}to{opacity:.3;transform:translateY(40px)}}@keyframes entrada{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}"],data:{animation:[Object(c.m)("animated",[Object(c.l)(":enter",[Object(c.g)("ion-item",[Object(c.k)({opacity:0,transform:"translateY(-100px)"}),Object(c.i)(-100,[Object(c.e)("500ms cubic-bezier(0.35, 0, 0.5, 1)",Object(c.k)({opacity:1,transform:"none"}))])])]),Object(c.l)(":leave",[Object(c.g)("ion-item",[Object(c.k)({opacity:1,transform:"none"}),Object(c.i)(-100,[Object(c.e)("500ms ease-in-out",Object(c.k)({opacity:0,transform:"translateY(-100px)"}))])])])]),Object(c.m)("entrada",[Object(c.l)(":leave",[Object(c.k)({opacity:1,transform:"none"}),Object(c.e)("500ms ease-in-out",Object(c.k)({opacity:0,transform:"translateY(-100px)"}))])])]}}),t})()}];let N=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Jb({type:t}),t.\u0275inj=l.Ib({imports:[[r.j.forChild(v)],r.j]}),t})(),j=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Jb({type:t}),t.\u0275inj=l.Ib({imports:[[n.b,a.e,i.mb,N]]}),t})()}}]);