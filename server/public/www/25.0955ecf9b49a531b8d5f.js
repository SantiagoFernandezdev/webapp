(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{erKi:function(i,t,e){"use strict";e.r(t),e.d(t,"SolicitudesPageModule",function(){return O});var n=e("ofXK"),o=e("3Pt+"),a=e("TEn/"),c=e("tyNb"),s=e("R0Ic"),r=e("fXoL"),l=e("Gq8O"),b=e("fsfq"),u=e("fmoy"),p=e("cb8P");function d(i,t){if(1&i){const i=r.Pb();r.Ob(0,"ion-item",13),r.Ob(1,"ion-avatar",14),r.Mb(2,"ion-img",15),r.Nb(),r.Ob(3,"ion-label",16),r.Ob(4,"strong",17),r.wc(5),r.Nb(),r.Mb(6,"br"),r.Ob(7,"div"),r.wc(8),r.Nb(),r.Ob(9,"div",18),r.Ob(10,"ion-button",19),r.Wb("click",function(){r.pc(i);const e=t.$implicit,n=t.index;return r.Yb(2).aceptar(e,n)}),r.wc(11,"Aceptar"),r.Nb(),r.Ob(12,"ion-button",20),r.Wb("click",function(){r.pc(i);const e=t.$implicit,n=t.index;return r.Yb(2).eliminar(e,n)}),r.wc(13,"Eliminar"),r.Nb(),r.Nb(),r.Nb(),r.Nb()}if(2&i){const i=t.$implicit;r.Ab(2),r.hc("src","https://motocaliapp.com/",i.imagen,""),r.Ab(3),r.xc(i.usuarioEmisor.nombrecompleto),r.Ab(3),r.yc("@",i.usuarioEmisor.nombreusuario,"")}}function m(i,t){if(1&i&&(r.Ob(0,"ion-list",11),r.vc(1,d,14,3,"ion-item",12),r.Nb()),2&i){const i=r.Yb();r.fc("@solicitudes",i.seguimientos.length),r.Ab(1),r.fc("ngForOf",i.seguimientos)}}const h=function(i){return{"hauto centrar":i}},g=[{path:"",component:(()=>{class i{constructor(i,t,e,n){this.apiSeguimiento=i,this.almacenamiento=t,this.toastUtilidad=e,this.cargarElementos=n,this.seguimientos=[],this.red="wifi",this.cargarElementos.$cargarRed.subscribe(i=>{this.red=i,"none"!==this.red&&this.arrancar()})}ngOnInit(){}ionViewDidEnter(){"none"!==this.red&&this.arrancar()}refrescando(i){this.arrancar(),i.detail.complete()}arrancar(){this.almacenamiento.obtenerToken().then(i=>{this.cancelSuscribe=this.apiSeguimiento.solicitudesRecibidas(i.token).subscribe(i=>{this.seguimientos=[];const t=i.response.SeguimientoData;t.length>0&&t.forEach(i=>{i.imagen=i.usuarioEmisor.imagen.length>0?i.usuarioEmisor.imagen[0].path:"",this.seguimientos.push(i)})},i=>{this.toastUtilidad.alertApplication("No se pudo aceptar la solicitud",!1)})})}aceptar(i,t){this.almacenamiento.obtenerToken().then(e=>{this.apiSeguimiento.aceptarSolicitud(e.token,i.usuarioEmisor._id).subscribe(i=>{this.toastUtilidad.alertApplication("Solicitud aceptada",!0),this.seguimientos.splice(t,1)},i=>{this.toastUtilidad.alertApplication("No se pudo aceptar la solicitud",!1)})})}eliminar(i,t){this.almacenamiento.obtenerToken().then(e=>{this.apiSeguimiento.cancelarSolicitud(e.token,i.usuarioEmisor._id,"0").subscribe(()=>{this.seguimientos.splice(t,1)},i=>{this.toastUtilidad.alertApplication("No se pudo aceptar la solicitud",!1)})})}ionViewDidLeave(){}}return i.\u0275fac=function(t){return new(t||i)(r.Lb(l.a),r.Lb(b.a),r.Lb(u.a),r.Lb(p.a))},i.\u0275cmp=r.Fb({type:i,selectors:[["app-solicitudes"]],decls:16,vars:5,consts:[[1,"ion-no-border"],["color","oscuro"],["slot","start","defaultHref","/central/menu/","icon","chevron-back-outline"],[1,"medium"],["color","light"],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],["color","warning"],[1,"divider","light"],[1,"blanco",3,"ngClass"],["class","blanco ",4,"ngIf"],[1,"blanco"],["lines","none","color","blanco",4,"ngFor","ngForOf"],["lines","none","color","blanco"],["slot","start",1,"avatar"],[3,"src"],[1,"ion-text-wrap"],[1,"small"],[1,"moto-padre"],["color","barra","shape","round","mode","ios",3,"click"],["color","oscuro","shape","round","mode","ios",3,"click"]],template:function(i,t){1&i&&(r.Ob(0,"ion-header",0),r.Ob(1,"ion-toolbar",1),r.Mb(2,"ion-back-button",2),r.Ob(3,"ion-title",3),r.wc(4,"Solicitudes de Seguimiento "),r.Nb(),r.Nb(),r.Nb(),r.Ob(5,"ion-content",4),r.Ob(6,"ion-refresher",5),r.Wb("ionRefresh",function(i){return t.refrescando(i)}),r.Mb(7,"ion-refresher-content",6),r.Nb(),r.Ob(8,"ion-item-divider",7),r.Ob(9,"ion-label"),r.wc(10,"Solicitudes "),r.Ob(11,"strong"),r.wc(12),r.Nb(),r.Nb(),r.Nb(),r.Mb(13,"div",8),r.Ob(14,"div",9),r.vc(15,m,2,2,"ion-list",10),r.Nb(),r.Nb()),2&i&&(r.Ab(12),r.xc(t.seguimientos.length),r.Ab(2),r.fc("ngClass",r.lc(3,h,0===t.seguimientos.length)),r.Ab(1),r.fc("ngIf",t.seguimientos.length>0))},directives:[a.z,a.lb,a.g,a.h,a.jb,a.t,a.Q,a.R,a.G,a.K,n.h,n.j,a.L,n.i,a.F,a.f,a.B,a.j],styles:[".avatar[_ngcontent-%COMP%]{width:80px;height:80px}.moto-padre[_ngcontent-%COMP%]{display:flex}.moto-padre[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:calc(50% - 2px);max-width:200px}ion-button[_ngcontent-%COMP%]{width:200px!important;max-width:300px!important;height:50px;margin:5px;padding:5px}"],data:{animation:[Object(s.m)("solicitudes",[Object(s.l)("* => *",[Object(s.g)(":enter",[Object(s.k)({opacity:0,transform:"translateY(400px)"}),Object(s.i)(300,[Object(s.e)("500ms",Object(s.k)({opacity:1,transform:"none"}))])],{optional:!0}),Object(s.g)(":leave",[Object(s.k)({opacity:1,transform:"none"}),Object(s.i)(300,[Object(s.e)("500ms",Object(s.k)({opacity:0,transform:"translateY(-100%)"}))])],{optional:!0})])])]}}),i})()}];let f=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=r.Jb({type:i}),i.\u0275inj=r.Ib({imports:[[c.j.forChild(g)],c.j]}),i})(),O=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=r.Jb({type:i}),i.\u0275inj=r.Ib({imports:[[n.b,o.e,a.mb,f]]}),i})()}}]);