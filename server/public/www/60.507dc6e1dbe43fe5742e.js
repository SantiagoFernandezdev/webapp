(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{"5yQV":function(t,e,r){"use strict";r.d(e,"a",function(){return d});var n=r("AytR"),i=r("tk/3"),o=r("coGc"),a=r("lJxs"),s=r("IzEk"),c=r("MtjB"),h=r("PqYM"),p=r("fXoL");let d=(()=>{class t{constructor(t){this.http=t}hanflerError(t){return t.pipe(Object(o.a)(()=>Object(h.a)(3e3)),Object(a.a)(t=>{if(console.log("Entramos a intentos"),t instanceof ErrorEvent)throw new Error("Error de Red");if(404===t.status)throw new Error(" P\xe1gina no encontrada")}),Object(s.a)(3))}crearInventario(t,e){const r={headers:new i.c({"x-token":t})};return this.http.post(`${n.a}/ivt/tipo/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}actualizarInventario(t,e){const r={headers:new i.c({"x-token":t})};return this.http.put(`${n.a}/ivt/cierre/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerInventarios(t){const e={headers:new i.c({"x-token":t})};return this.http.get(`${n.a}/ivt/tipo/`,e).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerInventario(t,e){const r={headers:new i.c({"x-token":t,"x-id":e})};return this.http.get(`${n.a}/ivt/tipo/uno`,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarAcceso(t,e){const r={headers:new i.c({"x-token":t})};return this.http.put(`${n.a}/ivt/tipo/accesos/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}BuscarUsuarios(t,e){const r={headers:new i.c({"x-token":t})};return this.http.put(`${n.a}/empleados/buscar/`,{patron:e},r).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearEmpleado(t,e){const r={headers:new i.c({"x-token":t})};return this.http.post(`${n.a}/empleados/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarEmpleado(t,e){const r={headers:new i.c({"x-token":t})};return this.http.put(`${n.a}/empleados/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerEmpleados(t){const e={headers:new i.c({"x-token":t})};return this.http.get(`${n.a}/empleados/`,e).pipe(Object(c.a)(t=>this.hanflerError(t)))}eliminarEmpleados(t,e){const r={headers:new i.c({"x-token":t,"x-id":e})};return this.http.delete(`${n.a}/empleados/`,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearProveedor(t,e){const r={headers:new i.c({"x-token":t})};return this.http.post(`${n.a}/ivt/proveedores/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarProveedor(t,e){const r={headers:new i.c({"x-token":t})};return this.http.put(`${n.a}/ivt/proveedores/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}eliminarProveedor(t,e){const r={headers:new i.c({"x-token":t,"x-id":e})};return this.http.delete(`${n.a}/ivt/proveedores/`,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerProveedor(t,e){const r={headers:new i.c({"x-token":t,"x-ivt":e})};return this.http.get(`${n.a}/ivt/proveedores/`,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearCategoria(t,e){const r={headers:new i.c({"x-token":t})};return this.http.post(`${n.a}/ivt/categorias/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarCategoria(t,e){const r={headers:new i.c({"x-token":t})};return this.http.put(`${n.a}/ivt/categorias/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}eliminarCategoria(t,e){const r={headers:new i.c({"x-token":t,"x-id":e})};return this.http.delete(`${n.a}/ivt/categorias/`,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerCategoria(t,e){const r={headers:new i.c({"x-token":t,"x-ivt":e})};return this.http.get(`${n.a}/ivt/categorias/`,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearProducto(t,e){const r={headers:new i.c({"x-token":t})};return this.http.post(`${n.a}/ivt/productos/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarProducto(t,e){const r={headers:new i.c({"x-token":t})};return this.http.put(`${n.a}/ivt/productos/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}eliminarProducto(t,e){const r={headers:new i.c({"x-token":t,"x-id":e})};return this.http.delete(`${n.a}/ivt/productos/`,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerProducto(t,e){const r={headers:new i.c({"x-token":t})};return this.http.put(`${n.a}/ivt/productos/filtro/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerProductoEstadistica(t,e){const r={headers:new i.c({"x-token":t})};return this.http.put(`${n.a}/ivt/productos/filtro/estadistica/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerProductosPorInventario(t,e){const r={headers:new i.c({"x-token":t})};return this.http.put(`${n.a}/ivt/productos/buscarivt/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}buscarProducto(t,e){const r={headers:new i.c({"x-token":t})};return this.http.put(`${n.a}/ivt/productos/buscar`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}buscarProductoEntrada(t,e){const r={headers:new i.c({"x-token":t})};return this.http.put(`${n.a}/ivt/productos/buscar/entrada`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearEntrada(t,e){const r={headers:new i.c({"x-token":t})};return this.http.post(`${n.a}/ivt/entradas/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerEntrada(t,e){const r={headers:new i.c({"x-token":t})};return this.http.put(`${n.a}/ivt/entradas/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}filtrarEntradas(t,e){const r={headers:new i.c({"x-token":t})};return this.http.put(`${n.a}/ivt/entradas/buscar/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}filtrarEntradasPatron(t,e){const r={headers:new i.c({"x-token":t})};return this.http.put(`${n.a}/ivt/entradas/buscar/patron/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearSalida(t,e){const r={headers:new i.c({"x-token":t})};return this.http.post(`${n.a}/ivt/salidas/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerSalida(t,e){const r={headers:new i.c({"x-token":t})};return this.http.put(`${n.a}/ivt/salidas/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}filtrarSalidas(t,e){const r={headers:new i.c({"x-token":t})};return this.http.put(`${n.a}/ivt/salidas/buscar/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}filtrarSalidasPatron(t,e){const r={headers:new i.c({"x-token":t})};return this.http.put(`${n.a}/ivt/salidas/buscar/patron/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}CargarInventarios(t,e){const r={headers:new i.c({"x-token":t})};return this.http.put(`${n.a}/ivt/tipo/almacen/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}CierresInventario(t,e){const r={headers:new i.c({"x-token":t})};return this.http.put(`${n.a}/ivt/cierre/buscar/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}MovCantidades(t,e){const r={headers:new i.c({"x-token":t})};return this.http.put(`${n.a}/ivt/mov/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}MovCantidades2(t,e){const r={headers:new i.c({"x-token":t})};return this.http.put(`${n.a}/ivt/mov/salidas/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerMovmientos(t,e){const r={headers:new i.c({"x-token":t})};return this.http.put(`${n.a}/ivt/movimientos/filtro/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerAgotados(t,e){const r={headers:new i.c({"x-token":t})};return this.http.put(`${n.a}/ivt/productos/agotados/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerProximos(t,e){const r={headers:new i.c({"x-token":t})};return this.http.put(`${n.a}/ivt/productos/proximos/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}}return t.\u0275fac=function(e){return new(e||t)(p.Sb(i.a))},t.\u0275prov=p.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},PKKH:function(t,e,r){"use strict";r.r(e),r.d(e,"IVTempleadosPageModule",function(){return E});var n=r("ofXK"),i=r("3Pt+"),o=r("TEn/"),a=r("tyNb"),s=r("mrSG"),c=r("fXoL"),h=r("fsfq"),p=r("5yQV"),d=r("fmoy");function l(t,e){1&t&&(c.Ob(0,"div",12),c.Mb(1,"img",13),c.Ob(2,"h3",14),c.wc(3,"No tiene empleados registrados"),c.Nb(),c.Nb())}function u(t,e){1&t&&(c.Ob(0,"ion-item"),c.Mb(1,"ion-skeleton-text",17),c.Ob(2,"ion-label"),c.Mb(3,"ion-skeleton-text",18),c.Mb(4,"ion-skeleton-text",19),c.Nb(),c.Nb())}const b=function(){return[1,1,1,1,1]};function f(t,e){1&t&&(c.Ob(0,"div",15),c.Ob(1,"ion-list"),c.vc(2,u,5,0,"ion-item",16),c.Nb(),c.Nb()),2&t&&(c.Ab(2),c.fc("ngForOf",c.kc(1,b)))}function v(t,e){if(1&t&&(c.Ob(0,"div",29),c.wc(1),c.Nb()),2&t){const t=c.Yb().$implicit;c.Ab(1),c.yc("Cargo: ",t.cargo,"")}}function m(t,e){if(1&t&&(c.Ob(0,"div",29),c.wc(1),c.Nb()),2&t){const t=c.Yb().$implicit;c.Ab(1),c.yc("Al\xedas: ",t.alias,"")}}function g(t,e){if(1&t){const t=c.Pb();c.Ob(0,"ion-item-sliding"),c.Ob(1,"ion-item"),c.Ob(2,"ion-avatar",2),c.Mb(3,"img",25),c.Nb(),c.Ob(4,"ion-label"),c.Ob(5,"span"),c.wc(6),c.Nb(),c.Mb(7,"br"),c.Ob(8,"strong",26),c.wc(9),c.Nb(),c.vc(10,v,2,1,"div",27),c.vc(11,m,2,1,"div",27),c.Nb(),c.Ob(12,"ion-checkbox",28),c.Wb("ionChange",function(e){return c.pc(t),c.Yb(2).marcando(e)}),c.Nb(),c.Nb(),c.Nb()}if(2&t){const t=e.$implicit;c.Ab(3),c.fc("src",t.usuario.imagen,c.qc),c.Ab(3),c.xc(t.usuario.nombrecompleto),c.Ab(3),c.yc("@",t.usuario.nombreusuario,""),c.Ab(1),c.fc("ngIf",t.cargo),c.Ab(1),c.fc("ngIf",t.alias),c.Ab(1),c.gc("value",t.usuario._id),c.fc("checked",t.checked)}}function O(t,e){if(1&t&&(c.Ob(0,"ion-list"),c.Ob(1,"ion-item-divider",20),c.Ob(2,"div",21),c.Ob(3,"div",22),c.Ob(4,"h3"),c.wc(5,"Registrados"),c.Nb(),c.Nb(),c.Ob(6,"div",23),c.Mb(7,"img",24),c.Ob(8,"h3"),c.wc(9),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.vc(10,g,13,7,"ion-item-sliding",16),c.Nb()),2&t){const t=c.Yb();c.Ab(9),c.xc(t.empleados.length),c.Ab(1),c.fc("ngForOf",t.empleados)}}const x=[{path:"",component:(()=>{class t{constructor(t,e,r,n,i){this.almacenamiento=t,this.IVTapi=e,this.toast=r,this.active=n,this.loading=i,this.empleados=[],this.buscados=[],this.accesos=[],this.load=!1,this.marcar=!1,this.id="",this.ivt={},this.cargauno=!1}ngOnInit(){}ionViewWillEnter(){return Object(s.a)(this,void 0,void 0,function*(){this.id=this.active.snapshot.paramMap.get("id"),yield this.traerEmpleados()})}refrescando(t){this.traerEmpleados().then(()=>{t.target.complete()}).catch(()=>{t.target.complete()})}traerEmpleados(){return Object(s.a)(this,void 0,void 0,function*(){this.load=!0;const t=yield this.almacenamiento.obtenerToken();t&&this.IVTapi.leerEmpleados(t.token).subscribe(e=>{if(e.exe){let r=[];e.response.forEach(t=>{t.usuario.imagen=t.usuario.imagen.length>0?`https://motocaliapp.com/${t.usuario.imagen[0].path}`:"/assets/notfound.png"}),r=e.response,this.IVTapi.leerInventario(t.token,this.id).subscribe(t=>{t.exe&&(this.ivt=t.response,r.forEach(e=>{t.response.accesos.find(t=>t===e.usuario._id)&&(e.checked=!0)}),this.cargauno=!0,this.empleados=r)})}else this.toast.toastError("No se pudo traer la informaci\xf3n, intentelo m\xe1s tarde");this.load=!1},t=>{this.toast.toastError("No se pudo traer la informaci\xf3n, intentelo m\xe1s tarde")})})}marcando(t){return Object(s.a)(this,void 0,void 0,function*(){if(this.cargauno){const e=yield this.loading.create({message:"Procesando informaci\xf3n...",translucent:!0,mode:"ios"});yield e.present();const r=yield this.almacenamiento.obtenerToken();r&&this.IVTapi.editarAcceso(r.token,{id:t.detail.value,estado:t.detail.checked,_id:this.id}).subscribe(t=>Object(s.a)(this,void 0,void 0,function*(){yield e.dismiss()}),t=>Object(s.a)(this,void 0,void 0,function*(){yield e.dismiss()}))}})}ionViewDidLeave(){this.cargauno=!1,this.empleados=[]}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(h.a),c.Lb(p.a),c.Lb(d.a),c.Lb(a.a),c.Lb(o.ob))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-ivtempleados"]],decls:15,vars:3,consts:[[1,"ion-no-border"],["color","oscuro"],["slot","start"],["icon","chevron-back-outline","defaultHref","/central/menu/ivt-inicio"],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],["mode","ios","placeholder","Buscar Empleado"],[1,"divider","light"],[1,"divider"],["class","cen",4,"ngIf"],["class","carga",4,"ngIf"],[4,"ngIf"],[1,"cen"],["src","/assets/Empleadoslista.png","width","100px","alt",""],[1,"tituloGrande"],[1,"carga"],[4,"ngFor","ngForOf"],["slot","start","animated","",2,"width","50px","height","50px"],["animated","",2,"width","50%","height","20px"],["animated","",2,"width","90%","height","20px"],["lines","none","color","muro"],[1,"padreflex"],[1,"titulo"],[1,"numero"],["src","/assets/Empleadoslista.png","width","25px","height","25px","alt",""],["width","100%","height","100%","alt","",3,"src"],[1,"verdei"],["class","rojoi",4,"ngIf"],["slot","end","color","danger",3,"checked","value","ionChange"],[1,"rojoi"]],template:function(t,e){1&t&&(c.Ob(0,"ion-header",0),c.Ob(1,"ion-toolbar",1),c.Ob(2,"ion-buttons",2),c.Mb(3,"ion-back-button",3),c.Nb(),c.Ob(4,"ion-title"),c.wc(5,"Mis Empleados"),c.Nb(),c.Nb(),c.Nb(),c.Ob(6,"ion-content"),c.Ob(7,"ion-refresher",4),c.Wb("ionRefresh",function(t){return e.refrescando(t)}),c.Mb(8,"ion-refresher-content",5),c.Nb(),c.Mb(9,"ion-searchbar",6),c.Mb(10,"div",7),c.Mb(11,"div",8),c.vc(12,l,4,0,"div",9),c.vc(13,f,3,2,"div",10),c.vc(14,O,11,2,"ion-list",11),c.Nb()),2&t&&(c.Ab(12),c.fc("ngIf",0===e.empleados.length),c.Ab(1),c.fc("ngIf",e.load),c.Ab(1),c.fc("ngIf",e.empleados.length>0))},directives:[o.z,o.lb,o.k,o.g,o.h,o.jb,o.t,o.Q,o.R,o.U,o.yb,n.j,o.L,n.i,o.F,o.Z,o.K,o.G,o.J,o.f,o.q,o.d],styles:[".cen[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.tituloGrande[_ngcontent-%COMP%]{width:300px;text-align:center}.verdei[_ngcontent-%COMP%]{color:#1e8c4a}ion-item-divider[_ngcontent-%COMP%]{border:0!important;margin-bottom:15px}.rojoi[_ngcontent-%COMP%]{color:#c1302c}.padreflex[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.numero[_ngcontent-%COMP%], .padreflex[_ngcontent-%COMP%]{display:flex;align-items:center}.numero[_ngcontent-%COMP%]{padding-right:10px}"]}),t})()}];let w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({imports:[[a.j.forChild(x)],a.j]}),t})(),E=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({imports:[[n.b,i.e,o.mb,w]]}),t})()}}]);