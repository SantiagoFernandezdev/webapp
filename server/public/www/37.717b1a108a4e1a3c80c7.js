(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{Ae4j:function(t,e,r){"use strict";r.r(e),r.d(e,"InterfazGrupoAppsPageModule",function(){return k});var a=r("ofXK"),o=r("3Pt+"),i=r("TEn/"),s=r("tyNb"),n=r("mrSG"),c=r("fXoL"),p=r("fsfq"),h=r("oQG1"),u=r("fmoy"),l=r("vLoH"),b=r("a/9d"),f=r("r3ab"),d=r("Gq8O"),g=r("7JkF");const m=["fileUpload"];function v(t,e){1&t&&(c.Ob(0,"div",5),c.Mb(1,"img",6),c.Ob(2,"h3"),c.wc(3,"No tiene acceso para ver esta informaci\xf3n, env\xede una invitaci\xf3n a este grupo"),c.Nb(),c.Nb())}function j(t,e){if(1&t){const t=c.Pb();c.Ob(0,"ion-item",8),c.Wb("click",function(){return c.pc(t),c.Yb(2).solicitudes()}),c.Ob(1,"ion-avatar",9),c.Mb(2,"img",12),c.Nb(),c.Ob(3,"ion-label"),c.wc(4,"Solicitudes de amistad"),c.Nb(),c.Nb()}}function w(t,e){if(1&t){const t=c.Pb();c.Ob(0,"ion-list"),c.vc(1,j,5,0,"ion-item",7),c.Ob(2,"ion-item",8),c.Wb("click",function(){return c.pc(t),c.Yb().miembros()}),c.Ob(3,"ion-avatar",9),c.Mb(4,"img",10),c.Nb(),c.Ob(5,"ion-label"),c.wc(6,"Miembros"),c.Nb(),c.Nb(),c.Ob(7,"ion-item",8),c.Wb("click",function(){return c.pc(t),c.Yb().chats()}),c.Ob(8,"ion-avatar",9),c.Mb(9,"img",11),c.Nb(),c.Ob(10,"ion-label"),c.wc(11,"Chats"),c.Nb(),c.Nb(),c.Nb()}if(2&t){const t=c.Yb();c.Ab(1),c.fc("ngIf",t.id===t.grupo.creador)}}const O=[{path:"",component:(()=>{class t{constructor(t,e,r,a,o,i,s,n,c,p,h){this.almacenamiento=t,this.apiUsuario=e,this.toast=r,this.apiGrupos=a,this.router=o,this.active=i,this.actionCtrl=s,this.camera=n,this.loadingService=c,this.seguimientoService=p,this.socket=h,this.cargado=!1,this.solicitudEnviada=!1,this.estado="Seguir Cuenta",this.estadoSolicitud=!1,this.mostrar=!1}ngOnInit(){}ionViewWillEnter(){this.listar()}refrescando(t){this.cargado=!1,this.listar().then(()=>{t.target.complete()}).catch(()=>{t.target.complete()})}listar(){return Object(n.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&(this.id=t._id,this.apiGrupos.info(t.token,{id:this.active.snapshot.paramMap.get("grupo")}).subscribe(t=>{console.log(t),t.exe?(this.grupo=t.response[0],this.mostrar=this.grupo.integrantes.filter(t=>t===this.id).length>0,console.log(t)):this.toast.toastError("No se pudo consultar la informaci\xf3n, int\xe9ntelo m\xe1s tarde"),this.cargado=!0},t=>{this.toast.toastError("No se pudo consultar la informaci\xf3n, int\xe9ntelo m\xe1s tarde"),this.cargado=!0}))})}solicitudes(){this.router.navigate(["/interfaz-grupo",this.active.snapshot.paramMap.get("grupo"),"apps",this.active.snapshot.paramMap.get("grupo"),"solicitudes",this.grupo.usuario._id,this.active.snapshot.paramMap.get("grupo")])}miembros(){this.router.navigate(["/interfaz-grupo",this.active.snapshot.paramMap.get("grupo"),"apps",this.active.snapshot.paramMap.get("grupo"),"integrantes",this.grupo.usuario._id,this.active.snapshot.paramMap.get("grupo")])}chats(){this.router.navigate(["/interfaz-grupo",this.active.snapshot.paramMap.get("grupo"),"apps",this.active.snapshot.paramMap.get("grupo"),"chats",this.active.snapshot.paramMap.get("grupo")])}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(p.a),c.Lb(h.a),c.Lb(u.a),c.Lb(l.a),c.Lb(s.g),c.Lb(s.a),c.Lb(i.a),c.Lb(b.a),c.Lb(f.a),c.Lb(d.a),c.Lb(g.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-interfaz-grupo-apps"]],viewQuery:function(t,e){if(1&t&&c.Ac(m,1),2&t){let t;c.oc(t=c.Xb())&&(e.fileUpload=t.first)}},decls:9,vars:2,consts:[["color","oscuro"],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],["class","fcenter",4,"ngIf"],[4,"ngIf"],[1,"fcenter"],["src","/assets/No.png","width","100px","alt",""],[3,"click",4,"ngIf"],[3,"click"],["slot","start"],["src","/assets/Miembros.png"],["src","/assets/Chats.png"],["src","/assets/Seguimiento.png"]],template:function(t,e){1&t&&(c.Ob(0,"ion-header"),c.Ob(1,"ion-toolbar",0),c.Ob(2,"ion-title"),c.wc(3,"Mas"),c.Nb(),c.Nb(),c.Nb(),c.Ob(4,"ion-content"),c.Ob(5,"ion-refresher",1),c.Wb("ionRefresh",function(t){return e.refrescando(t)}),c.Mb(6,"ion-refresher-content",2),c.Nb(),c.vc(7,v,4,0,"div",3),c.vc(8,w,12,1,"ion-list",4),c.Nb()),2&t&&(c.Ab(7),c.fc("ngIf",e.cargado&&!e.mostrar),c.Ab(1),c.fc("ngIf",e.cargado&&e.mostrar))},directives:[i.z,i.lb,i.jb,i.t,i.Q,i.R,a.j,i.L,i.F,i.f,i.K],styles:[".fcenter[_ngcontent-%COMP%]{margin:50px auto;display:flex;flex-direction:column;justify-content:center;align-items:center;width:300px;text-align:center}"]}),t})()}];let E=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({imports:[[s.j.forChild(O)],s.j]}),t})(),k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({imports:[[a.b,o.e,i.mb,E]]}),t})()},r3ab:function(t,e,r){"use strict";r.d(e,"a",function(){return s});var a=r("mrSG"),o=r("fXoL"),i=r("TEn/");let s=(()=>{class t{constructor(t){this.loadingCtrl=t}cargaProcesos(t){return Object(a.a)(this,void 0,void 0,function*(){return this.loading=yield this.loadingCtrl.create({message:t}),this.loading.present()})}finalizarCargado(){this.loading.dismiss()}}return t.\u0275fac=function(e){return new(e||t)(o.Sb(i.ob))},t.\u0275prov=o.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},vLoH:function(t,e,r){"use strict";r.d(e,"a",function(){return g});var a=r("tk/3"),o=r("PqYM"),i=r("Cfvw"),s=r("coGc"),n=r("lJxs"),c=r("IzEk"),p=r("MtjB"),h=r("JIr8"),u=r("AytR"),l=r("fXoL"),b=r("B7Rs"),f=r("fsfq"),d=r("TEn/");let g=(()=>{class t{constructor(t,e,r,a){this.http=t,this.transfer=e,this.almacenamiento=r,this.navCtrl=a}hanflerError(t){let e=0;return t.pipe(Object(s.a)(()=>Object(o.a)(5e3)),Object(n.a)(t=>{if(e++,console.log("Entramos a intentos"),t instanceof ErrorEvent){if(3===e)throw new Error("Error de Red")}else{if(!(t instanceof ProgressEvent))throw 404===t.status?new Error(" al realizar la solicictud "):401===t.status?(this.almacenamiento.terminarPartida().then(()=>{this.navCtrl.navigateRoot("/home")}),new Error("No tiene permisos para realizar la petici\xf3n ")):(console.log(t,"Error de servidor"),new Error(" No se pudo realizar la petici\xf3n, intentalo m\xe1s tarde "));if(3===e)throw new Error("Error de Red")}}),Object(c.a)(3))}crearGrupo(t,e){const r={headers:new a.c({"x-token":t})};return this.http.post(`${u.a}/grupos/crear`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}listarGrupos(t,e){const r={headers:new a.c({"x-token":t})};return this.http.put(`${u.a}/grupos/lista`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}info(t,e){const r={headers:new a.c({"x-token":t})};return this.http.put(`${u.a}/grupos/info`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}integrantes(t,e){const r={headers:new a.c({"x-token":t})};return this.http.put(`${u.a}/grupos/integrantes`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}fotoPerfilUsuarioMoto(t,e,r,a){const o={fileKey:"archivo",httpMethod:"PUT",headers:{"x-token":t,"x-id":a},params:{tipo:r}},s=this.transfer.create();return Object(i.a)(s.upload(e,`${u.a}/upload/grupos`,o)).pipe(Object(h.a)(t=>{throw console.log("No se pudo subir la imagen "),new Error("No se pudo subir la imagen ")}))}subirweb(t,e,r){const o={headers:new a.c({"x-token":t,"x-id":r})};return this.http.put(`${u.a}/upload/grupos`,e,o).pipe(Object(p.a)(t=>this.hanflerError(t)))}leerProducto(t,e){const r={headers:new a.c({"x-token":t})};return this.http.put(`${u.a}/grupos/filtrar`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}chat(t,e){const r={headers:new a.c({"x-token":t})};return this.http.put(`${u.a}/grupos/chat`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}descarga(t,e){return this.http.get(`https://api.mapbox.com/directions/v5/mapbox/driving-traffic/${e.coordsIniciales.lng},${e.coordsIniciales.lat};${e.coordsFinales.lng},${e.coordsFinales.lat}?geometries=geojson&steps=true&language=es&access_token=${t}`).pipe(Object(p.a)(t=>this.hanflerError(t)))}dibujar(t,e){return this.http.get(`https://api.mapbox.com/directions/v5/mapbox/driving-traffic/${e.lng},${e.lat};${e.lngf},${e.latf}?geometries=geojson&steps=true&language=es&access_token=${t}`).pipe(Object(p.a)(t=>this.hanflerError(t)))}viaje(t,e){const r={headers:new a.c({"x-token":t})};return this.http.post(`${u.a}/grupos/viajes`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}irgrupo(t,e){const r={headers:new a.c({"x-token":t})};return this.http.put(`${u.a}/grupos/bu`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}podio(t,e){const r={headers:new a.c({"x-token":t})};return this.http.put(`${u.a}/grupos/podio`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}tabla(t,e){const r={headers:new a.c({"x-token":t})};return this.http.put(`${u.a}/grupos/tabla`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}viajechao(t,e){const r={headers:new a.c({"x-token":t})};return this.http.put(`${u.a}/grupos/viajes/eliminar`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}fotospodio(t,e){const r={headers:new a.c({"x-token":t})};return this.http.put(`${u.a}/grupos/podio/fotos`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}viajeBuscarUno(t,e){const r={headers:new a.c({"x-token":t})};return this.http.put(`${u.a}/grupos/buscar`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}viajeBuscar(t,e){const r={headers:new a.c({"x-token":t})};return this.http.put(`${u.a}/grupos/viajes/filtrar`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}fotoviaje(t,e,r){const a={fileKey:"archivo",httpMethod:"PUT",headers:{"x-token":e,"x-viaje":r}},o=this.transfer.create();return Object(i.a)(o.upload(t,`${u.a}/grupos/viaje/upload`,a)).pipe(Object(h.a)(t=>{throw new Error("No se pudo subir la imagen ")}))}subirweb2(t,e,r){const o={headers:new a.c({"x-token":t,"x-viaje":r})};return this.http.put(`${u.a}/grupos/viaje/upload`,e,o).pipe(Object(p.a)(t=>this.hanflerError(t)))}fotosviaje(t,e){const r={headers:new a.c({"x-token":t})};return this.http.put(`${u.a}/grupos/viaje/fotos`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}destino(t,e){const r={headers:new a.c({"x-token":t})};return this.http.put(`${u.a}/grupos/viaje/destino`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}eliminarviaje(t,e){const r={headers:new a.c({"x-token":t})};return this.http.put(`${u.a}/grupos/viaje/eliminar`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}eliminarFoto(t,e){const r={headers:new a.c({"x-token":t})};return this.http.put(`${u.a}/grupos/viaje/eliminarfoto`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}km(t,e){const r={headers:new a.c({"x-token":t})};return this.http.put(`${u.a}/grupos/km`,e,r).pipe(Object(p.a)(t=>this.hanflerError(t)))}}return t.\u0275fac=function(e){return new(e||t)(l.Sb(a.a),l.Sb(b.a),l.Sb(f.a),l.Sb(d.rb))},t.\u0275prov=l.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);