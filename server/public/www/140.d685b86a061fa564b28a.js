(window.webpackJsonp=window.webpackJsonp||[]).push([[140],{lBrD:function(o,i,e){"use strict";e.r(i),e.d(i,"ClavePageModule",function(){return z});var t=e("ofXK"),n=e("3Pt+"),a=e("TEn/"),s=e("tyNb"),c=e("mrSG"),r=e("fXoL"),l=e("fsfq"),b=e("oQG1"),d=e("fmoy");function u(o,i){if(1&o){const o=r.Nb();r.Mb(0,"ion-item",23),r.Mb(1,"ion-label",9),r.rc(2,"A\xf1adir Veh\xedculo"),r.Lb(),r.Mb(3,"ion-buttons",24),r.Mb(4,"ion-button",25),r.Ub("click",function(){return r.lc(o),r.Wb(2).agregarvehiculo()}),r.Kb(5,"ion-icon",26),r.Lb(),r.Lb(),r.Lb()}}function h(o,i){if(1&o){const o=r.Nb();r.Mb(0,"ion-item-sliding"),r.Mb(1,"ion-item",27),r.Mb(2,"div"),r.Mb(3,"ion-input",28),r.Ub("ionChange",function(e){r.lc(o);const t=i.index;return r.Wb(2).cambioVehiculoPlaca(e,t)}),r.Lb(),r.Kb(4,"br"),r.Mb(5,"ion-input",29),r.Ub("ionChange",function(e){r.lc(o);const t=i.index;return r.Wb(2).cambioVehiculoModelo(e,t)}),r.Lb(),r.Mb(6,"ion-input",30),r.Ub("ionChange",function(e){r.lc(o);const t=i.index;return r.Wb(2).cambioVehiculoMarca(e,t)}),r.Lb(),r.Mb(7,"ion-input",31),r.Ub("ionChange",function(e){r.lc(o);const t=i.index;return r.Wb(2).cambioVehiculoNombre(e,t)}),r.Lb(),r.Lb(),r.Mb(8,"ion-select",32),r.Ub("ionChange",function(e){r.lc(o);const t=i.index;return r.Wb(2).cambioVehiculo(e,t)}),r.Mb(9,"ion-select-option",33),r.rc(10,"Moto"),r.Lb(),r.Mb(11,"ion-select-option",34),r.rc(12,"Carro"),r.Lb(),r.Lb(),r.Lb(),r.Mb(13,"ion-item-options",35),r.Mb(14,"ion-item-option",36),r.Ub("click",function(){r.lc(o);const e=i.index;return r.Wb(2).eliminarvehiculo(e)}),r.Kb(15,"ion-icon",37),r.Lb(),r.Lb(),r.Lb()}if(2&o){const o=i.$implicit;r.zb(3),r.dc("value",o.placa),r.zb(2),r.dc("value",o.modelo),r.zb(1),r.dc("value",o.marca),r.zb(1),r.dc("value",o.nombre),r.zb(1),r.ec("value",""!==o.tipo?o.tipo:"Moto")}}function p(o,i){if(1&o&&(r.Mb(0,"ion-select-option",38),r.rc(1),r.Lb()),2&o){const o=i.$implicit;r.ec("value",o.nombre),r.zb(1),r.sc(o.nombre)}}function m(o,i){if(1&o&&(r.Mb(0,"ion-select-option",38),r.rc(1),r.Lb()),2&o){const o=i.$implicit;r.ec("value",o.nombre),r.zb(1),r.sc(o.nombre)}}function g(o,i){if(1&o){const o=r.Nb();r.Mb(0,"ion-item",18),r.Mb(1,"ion-label",9),r.rc(2,"Selecciona la ciudad"),r.Lb(),r.Mb(3,"ion-select",19),r.Ub("ionChange",function(i){return r.lc(o),r.Wb(2).seleccionarCiudad(i)}),r.qc(4,m,2,2,"ion-select-option",20),r.Lb(),r.Lb()}if(2&o){const o=r.Wb(2);r.zb(3),r.dc("value",o.miciudad),r.zb(1),r.dc("ngForOf",o.ciudades)}}function M(o,i){if(1&o){const o=r.Nb();r.Mb(0,"ion-list"),r.Mb(1,"ion-item-divider",7),r.rc(2,"Privacidad de la cuenta"),r.Lb(),r.Mb(3,"ion-item",8),r.Mb(4,"ion-label",9),r.rc(5,"Cuenta P\xfablica"),r.Lb(),r.Mb(6,"ion-toggle",10),r.Ub("ionChange",function(i){return r.lc(o),r.Wb().cambio(i)}),r.Lb(),r.Lb(),r.Mb(7,"ion-item",8),r.Mb(8,"ion-label",9),r.rc(9,"Si tu cuenta es p\xfablica, los usuarios podr\xe1nver tus publicaciones e informaci\xf3n sin necesidad de seguirte. Por otro lado si te envian una solicitud, comenzar\xe1n a seguirte al instante sin antes tener que aceptar la solicitud."),r.Lb(),r.Lb(),r.Mb(10,"ion-item-divider",0),r.rc(11,"DATOS DEL USUARIO"),r.Lb(),r.Mb(12,"ion-item",11),r.Mb(13,"ion-label",9),r.rc(14,"NOMBRE"),r.Lb(),r.Lb(),r.Mb(15,"ion-item",12),r.Mb(16,"ion-input",13),r.Ub("ngModelChange",function(i){return r.lc(o),r.Wb().ncompleto=i}),r.Lb(),r.Lb(),r.qc(17,u,6,0,"ion-item",14),r.qc(18,h,16,5,"ion-item-sliding",15),r.Mb(19,"ion-item",11),r.Mb(20,"ion-label",9),r.rc(21,"TEL\xc9FONO O CELULAR"),r.Lb(),r.Lb(),r.Mb(22,"ion-item",12),r.Mb(23,"ion-input",16),r.Ub("ngModelChange",function(i){return r.lc(o),r.Wb().tel=i}),r.Lb(),r.Lb(),r.Mb(24,"ion-item",11),r.Mb(25,"ion-label",9),r.rc(26,"CORREO ELECTR\xd3NICO"),r.Lb(),r.Lb(),r.Mb(27,"ion-item",12),r.Mb(28,"ion-input",17),r.Ub("ngModelChange",function(i){return r.lc(o),r.Wb().correo=i}),r.Lb(),r.Lb(),r.Mb(29,"ion-item",11),r.Mb(30,"ion-label",9),r.rc(31,"PAIS"),r.Lb(),r.Lb(),r.Mb(32,"ion-item",18),r.Mb(33,"ion-label",9),r.rc(34,"Selecciona el Pa\xeds"),r.Lb(),r.Mb(35,"ion-select",19),r.Ub("ionChange",function(i){return r.lc(o),r.Wb().listarCiudades(i)}),r.qc(36,p,2,2,"ion-select-option",20),r.Lb(),r.Lb(),r.Mb(37,"ion-item",11),r.Mb(38,"ion-label",9),r.rc(39,"CIUDAD"),r.Lb(),r.Lb(),r.qc(40,g,5,2,"ion-item",21),r.Mb(41,"ion-button",22),r.Ub("click",function(){return r.lc(o),r.Wb().guardar()}),r.rc(42,"GUARDAR DATOS"),r.Lb(),r.Lb()}if(2&o){const o=r.Wb();r.zb(6),r.dc("checked",o.publica),r.zb(10),r.dc("ngModel",o.ncompleto),r.zb(1),r.dc("ngIf","TALLER_ROLE"!==o.role),r.zb(1),r.dc("ngForOf",o.vehiculos),r.zb(5),r.dc("ngModel",o.tel),r.zb(5),r.dc("ngModel",o.correo),r.zb(7),r.dc("value",o.pais),r.zb(1),r.dc("ngForOf",o.paises),r.zb(4),r.dc("ngIf",o.ciudad)}}function f(o,i){if(1&o){const o=r.Nb();r.Mb(0,"div"),r.Mb(1,"ion-item",39),r.Mb(2,"ion-label",9),r.rc(3,"Contrase\xf1a Actual"),r.Lb(),r.Lb(),r.Mb(4,"ion-item",12),r.Mb(5,"ion-input",40),r.Ub("ngModelChange",function(i){return r.lc(o),r.Wb().valido=i}),r.Lb(),r.Lb(),r.Mb(6,"ion-button",41),r.Ub("click",function(){return r.lc(o),r.Wb().validar()}),r.rc(7,"Validar Contrase\xf1a"),r.Lb(),r.Lb()}if(2&o){const o=r.Wb();r.zb(5),r.dc("ngModel",o.valido)}}function v(o,i){1&o&&(r.Mb(0,"div",42),r.Kb(1,"ion-spinner",43),r.rc(2," Validando, por favor espere... "),r.Lb())}function L(o,i){if(1&o){const o=r.Nb();r.Mb(0,"div"),r.Mb(1,"ion-item",8),r.Mb(2,"ion-label",9),r.rc(3,"Escriba su contrase\xf1a"),r.Lb(),r.Lb(),r.Mb(4,"ion-item",44),r.Mb(5,"ion-input",45),r.Ub("ngModelChange",function(i){return r.lc(o),r.Wb().clave=i}),r.Lb(),r.Lb(),r.Mb(6,"ion-item",8),r.Mb(7,"ion-label",9),r.rc(8,"Confirmar la contrase\xf1a"),r.Lb(),r.Lb(),r.Mb(9,"ion-item",44),r.Mb(10,"ion-input",46),r.Ub("ngModelChange",function(i){return r.lc(o),r.Wb().confirmar=i}),r.Lb(),r.Lb(),r.Mb(11,"ion-button",41),r.Ub("click",function(){return r.lc(o),r.Wb().actualizar()}),r.rc(12,"Actualizar Contrase\xf1a"),r.Lb(),r.Lb()}if(2&o){const o=r.Wb();r.zb(5),r.dc("ngModel",o.clave),r.zb(5),r.dc("ngModel",o.confirmar)}}const C=[{path:"",component:(()=>{class o{constructor(o,i,e){this.almacenamiento=o,this.apiUsuario=i,this.toast=e,this.validado=!1,this.clave="",this.confirmar="",this.valido="",this.vl=!1,this.paises=[],this.ciudades=[],this.ciudad=!1,this.load=!1,this.pais="",this.miciudad="",this.correo="",this.tel=0,this.ncompleto="",this.placa="",this.cargatodo=!1,this.role="",this.vehiculos=[],this.publica=!1}ngOnInit(){}ionViewWillEnter(){this.datos()}refrescando(o){this.cargatodo=!1,this.datos().then(()=>{o.detail.complete()}).catch(()=>{o.detail.complete()})}agregarvehiculo(){this.vehiculos.push({placa:"",tipo:"Moto",nombre:"",modelo:"",marca:""})}eliminarvehiculo(o){this.vehiculos.splice(o,1)}cambioVehiculoPlaca(o,i){this.vehiculos[i].placa=o.detail.value}cambioVehiculoNombre(o,i){this.vehiculos[i].nombre=o.detail.value}cambioVehiculoModelo(o,i){this.vehiculos[i].modelo=o.detail.value}cambioVehiculoMarca(o,i){this.vehiculos[i].marca=o.detail.value}cambioVehiculo(o,i){this.vehiculos[i].tipo=o.detail.value}validar(){return Object(c.a)(this,void 0,void 0,function*(){this.vl=!0;const o=yield this.almacenamiento.obtenerToken();o&&this.apiUsuario.validarClave(o.token,{clave:this.valido}).subscribe(o=>{o.exe?this.validado=!0:this.toast.toastError("la contrase\xf1a no es correcta"),this.vl=!1},o=>{this.vl=!1,this.toast.toastError("No se pudo validar la contrase\xf1a, int\xe9ntelo m\xe1s tarde")})})}actualizar(){return Object(c.a)(this,void 0,void 0,function*(){if(this.clave===this.confirmar&&""!==this.clave&&""!==this.confirmar){const o=yield this.almacenamiento.obtenerToken();o&&this.apiUsuario.editarClaves(o.token,{clave:this.confirmar}).subscribe(o=>{o.exe?(this.validado=!1,this.toast.toastExitoso("Contrase\xf1a actualizada")):this.toast.toastError("No se pudo actualizar la contrase\xf1a, int\xe9ntelo m\xe1s tarde")},o=>{this.toast.toastError("No se pudo actualizar la contrase\xf1a, int\xe9ntelo m\xe1s tarde")})}else this.toast.toastError("Las contrase\xf1as no co\xednciden")})}datos(){return Object(c.a)(this,void 0,void 0,function*(){const o=yield this.almacenamiento.obtenerToken();o&&(this.role=o.role,this.apiUsuario.usuarioDatos(o.token).subscribe(o=>{o.exe?(this.publica=!!o.response.publica&&o.response.publica,this.ncompleto=o.response.nombrecompleto,this.tel=o.response.tel,this.correo=o.response.correo,this.vehiculos=o.response.vehiculo?o.response.vehiculo:[],this.pais=o.response.pais,this.miciudad=o.response.ciudad,this.cargatodo=!0,this.listarPaises()):this.toast.toastError("No se pudo traer los datos del usuario, int\xe9ntelo m\xe1s tarde")},o=>{this.toast.toastError("No se pudo traer los datos del usuario, int\xe9ntelo m\xe1s tarde")}))})}cambio(o){return Object(c.a)(this,void 0,void 0,function*(){const i=yield this.almacenamiento.obtenerToken();i&&this.apiUsuario.tipo(i.token,{id:i._id,estado:o.detail.checked}).subscribe(i=>{i.exe?(this.publica=o.detail.checked,this.toast.Especial("Privacidad actualizada")):this.toast.toastError("No se pudo cambiar la privacidad de la cuenta, int\xe9ntelo m\xe1s tarde")},o=>{this.toast.toastError("No se pudo cambiar la privacidad de la cuenta, int\xe9ntelo m\xe1s tarde")})})}listarPaises(){this.apiUsuario.listarPaises().subscribe(o=>{o.exe?(this.paises=o.response,""!==this.pais&&this.listarCiudades({detail:{value:this.pais}})):this.paises.push("Colombia")},o=>{this.paises.push("Colombia")})}listarCiudades(o){this.pais=o.detail.value,this.miciudad=""!==this.miciudad?this.miciudad:"";const i=this.paises.filter(o=>o.nombre===this.pais)[0]._id;this.apiUsuario.listarCiudades(i).subscribe(o=>{o.exe?(this.ciudades=o.response,this.ciudad=!0):this.toast.toastError("No se pudo traer las ciudades, intente registrarse m\xe1s tarde")},o=>{this.toast.toastError("No se pudo traer las ciudades, intente registrarse m\xe1s tarde")})}seleccionarCiudad(o){this.miciudad=o.detail.value}guardar(){return Object(c.a)(this,void 0,void 0,function*(){if(0===this.vehiculos.length||this.vehiculos.filter(o=>""===o.placa||""===o.tipo).length>0)this.toast.toastError("Debe de registar aunque sea un Veh\xedculo en su cuenta o la informaci\xf3n esta incorrecta");else{const o=yield this.almacenamiento.obtenerToken();o&&(this.role=o.role,this.apiUsuario.editarUusuario(o.token,{ciudad:this.miciudad,pais:this.pais,vehiculos:this.vehiculos,nombrecompleto:this.ncompleto,telefono:this.tel,correo:this.correo}).subscribe(o=>{o.exe?this.toast.Especial("Uusario editado correctamente"):this.toast.toastError("No se pudo editar los datos del usuario, int\xe9ntelo m\xe1s tarde")},o=>{this.toast.toastError("No se pudo editar los datos del usuario, int\xe9ntelo m\xe1s tarde")}))}})}}return o.\u0275fac=function(i){return new(i||o)(r.Jb(l.a),r.Jb(b.a),r.Jb(d.a))},o.\u0275cmp=r.Db({type:o,selectors:[["app-clave"]],decls:15,vars:4,consts:[["color","oscuro"],["slot","start","icon","chevron-back-outline","defaultHref","/central/menu"],[1,"ion-padding"],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],[4,"ngIf"],["class","fl",4,"ngIf"],["color","masoscuro"],["lines","none","mode","md",1,"sinfondo","ion-margin-top"],[1,"ion-text-wrap"],["slot","end","color","primary","mode","ios",3,"checked","ionChange"],["color","light","lines","none","mode","md",1,"ion-margin-top"],["lines","none","mode","ios"],["placeholder","Escribe tu Nombre","type","text",3,"ngModel","ngModelChange"],["lines","none","color","light","class"," ion-margin-top","mode","md",4,"ngIf"],[4,"ngFor","ngForOf"],["placeholder","Digita tu n\xfamero tel\xe9fono o celular","type","number",3,"ngModel","ngModelChange"],["placeholder","Escribe tu correo","type","text",3,"ngModel","ngModelChange"],["lines","none","mode","md",1,"noborder"],["okText","Aceptar","cancelText","Cancelar",3,"value","ionChange"],[3,"value",4,"ngFor","ngForOf"],["lines","none","class"," noborder","mode","md",4,"ngIf"],["color","barra","expand","block","mode","ios",3,"click"],["lines","none","color","light","mode","md",1,"ion-margin-top"],["slot","end"],["color","barra",3,"click"],["name","add","slot","icon-only"],["lines","none","mode","ios",1,"sinfondo","sep"],["placeholder","Placa","type","text",3,"value","ionChange"],["placeholder","M\xf3delo","type","text",3,"value","ionChange"],["placeholder","Marca","type","text",3,"value","ionChange"],["placeholder","Nombre","type","text",3,"value","ionChange"],["slot","end","placeholder","Tipo",3,"value","ionChange"],["value","Moto"],["value","Carro"],["side","end"],["color","danger",3,"click"],["name","trash","slot","icon-only"],[3,"value"],["lines","none","mode","md",1,"ion-margin-top"],["placeholder","Escribe tu contrase\xf1a","type","password",3,"ngModel","ngModelChange"],["color","light","expand","block","mode","ios",3,"click"],[1,"fl"],["name","crescent","color","oscuro"],["color","light","lines","none","mode","ios",1,"campo","ion-margin-top"],["placeholder","Escriba nueva contrase\xf1a","type","password",3,"ngModel","ngModelChange"],["placeholder","Confirmar nueva contrase\xf1a","type","password",3,"ngModel","ngModelChange"]],template:function(o,i){1&o&&(r.Mb(0,"ion-header"),r.Mb(1,"ion-toolbar",0),r.Kb(2,"ion-back-button",1),r.Mb(3,"ion-title"),r.rc(4,"Informaci\xf3n"),r.Lb(),r.Lb(),r.Lb(),r.Mb(5,"ion-content",2),r.Mb(6,"ion-refresher",3),r.Ub("ionRefresh",function(o){return i.refrescando(o)}),r.Kb(7,"ion-refresher-content",4),r.Lb(),r.Mb(8,"ion-list"),r.qc(9,M,43,9,"ion-list",5),r.Mb(10,"ion-item-divider",0),r.rc(11,"Cambiar Contrase\xf1a"),r.Lb(),r.qc(12,f,8,1,"div",5),r.qc(13,v,3,0,"div",6),r.qc(14,L,13,2,"div",5),r.Lb(),r.Lb()),2&o&&(r.zb(9),r.dc("ngIf",i.cargatodo),r.zb(3),r.dc("ngIf",!i.validado),r.zb(1),r.dc("ngIf",!i.validado&&i.vl),r.zb(1),r.dc("ngIf",i.validado))},directives:[a.z,a.kb,a.g,a.h,a.ib,a.t,a.Q,a.R,a.L,t.j,a.G,a.F,a.K,a.jb,a.d,a.E,a.xb,n.i,n.k,t.i,a.rb,a.X,a.wb,a.j,a.k,a.A,a.J,a.Y,a.I,a.H,a.cb],styles:[".fl[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:5px 0}ion-spinner[_ngcontent-%COMP%]{margin-right:5px}.sep[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.1);margin-bottom:5px}"]}),o})()}];let U=(()=>{class o{}return o.\u0275mod=r.Hb({type:o}),o.\u0275inj=r.Gb({factory:function(i){return new(i||o)},imports:[[s.i.forChild(C)],s.i]}),o})(),z=(()=>{class o{}return o.\u0275mod=r.Hb({type:o}),o.\u0275inj=r.Gb({factory:function(i){return new(i||o)},imports:[[t.b,n.e,a.lb,U]]}),o})()}}]);