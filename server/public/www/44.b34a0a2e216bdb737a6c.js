(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{"6V7b":function(t,e,i){"use strict";i.r(e),i.d(e,"PedidoInfoPageModule",function(){return z});var o=i("ofXK"),a=i("3Pt+"),n=i("TEn/"),r=i("tyNb"),c=i("mrSG"),s=i("HDdC"),d=i("fXoL"),l=i("fsfq"),p=i("fmoy"),b=i("HavB"),h=i("7JkF"),u=i("SpuA");function f(t,e){if(1&t){const t=d.Pb();d.Ob(0,"ion-buttons",8),d.Ob(1,"ion-button",9),d.Wb("click",function(){return d.pc(t),d.Yb().guardar()}),d.Mb(2,"ion-icon",10),d.Nb(),d.Nb()}}function m(t,e){1&t&&(d.Ob(0,"div",11),d.Mb(1,"ion-spinner",12),d.Ob(2,"div"),d.wc(3," Cargando informaci\xf3n del pedido... "),d.Mb(4,"br"),d.Nb(),d.Nb())}function g(t,e){if(1&t){const t=d.Pb();d.Ob(0,"ion-textarea",18),d.Wb("ngModelChange",function(e){return d.pc(t),d.Yb(3).texto=e}),d.Nb()}if(2&t){const t=d.Yb(3);d.fc("ngModel",t.texto)("value",t.texto)}}function O(t,e){if(1&t&&(d.Ob(0,"p"),d.wc(1),d.Nb()),2&t){const t=d.Yb(3);d.Ab(1),d.xc(t.texto)}}function v(t,e){if(1&t&&(d.Ob(0,"div",16),d.vc(1,g,1,2,"ion-textarea",17),d.Mb(2,"br"),d.vc(3,O,2,1,"p",7),d.Nb()),2&t){const t=d.Yb(2);d.Ab(1),d.fc("ngIf",t.id===t.pedido.taller._id),d.Ab(2),d.fc("ngIf",t.id!==t.pedido.taller._id)}}function w(t,e){if(1&t){const t=d.Pb();d.Ob(0,"div",25),d.Ob(1,"ion-item",26),d.Ob(2,"ion-label"),d.wc(3,"Cambiar estado del pedido"),d.Nb(),d.Ob(4,"ion-select",27),d.Wb("ionChange",function(e){return d.pc(t),d.Yb(3).cambiarEstado(e)}),d.Ob(5,"ion-select-option",28),d.wc(6,"Pedido en preparaci\xf3n"),d.Nb(),d.Ob(7,"ion-select-option",29),d.wc(8,"Pedido listo para su entrega"),d.Nb(),d.Ob(9,"ion-select-option",30),d.wc(10,"Pedido en camino"),d.Nb(),d.Ob(11,"ion-select-option",31),d.wc(12,"Pedido entregado"),d.Nb(),d.Nb(),d.Nb(),d.Nb()}}function x(t,e){if(1&t&&(d.Ob(0,"ion-item"),d.Ob(1,"ion-label",33),d.Ob(2,"strong"),d.wc(3),d.Nb(),d.Ob(4,"div"),d.wc(5),d.Zb(6,"cambioUTC"),d.Nb(),d.Nb(),d.Nb()),2&t){const t=e.$implicit;d.Db("verdee",t.estado.includes("entregado")),d.Ab(3),d.xc(t.estado),d.Ab(2),d.xc(d.ac(6,4,t.fecha))}}function N(t,e){if(1&t&&(d.Ob(0,"div"),d.Ob(1,"h3"),d.wc(2,"Estados"),d.Nb(),d.vc(3,x,7,6,"ion-item",32),d.Nb()),2&t){const t=d.Yb(3);d.Ab(3),d.fc("ngForOf",t.estados)}}function E(t,e){if(1&t&&(d.Ob(0,"ion-item"),d.Ob(1,"ion-label"),d.Ob(2,"strong"),d.wc(3,"Domiciliario actual: "),d.Nb(),d.Mb(4,"br"),d.wc(5),d.Nb(),d.Nb()),2&t){const t=d.Yb(4);d.Ab(5),d.xc(t.mapa.domiciliario.nombrecompleto)}}function k(t,e){if(1&t&&(d.Ob(0,"ion-select-option",38),d.wc(1),d.Nb()),2&t){const t=e.$implicit;d.fc("value",t),d.Ab(1),d.xc(t.nombrecompleto)}}function M(t,e){if(1&t){const t=d.Pb();d.Ob(0,"ion-item",26),d.Ob(1,"ion-label"),d.wc(2,"Escoger Domiciliario"),d.Nb(),d.Ob(3,"ion-select",27),d.Wb("ionChange",function(e){return d.pc(t),d.Yb(4).escogerdomiciliario(e)}),d.vc(4,k,2,2,"ion-select-option",37),d.Nb(),d.Nb()}if(2&t){const t=d.Yb(4);d.Ab(4),d.fc("ngForOf",t.domicilios)}}function P(t,e){1&t&&(d.Ob(0,"ion-chip",41),d.wc(1,"El usuario a\xfan no ha compartido su ubicaci\xf3n"),d.Nb())}function I(t,e){if(1&t){const t=d.Pb();d.Ob(0,"ion-button",42),d.Wb("click",function(){return d.pc(t),d.Yb(5).entregar()}),d.wc(1,"ENTREGAR PEDIDO"),d.Nb()}}function C(t,e){if(1&t){const t=d.Pb();d.Ob(0,"ion-button",42),d.Wb("click",function(){return d.pc(t),d.Yb(5).entregar2()}),d.wc(1,"RASTREAR PEDIDO"),d.Nb()}}function j(t,e){if(1&t&&(d.Ob(0,"div"),d.vc(1,P,2,0,"ion-chip",39),d.vc(2,I,2,0,"ion-button",40),d.vc(3,C,2,0,"ion-button",40),d.Nb()),2&t){const t=d.Yb(4);d.Ab(1),d.fc("ngIf",!t.mapa.ubicacion),d.Ab(1),d.fc("ngIf",t.id===t.mapa.domiciliario._id&&t.mapa.ubicacion),d.Ab(1),d.fc("ngIf",t.id!==t.mapa.domiciliario._id&&t.mapa.ubicacion)}}function _(t,e){if(1&t){const t=d.Pb();d.Ob(0,"ion-card",20),d.Ob(1,"ion-card-header"),d.Mb(2,"img",34),d.Nb(),d.Ob(3,"ion-card-title"),d.wc(4,"Mapa del Domicilio "),d.Nb(),d.Ob(5,"ion-card-content"),d.Ob(6,"div",25),d.Ob(7,"ion-item",26),d.Ob(8,"ion-label"),d.wc(9,"Habilitar domicilio"),d.Nb(),d.Ob(10,"ion-toggle",35),d.Wb("ionChange",function(e){return d.pc(t),d.Yb(3).habilitar(e)}),d.Nb(),d.Nb(),d.Mb(11,"br"),d.vc(12,E,6,1,"ion-item",7),d.Mb(13,"br"),d.vc(14,M,5,1,"ion-item",36),d.Nb(),d.Mb(15,"br"),d.vc(16,j,4,3,"div",7),d.Nb(),d.Nb()}if(2&t){const t=d.Yb(3);d.Ab(10),d.fc("checked",t.habilitado),d.Ab(2),d.fc("ngIf",t.mapa&&t.mapa.domiciliario&&""!==t.mapa.domiciliario.nombrecompleto),d.Ab(2),d.fc("ngIf",t.mapa&&t.mapa.apagar),d.Ab(2),d.fc("ngIf",t.mapa&&t.mapa.domiciliario)}}function A(t,e){1&t&&(d.Ob(0,"ion-chip",41),d.wc(1,"El usuario a\xfan no ha compartido su ubicaci\xf3n"),d.Nb())}function y(t,e){if(1&t){const t=d.Pb();d.Ob(0,"ion-button",44),d.Wb("click",function(){return d.pc(t),d.Yb(4).entregar()}),d.wc(1,"ENTREGAR PEDIDO"),d.Nb()}}function Y(t,e){if(1&t&&(d.Ob(0,"ion-card",20),d.Ob(1,"ion-card-header"),d.Mb(2,"img",34),d.Nb(),d.Ob(3,"ion-card-title"),d.wc(4,"Mapa del Domicilio "),d.Nb(),d.Ob(5,"ion-card-content"),d.vc(6,A,2,0,"ion-chip",39),d.vc(7,y,2,0,"ion-button",43),d.Nb(),d.Nb()),2&t){const t=d.Yb(3);d.Ab(6),d.fc("ngIf",!t.mapa.ubicacion),d.Ab(1),d.fc("ngIf",t.mapa.ubicacion)}}function D(t,e){if(1&t){const t=d.Pb();d.Ob(0,"ion-card",20),d.Ob(1,"ion-card-header"),d.Mb(2,"img",34),d.Nb(),d.Ob(3,"ion-card-title"),d.wc(4,"Mapa del Domicilio "),d.Nb(),d.Ob(5,"ion-card-content"),d.Ob(6,"ion-button",44),d.Wb("click",function(){return d.pc(t),d.Yb(3).entregar2()}),d.wc(7,"RASTREAR PEDIDO"),d.Nb(),d.Nb(),d.Nb()}}function $(t,e){1&t&&(d.Ob(0,"ion-card-subtitle"),d.wc(1,"Comparte tu ubcicaci\xf3n para que el domiciliario lleve tu pedido "),d.Nb())}function T(t,e){1&t&&(d.Ob(0,"ion-card-subtitle"),d.wc(1,"Ya compartiste la ubicaci\xf3n, puedes ingresar para saber por donde viene tu pedido "),d.Nb())}function R(t,e){1&t&&(d.Ob(0,"ion-chip",48),d.wc(1,"Ubicaci\xf3n compartida para el taller"),d.Nb())}function S(t,e){1&t&&(d.Ob(0,"ion-chip",49),d.wc(1,"Espera hasta que el domiciliario comparta su ubicaci\xf3n"),d.Nb())}function L(t,e){1&t&&(d.Ob(0,"ion-chip",41),d.wc(1,"A\xfan no has compartido la ubicaci\xf3n"),d.Nb())}function W(t,e){if(1&t){const t=d.Pb();d.Ob(0,"ion-card",45),d.Wb("click",function(){return d.pc(t),d.Yb(3).navegar()}),d.Ob(1,"ion-card-header"),d.Mb(2,"br"),d.Mb(3,"img",34),d.Nb(),d.Ob(4,"ion-card-title"),d.wc(5,"Mapa del Domicilio "),d.Nb(),d.vc(6,$,2,0,"ion-card-subtitle",7),d.vc(7,T,2,0,"ion-card-subtitle",7),d.Ob(8,"div"),d.vc(9,R,2,0,"ion-chip",46),d.Mb(10,"br"),d.vc(11,S,2,0,"ion-chip",47),d.vc(12,L,2,0,"ion-chip",39),d.Nb(),d.Nb()}if(2&t){const t=d.Yb(3);d.Ab(6),d.fc("ngIf",!t.mapa.ubicacion),d.Ab(1),d.fc("ngIf",t.mapa.ubicacion),d.Ab(2),d.fc("ngIf",t.mapa.ubicacion),d.Ab(2),d.fc("ngIf",t.mapa.ubicacion&&!t.mapa.ubicacionactual),d.Ab(1),d.fc("ngIf",!t.mapa.ubicacion)}}function F(t,e){if(1&t&&(d.Ob(0,"div",19),d.Ob(1,"ion-card",20),d.Ob(2,"ion-card-header"),d.Mb(3,"img",21),d.Nb(),d.Ob(4,"ion-card-title"),d.wc(5,"Estados del pedido "),d.Nb(),d.Ob(6,"ion-card-content"),d.vc(7,w,13,0,"div",22),d.Mb(8,"br"),d.vc(9,N,4,1,"div",7),d.Nb(),d.Nb(),d.vc(10,_,17,4,"ion-card",23),d.vc(11,Y,8,2,"ion-card",23),d.vc(12,D,8,0,"ion-card",23),d.vc(13,W,13,5,"ion-card",24),d.Nb()),2&t){const t=d.Yb(2);d.Ab(7),d.fc("ngIf",t.id===t.pedido.taller._id),d.Ab(2),d.fc("ngIf",t.estados.length>0),d.Ab(1),d.fc("ngIf",t.id===t.pedido.taller._id),d.Ab(1),d.fc("ngIf",t.mapa&&t.mapa.domiciliario&&t.id===t.mapa.domiciliario._id&&t.id!==t.pedido.taller._id),d.Ab(1),d.fc("ngIf",t.mapa&&t.mapa.domiciliario&&t.id!==t.mapa.domiciliario._id&&t.id!==t.pedido.creador._id&&t.id!==t.pedido.taller._id),d.Ab(1),d.fc("ngIf",t.mapa&&t.id===t.pedido.creador._id&&t.mapa.apagar)}}function G(t,e){if(1&t&&(d.Ob(0,"div"),d.Ob(1,"h2",13),d.wc(2,"Descrici\xf3n del pedido"),d.Nb(),d.vc(3,v,4,2,"div",14),d.vc(4,F,14,6,"div",15),d.Nb()),2&t){const t=d.Yb();d.Ab(3),d.fc("ngIf",t.pedido),d.Ab(1),d.fc("ngIf",t.cargan)}}const J=[{path:"",component:(()=>{class t{constructor(t,e,i,o,a,n,r){this.router=t,this.alert=e,this.almacenamiento=i,this.toast=o,this.apiPedidos=a,this.active=n,this.socket=r,this.configurando=!1,this.cargado=!1,this.id="",this.texto="",this.estados=[],this.habilitado=!1,this.domicilios=[],this.editar=!1,this.cargan=!1,this.frenar=!1,this.escucharNotificacion().subscribe(t=>{"pedido"===t.action&&this.informaci\u00f3nPedido()})}ngOnInit(){}ionViewWillEnter(){this.frenar=!1,this.informaci\u00f3nPedido()}refrescando(t){this.informaci\u00f3nPedido().then(()=>{t.detail.complete()}).catch(()=>{t.detail.complete()})}"informaci\xf3nPedido"(){return Object(c.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&(this.id=t._id,this.apiPedidos.infoPedido(t.token,{id:this.active.snapshot.paramMap.get("id")}).subscribe(t=>{console.log(t),t.exe?t.response.length>0&&(this.pedido=t.response[0],this.domicilios=t.response[0].accesos.filter(t=>t._id!==this.pedido.creador._id),this.texto=t.response[0].descripcion,this.estadosLista(this.pedido),this.estadosMapa(this.pedido)):(this.toast.toastError("No se pudo consultar el pedido, int\xe9ntelo m\xe1s tarde"),this.router.navigate(["/central/menu/"])),this.cargado=!0},t=>{this.toast.toastError("No se pudo consultar el pedido, int\xe9ntelo m\xe1s tarde"),this.router.navigate(["/central/menu/"])}))})}estadosLista(t){return Object(c.a)(this,void 0,void 0,function*(){const e=yield this.almacenamiento.obtenerToken();e&&this.apiPedidos.consultarEstados(e.token,{pedido:t}).subscribe(t=>{t.exe?(console.log(t),this.estados=t.response):this.toast.toastError("No se pudo consultar el pedido, int\xe9ntelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo consultar el pedido, int\xe9ntelo m\xe1s tarde")})})}estadosMapa(t){return Object(c.a)(this,void 0,void 0,function*(){const e=yield this.almacenamiento.obtenerToken();e&&this.apiPedidos.consultarMapa(e.token,{pedido:t}).subscribe(t=>{t.exe?(console.log(t),t.response.length>0&&(this.mapa=t.response[0],this.habilitado=this.mapa.apagar),this.cargan=!0):this.toast.toastError("No se pudo consultar el mapa, int\xe9ntelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo consultar el mapa, int\xe9ntelo m\xe1s tarde")})})}guardar(){return Object(c.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&this.apiPedidos.infoPedidoPut(t.token,{id:this.active.snapshot.paramMap.get("id"),texto:this.texto}).subscribe(t=>{console.log(t),t.exe?(t.response&&(this.texto=t.response.descripcion),this.toast.toastExitoso("Descripci\xf3n actualizada")):(this.toast.toastError("No se pudo guardar la descripci\xf3n del pedido, int\xe9ntelo m\xe1s tarde"),this.router.navigate(["/central/menu/"])),this.cargado=!0},t=>{this.toast.toastError("No se pudo guardar la descripci\xf3n del pedido, int\xe9ntelo m\xe1s tarde"),this.router.navigate(["/central/menu/"])})})}cambiarEstado(t){return Object(c.a)(this,void 0,void 0,function*(){console.log(t);const e=yield this.alert.create({header:"Cambiar Estado",message:"\xbfEstas seguro de cambiar el estado del pedido a:"+t.detail.value,buttons:[{text:"Cancelar",cssClass:"cancelarAlerta",role:"cancel",handler:()=>{}},{text:"Crear",cssClass:"botonalerta",handler:e=>Object(c.a)(this,void 0,void 0,function*(){const e=yield this.almacenamiento.obtenerToken();e&&this.apiPedidos.crearEstados(e.token,{pedido:this.pedido._id,estado:t.detail.value,destino:this.pedido.creador._id,usuarioID:this.pedido.creador.usuarioID}).subscribe(e=>{e.exe?(this.estados.push(e.response),this.toast.Especial("El pedido ha cambiado de estado"),this.socket.emit("estadosPedido",{accesos:this.pedido.accesos,id:this.pedido._id,estado:t.detail.value})):this.toast.toastError("No se pudo cambiar el estado, int\xe9ntelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo cambiar el estado, int\xe9ntelo m\xe1s tarde")})})}]});yield e.present()})}habilitar(t){return Object(c.a)(this,void 0,void 0,function*(){if(console.log(t.detail.checked),this.habilitado=t.detail.checked,this.mapa){const e=yield this.almacenamiento.obtenerToken();e&&this.apiPedidos.editarMapaInfo(e.token,{id:this.mapa._id,destino:this.pedido.creador._id,apagar:t.detail.checked}).subscribe(t=>{t.exe?(this.mapa=t.response,this.toast.toastExitoso("Domicilio editado")):this.toast.toastError("No se pudo editar el domicilio, int\xe9ntelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo editar el domicilio, int\xe9ntelo m\xe1s tarde")})}else{console.log("No existe");const t=yield this.almacenamiento.obtenerToken();t&&this.apiPedidos.crearMapa(t.token,{pedido:this.pedido._id,destino:this.pedido.creador._id}).subscribe(t=>{t.exe?(this.mapa=t.response,this.habilitado=!0,this.toast.toastExitoso("Domicilio habilitado")):this.toast.toastError("No se pudo crear el domicilio, int\xe9ntelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo crear el domicilio, int\xe9ntelo m\xe1s tarde")})}})}escogerdomiciliario(t){return Object(c.a)(this,void 0,void 0,function*(){console.log(t);const e=yield this.almacenamiento.obtenerToken();e&&this.apiPedidos.editarMapaInfoD(e.token,{id:this.mapa._id,domiciliario:t.detail.value._id}).subscribe(t=>{t.exe?(this.mapa=t.response,this.toast.toastExitoso("Domicilio editado")):this.toast.toastError("No se pudo editar el domicilio, int\xe9ntelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo editar el domicilio, int\xe9ntelo m\xe1s tarde")})})}escucharNotificacion(){if(!this.frenar)return new s.a(t=>{this.socket.on("notificacion",e=>{t.next(e)})})}navegar(){return Object(c.a)(this,void 0,void 0,function*(){const t=yield this.alert.create({header:"Atenci\xf3n!",message:"No olvide encender su GPS, si lo tiene encendido haga caso omiso al mensaje",buttons:[{text:"Cancelar",cssClass:"cancelarAlerta",role:"cancel",handler:()=>{}},{text:"Listo",cssClass:"botonalerta",handler:t=>Object(c.a)(this,void 0,void 0,function*(){this.mapa.ubicacion?this.mapa.ubicacionactual?this.router.navigate(["/central/menu/pedidos/mapa","vivo",this.mapa._id]):this.toast.toastError("A\xfan no se ha confirmado la ubicaci\xf3n del domiciliario"):this.router.navigate(["/central/menu/pedidos/mapa","destino",this.mapa._id])})}]});yield t.present()})}entregar(){return Object(c.a)(this,void 0,void 0,function*(){if(this.mapa.ubicacionactual)this.router.navigate(["/central/menu/pedidos/mapa","entrega",this.mapa._id]);else{const t=yield this.alert.create({header:"Atenci\xf3n!",message:"\xbfYa vas a despachar el pedido?, una vez que aceptes el cliente recibir\xe1 una notificaci\xf3n de que su pedido esta en camino, no olvides encender tu GPS ",buttons:[{text:"Cancelar",cssClass:"cancelarAlerta",role:"cancel"},{text:"Confirmar",cssClass:"botonalerta",handler:()=>{this.socket.emit("entregaPedido",{pedido:this.pedido}),this.router.navigate(["/central/menu/pedidos/mapa","entrega",this.mapa._id])}}]});yield t.present()}})}entregar2(){return Object(c.a)(this,void 0,void 0,function*(){this.mapa.ubicacionactual&&this.router.navigate(["/central/menu/pedidos/mapa","vivo",this.mapa._id])})}ionViewWillLeave(){this.frenar=!0}}return t.\u0275fac=function(e){return new(e||t)(d.Lb(r.g),d.Lb(n.b),d.Lb(l.a),d.Lb(p.a),d.Lb(b.a),d.Lb(r.a),d.Lb(h.a))},t.\u0275cmp=d.Fb({type:t,selectors:[["app-pedido-info"]],decls:12,vars:3,consts:[["color","oscuro"],["slot","start","icon","chevron-back-outline","defaultHref","/central/menu/pedidos"],["slot","end",4,"ngIf"],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],["class","flcenter ion-padding",4,"ngIf"],[1,"divider","light"],[4,"ngIf"],["slot","end"],[3,"click"],["name","checkmark-outline","slot","icon-only"],[1,"flcenter","ion-padding"],["name","crescent","color","oscuro"],[1,"titulo"],["class","pedido",4,"ngIf"],["class","opts",4,"ngIf"],[1,"pedido"],["rows","3","placeholder","Escriba la descripci\xf3n del pedido",3,"ngModel","value","ngModelChange",4,"ngIf"],["rows","3","placeholder","Escriba la descripci\xf3n del pedido",3,"ngModel","value","ngModelChange"],[1,"opts"],["mode","ios"],["src","/assets/Estados.png","width","100px"],["class","cambiar",4,"ngIf"],["mode","ios",4,"ngIf"],["mode","ios",3,"click",4,"ngIf"],[1,"cambiar"],["color","light"],["color","light","value","",3,"ionChange"],["value","Pedido en preparaci\xf3n"],["value","Pedido listo para su entrega"],["value","Pedido en camino"],["value","Pedido entregado"],[3,"verdee",4,"ngFor","ngForOf"],[1,"ion-text-wrap"],["src","/assets/MapaDomicilio.png","width","100px"],["mode","ios","slot","end","color","barra",3,"checked","ionChange"],["color","light",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["color","danger",4,"ngIf"],["color","primary","expand","block","mode","ios",3,"click",4,"ngIf"],["color","danger"],["color","primary","expand","block","mode","ios",3,"click"],["mode","ios","color","primary","expand","block",3,"click",4,"ngIf"],["mode","ios","color","primary","expand","block",3,"click"],["mode","ios",3,"click"],["color","barra",4,"ngIf"],["color","warning",4,"ngIf"],["color","barra"],["color","warning"]],template:function(t,e){1&t&&(d.Ob(0,"ion-header"),d.Ob(1,"ion-toolbar",0),d.Mb(2,"ion-back-button",1),d.Ob(3,"ion-title"),d.wc(4,"Mi pedido"),d.Nb(),d.vc(5,f,3,0,"ion-buttons",2),d.Nb(),d.Nb(),d.Ob(6,"ion-content"),d.Ob(7,"ion-refresher",3),d.Wb("ionRefresh",function(t){return e.refrescando(t)}),d.Mb(8,"ion-refresher-content",4),d.Nb(),d.vc(9,m,5,0,"div",5),d.Mb(10,"div",6),d.vc(11,G,5,2,"div",7),d.Nb()),2&t&&(d.Ab(5),d.fc("ngIf",e.pedido&&e.id===e.pedido.taller._id),d.Ab(4),d.fc("ngIf",!e.cargan),d.Ab(2),d.fc("ngIf",e.cargan))},directives:[n.z,n.lb,n.g,n.h,n.jb,o.j,n.t,n.Q,n.R,n.k,n.j,n.A,n.cb,n.hb,n.yb,a.i,a.k,n.l,n.n,n.p,n.m,n.F,n.K,n.X,n.xb,n.Y,o.i,n.kb,n.d,n.r,n.o],pipes:[u.a],styles:[".flcenter[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:20px;text-align:center}.opts[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}.opts[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{width:100%;margin:10px 5px;display:flex;flex-direction:column;align-items:center;transition:all .5s}.opts[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:22px;text-align:center}.opts[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{text-align:center;padding:5px}ion-card-header[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#f1f1ff;position:relative}.titulo[_ngcontent-%COMP%]{width:100%;background-color:#fff3e2;margin:0 0 10px}.titulo[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{padding:10px}p[_ngcontent-%COMP%]{word-wrap:break-word}ion-card-content[_ngcontent-%COMP%]{width:100%;padding:10px}.cambiar[_ngcontent-%COMP%], .cambiar[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{width:100%}.verdee[_ngcontent-%COMP%]{--background:#b7b218!important}ion-card-subtitle[_ngcontent-%COMP%]{text-align:center;padding:10px;margin-top:10px;font-weight:300}@media screen and (min-width:800px){.opts[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{width:calc(50% - 10px)}}"]}),t})()}];let U=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.Jb({type:t}),t.\u0275inj=d.Ib({imports:[[r.j.forChild(J)],r.j]}),t})();var q=i("iTUp");let z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.Jb({type:t}),t.\u0275inj=d.Ib({imports:[[o.b,a.e,n.mb,U,q.a]]}),t})()},HavB:function(t,e,i){"use strict";i.d(e,"a",function(){return f});var o=i("AytR"),a=i("tk/3"),n=i("coGc"),r=i("lJxs"),c=i("IzEk"),s=i("MtjB"),d=i("JIr8"),l=i("PqYM"),p=i("Cfvw"),b=i("fXoL"),h=i("tyNb"),u=i("B7Rs");let f=(()=>{class t{constructor(t,e,i){this.http=t,this.router=e,this.MmyTransfer=i}hanflerError(t){return t.pipe(Object(n.a)(()=>Object(l.a)(3e3)),Object(r.a)(t=>{if(console.log("Entramos a intentos"),t instanceof ErrorEvent)throw new Error("Error de Red");if(404===t.status)throw new Error(" P\xe1gina no encontrada");if(401===t.status)throw new Error(" No tiene permisos ")}),Object(c.a)(3))}crearPedido(t,e){const i={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/crear/`,e,i).pipe(Object(s.a)(t=>this.hanflerError(t)))}misPedido(t){const e={headers:new a.c({"x-token":t})};return this.http.get(`${o.a}/pedidos/lista/`,e).pipe(Object(s.a)(t=>this.hanflerError(t)))}misChats(t,e){const i={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/chats/lista/`,e,i).pipe(Object(s.a)(t=>this.hanflerError(t)))}misChatsGrupos(t,e){const i={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/chats/lista/grupos`,e,i).pipe(Object(s.a)(t=>this.hanflerError(t)))}misPedidoUsuario(t,e){const i={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/lista/`,e,i).pipe(Object(s.a)(t=>this.hanflerError(t)))}misSalas(t){const e={headers:new a.c({"x-token":t})};return this.http.get(`${o.a}/ticket/salas`,e).pipe(Object(s.a)(t=>this.hanflerError(t)))}mensajes(t,e){const i={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/chat`,e,i).pipe(Object(s.a)(t=>this.hanflerError(t)))}traermensajesNoVistos(t,e){const i={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/chat/vistos`,e,i).pipe(Object(s.a)(t=>this.hanflerError(t)))}marcarvisto(t,e){const i={headers:new a.c({"x-token":t})};return this.http.put(`${o.a}/pedidos/chat/vistos`,e,i).pipe(Object(s.a)(t=>this.hanflerError(t)))}infoPedido(t,e){const i={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/info`,e,i).pipe(Object(s.a)(t=>this.hanflerError(t)))}infoPedidoPut(t,e){const i={headers:new a.c({"x-token":t})};return this.http.put(`${o.a}/pedidos/info`,e,i).pipe(Object(s.a)(t=>this.hanflerError(t)))}crearEstados(t,e){const i={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/estados`,e,i).pipe(Object(s.a)(t=>this.hanflerError(t)))}consultarEstados(t,e){const i={headers:new a.c({"x-token":t})};return this.http.put(`${o.a}/pedidos/estados`,e,i).pipe(Object(s.a)(t=>this.hanflerError(t)))}consultarChat(t,e){const i={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/unico/consultar/chat`,e,i).pipe(Object(s.a)(t=>this.hanflerError(t)))}consultarChatFotos(t,e){const i={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/unico/consultar/chat/fotos`,e,i).pipe(Object(s.a)(t=>this.hanflerError(t)))}consultarSala(t,e){const i={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/consultar/chat`,e,i).pipe(Object(s.a)(t=>this.hanflerError(t)))}consultarMapa(t,e){const i={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/consultar/mapa`,e,i).pipe(Object(s.a)(t=>this.hanflerError(t)))}consultarMapaUnico(t,e){const i={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/consultar/mapa/unico`,e,i).pipe(Object(s.a)(t=>this.hanflerError(t)))}crearMapa(t,e){const i={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/crear/mapa`,e,i).pipe(Object(s.a)(t=>this.hanflerError(t)))}editarMapa(t,e){const i={headers:new a.c({"x-token":t})};return this.http.put(`${o.a}/pedidos/editar/mapa`,e,i).pipe(Object(s.a)(t=>this.hanflerError(t)))}editarMapaInfo(t,e){const i={headers:new a.c({"x-token":t})};return this.http.put(`${o.a}/pedidos/editar/mapa/info`,e,i).pipe(Object(s.a)(t=>this.hanflerError(t)))}editarMapaInfoD(t,e){const i={headers:new a.c({"x-token":t})};return this.http.put(`${o.a}/pedidos/editar/mapa/infod`,e,i).pipe(Object(s.a)(t=>this.hanflerError(t)))}editarPedido(t,e){const i={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/editar`,e,i).pipe(Object(s.a)(t=>this.hanflerError(t)))}editarChat(t,e){const i={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/chat/editar`,e,i).pipe(Object(s.a)(t=>this.hanflerError(t)))}subirArchivosChat(t,e,i,a,n,r,c){console.log("archivo",i);const s={fileKey:"archivo",fileName:r,mimeType:c,httpMethod:"PUT",headers:{"x-token":t,"x-sala":e,"x-final":a,"x-cont":n}},l=this.MmyTransfer.create();return Object(p.a)(l.upload(i,`${o.a}/pedido/upload`,s)).pipe(Object(d.a)(t=>{throw new Error(i)}))}subirweb(t,e,i,n,r){console.log(t,e,i,n);const c={headers:new a.c({"x-token":t,"x-sala":e,"x-final":i.toString(),"x-cont":n.toString()})};return this.http.put(`${o.a}/pedido/upload`,r,c).pipe(Object(s.a)(t=>this.hanflerError(t)))}}return t.\u0275fac=function(e){return new(e||t)(b.Sb(a.a),b.Sb(h.g),b.Sb(u.a))},t.\u0275prov=b.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},SpuA:function(t,e,i){"use strict";i.d(e,"a",function(){return n});var o=i("wd/R"),a=i("fXoL");let n=(()=>{class t{transform(t){console.log(t,"fechin");let e=o.utc(t).toDate();return o(e).format("dddd, DD MMMM YYYY h:mm:a")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=a.Kb({name:"cambioUTC",type:t,pure:!0}),t})()}}]);