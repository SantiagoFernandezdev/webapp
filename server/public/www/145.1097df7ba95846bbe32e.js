(window.webpackJsonp=window.webpackJsonp||[]).push([[145],{GQ40:function(i,t,e){"use strict";e.r(t),e.d(t,"PerfilPageModule",function(){return si});var o=e("ofXK"),n=e("3Pt+"),a=e("tyNb"),c=e("TEn/"),s=e("mrSG"),r=e("2Vo4"),d=e("R0Ic"),l=e("3/e5"),b=e("Jmyf"),p=e("c6Yc"),h=e("UInZ"),g=e("LGla"),u=e("fXoL"),m=e("a/9d"),f=e("fsfq"),v=e("oQG1"),O=e("fmoy"),x=e("r3ab"),M=e("9ucb"),C=e("cb8P"),P=e("Gq8O"),_=e("7JkF"),w=e("WGaO"),k=e("VYYF"),y=e("FlrC"),N=e("vLoH"),j=e("mg06");const A=["mislidedos"],I=["miContenido"],S=["inifinito"],T=["fileUpload"];function L(i,t){if(1&i){const i=u.Pb();u.Ob(0,"ion-button",3),u.Wb("click",function(){return u.pc(i),u.Yb().herramientasperfil()}),u.Mb(1,"ion-icon",30),u.Nb()}}function z(i,t){1&i&&u.Mb(0,"ion-back-button",31)}function F(i,t){if(1&i){const i=u.Pb();u.Ob(0,"ion-avatar",32),u.Wb("click",function(){return u.pc(i),u.Yb().modal("mediap")}),u.Mb(1,"ion-img",33),u.Nb()}if(2&i){const i=u.Yb();u.Ab(1),u.fc("src",i.Image)}}function E(i,t){1&i&&u.Mb(0,"ion-avatar",34)}function G(i,t){if(1&i&&(u.Ob(0,"div",42),u.Ob(1,"div",43),u.Ob(2,"ion-list"),u.Ob(3,"ion-item-divider",44),u.wc(4,"Establecimiento - informaci\xf3n"),u.Nb(),u.Ob(5,"ion-item",45),u.Mb(6,"ion-icon",46),u.Ob(7,"ion-label",47),u.wc(8),u.Nb(),u.Nb(),u.Ob(9,"ion-item",45),u.Mb(10,"ion-icon",48),u.Ob(11,"ion-label",47),u.wc(12),u.Nb(),u.Nb(),u.Ob(13,"ion-item",45),u.Mb(14,"ion-icon",49),u.Ob(15,"ion-label",47),u.wc(16),u.Nb(),u.Nb(),u.Ob(17,"ion-item",45),u.Mb(18,"ion-icon",50),u.Ob(19,"ion-label",47),u.wc(20),u.Nb(),u.Nb(),u.Ob(21,"ion-item",45),u.Mb(22,"ion-icon",51),u.Ob(23,"ion-label",47),u.wc(24),u.Zb(25,"horario"),u.Zb(26,"horario"),u.Nb(),u.Nb(),u.Ob(27,"ion-item"),u.Mb(28,"ion-icon",52),u.Ob(29,"ion-label",47),u.wc(30),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Nb()),2&i){const i=u.Yb(2);u.Ab(8),u.xc(i.contenido.direccion),u.Ab(4),u.xc(i.contenido.telefono),u.Ab(4),u.xc(i.contenido.pagina),u.Ab(4),u.zc("",i.contenido.ciudad,", ",i.contenido.pais,""),u.Ab(4),u.zc("Abierto desde las ",u.ac(25,9,i.contenido.desde)," hasta las ",u.ac(26,11,i.contenido.hasta),""),u.Ab(6),u.zc(" De ",i.contenido.de," a ",i.contenido.a,"")}}function D(i,t){if(1&i&&(u.Ob(0,"ion-card",56),u.Ob(1,"ion-card-header",57),u.Ob(2,"div",58),u.Mb(3,"ion-icon",59),u.Nb(),u.Nb(),u.Ob(4,"ion-card-content"),u.wc(5),u.Nb(),u.Nb()),2&i){const i=t.$implicit;u.Ab(5),u.yc(" ",i," ")}}function R(i,t){if(1&i&&(u.Ob(0,"div",54),u.vc(1,D,6,1,"ion-card",55),u.Nb()),2&i){const i=u.Yb(3);u.Ab(1),u.fc("ngForOf",i.servicios)}}function W(i,t){if(1&i&&(u.Ob(0,"div",42),u.Ob(1,"ion-item-divider",44),u.wc(2,"Lista de Servicios"),u.Nb(),u.vc(3,R,2,1,"div",53),u.Nb()),2&i){const i=u.Yb(2);u.Ab(3),u.fc("ngIf","TALLER_ROLE"===i.role)}}function Y(i,t){if(1&i&&(u.Ob(0,"ion-item",63),u.Ob(1,"ion-label",47),u.Ob(2,"div"),u.Ob(3,"strong"),u.wc(4,"Veh\xedculo: "),u.Nb(),u.wc(5),u.Nb(),u.Mb(6,"br"),u.Ob(7,"div"),u.Ob(8,"strong"),u.wc(9,"Placa: "),u.Nb(),u.wc(10),u.Nb(),u.Ob(11,"div"),u.Ob(12,"strong"),u.wc(13,"Nombre: "),u.Nb(),u.wc(14),u.Nb(),u.Ob(15,"div"),u.Ob(16,"strong"),u.wc(17,"Marca: "),u.Nb(),u.wc(18),u.Nb(),u.Ob(19,"div"),u.Ob(20,"strong"),u.wc(21,"M\xf3delo: "),u.Nb(),u.wc(22),u.Nb(),u.Mb(23,"br"),u.Nb(),u.Nb()),2&i){const i=t.$implicit;u.Ab(5),u.xc(i.tipo),u.Ab(5),u.yc(" ",i.placa,""),u.Ab(4),u.yc(" ",i.nombre,""),u.Ab(4),u.yc(" ",i.marca,""),u.Ab(4),u.yc(" ",i.modelo,"")}}function U(i,t){if(1&i&&(u.Ob(0,"div",42),u.Ob(1,"div",43),u.Ob(2,"ion-list"),u.Ob(3,"ion-item-divider",44),u.wc(4,"Lista de Veh\xedculos"),u.Nb(),u.vc(5,Y,24,5,"ion-item",60),u.Ob(6,"ion-item",45),u.Ob(7,"ion-avatar",61),u.Mb(8,"img",62),u.Nb(),u.Ob(9,"ion-label",47),u.wc(10),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Nb()),2&i){const i=u.Yb(2);u.Ab(5),u.fc("ngForOf",i.vehiculos),u.Ab(5),u.zc("",i.datos.ciudad,", ",i.datos.pais,"")}}function $(i,t){1&i&&(u.Ob(0,"div",65),u.Ob(1,"ion-item",66),u.Ob(2,"ion-avatar",67),u.Mb(3,"ion-skeleton-text",68),u.Nb(),u.Ob(4,"ion-label"),u.Mb(5,"ion-skeleton-text",69),u.Mb(6,"ion-skeleton-text",70),u.Nb(),u.Nb(),u.Ob(7,"div",71),u.Mb(8,"ion-skeleton-text",72),u.Nb(),u.Nb())}const q=function(){return[1,1,1,1,1]};function V(i,t){1&i&&(u.Ob(0,"div"),u.vc(1,$,9,0,"div",64),u.Nb()),2&i&&(u.Ab(1),u.fc("ngForOf",u.kc(1,q)))}function B(i,t){if(1&i&&(u.Ob(0,"div",78),u.Mb(1,"div",79),u.Nb()),2&i){const i=u.Yb().$implicit;u.Ab(1),u.tc("background",i.dibujo.fondo)("color",i.dibujo.color)}}function H(i,t){if(1&i&&u.Mb(0,"img",85),2&i){const i=u.Yb().$implicit;u.hc("src","https://motocaliapp.com/11927613401/",i.ruta,"",u.qc)}}function X(i,t){if(1&i&&(u.Ob(0,"ion-slide",83),u.vc(1,H,1,1,"img",84),u.Nb()),2&i){const i=t.$implicit;u.Ab(1),u.fc("ngIf",i.mime.includes("image"))}}function J(i,t){if(1&i&&(u.Ob(0,"ion-slides",81),u.vc(1,X,2,1,"ion-slide",82),u.Nb()),2&i){const i=u.Yb(2).$implicit;u.fc("pager",i.pager),u.Ab(1),u.fc("ngForOf",i.archivos)}}function Q(i,t){if(1&i&&(u.Ob(0,"div",78),u.vc(1,J,2,2,"ion-slides",80),u.Nb()),2&i){const i=u.Yb(4);u.Ab(1),u.fc("ngIf",i.cargadentro)}}function Z(i,t){if(1&i){const i=u.Pb();u.Ob(0,"div",75),u.Wb("click",function(){u.pc(i);const e=t.index;return u.Yb(3).abrir(e)}),u.vc(1,B,2,4,"div",76),u.vc(2,Q,2,1,"div",77),u.Nb()}if(2&i){const i=t.$implicit;u.Ab(1),u.fc("ngIf","dibujar"===i.tipo),u.Ab(1),u.fc("ngIf","multimedia"===i.tipo)}}function K(i,t){if(1&i&&(u.Ob(0,"div",73),u.vc(1,Z,3,2,"div",74),u.Nb()),2&i){const i=u.Yb(2);u.Ab(1),u.fc("ngForOf",i.publicaciones)}}function ii(i,t){if(1&i){const i=u.Pb();u.Ob(0,"ion-infinite-scroll",86,87),u.Wb("ionInfinite",function(t){return u.pc(i),u.Yb(2).loadData(t)}),u.Mb(2,"ion-infinite-scroll-content",88),u.Nb()}}function ti(i,t){if(1&i){const i=u.Pb();u.Ob(0,"ion-slides",35,36),u.Wb("ionSlideDidChange",function(t){return u.pc(i),u.Yb().cambioDiapositiva(t)}),u.Ob(2,"ion-slide",37),u.vc(3,G,31,13,"div",38),u.vc(4,W,4,1,"div",38),u.vc(5,U,11,3,"div",38),u.Nb(),u.Ob(6,"ion-slide",37),u.vc(7,V,2,2,"div",39),u.vc(8,K,2,1,"div",40),u.vc(9,ii,3,0,"ion-infinite-scroll",41),u.Nb(),u.Nb()}if(2&i){const i=u.Yb();u.Ab(2),u.Db("over",i.over),u.Ab(1),u.fc("ngIf",i.contenido&&"TALLER_ROLE"===i.role),u.Ab(1),u.fc("ngIf",i.servicios.length>0),u.Ab(1),u.fc("ngIf","USER_ROLE"===i.role),u.Ab(1),u.Db("over",i.over),u.Ab(1),u.fc("ngIf",!i.cargaTodo),u.Ab(1),u.fc("ngIf",i.cargaTodo),u.Ab(1),u.fc("ngIf",i.cargainfinite)}}let ei=(()=>{class i{constructor(i,t,e,o,n,a,c,s,d,l,b,p,h,g,u,m,f,v,O,x,M,C,P){this.camera=i,this.actionCtrl=t,this.almacenamiento=e,this.usuaripService=o,this.toastService=n,this.loadingService=a,this.mneuCtrl=c,this.navCtrl=s,this.biografia=d,this.loading=l,this.toast=b,this.cargarElementos=p,this.seguimientoService=h,this.router=g,this.plt=u,this.socket=m,this.modalCtrl=f,this.IGTMApi=v,this.statusbar=O,this.activeRoute=x,this.poipover=M,this.entrada=C,this.apiGrupo=P,this.Image="none",this.tokenTemp=new r.a("none"),this.$token=this.tokenTemp.asObservable(),this.segmento="info",this.infoSegment=[],this.estado=!1,this.servicios=[],this.nombreUsuario="",this.role="",this.ocultar=!0,this.red="wifi",this.personasTemp=[],this.personas=0,this.personasSeguidas=0,this.seguidosTemp=[],this.scroll=!0,this.bajando=!1,this.titulo="",this.color="blanco",this.datos={pais:"",ciudad:"",placa:""},this.portada="",this.publicaciones=[],this.cargadentro=!1,this.click=!1,this.over=!1,this.atrasBoton=!1,this.cargaTodo=!1,this.cargainfinite=!0,this.desde=0,this.vehiculos=[]}ngOnInit(){}ionViewWillEnter(){this.desde=0,this.personasTemp=[],this.personas=0,this.personasSeguidas=0,this.seguidosTemp=[],this.publicaciones=[],this.activeRoute.snapshot.paramMap.get("tipo")&&(this.atrasBoton=!0),this.arrancar()}refrescando(i){this.desde=0,this.publicaciones=[],this.arrancar().then(()=>{i.detail.complete()}).catch(()=>{i.detail.complete()})}arrancar(){return Object(s.a)(this,void 0,void 0,function*(){try{this.scroll=!0,yield this.llamarBio(),yield this.llamarFoto(),yield this.publicacion(),this.cargarElementos.cargarSeguimientos(),this.info(),this.informacion()}catch(i){this.estado=!0}})}info(){this.almacenamiento.obtenerToken().then(i=>{console.log(i,"INFON"),this.usuaripService.info(i.token).subscribe(i=>{console.log(i,"DATA USER"),i.exe&&(this.vehiculos=i.response.vehiculo)},i=>{this.infoSegment=[],this.estado=!0})})}seguidores(i){return Object(s.a)(this,void 0,void 0,function*(){console.log(i);const t=yield this.modalCtrl.create({component:g.a,componentProps:{tipo:i}});yield t.present()})}loadData(i){return Object(s.a)(this,void 0,void 0,function*(){this.desde=this.desde+9,console.log(this.desde,"desde");const t=yield this.almacenamiento.obtenerToken();t&&this.IGTMApi.leerPublicacion(t.token,{desde:this.desde}).subscribe(e=>{e.exe?e.response.length>0?(i.target.complete(),e.response.forEach((i,e)=>Object(s.a)(this,void 0,void 0,function*(){i.eliminar=i.creador._id===t._id,i.guardado=!1,i.image=i.creador.imagen.length>0?`https://motocaliapp.com/${i.creador.imagen[0].path}`:"/assets/notfound.png",i.creadororiginal?(i.cog=!0,i.imageori=i.creadororiginal.imagen.length>0?`https://motocaliapp.com/${i.creadororiginal.imagen[0].path}`:"/assets/notfound.png"):i.cog=!1,yield new Promise((e,o)=>{this.IGTMApi.leerFotos(t.token,{id:i._id,historia:"false"}).subscribe(t=>{t.exe?(i.archivos=t.response,t.response.length>1?(i.pager=!0,e({exe:!0})):(e({exe:!1}),i.pager=!1)):(e({exe:!0}),i.archivos=[]),this.cargadentro=!0},t=>{e({exe:!1}),i.archivos=[]})}),yield new Promise((e,o)=>{this.IGTMApi.crearGuardado(t.token,{publicacion:i._id,tipo:"leer"}).subscribe(t=>{i.guardado=!!t.exe,e(!0)},t=>{e(!0),i.guardado=!1})}),yield new Promise((e,o)=>{this.IGTMApi.meGusta(t.token,{id:i._id,tipo:"leer"}).subscribe(o=>{i.megusta=!!o.response.find(i=>i.creador._id===t._id),e(!0),i.valormg=o.response.length,i.mglista=o.response},t=>{e(!0),i.megusta=!1,i.valormg=""})}),yield new Promise((e,o)=>{this.IGTMApi.crearComentario(t.token,{_id:i._id,tipo:"leer"}).subscribe(t=>{t.exe?(i.comentarios=t.response,i.msg=t.response.length>0?`${i.comentarios.length} comentarios...`:"No hay ning\xfan comentario paraesta publicaci\xf3n"):i.comentarios=[],e(!0),this.cargadentro=!0},t=>{e(!0),i.comentarios=[]})}),this.publicaciones.push(i)}))):(i.target.disabled=!0,this.desde=0):this.toast.alertApplication("No se pudo traer las publicaciones, intentelo m\xe1s tarde",!1)},i=>{this.toast.alertApplication("No se pudo traer las publicaciones, intentelo m\xe1s tarde",!1)})})}publicacion(){return Object(s.a)(this,void 0,void 0,function*(){const i=yield this.almacenamiento.obtenerToken();i&&this.IGTMApi.leerPublicacion(i.token,{desde:this.desde}).subscribe(t=>Object(s.a)(this,void 0,void 0,function*(){t.exe&&(t.response.forEach((t,e)=>Object(s.a)(this,void 0,void 0,function*(){t.eliminar=t.creador._id===i._id,t.guardado=!1,t.image=t.creador.imagen.length>0?`https://motocaliapp.com/${t.creador.imagen[0].path}`:"/assets/notfound.png",t.creadororiginal?(t.cog=!0,t.imageori=t.creadororiginal.imagen.length>0?`https://motocaliapp.com/${t.creadororiginal.imagen[0].path}`:"/assets/notfound.png"):t.cog=!1,yield new Promise((e,o)=>{this.IGTMApi.leerFotos(i.token,{id:t._id}).subscribe(i=>{i.exe?(t.archivos=i.response,i.response.length>1?(t.pager=!0,e({exe:!0})):(e({exe:!1}),t.pager=!1)):(e({exe:!0}),t.archivos=[]),this.cargadentro=!0},i=>{e({exe:!1}),t.archivos=[]})}),yield new Promise((e,o)=>{this.IGTMApi.crearGuardado(i.token,{publicacion:t._id,tipo:"leer"}).subscribe(i=>{t.guardado=!!i.exe,e(!0)},i=>{e(!0),t.guardado=!1})}),yield new Promise((e,o)=>{this.IGTMApi.meGusta(i.token,{id:t._id,tipo:"leer"}).subscribe(o=>{t.megusta=!!o.response.find(t=>t.creador===i._id),t.valormg=o.response.length,t.mglista=o.response,e(!0)},i=>{e(!0),t.megusta=!1,t.valormg=""})}),yield new Promise((e,o)=>{this.IGTMApi.crearComentario(i.token,{_id:t._id,tipo:"leer"}).subscribe(i=>{i.exe?(t.comentarios=i.response,t.msg=i.response.length>0?`${t.comentarios.length} comentarios...`:"No hay ning\xfan comentario paraesta publicaci\xf3n"):t.comentarios=[],e(!0),this.cargadentro=!0},i=>{e(!0),t.comentarios=[]})})})),this.publicaciones=t.response),this.cargaTodo=!0}),i=>{})})}opciones2(i,t,e){return Object(s.a)(this,void 0,void 0,function*(){const o=yield this.poipover.create({component:p.a,componentProps:{id:t},event:i});yield o.present();const n=yield o.onWillDismiss();n&&n.data&&n.data.exe&&(this.toast.toastExitoso("Publicaci\xf3n eliminada"),this.publicaciones.splice(e,1))})}compartir(i){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:b.a,componentProps:{tipo:"compartir",publicacionc:i}});yield t.present();const e=yield t.onWillDismiss();e&&(this.statusbar.show(),this.click=!1,e.data&&e.data.recargo&&(yield this.contenido.scrollToTop()))})}guardado(i,t,e){return Object(s.a)(this,void 0,void 0,function*(){this.publicaciones[e].guardado="crear"===t;const o=yield this.almacenamiento.obtenerToken();o&&this.IGTMApi.crearGuardado(o.token,{tipo:t,publicacion:i._id}).subscribe(i=>{i.exe?this.toast.toastNotificacion("crear"===t?"Publicaci\xf3n guardada en colecciones":"Publicaci\xf3n eliminada de colecciones"):this.toast.toastError("No se pudo guardar, intentelo m\xe1s tarde")},i=>{this.toast.toastError("No se pudo guardar, intentelo m\xe1s tarde")})})}perfilNavegar(i){return Object(s.a)(this,void 0,void 0,function*(){console.log(i,"DATA_ UR");const t=yield this.almacenamiento.obtenerToken();t&&(t.nusuario===i.nombreusuario?this.router.navigate(["/perfil/","s"]):i.grupo?this.apiGrupo.irgrupo(t.token,{id:i._id}).subscribe(i=>{i.exe?i.response.length>0?this.router.navigate(["/interfaz-grupo/",i.response[0]._id,"inicio",i.response[0]._id]):this.toast.toastError("No se puede acceder al grupo o el grupo no existe, int\xe9ntelo m\xe1s tarde"):this.toast.toastError("No se puede acceder al grupo, int\xe9ntelo m\xe1s tarde")},i=>{this.toast.toastError("No se puede acceder al grupo, int\xe9ntelo m\xe1s tarde")}):this.router.navigate(["/visita/",i.nombreusuario,"s"]))})}abrir(i){return Object(s.a)(this,void 0,void 0,function*(){this.entrada.publi({publicaciones:this.publicaciones,visita:!0,i:i,desde:this.desde}),this.router.navigate(["/central/perfil","pub"])})}llamarFoto(){return new Promise((i,t)=>{i(this.cerrarToken=this.$token.subscribe(i=>{this.usuaripService.viewImagen(i).subscribe(i=>{this.Image=`https://motocaliapp.com/${i.paquete}`,this.portada=i.portada.path},i=>{})}))})}llamarBio(){return new Promise((i,t)=>{try{this.almacenamiento.obtenerToken().then(t=>{this.role=t.role,this.nombreUsuario=t.nombre,this.tokenTemp.next(t.token),i(this.cargarListados(t.token))}).catch(i=>{t(i)})}catch(e){t(e)}})}cargarListados(i){this.seguimientoService.solicitudesAceptadasCount(i,"Sin receptor","0").subscribe(i=>{this.personas=i.response},i=>{this.toast.alertApplication("No se pudo traer los usuarios",!1)}),this.seguimientoService.solicitudesAceptadasSeguidosCount(i,"","0").subscribe(i=>{this.cargarInformacion=!0,this.personasSeguidas=i.response},i=>{this.toast.alertApplication("No se pudo traer los usuarios",!1)})}abrirMenu(){this.mneuCtrl.toggle("perfilMenu")}cambiarToken(i){this.tokenTemp.next(i)}herramientas(){return Object(s.a)(this,void 0,void 0,function*(){yield this.preventAction()})}herramientasperfil(){return Object(s.a)(this,void 0,void 0,function*(){const i=[{text:"Cancelar",role:"cancel",cssClass:"rojo"}];"TALLER_ROLE"===this.role&&i.unshift({text:"Servicios que ofrezco",icon:"checkmark-circle-outline",handler:()=>{this.modal("servis")}},{text:"Informaci\xf3n de mi negocio",icon:"information-outline",handler:()=>{this.modal("form")}}),"USER_ROLE"===this.role&&i.unshift({text:"Informaci\xf3n del Veh\xedculo",icon:"information-outline",handler:()=>{this.modal("vehiculo")}});const t=yield this.actionCtrl.create({header:"Crear",buttons:i});yield t.present()})}modal(i){return Object(s.a)(this,void 0,void 0,function*(){let t="";"mediapor"===i?t=`https://motocaliapp.com/19927613410/${this.portada}`:"mediap"===i&&(t=this.Image);const e=yield this.modalCtrl.create({component:l.a,componentProps:{type:i,imagen:t}});if(yield e.present(),"mediapor"!==i&&"mediap"!==i){const i=yield e.onWillDismiss();i&&i.data&&(this.contenido=i.data.data?i.data.data.contenido:i.data.contenido,this.servicios=i.data.data?i.data.data.servicios:i.data.servicios)}})}preventAction(){return Object(s.a)(this,void 0,void 0,function*(){const i=yield this.actionCtrl.create({header:"Fotos",buttons:[{text:"Seleccionar Foto de Perfil en Galeria",icon:"image",handler:()=>{const i=this.fileUpload.nativeElement;i.onchange=t=>Object(s.a)(this,void 0,void 0,function*(){for(let t=0;t<i.files.length;t++){const e=i.files[t],o=yield this.almacenamiento.obtenerToken();if(o){const i=[];i.push(e),i.forEach(i=>{const t=new FormData;t.append("archivo",i),this.loading.cargaProcesos("Actualizando foto de perf\xedl..."),this.usuaripService.subirweb(o.token,t).subscribe(i=>Object(s.a)(this,void 0,void 0,function*(){this.cambiarToken(o.token),this.loadingService.finalizarCargado(),yield this.toastService.toastExitoso("Foto de perf\xedl actualizada")}),i=>Object(s.a)(this,void 0,void 0,function*(){this.loadingService.finalizarCargado(),yield this.toastService.alertApplication(i.message,!1)}))})}}}),i.click()}},{text:"Seleccionar Foto de Portada en Galeria",icon:"image",handler:()=>Object(s.a)(this,void 0,void 0,function*(){const i=yield this.almacenamiento.obtenerToken();if(i){console.log(i);const t=this.fileUpload.nativeElement;t.onchange=e=>{for(let o=0;o<t.files.length;o++){const e=t.files[o];setTimeout(()=>{const t=new FormData;t.append("archivo",e);const o="notfound.jpg"===this.portada?"":this.portada;this.loading.cargaProcesos("Actualizando foto de portada..."),this.usuaripService.subirweb2(i.token,t,o).subscribe(t=>Object(s.a)(this,void 0,void 0,function*(){this.cambiarToken(i.token),this.loadingService.finalizarCargado(),yield this.toastService.toastExitoso("Foto de perf\xedl actualizada")}),i=>Object(s.a)(this,void 0,void 0,function*(){this.loadingService.finalizarCargado(),yield this.toastService.alertApplication(i.message,!1)}))},1e3)}},t.click()}})},{text:"Cancelar",role:"cancel",cssClass:"rojo"}]});yield i.present()})}tomarFoto(i,t){this.camera.getPicture({quality:100,targetWidth:900,targetHeight:600,correctOrientation:!0,destinationType:this.camera.DestinationType.FILE_URI,encodingType:0,mediaType:this.camera.MediaType.PICTURE,sourceType:i}).then(i=>Object(s.a)(this,void 0,void 0,function*(){yield this.loadingService.cargaProcesos("Subiendo Imagen, por favor espera."),this.almacenamiento.obtenerToken().then(e=>{"perfil"===t?this.usuaripService.fotoPerfilUsuarioMoto(i,e.token,"perfil").subscribe(i=>Object(s.a)(this,void 0,void 0,function*(){this.cambiarToken(e.token),this.loadingService.finalizarCargado(),yield this.toastService.alertApplication("Imagen subida con \xe9xito",!0)}),i=>Object(s.a)(this,void 0,void 0,function*(){this.loadingService.finalizarCargado(),yield this.toastService.alertApplication(i.message,!1)})):this.usuaripService.fotoPortada(i,e.token,"notfound.jpg"===this.portada?"":this.portada).subscribe(i=>Object(s.a)(this,void 0,void 0,function*(){this.cambiarToken(e.token),this.loadingService.finalizarCargado(),yield this.toastService.alertApplication("Foto de portada actualizada",!0)}),i=>Object(s.a)(this,void 0,void 0,function*(){this.loadingService.finalizarCargado(),yield this.toastService.alertApplication(i.message,!1)}))}).catch(()=>{this.loadingService.finalizarCargado()})}),i=>{})}segmentos(i){return Object(s.a)(this,void 0,void 0,function*(){switch(i.detail.value){case"info":yield this.miSlide.slideTo(0,300);break;case"public":yield this.miSlide.slideTo(1,300)}})}cambioDiapositiva(i){return Object(s.a)(this,void 0,void 0,function*(){this.miSlide.getActiveIndex().then(i=>{0===i?this.segmento="info":1===i?this.segmento="public":2===i?this.segmento="clientes":3===i&&(this.segmento="seguidos")})})}visitar(i){this.router.navigate(["/central/buscar/perfil-visita/",i])}informacion(){this.almacenamiento.obtenerToken().then(i=>{this.datos.pais=i.pais,this.datos.ciudad=i.ciudad,this.vehiculos=i.placa,this.biografia.getBiografia(i.token,"none").subscribe(i=>{i.response.length>0?(this.infoSegment=i.response,this.contenido=i.response[0].contenido,this.servicios=i.response[0].servicios,this.estado=!1):this.estado=!0},i=>{this.infoSegment=[],this.estado=!0})})}scrollable(i){this.over=i.detail.scrollTop>300}mglista(i){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:h.a,componentProps:{listado:i}});yield t.present()})}ionViewDidLeave(){this.scroll=!1,this.cerrarToken.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(u.Lb(m.a),u.Lb(c.a),u.Lb(f.a),u.Lb(v.a),u.Lb(O.a),u.Lb(x.a),u.Lb(c.pb),u.Lb(c.rb),u.Lb(M.a),u.Lb(x.a),u.Lb(O.a),u.Lb(C.a),u.Lb(P.a),u.Lb(a.g),u.Lb(c.tb),u.Lb(_.a),u.Lb(c.qb),u.Lb(w.a),u.Lb(k.a),u.Lb(a.a),u.Lb(c.ub),u.Lb(y.a),u.Lb(N.a))},i.\u0275cmp=u.Fb({type:i,selectors:[["app-perfil"]],viewQuery:function(i,t){if(1&i&&(u.Ac(A,1),u.Ac(I,1),u.Ac(S,1),u.Ac(T,1)),2&i){let i;u.oc(i=u.Xb())&&(t.miSlide=i.first),u.oc(i=u.Xb())&&(t.miContenido=i.first),u.oc(i=u.Xb())&&(t.infinite=i.first),u.oc(i=u.Xb())&&(t.fileUpload=i.first)}},decls:46,vars:12,consts:[[1,"ion-no-border"],["color","oscuro"],["slot","end"],[3,"click"],["color","blanco","name","camera-outline","slot","icon-only"],[3,"click",4,"ngIf"],["color","blanco",3,"fullscreen","scrollEvents","ionScroll"],["miContenido",""],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],[1,"main"],["type","file","name","archivo","accept","image/*",2,"display","none"],["fileUpload",""],[1,"contenedor"],[1,"info"],["mode","ios",1,"tarjeta"],[1,"portada"],["mode","md","class","boton","color","blanco","icon","chevron-back-outline","defaultHref","/central/iniciosan",4,"ngIf"],[1,"img",3,"click"],["alt","",3,"src"],["class","avatar",3,"click",4,"ngIf"],["class","avatar",4,"ngIf"],[1,"infoseguidor"],["mode","md","color","barra",3,"value","ionChange"],["value","info"],[1,"up"],["value","public"],[1,"content"],[1,"divider"],["class","fullancho2",3,"ionSlideDidChange",4,"ngIf"],["color","blanco","name","add-outline","slot","icon-only"],["mode","md","color","blanco","icon","chevron-back-outline","defaultHref","/central/iniciosan",1,"boton"],[1,"avatar",3,"click"],["type","media","width","200px",3,"src"],[1,"avatar"],[1,"fullancho2",3,"ionSlideDidChange"],["mislidedos",""],[1,"diapositiva"],["class","blanco",4,"ngIf"],[4,"ngIf"],["class","publicaciones",4,"ngIf"],["threshold","100px",3,"ionInfinite",4,"ngIf"],[1,"blanco"],[1,"contenido"],["color","light"],["lines","none"],["name","home","slot","start","color","medium"],[1,"ion-text-wrap"],["name","call","slot","start","color","medium"],["name","desktop","slot","start","color","medium"],["name","location","slot","start","color","medium"],["name","alarm","slot","start","color","medium"],["name","today","slot","start","color","medium"],["class","servicio",4,"ngIf"],[1,"servicio"],["mode","ios",4,"ngFor","ngForOf"],["mode","ios"],[1,"centrarHijo"],[1,"marca"],["name","build"],["class","sinfondo","mode","ios",4,"ngFor","ngForOf"],["slot","start",1,"av"],["src","/assets/Marcador.png","alt",""],["mode","ios",1,"sinfondo"],["class","skt",4,"ngFor","ngForOf"],[1,"skt"],["lines","none",1,"sinfondo"],["slot","start"],["animated","","width","100%","height","100%"],["animated","","width","100%","height","30px"],["animated","","width","100px","height","30px"],[2,"height","200px"],["animated","","width","100%","height","200px"],[1,"publicaciones"],["class","pb",3,"click",4,"ngFor","ngForOf"],[1,"pb",3,"click"],["class","publicacion ",4,"ngIf"],["class","publicacion",4,"ngIf"],[1,"publicacion"],[1,"lienzo"],["color","dark","mode","ios",3,"pager",4,"ngIf"],["color","dark","mode","ios",3,"pager"],["class","diapo",4,"ngFor","ngForOf"],[1,"diapo"],["width","100%",3,"src",4,"ngIf"],["width","100%",3,"src"],["threshold","100px",3,"ionInfinite"],["inifinito",""],["loadingSpinner","bubbles","loadingText","Cargando publicaciones..."]],template:function(i,t){1&i&&(u.Ob(0,"ion-header",0),u.Ob(1,"ion-toolbar",1),u.Ob(2,"ion-title"),u.wc(3),u.Nb(),u.Ob(4,"ion-buttons",2),u.Ob(5,"ion-button",3),u.Wb("click",function(){return t.herramientas()}),u.Mb(6,"ion-icon",4),u.Nb(),u.vc(7,L,2,0,"ion-button",5),u.Nb(),u.Nb(),u.Nb(),u.Ob(8,"ion-content",6,7),u.Wb("ionScroll",function(i){return t.scrollable(i)}),u.Ob(10,"ion-refresher",8),u.Wb("ionRefresh",function(i){return t.refrescando(i)}),u.Mb(11,"ion-refresher-content",9),u.Nb(),u.Ob(12,"div",10),u.Mb(13,"input",11,12),u.Ob(15,"div",13),u.Ob(16,"div",14),u.Ob(17,"ion-card",15),u.Ob(18,"div",16),u.vc(19,z,1,0,"ion-back-button",17),u.Ob(20,"div",18),u.Wb("click",function(){return t.modal("mediapor")}),u.Mb(21,"img",19),u.Nb(),u.vc(22,F,2,1,"ion-avatar",20),u.vc(23,E,1,0,"ion-avatar",21),u.Ob(24,"div",22),u.Ob(25,"div",3),u.Wb("click",function(){return t.seguidores("seguidores")}),u.Ob(26,"strong"),u.wc(27,"Seguidores"),u.Nb(),u.wc(28),u.Nb(),u.Ob(29,"div",3),u.Wb("click",function(){return t.seguidores("siguiendo")}),u.Ob(30,"strong"),u.wc(31,"Siguiendo"),u.Nb(),u.wc(32),u.Nb(),u.Nb(),u.Nb(),u.Ob(33,"ion-card-content"),u.Ob(34,"ion-segment",23),u.Wb("ionChange",function(i){return t.segmentos(i)}),u.Ob(35,"ion-segment-button",24),u.Ob(36,"ion-label",25),u.Ob(37,"strong"),u.wc(38,"Informaci\xf3n"),u.Nb(),u.Nb(),u.Nb(),u.Ob(39,"ion-segment-button",26),u.Ob(40,"ion-label",25),u.Ob(41,"strong"),u.wc(42,"Publicaciones"),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Ob(43,"div",27),u.Mb(44,"div",28),u.vc(45,ti,10,10,"ion-slides",29),u.Nb(),u.Nb(),u.Nb()),2&i&&(u.Ab(3),u.yc(" ",t.nombreUsuario," "),u.Ab(4),u.fc("ngIf","TALLER_ROLE"===t.role),u.Ab(1),u.fc("fullscreen",!0)("scrollEvents",t.scroll),u.Ab(11),u.fc("ngIf",t.atrasBoton),u.Ab(2),u.hc("src","https://motocaliapp.com/19927613410/",t.portada,"",u.qc),u.Ab(1),u.fc("ngIf","none"!==t.Image),u.Ab(1),u.fc("ngIf","none"===t.Image),u.Ab(5),u.yc(" ",t.personas," "),u.Ab(4),u.yc(" ",t.personasSeguidas," "),u.Ab(2),u.fc("value",t.segmento),u.Ab(11),u.fc("ngIf",t.cargarInformacion))},directives:[c.z,c.lb,c.jb,c.k,c.j,c.A,o.j,c.t,c.Q,c.R,c.l,c.m,c.V,c.xb,c.W,c.K,c.g,c.h,c.f,c.B,c.bb,c.ab,c.L,c.G,c.F,o.i,c.n,c.Z,c.C,c.D],pipes:[j.a],styles:[".contenedor[_ngcontent-%COMP%]{width:100%}.fecha[_ngcontent-%COMP%]{color:#777;padding:5px 15px;font-size:14px;opacity:.7}ion-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%!important}div[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%], ion-slide[_ngcontent-%COMP%], ion-slides[_ngcontent-%COMP%]{width:100%}.fullancho2[_ngcontent-%COMP%]{min-height:100%}.over[_ngcontent-%COMP%]{overflow-y:scroll}.diapositiva[_ngcontent-%COMP%]{width:100%;height:800px;display:flex;justify-content:flex-start;flex-direction:column}.contenedor[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.tarjeta[_ngcontent-%COMP%]{border-radius:0;width:100%;margin:0}.tarje[_ngcontent-%COMP%]{margin:10px 0 auto}.tarjeta[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:0}.segment[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-bottom:2px;font-size:11px}.portada[_ngcontent-%COMP%]{width:100%;background-color:#3b4b54;height:150px;max-height:150px;position:relative;margin-bottom:50px}.boton[_ngcontent-%COMP%]{position:absolute;top:0;left:0;border-radius:0 10px 50px 0;background:rgba(0,0,0,.3)}.portada[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{max-height:150px;overflow:hidden;display:flex;align-items:center}.portada[_ngcontent-%COMP%]   .opciones[_ngcontent-%COMP%]{position:absolute;width:100%;bottom:0;z-index:10;background-color:rgba(3,3,3,.3);display:flex;justify-content:flex-end;color:#fff}.portada[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.infoseguidor[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;height:50px;display:flex;align-items:center;justify-content:flex-end;background-color:rgba(0,0,0,.5);color:#fff}.infoseguidor[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100px;max-width:auto;display:flex;flex-direction:column;justify-content:center;align-items:center}ion-card-title[_ngcontent-%COMP%]{font-size:22px}.avatar[_ngcontent-%COMP%]{position:absolute;bottom:-40px;left:10px;width:100px!important;height:100px!important;background-color:#273238;z-index:11}.avatar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff}.avatar-peque[_ngcontent-%COMP%]{margin-left:8px;width:30px!important;height:30px!important}.avatar-peque[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%!important;height:100%!important}.titulo[_ngcontent-%COMP%]{font-weight:700;font-size:16px}.titulo2[_ngcontent-%COMP%]{font-weight:lighter}.line[_ngcontent-%COMP%]{padding-bottom:15px;border-bottom:1px solid rgba(0,0,0,.5);margin-bottom:5px}.sombre[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff}.message[_ngcontent-%COMP%]{font-weight:lighter;padding:10px;opacity:.5!important}.break[_ngcontent-%COMP%]{white-space:pre-wrap;text-align:justify}.wrap[_ngcontent-%COMP%]{word-wrap:break-word}.up[_ngcontent-%COMP%]{height:35px}.aviso[_ngcontent-%COMP%]{--background:#fee491}.gris[_ngcontent-%COMP%]{--background:#f9f9f9}.aviso[_ngcontent-%COMP%]:hover{--background:#fee491!important}.veh[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:nth-child(odd){--background:#f9f9f9}.servicio[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.centrarHijo[_ngcontent-%COMP%], .marca[_ngcontent-%COMP%]{display:flex;justify-content:center}.marca[_ngcontent-%COMP%]{width:50px;height:50px;background-color:#e9e9e9;border-radius:100%;font-size:20px;align-items:center}.tituloGrande[_ngcontent-%COMP%]{width:100%;background:#3b4b54;color:#fff;font-weight:100;text-align:center;padding:15px}.servicio[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]:nth-child(1n)   .marca[_ngcontent-%COMP%]{background-color:#2c8f53;color:#fff}.servicio[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{font-size:18px!important}.diapo[_ngcontent-%COMP%]{background-color:#000!important;width:100%;max-height:calc(100vh - 270px);overflow:hidden;position:relative}.per[_ngcontent-%COMP%]{margin:50px auto;opacity:.5;text-align:center;width:300px}.publicaciones[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap}.pb[_ngcontent-%COMP%]{width:calc(33.33% - 3px);height:100px;margin:1.5px;background:#fff}.publicacion[_ngcontent-%COMP%]{height:100%;overflow:hidden}.publicacion[_ngcontent-%COMP%]   ion-slide[_ngcontent-%COMP%], .publicacion[_ngcontent-%COMP%]   ion-slides[_ngcontent-%COMP%]{width:100%;height:100%}.publicacion[_ngcontent-%COMP%]   ion-slide[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;min-height:100%}.lienzo[_ngcontent-%COMP%]{height:100%;padding:10px;display:flex;text-align:center;justify-content:center;align-items:center;white-space:pre-wrap;font-size:5px}.lienzo[_ngcontent-%COMP%], .opciones[_ngcontent-%COMP%]{width:100%}.comentarios[_ngcontent-%COMP%]{text-align:left;padding:10px 10px 10px 15px;font-weight:300;line-height:1.6;font-size:16px}.gris[_ngcontent-%COMP%]{color:#333}.espacio[_ngcontent-%COMP%]{padding-right:10px}.diapo[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.diapo[_ngcontent-%COMP%]   .btonDiapo[_ngcontent-%COMP%]{margin:auto 5%;width:90%;position:absolute;bottom:10px;left:0;z-index:10}.etiquetas[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:100px;border-radius:3px;text-align:center;background-color:#f1f1f1;color:#333}.comentar[_ngcontent-%COMP%]{color:#777;padding:5px 15px;font-size:14px;text-align:left}.opt[_ngcontent-%COMP%]{opacity:.5}.av[_ngcontent-%COMP%]{width:30px;height:70px}@media screen and (max-width:600px){.pb[_ngcontent-%COMP%]{height:100px}.contenido[_ngcontent-%COMP%]{width:100%}.contenido[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{width:calc(90% - 10px)}.servicio[_ngcontent-%COMP%]{justify-content:center}.servicio[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{width:calc(100% - 10px);margin:5px}}@media screen and (min-width:600px){.pb[_ngcontent-%COMP%]{height:200px}.servicio[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{width:calc(50% - 10px);margin:5px}}@media screen and (min-width:800px){.pb[_ngcontent-%COMP%]{height:300px}.servicio[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{width:calc(33.33% - 10px);margin:5px}}"],data:{animation:[Object(d.m)("openClose",[Object(d.l)(":enter",[Object(d.k)({opacity:0}),Object(d.e)("500ms ease-in",Object(d.k)({opacity:1}))]),Object(d.l)(":leave",[Object(d.e)("100ms ease-in",Object(d.k)({opacity:0}))])]),Object(d.m)("chao",[Object(d.l)(":enter",[Object(d.k)({opacity:0}),Object(d.e)("500ms ease-in",Object(d.k)({opacity:1}))]),Object(d.l)(":leave",[Object(d.e)("500ms",Object(d.k)({marginLeft:"300px",opacity:0}))])]),Object(d.m)("personas",[Object(d.l)("* => *",[Object(d.g)(":enter",[Object(d.k)({opacity:0,transform:"scale(0)"}),Object(d.i)(300,[Object(d.e)("400ms",Object(d.k)({opacity:1,transform:"none"}))])],{optional:!0})])]),Object(d.m)("entrada",[Object(d.l)(":enter",[Object(d.k)({opacity:0,transform:"scale(0)"}),Object(d.e)("100ms",Object(d.k)({opacity:1,transform:"scale(1)"}))]),Object(d.l)(":leave",[Object(d.k)({opacity:1,transform:"scale(1)"}),Object(d.e)("100ms",Object(d.k)({opacity:0,transform:"scale(0)"}))])])]}}),i})();var oi=e("Mr3z"),ni=e("iTUp"),ai=e("D3OO");const ci=[{path:"",component:ei}];let si=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.Jb({type:i}),i.\u0275inj=u.Ib({imports:[[o.b,n.e,c.mb,a.j.forChild(ci),oi.a,ni.a,ai.a]]}),i})()}}]);