(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"5EfH":function(t,e,i){"use strict";i.r(e),i.d(e,"CitasPageModule",function(){return F});var o=i("ofXK"),n=i("3Pt+"),s=i("TEn/"),r=i("tyNb"),a=i("mrSG"),c=i("fXoL"),l=i("fsfq"),b=i("fmoy"),h=i("HavB");const d=[{path:"",component:(()=>{class t{constructor(t,e,i,o,n){this.almacenamiento=t,this.router=e,this.active=i,this.toast=o,this.apiPedido=n}ngOnInit(){}ionViewWillEnter(){this.crear()}crear(){return Object(a.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&this.apiPedido.consultarChat(t.token,{id:this.active.snapshot.paramMap.get("id")}).subscribe(t=>{t.exe?this.almacenamiento.insertarChat(t.response[0]).then(()=>{this.router.navigate(["/central/chats/chat"])}).catch(()=>{this.router.navigate(["/central/menu"]),this.toast.toastError("No se puede acceder al chat, int\xe9ntelo m\xe1s tarde")}):this.toast.toastError("No se pudo traer la informaci\xf3n, int\xe9ntelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo traer la informaci\xf3n, int\xe9ntelo m\xe1s tarde")})})}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(l.a),c.Lb(r.g),c.Lb(r.a),c.Lb(b.a),c.Lb(h.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-citas"]],decls:6,vars:0,consts:[["scrollEvents","true"],["contenido",""],["name","crescent","color","barra"]],template:function(t,e){1&t&&(c.Ob(0,"ion-content",0,1),c.Ob(2,"div"),c.Mb(3,"ion-spinner",2),c.Ob(4,"h3"),c.wc(5,"Cargando..."),c.Nb(),c.Nb(),c.Nb())},directives:[s.t,s.cb],styles:["div[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:30px!important;font-weight:300;text-align:center}"]}),t})()}];let p=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({imports:[[r.j.forChild(d)],r.j]}),t})();var u=i("wd/R"),f=i("R0Ic"),m=i("AQLj"),g=i("W7Eg");let v=(()=>{class t{transform(t,e){return e=e.toLowerCase(),t.filter(t=>(t.nombrecompleto=t.nombrecompleto.toLowerCase(),t.nombrecompleto.includes(e)))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=c.Kb({name:"miFiltro",type:t,pure:!0}),t})();var O=i("/cRh");const w=["slide"];function j(t,e){if(1&t){const t=c.Pb();c.Ob(0,"ion-buttons",5),c.Ob(1,"ion-button",6),c.Wb("click",function(){return c.pc(t),c.Yb(2).descartar()}),c.Mb(2,"ion-icon",7),c.Nb(),c.Nb()}}function k(t,e){if(1&t&&(c.Ob(0,"ion-header"),c.Ob(1,"ion-toolbar",3),c.Ob(2,"ion-title"),c.wc(3,"Creando nuevas citas"),c.Nb(),c.vc(4,j,3,0,"ion-buttons",4),c.Nb(),c.Nb()),2&t){const t=c.Yb();c.Ab(4),c.fc("ngIf","chat"!==t.type)}}function x(t,e){if(1&t){const t=c.Pb();c.Ob(0,"ion-header"),c.Ob(1,"ion-toolbar",8),c.Ob(2,"ion-buttons",9),c.Ob(3,"ion-button",6),c.Wb("click",function(){return c.pc(t),c.Yb().descartar()}),c.Mb(4,"ion-icon",7),c.Nb(),c.Nb(),c.Ob(5,"ion-title"),c.wc(6,"Fotos y V\xeddeos"),c.Nb(),c.Nb(),c.Nb()}}function N(t,e){if(1&t){const t=c.Pb();c.Ob(0,"ion-header"),c.Ob(1,"ion-toolbar",3),c.Ob(2,"ion-buttons",9),c.Ob(3,"ion-button",6),c.Wb("click",function(){return c.pc(t),c.Yb().descartar()}),c.Mb(4,"ion-icon",7),c.Nb(),c.Nb(),c.Ob(5,"ion-title"),c.wc(6,"Carpeta de Citas"),c.Nb(),c.Nb(),c.Nb()}}function C(t,e){if(1&t){const t=c.Pb();c.Ob(0,"ion-item",23),c.Wb("press",function(){c.pc(t);const i=e.$implicit;return c.Yb(3).opciones(i.usuarioReceptor.nombrecompleto)})("click",function(){c.pc(t);const i=e.$implicit;return c.Yb(3).crear(i)}),c.Ob(1,"ion-avatar",24),c.Mb(2,"img",25),c.Nb(),c.Ob(3,"ion-label",26),c.Ob(4,"div"),c.wc(5),c.Nb(),c.Ob(6,"div"),c.wc(7),c.Nb(),c.Nb(),c.Nb()}if(2&t){const t=e.$implicit;c.Ab(2),c.hc("src","https://motocaliapp.com/",t.avatar,"",c.qc),c.Ab(3),c.xc(t.usuarioReceptor.nombrecompleto),c.Ab(2),c.xc(t.usuarioReceptor.nombreusuario)}}function y(t,e){if(1&t){const t=c.Pb();c.Ob(0,"div",12),c.Ob(1,"ion-slides",null,13),c.Ob(3,"ion-slide"),c.Ob(4,"ion-grid",14),c.Ob(5,"ion-row"),c.Ob(6,"ion-col",15),c.Mb(7,"ion-searchbar",16),c.Nb(),c.Ob(8,"ion-col",15),c.Mb(9,"div",12),c.Nb(),c.Nb(),c.Ob(10,"ion-row"),c.Ob(11,"ion-col",15),c.Ob(12,"ion-list"),c.vc(13,C,8,3,"ion-item",17),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(14,"ion-slide",18),c.Ob(15,"ion-grid",14),c.Ob(16,"ion-row"),c.Ob(17,"ion-col",15),c.Ob(18,"h3",19),c.wc(19),c.Nb(),c.Nb(),c.Nb(),c.Ob(20,"ion-row"),c.Ob(21,"ion-col",20),c.Ob(22,"ion-button",21),c.Wb("click",function(){return c.pc(t),c.Yb(2).cancelar()}),c.wc(23,"Cancelar "),c.Nb(),c.Nb(),c.Ob(24,"ion-col",20),c.Ob(25,"ion-button",22),c.Wb("click",function(){return c.pc(t),c.Yb(2).generarTicket()}),c.wc(26,"Generar "),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb()}if(2&t){const t=c.Yb(2);c.Ab(13),c.fc("ngForOf",t.listaTalleres),c.Ab(6),c.yc("Creando un nuevo turno para ",t.usuario,"")}}function E(t,e){if(1&t&&(c.Ob(0,"ion-content",10),c.vc(1,y,27,2,"div",11),c.Mb(2,"div"),c.Nb()),2&t){const t=c.Yb();c.Ab(1),c.fc("ngIf","buscar"===t.vista)}}function M(t,e){if(1&t&&c.Mb(0,"app-video",30),2&t){const t=c.Yb(2);c.hc("url","https://motocaliapp.com/Citas/",t.urlArchivo,"")}}function P(t,e){if(1&t&&(c.Ob(0,"ion-slides",31),c.Ob(1,"ion-slide"),c.Mb(2,"img",32),c.Nb(),c.Nb()),2&t){const t=c.Yb(2);c.fc("options",t.slideOpt),c.Ab(2),c.hc("src","https://motocaliapp.com/Citas/",t.urlArchivo,"",c.qc)}}function A(t,e){if(1&t&&(c.Ob(0,"ion-content",27),c.vc(1,M,1,1,"app-video",28),c.vc(2,P,3,2,"ion-slides",29),c.Nb()),2&t){const t=c.Yb();c.Ab(1),c.fc("ngIf","video"===t.tipoArchivo),c.Ab(1),c.fc("ngIf","imagen"===t.tipoArchivo)}}const I=function(t,e,i){return{"estado-amarillo ":t,"estado-azul ":e,"estado-verde ":i}};function T(t,e){if(1&t){const t=c.Pb();c.Ob(0,"ion-item-sliding"),c.Ob(1,"ion-item",35),c.Wb("click",function(){c.pc(t);const i=e.$implicit;return c.Yb(2).escogerChat(i._id)}),c.Ob(2,"ion-avatar",36),c.Mb(3,"img",37),c.Nb(),c.Ob(4,"ion-label",26),c.Ob(5,"strong",38),c.wc(6),c.Nb(),c.Ob(7,"p"),c.wc(8),c.Nb(),c.wc(9),c.Zb(10,"fecha"),c.Nb(),c.Mb(11,"div",39),c.Nb(),c.Ob(12,"ion-item-options",40),c.Ob(13,"ion-item-option",16),c.Mb(14,"ion-icon",41),c.Nb(),c.Ob(15,"ion-item-option",42),c.Mb(16,"ion-icon",43),c.Nb(),c.Nb(),c.Nb()}if(2&t){const t=e.$implicit;c.Ab(3),c.hc("src","https://motocaliapp.com/",t.imagenTaller,"",c.qc),c.Ab(3),c.xc(t.nombrecompleto),c.Ab(2),c.yc("@",t.nombreusuario," - Estado pendiente"),c.Ab(1),c.yc("Cita creada el ",c.ac(10,5,t.fechainicio)," "),c.Ab(2),c.fc("ngClass",c.nc(7,I,"PENDIENTE"===t.estado,"EN PROGRESO"===t.estado,"TERMINADO"===t.estado))}}function _(t,e){if(1&t){const t=c.Pb();c.Ob(0,"ion-content",10),c.Ob(1,"div",12),c.Ob(2,"ion-searchbar",33),c.Wb("ionChange",function(e){return c.pc(t),c.Yb().filtro(e)}),c.Nb(),c.Nb(),c.Ob(3,"ion-list"),c.vc(4,T,17,11,"ion-item-sliding",34),c.Zb(5,"miFiltro"),c.Nb(),c.Nb()}if(2&t){const t=c.Yb();c.Ab(4),c.fc("ngForOf",c.bc(5,1,t.citas,t.texto))}}u.locale("es");const $=[{path:"",component:(()=>{class t{constructor(t,e,i,o,n,s,r){this.modalCtrl=t,this.actionSheetCtrl=e,this.citasService=i,this.utitlities=o,this.almacenamiento=n,this.animationCtrl=s,this.toast=r,this.titulo="Configuraci\xf3n",this.listaTalleres=[],this.mensaje="",this.estado="",this.estadoCambio="",this.role="",this.usuario="",this.urlArchivo="",this.tipoArchivo="",this.slideOpt={zoom:{maxRatio:3,minRatio:1,toggle:!0}},this.citas=[],this.texto="",this.listaCreados=[],this.trabajos=[],this.nuevoTrabajo=!1,this.textoTrabajo="",this.textoBuscar="",this.precioconfig=!1,this.precio=0,this.msgEstado="",this.msgpro="",this.msgter="",this.terminado=!1}ngOnInit(){}ionViewWillEnter(){return Object(a.a)(this,void 0,void 0,function*(){switch(this.type){case"setting":const t=yield this.almacenamiento.obtenerToken();t&&this.citasService.obtenerListaTrabajos(t.token).subscribe(t=>{t.exe&&(this.listaCreados=t.response[0].listaTrabajos)}),this.vista="setting";break;case"buscar":this.titulo="Buscar Talleres",this.vista="buscar",setTimeout(()=>{this.slide.lockSwipes(!0).then(()=>{})},500),this.listarTalleres();break;case"media":this.vista="media",this.urlArchivo=this.data.url,this.tipoArchivo=this.data.tipo;break;case"carpetas":if(this.vista="carpetas","TALLER_ROLE"===this.data.role){const t=this.data.info.filter(t=>t.usuariopedido._id===this.data.unico);this.citas=t}else{const t=this.data.info.filter(t=>t.idtaller._id===this.data.unico);this.citas=t}}})}filtro(t){this.texto=t.detail.value}guardar(){return Object(a.a)(this,void 0,void 0,function*(){(yield this.almacenamiento.obtenerToken())&&(this.modalCtrl.dismiss({estado:this.estadoCambio,info:{trabajos:this.trabajos,precio:this.precio}}),this.nuevoTrabajo=!1)})}escogerChat(t){this.modalCtrl.dismiss({salir:!0,cita:t})}descartar(){this.modalCtrl.dismiss({salir:!0})}listarTalleres(){this.almacenamiento.obtenerToken().then(t=>{this.citasService.listadoTalleres(t.token).subscribe(t=>{t.response.length>0&&t.response.forEach(t=>{t.avatar=t.usuarioReceptor.imagen[0].path,this.listaTalleres.push(t)})})})}opciones(t){return Object(a.a)(this,void 0,void 0,function*(){yield this.slide.lockSwipes(!0);const e=yield this.actionSheetCtrl.create({translucent:!0,header:`Que quieres hacer con ${t}`,buttons:[{text:"Compartir Perf\xedl",icon:"arrow-redo-outline",handler:()=>{}},{text:"Enviar mensaje",icon:"chatbubble-outline",handler:()=>{}},{text:"Invitar a grupo",icon:"people-outline",handler:()=>{}},{text:"Eliminar Usuario",icon:"trash-outline",cssClass:"eliminar",handler:()=>{}},{text:"Cancelar",role:"cancel",icon:"close-outline"}]});return yield e.present()})}crear(t){return Object(a.a)(this,void 0,void 0,function*(){yield this.slide.lockSwipes(!1),yield this.slide.slideNext(300),this.usuario=t.usuarioReceptor.nombrecompleto,this.taller=t,yield this.slide.lockSwipes(!0)})}generarTicket(){this.almacenamiento.obtenerToken().then(t=>{this.citasService.crearCita(t.token,{idtaller:this.taller.usuarioReceptor._id}).subscribe(t=>Object(a.a)(this,void 0,void 0,function*(){yield this.modalCtrl.dismiss({})}),t=>Object(a.a)(this,void 0,void 0,function*(){yield this.utitlities.alertApplication("No se pudo agendar la cita",!1),yield this.modalCtrl.dismiss({})}))})}cancelar(){return Object(a.a)(this,void 0,void 0,function*(){yield this.slide.lockSwipes(!1),yield this.slide.slidePrev(300),yield this.slide.lockSwipes(!0)})}filtroTrabajo(t){this.textoBuscar=t.detail.value}check(t){return this.trabajos.find(e=>e===t)}borrarTrabajo(t){this.trabajos.splice(t,1)}habilitarTrabajo(){this.nuevoTrabajo=!0}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(s.qb),c.Lb(s.a),c.Lb(m.a),c.Lb(b.a),c.Lb(l.a),c.Lb(s.c),c.Lb(b.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-modal-citas"]],viewQuery:function(t,e){if(1&t&&c.Ac(w,1),2&t){let t;c.oc(t=c.Xb())&&(e.slide=t.first)}},inputs:{type:"type",data:"data"},decls:6,vars:6,consts:[[4,"ngIf"],["fullscreen","true",4,"ngIf"],["fullscreen","true","color","darkgold",4,"ngIf"],["color","blanco"],["fill","clear","slot","end",4,"ngIf"],["fill","clear","slot","end"],["fill","clear",3,"click"],["name","close-outline"],["color","dark"],["fill","clear","slot","start"],["fullscreen","true"],["class","divider",4,"ngIf"],[1,"divider"],["slide",""],["fixed",""],["size","12"],["color","light"],[3,"press","click",4,"ngFor","ngForOf"],[1,"anchofull"],[1,"opacity"],["size","6"],["expand","block","mode","ios","color","light",3,"click"],["expand","block","mode","ios","color","primary",3,"click"],[3,"press","click"],["slot","start"],["width","100%","alt","",3,"src"],[1,"ion-text-wrap"],["fullscreen","true","color","darkgold"],[3,"url",4,"ngIf"],["class","diapositiva",3,"options",4,"ngIf"],[3,"url"],[1,"diapositiva",3,"options"],["alt","",3,"src"],["mode","ios",3,"ionChange"],[4,"ngFor","ngForOf"],[3,"click"],["slot","start",1,"avatar"],["width","100%",3,"src"],[1,"medium"],["slot","end",1,"estadobol",3,"ngClass"],["side","start"],["slot","icon-only","name","ellipsis-vertical-outline"],["color","secondary"],["slot","icon-only","name","trash-outline"]],template:function(t,e){1&t&&(c.vc(0,k,5,1,"ion-header",0),c.vc(1,x,7,0,"ion-header",0),c.vc(2,N,7,0,"ion-header",0),c.vc(3,E,3,1,"ion-content",1),c.vc(4,A,3,2,"ion-content",2),c.vc(5,_,6,4,"ion-content",1)),2&t&&(c.fc("ngIf","buscar"===e.vista),c.Ab(1),c.fc("ngIf","media"===e.vista),c.Ab(1),c.fc("ngIf","carpetas"===e.vista),c.Ab(1),c.fc("ngIf","buscar"===e.vista||"chat"===e.vista||"setting"===e.vista),c.Ab(1),c.fc("ngIf","media"===e.vista),c.Ab(1),c.fc("ngIf","carpetas"===e.vista))},directives:[o.j,s.z,s.lb,s.jb,s.k,s.j,s.A,s.t,s.bb,s.ab,s.y,s.T,s.s,s.U,s.yb,s.L,o.i,s.F,s.f,s.K,g.a,s.J,o.h,s.I,s.H],pipes:[v,O.a],styles:["ion-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}ion-item[_ngcontent-%COMP%]{touch-action:pan-y!important}ion-list[_ngcontent-%COMP%], ion-slide[_ngcontent-%COMP%], ion-slides[_ngcontent-%COMP%]{width:100%}.fullancho[_ngcontent-%COMP%]{min-height:100%;height:auto}.diapositiva[_ngcontent-%COMP%]{width:100%;height:100%}.estado[_ngcontent-%COMP%]{padding:10px}.estadobol[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:100%}.estado-verde[_ngcontent-%COMP%]{background:#85b84f}.estado-amarillo[_ngcontent-%COMP%]{background:#fcd573}.estado-azul[_ngcontent-%COMP%]{background:#5591b1}.es-bottom[_ngcontent-%COMP%]{margin-bottom:15px}.es-bottom-small[_ngcontent-%COMP%]{margin-bottom:10px}.precio[_ngcontent-%COMP%]{height:80px;display:flex;justify-content:center;align-items:center;font-size:42px;opacity:.8;font-weight:bolder;color:var(--ion-color-success)}.trabajo[_ngcontent-%COMP%]{border-bottom:1px solid rgba(3,3,3,.1)}.trabajo[_ngcontent-%COMP%]:nth-child(2n){--background:#f9f9f9}ion-item-divider[_ngcontent-%COMP%]{margin-bottom:10px}.ok[_ngcontent-%COMP%]{opacity:.3}video[_ngcontent-%COMP%]{max-height:100%}.fl[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.aviso[_ngcontent-%COMP%]{--background:#fee491}.aviso[_ngcontent-%COMP%]:hover{--background:#fee491!important}"],data:{animation:[Object(f.m)("entrada",[Object(f.l)(":enter",[Object(f.k)({opacity:0,transform:"scale(0)"}),Object(f.e)("250ms",Object(f.k)({opacity:1,transform:"scale(1)"}))]),Object(f.l)(":leave",[Object(f.k)({opacity:1,transform:"scale(1)"}),Object(f.e)("250ms",Object(f.k)({opacity:0,transform:"scale(0)"}))])])]}}),t})()}];let L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({imports:[[r.j.forChild($)],r.j]}),t})();var Y=i("zon2"),R=i("iTUp");let S=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({imports:[[o.b,n.e,s.mb,L,Y.a,R.a]]}),t})(),F=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({imports:[[o.b,n.e,s.mb,p,S,R.a]]}),t})()},HavB:function(t,e,i){"use strict";i.d(e,"a",function(){return f});var o=i("AytR"),n=i("tk/3"),s=i("coGc"),r=i("lJxs"),a=i("IzEk"),c=i("MtjB"),l=i("JIr8"),b=i("PqYM"),h=i("Cfvw"),d=i("fXoL"),p=i("tyNb"),u=i("B7Rs");let f=(()=>{class t{constructor(t,e,i){this.http=t,this.router=e,this.MmyTransfer=i}hanflerError(t){return t.pipe(Object(s.a)(()=>Object(b.a)(3e3)),Object(r.a)(t=>{if(console.log("Entramos a intentos"),t instanceof ErrorEvent)throw new Error("Error de Red");if(404===t.status)throw new Error(" P\xe1gina no encontrada");if(401===t.status)throw new Error(" No tiene permisos ")}),Object(a.a)(3))}crearPedido(t,e){const i={headers:new n.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/crear/`,e,i).pipe(Object(c.a)(t=>this.hanflerError(t)))}misPedido(t){const e={headers:new n.c({"x-token":t})};return this.http.get(`${o.a}/pedidos/lista/`,e).pipe(Object(c.a)(t=>this.hanflerError(t)))}misChats(t,e){const i={headers:new n.c({"x-token":t})};return this.http.post(`${o.a}/chats/lista/`,e,i).pipe(Object(c.a)(t=>this.hanflerError(t)))}misChatsGrupos(t,e){const i={headers:new n.c({"x-token":t})};return this.http.post(`${o.a}/chats/lista/grupos`,e,i).pipe(Object(c.a)(t=>this.hanflerError(t)))}misPedidoUsuario(t,e){const i={headers:new n.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/lista/`,e,i).pipe(Object(c.a)(t=>this.hanflerError(t)))}misSalas(t){const e={headers:new n.c({"x-token":t})};return this.http.get(`${o.a}/ticket/salas`,e).pipe(Object(c.a)(t=>this.hanflerError(t)))}mensajes(t,e){const i={headers:new n.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/chat`,e,i).pipe(Object(c.a)(t=>this.hanflerError(t)))}traermensajesNoVistos(t,e){const i={headers:new n.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/chat/vistos`,e,i).pipe(Object(c.a)(t=>this.hanflerError(t)))}marcarvisto(t,e){const i={headers:new n.c({"x-token":t})};return this.http.put(`${o.a}/pedidos/chat/vistos`,e,i).pipe(Object(c.a)(t=>this.hanflerError(t)))}infoPedido(t,e){const i={headers:new n.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/info`,e,i).pipe(Object(c.a)(t=>this.hanflerError(t)))}infoPedidoPut(t,e){const i={headers:new n.c({"x-token":t})};return this.http.put(`${o.a}/pedidos/info`,e,i).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearEstados(t,e){const i={headers:new n.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/estados`,e,i).pipe(Object(c.a)(t=>this.hanflerError(t)))}consultarEstados(t,e){const i={headers:new n.c({"x-token":t})};return this.http.put(`${o.a}/pedidos/estados`,e,i).pipe(Object(c.a)(t=>this.hanflerError(t)))}consultarChat(t,e){const i={headers:new n.c({"x-token":t})};return this.http.post(`${o.a}/unico/consultar/chat`,e,i).pipe(Object(c.a)(t=>this.hanflerError(t)))}consultarChatFotos(t,e){const i={headers:new n.c({"x-token":t})};return this.http.post(`${o.a}/unico/consultar/chat/fotos`,e,i).pipe(Object(c.a)(t=>this.hanflerError(t)))}consultarSala(t,e){const i={headers:new n.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/consultar/chat`,e,i).pipe(Object(c.a)(t=>this.hanflerError(t)))}consultarMapa(t,e){const i={headers:new n.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/consultar/mapa`,e,i).pipe(Object(c.a)(t=>this.hanflerError(t)))}consultarMapaUnico(t,e){const i={headers:new n.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/consultar/mapa/unico`,e,i).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearMapa(t,e){const i={headers:new n.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/crear/mapa`,e,i).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarMapa(t,e){const i={headers:new n.c({"x-token":t})};return this.http.put(`${o.a}/pedidos/editar/mapa`,e,i).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarMapaInfo(t,e){const i={headers:new n.c({"x-token":t})};return this.http.put(`${o.a}/pedidos/editar/mapa/info`,e,i).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarMapaInfoD(t,e){const i={headers:new n.c({"x-token":t})};return this.http.put(`${o.a}/pedidos/editar/mapa/infod`,e,i).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarPedido(t,e){const i={headers:new n.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/editar`,e,i).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarChat(t,e){const i={headers:new n.c({"x-token":t})};return this.http.post(`${o.a}/chat/editar`,e,i).pipe(Object(c.a)(t=>this.hanflerError(t)))}subirArchivosChat(t,e,i,n,s,r,a){console.log("archivo",i);const c={fileKey:"archivo",fileName:r,mimeType:a,httpMethod:"PUT",headers:{"x-token":t,"x-sala":e,"x-final":n,"x-cont":s}},b=this.MmyTransfer.create();return Object(h.a)(b.upload(i,`${o.a}/pedido/upload`,c)).pipe(Object(l.a)(t=>{throw new Error(i)}))}subirweb(t,e,i,s,r){console.log(t,e,i,s);const a={headers:new n.c({"x-token":t,"x-sala":e,"x-final":i.toString(),"x-cont":s.toString()})};return this.http.put(`${o.a}/pedido/upload`,r,a).pipe(Object(c.a)(t=>this.hanflerError(t)))}}return t.\u0275fac=function(e){return new(e||t)(d.Sb(n.a),d.Sb(p.g),d.Sb(u.a))},t.\u0275prov=d.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},W7Eg:function(t,e,i){"use strict";i.d(e,"a",function(){return p});var o=i("R0Ic"),n=i("fXoL"),s=i("ofXK"),r=i("TEn/");const a=["video"],c=["range"];function l(t,e){1&t&&(n.Ob(0,"ion-chip",6),n.Mb(1,"ion-spinner",7),n.wc(2,"Cargando Video..."),n.Nb())}function b(t,e){if(1&t){const t=n.Pb();n.Ob(0,"ion-button",15),n.Wb("click",function(){return n.pc(t),n.Yb(2).play()}),n.Mb(1,"ion-icon",16),n.Nb()}}function h(t,e){if(1&t){const t=n.Pb();n.Ob(0,"ion-button",15),n.Wb("click",function(){return n.pc(t),n.Yb(2).pause()}),n.Mb(1,"ion-icon",17),n.Nb()}}function d(t,e){if(1&t){const t=n.Pb();n.Ob(0,"div",8),n.Ob(1,"div",9),n.vc(2,b,2,0,"ion-button",10),n.vc(3,h,2,0,"ion-button",10),n.Ob(4,"div",11),n.Ob(5,"ion-range",12,13),n.Wb("ionChange",function(e){return n.pc(t),n.Yb().progreso(e)})("ionFocus",function(e){return n.pc(t),n.Yb().foco(e)})("ionBlur",function(e){return n.pc(t),n.Yb().foco(e)}),n.Nb(),n.Nb(),n.Ob(7,"div",14),n.Ob(8,"strong"),n.wc(9),n.Nb(),n.Nb(),n.Nb(),n.Nb()}if(2&t){const t=n.Yb();n.Ab(2),n.fc("ngIf",!t.paused),n.Ab(1),n.fc("ngIf",t.paused),n.Ab(2),n.fc("value",t.currProgress),n.Ab(4),n.xc(t.currentt)}}let p=(()=>{class t{constructor(){this.paused=!0,this.currProgress=0,this.slideOpts={zoom:{maxRatio:3,minRatio:1,toggle:!0}},this.focus=!1,this.progress=0,this.value=0,this.bandera=!0,this.carga=!0,this.mostrar=!1}ngAfterViewInit(){this.current(),console.log(this.url," archivo")}play(){this.paused=!0,this.bandera=!0,this.focus=!0,this.video.nativeElement.play()}pause(){this.paused=!1,this.bandera=!1,this.focus=!1,this.video.nativeElement.pause()}current(){this.video.nativeElement.addEventListener("canplay",()=>{this.carga=!1,this.bandera&&this.play()}),this.video.nativeElement.addEventListener("progress",()=>{this.carga=!0}),this.video.nativeElement.addEventListener("timeupdate",()=>{this.currProgress=100*this.video.nativeElement.currentTime/this.video.nativeElement.duration,this.currentt=Math.round(this.video.nativeElement.currentTime),this.currentt<10&&(this.currentt="0"+this.currentt),this.video.nativeElement.currentTime===this.video.nativeElement.duration&&this.play()})}toggle(){console.log(this.bandera,this.focus),this.bandera?(this.mostrar=!0,this.bandera=!1,this.pause()):(this.mostrar=!1,this.focus?this.pause():this.play())}progreso(t){this.progress=t.detail.value,this.focus&&(this.play(),this.focus=!1),this.video.nativeElement.currentTime=Number((this.video.nativeElement.duration*(t.detail.value/100)).toFixed(6))}foco(t){this.bandera=!0,this.focus=!0,this.pause()}onProgress(){}ngOnDestroy(){this.video.nativeElement.pause(),console.log("Destrucci\xf3n")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Fb({type:t,selectors:[["app-video"]],viewQuery:function(t,e){if(1&t&&(n.Ac(a,3),n.Ac(c,1)),2&t){let t;n.oc(t=n.Xb())&&(e.video=t.first),n.oc(t=n.Xb())&&(e.range=t.first)}},inputs:{url:"url"},decls:6,vars:3,consts:[[1,"reproductor"],[1,"video",3,"click"],["poster","/assets/Video.png",3,"src"],["video",""],["class","cargando","color","success",4,"ngIf"],["class","controles",4,"ngIf"],["color","success",1,"cargando"],["name","crescent"],[1,"controles"],[1,"botones"],["fill","clear","color","blanco","mode","ios",3,"click",4,"ngIf"],[1,"volumen"],["debounce","500","min","0","max","100","color","success",3,"value","ionChange","ionFocus","ionBlur"],["range",""],[1,"tiempo"],["fill","clear","color","blanco","mode","ios",3,"click"],["name","play-outline","slot","icon-only"],["name","pause-outline","slot","icon-only"]],template:function(t,e){1&t&&(n.Ob(0,"div",0),n.Ob(1,"div",1),n.Wb("click",function(){return e.toggle()}),n.Mb(2,"video",2,3),n.vc(4,l,3,0,"ion-chip",4),n.Nb(),n.vc(5,d,10,4,"div",5),n.Nb()),2&t&&(n.Ab(2),n.fc("src",e.url,n.qc),n.Ab(2),n.fc("ngIf",e.carga),n.Ab(1),n.fc("ngIf",e.mostrar))},directives:[s.j,r.r,r.cb,r.P,r.xb,r.j,r.A],styles:[".reproductor[_ngcontent-%COMP%]{width:100%;height:100%;position:relative}video[_ngcontent-%COMP%]{width:100vw;height:100vh}.cargando[_ngcontent-%COMP%]{position:absolute;width:200px;bottom:10px;right:10px;display:flex;justify-content:center;align-items:center;z-index:100}.oculto[_ngcontent-%COMP%]{opacity:0}.controles[_ngcontent-%COMP%]{width:100%;height:70px;padding:5px;background:rgba(0,0,0,.01);position:absolute;bottom:0;left:0}.botones[_ngcontent-%COMP%]{width:100%;height:50px;display:flex;align-items:center}.volumen[_ngcontent-%COMP%]{padding-left:5px;width:60%}.tiempo[_ngcontent-%COMP%]{width:calc(100% - 80%);color:#fff;font-size:12px;display:flex;justify-content:center;align-items:center}ion-range[_ngcontent-%COMP%]{--bar-height:10px}ion-slides[_ngcontent-%COMP%]{width:100%;height:calc(100% - 70px)}"],data:{animation:[Object(o.m)("entry",[Object(o.j)("closed",Object(o.k)({transform:"scale(0)"})),Object(o.j)("open",Object(o.k)({transform:"scale(1)"})),Object(o.l)("* <=> *",[Object(o.e)("50ms")])])]}}),t})()}}]);