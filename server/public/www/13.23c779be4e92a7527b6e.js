(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"7cAv":function(t,o,e){"use strict";e.r(o),e.d(o,"HojaPageModule",function(){return w});var i=e("ofXK"),n=e("3Pt+"),a=e("TEn/"),s=e("tyNb"),r=e("mrSG"),c=e("fXoL"),d=e("fsfq"),b=e("AQLj"),l=e("fmoy"),h=e("fqim");function p(t,o){if(1&t&&(c.Mb(0,"div",16),c.rc(1),c.Lb()),2&t){const t=c.Wb();c.zb(1),c.sc(t.placa)}}function f(t,o){1&t&&(c.Mb(0,"div",17),c.Kb(1,"img",18),c.Mb(2,"h3",19),c.rc(3,"No hay informaci\xf3n en mi hoja de vida"),c.Lb(),c.Lb())}function u(t,o){if(1&t){const t=c.Nb();c.Mb(0,"div",20),c.Ub("click",function(){return c.lc(t),c.Wb().tomarFoto()}),c.Mb(1,"span",21),c.rc(2,"ssfsdfsfs"),c.Lb(),c.Mb(3,"div",22),c.Mb(4,"ion-buttons"),c.Mb(5,"ion-button",23),c.Kb(6,"ion-icon",24),c.Lb(),c.Lb(),c.Mb(7,"strong"),c.rc(8,"A\xf1adir Fotograf\xeda"),c.Lb(),c.Lb(),c.Lb()}}function g(t,o){1&t&&(c.Mb(0,"div",25),c.Mb(1,"span",21),c.rc(2,"ssfsdfsfs"),c.Lb(),c.Kb(3,"ion-skeleton-text",26),c.Lb())}function m(t,o){1&t&&(c.Mb(0,"div",25),c.Mb(1,"span",21),c.rc(2,"ssfsdfsfs"),c.Lb(),c.Kb(3,"ion-skeleton-text",26),c.Lb())}function v(t,o){if(1&t){const t=c.Nb();c.Mb(0,"div",20),c.Ub("click",function(){c.lc(t);const e=o.index;return c.Wb().verFoto(e)}),c.Mb(1,"span",21),c.rc(2,"ssfsdfsfs"),c.Lb(),c.Kb(3,"img",27),c.Lb()}if(2&t){const t=o.$implicit;c.zb(3),c.fc("src","https://motocaliapp.com/11927613402/",t.ruta,"",c.mc)}}function M(t,o){if(1&t){const t=c.Nb();c.Mb(0,"ion-buttons",31),c.Mb(1,"ion-button",32),c.Ub("click",function(){return c.lc(t),c.Wb(2).viajar("repuestos")}),c.Kb(2,"ion-icon",24),c.Lb(),c.Lb()}}function j(t,o){1&t&&c.Kb(0,"div",6)}function L(t,o){if(1&t&&(c.Mb(0,"ion-item",33),c.Mb(1,"ion-label",34),c.Mb(2,"div",35),c.rc(3),c.Lb(),c.Kb(4,"br"),c.Mb(5,"div",36),c.Mb(6,"div",36),c.Mb(7,"strong"),c.rc(8,"Cantidad: "),c.Lb(),c.Mb(9,"span",37),c.rc(10),c.Lb(),c.Lb(),c.Mb(11,"div",36),c.Mb(12,"strong"),c.rc(13,"Precio: "),c.Lb(),c.Mb(14,"span",38),c.rc(15),c.Xb(16,"decimales"),c.Lb(),c.Lb(),c.Lb(),c.Mb(17,"div",39),c.Mb(18,"strong"),c.rc(19,"Total: "),c.Lb(),c.Mb(20,"span",40),c.rc(21),c.Xb(22,"decimales"),c.Lb(),c.Lb(),c.Lb(),c.Lb()),2&t){const t=o.$implicit;c.zb(3),c.tc(" ",t.nombre," "),c.zb(7),c.tc(" ",t.cantidad," "),c.zb(5),c.tc("$ ",c.Zb(16,4,t.precio,"es-CO"),""),c.zb(6),c.tc("$ ",c.Zb(22,7,t.total,"es-CO"),"")}}function O(t,o){if(1&t&&(c.Mb(0,"ion-list"),c.Mb(1,"ion-item-divider",8),c.Mb(2,"ion-label"),c.rc(3," A\xf1adir Repuestos"),c.Lb(),c.qc(4,M,3,0,"ion-buttons",28),c.Lb(),c.qc(5,j,1,0,"div",29),c.qc(6,L,23,10,"ion-item",30),c.Lb()),2&t){const t=c.Wb();c.zb(4),c.dc("ngIf","TALLER_ROLE"===t.role||t.accesos),c.zb(1),c.dc("ngIf",0===t.repuestos.length),c.zb(1),c.dc("ngForOf",t.repuestos)}}function x(t,o){if(1&t){const t=c.Nb();c.Mb(0,"ion-buttons",31),c.Mb(1,"ion-button",32),c.Ub("click",function(){return c.lc(t),c.Wb(2).viajar("trabajos")}),c.Kb(2,"ion-icon",24),c.Lb(),c.Lb()}}function E(t,o){1&t&&c.Kb(0,"div",6)}function C(t,o){if(1&t&&(c.Mb(0,"ion-item",33),c.Mb(1,"ion-label",34),c.Mb(2,"div",35),c.rc(3),c.Lb(),c.Kb(4,"br"),c.Mb(5,"div",36),c.Mb(6,"strong"),c.rc(7,"Precio: "),c.Lb(),c.Mb(8,"span",38),c.rc(9),c.Xb(10,"decimales"),c.Lb(),c.Lb(),c.Lb(),c.Lb()),2&t){const t=o.$implicit;c.zb(3),c.tc(" ",t.nombre," "),c.zb(6),c.tc("$ ",c.Zb(10,2,t.precio,"es-CO"),"")}}function k(t,o){if(1&t&&(c.Mb(0,"ion-list"),c.Mb(1,"ion-item-divider",8),c.Mb(2,"ion-label"),c.rc(3,"Trabajos realizados"),c.Lb(),c.qc(4,x,3,0,"ion-buttons",28),c.Lb(),c.qc(5,E,1,0,"div",29),c.qc(6,C,11,5,"ion-item",30),c.Lb()),2&t){const t=c.Wb();c.zb(4),c.dc("ngIf","TALLER_ROLE"===t.role||t.accesos),c.zb(1),c.dc("ngIf",0===t.trabajos.length),c.zb(1),c.dc("ngForOf",t.trabajos)}}const P=[{path:"",component:(()=>{class t{constructor(t,o,e,i,n,a,s){this.modalCtrl=t,this.alertCtrl=o,this.almacenamiento=e,this.active=i,this.router=n,this.hojaApi=a,this.toast=s,this.fotos=[],this.repuestos=[],this.trabajos=[],this.role="",this.cargaFotos=!0,this.id="",this.idHoja="",this.estado="",this.tipo="",this.placa="",this.accesos=!1}ngOnInit(){}ionViewWillEnter(){return Object(r.a)(this,void 0,void 0,function*(){this.tipo=this.active.snapshot.paramMap.get("tipo"),"hoja"===this.active.snapshot.paramMap.get("tipo")?yield this.miHoja2():yield this.miHoja()})}refrescando(t){return Object(r.a)(this,void 0,void 0,function*(){"hoja"===this.active.snapshot.paramMap.get("tipo")?yield this.miHoja2():yield this.miHoja(),t.target.complete()})}tomarFoto(){this.router.navigate(["/hoja-vida-modal",this.active.snapshot.paramMap.get("id"),"fotos",this.idHoja])}verFoto(t){this.router.navigate(["/hoja-vida-modal",this.active.snapshot.paramMap.get("id"),"ver",this.idHoja,t])}viajar(t){this.router.navigate(["/hoja-vida-modal",this.active.snapshot.paramMap.get("id"),t,this.idHoja])}miHoja(){return Object(r.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&this.hojaApi.leeHoja(t.token,{id:this.active.snapshot.paramMap.get("id")}).subscribe(o=>Object(r.a)(this,void 0,void 0,function*(){console.log(o,"hoja"),o.exe&&(o.response&&(this.idHoja=o.response._id,o.response.accesos.filter(o=>o===t._id).length>0&&(this.accesos=!0),this.repuestos=o.response.repuestos,this.trabajos=o.response.trabajos,this.estado=o.response.cita.estado),yield this.traerFotos())}),t=>{this.toast.toastError("No se pudo traer la informaci\xf3n de la hoja de vida, int\xe9ntelo m\xe1s tarde")})})}miHoja2(){return Object(r.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&this.hojaApi.leeHoja2(t.token,{id:this.active.snapshot.paramMap.get("id")}).subscribe(o=>Object(r.a)(this,void 0,void 0,function*(){console.log(o),o.exe&&(o.response&&(this.idHoja=o.response._id,o.response.accesos.filter(o=>o===t._id).length>0&&(this.accesos=!0),this.repuestos=o.response.repuestos,this.trabajos=o.response.trabajos,this.placa=o.response.placa),yield this.traerFotos())}),t=>{this.toast.toastError("No se pudo traer la informaci\xf3n de la hoja de vida, int\xe9ntelo m\xe1s tarde")})})}terminar(){return Object(r.a)(this,void 0,void 0,function*(){const t=yield this.alertCtrl.create({header:"Atenci\xf3n!",message:"\xbfEstas seguro de marcar esta hoja de vida como terminada?",buttons:[{text:"No quiero",cssClass:"cancelarAlerta",role:"cancel",handler:()=>{}},{text:"Aceptar",cssClass:"botonalerta",handler:()=>Object(r.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&this.hojaApi.terminar(t.token,{id:this.active.snapshot.paramMap.get("id")}).subscribe(t=>Object(r.a)(this,void 0,void 0,function*(){console.log(t),t.exe?(this.toast.toastError("Hoja de vida terminada"),this.router.navigate(["/central/menu/hoja"])):this.toast.toastError("No se pudo terminar la hoja de vida, int\xe9ntelo m\xe1s tarde")}),t=>{this.toast.toastError("No se pudo terminar la hoja de vida, int\xe9ntelo m\xe1s tarde")})})}]});yield t.present()})}traerFotos(){return Object(r.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&(this.role=t.role,this.hojaApi.leefotos(t.token,{id:this.idHoja}).subscribe(t=>{t.exe&&(this.fotos=t.response),this.cargaFotos=!1},t=>{this.cargaFotos=!1,this.toast.toastError("No se pudo traer las fotos de la hoja de vida, int\xe9ntelo m\xe1s tarde")}))})}estados(){return Object(r.a)(this,void 0,void 0,function*(){let t="PENDIENTE";"PENDIENTE"===this.estado?t='Marcar como "en Progeso"':"EN PROGRESO"===this.estado&&(t='Marcar como "Terminado"');const o=yield this.alertCtrl.create({header:"Cambiar Estado de Cita",message:`Actualmente la cita esta en estado ${this.estado}`,mode:"ios",buttons:[{text:"cancelar",role:"cancel"},{text:t,handler:()=>{this.estado="PENDIENTE"===this.estado?"EN PROGRESO":"TERMINADO",this.cambiarEstado()}}]});yield o.present()})}cambiarEstado(){return Object(r.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&this.hojaApi.editarCita(t.token,this.active.snapshot.paramMap.get("id"),{estado:this.estado}).subscribe(t=>{console.log(t),t.exe?this.toast.toastExitoso("Estado cambiado"):this.toast.toastError("No se pudo cambiar el estado de la cita, int\xe9ntelo \xe1s tarde")},t=>{this.toast.toastError("No se pudo cambiar el estado de la cita, int\xe9ntelo \xe1s tarde")})})}}return t.\u0275fac=function(o){return new(o||t)(c.Jb(a.ob),c.Jb(a.b),c.Jb(d.a),c.Jb(s.a),c.Jb(s.g),c.Jb(b.a),c.Jb(l.a))},t.\u0275cmp=c.Db({type:t,selectors:[["app-hoja"]],decls:25,vars:8,consts:[[1,"ion-no-border"],["color","oscuro"],["slot","start"],["icon","chevron-back-outline","defaultHref","/central/menu"],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],[1,"divider"],["class","placa",4,"ngIf"],["color","light"],["class","flexbetver",4,"ngIf"],["scrollable","true"],["class","color",3,"click",4,"ngIf"],["class","color2",4,"ngIf"],["class","color",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],["mode","ios","expand","block","color","barra",3,"click"],[1,"placa"],[1,"flexbetver"],["src","/assets/Hojas.png","width","70px","alt",""],[1,"tituloGrande"],[1,"color",3,"click"],[1,"none"],[1,"add"],["color","medium"],["name","add","slot","icon-only"],[1,"color2"],["animated",""],["width","100%","alt","",3,"src"],["slot","end",4,"ngIf"],["class","divider",4,"ngIf"],["class","sinfondo",4,"ngFor","ngForOf"],["slot","end"],[3,"click"],[1,"sinfondo"],[1,"ion-text-wrap"],[1,"nombre"],[1,"flexbet"],[1,"verdei","padd"],[1,"verdei"],[1,"flexbet","bor"],[1,"rojoi"]],template:function(t,o){1&t&&(c.Mb(0,"ion-header",0),c.Mb(1,"ion-toolbar",1),c.Mb(2,"ion-buttons",2),c.Kb(3,"ion-back-button",3),c.Lb(),c.Mb(4,"ion-title"),c.rc(5,"Hoja de Vida"),c.Lb(),c.Lb(),c.Lb(),c.Mb(6,"ion-content"),c.Mb(7,"ion-refresher",4),c.Ub("ionRefresh",function(t){return o.refrescando(t)}),c.Kb(8,"ion-refresher-content",5),c.Lb(),c.Kb(9,"div",6),c.qc(10,p,2,1,"div",7),c.Kb(11,"div",6),c.Mb(12,"ion-list"),c.Mb(13,"ion-item-divider",8),c.rc(14," Registro Fotogr\xe1fico "),c.Lb(),c.Lb(),c.qc(15,f,4,0,"div",9),c.Mb(16,"ion-segment",10),c.qc(17,u,9,0,"div",11),c.qc(18,g,4,0,"div",12),c.qc(19,m,4,0,"div",12),c.qc(20,v,4,1,"div",13),c.Lb(),c.qc(21,O,7,3,"ion-list",14),c.qc(22,k,7,3,"ion-list",14),c.Mb(23,"ion-button",15),c.Ub("click",function(){return o.terminar()}),c.rc(24,"TERMINAR HOJA DE VIDA"),c.Lb(),c.Lb()),2&t&&(c.zb(10),c.dc("ngIf","hoja"===o.tipo),c.zb(5),c.dc("ngIf",0===o.fotos.length&&0===o.trabajos.length&&0===o.repuestos.length&&!o.cargaFotos&&"USER_ROLE"===o.role&&!o.accesos),c.zb(2),c.dc("ngIf","TALLER_ROLE"===o.role||o.accesos),c.zb(1),c.dc("ngIf",o.cargaFotos),c.zb(1),c.dc("ngIf",o.cargaFotos),c.zb(1),c.dc("ngForOf",o.fotos),c.zb(1),c.dc("ngIf","TALLER_ROLE"===o.role||o.accesos||o.repuestos.length>0),c.zb(1),c.dc("ngIf","TALLER_ROLE"===o.role||o.accesos||o.trabajos.length>0))},directives:[a.z,a.jb,a.k,a.g,a.h,a.hb,a.t,a.P,a.Q,i.j,a.L,a.G,a.U,a.vb,i.i,a.j,a.A,a.Y,a.K,a.F],pipes:[h.a],styles:[".color[_ngcontent-%COMP%]{max-width:150px;background:#d7ddb8;display:flex;justify-content:center;align-items:center;flex-direction:column}.color[_ngcontent-%COMP%], .color2[_ngcontent-%COMP%]{margin:5px;height:150px;border-radius:10px}.color2[_ngcontent-%COMP%]{min-width:150px;background:#f1f1f1}.color2[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{width:150px;height:100%!important;margin-top:0!important}.color[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:150px;overflow:hidden}.camarillo[_ngcontent-%COMP%]{background:#fdf2c0;padding:5px}.none[_ngcontent-%COMP%]{opacity:0;display:none}.add[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;color:var(--ion-color-medium)}.tituloGrande[_ngcontent-%COMP%]{font-size:22px;width:250px;margin:auto;text-align:center;opacity:.3;padding:8px 0}.flexbet[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.padd[_ngcontent-%COMP%]{padding-right:14px}.flexbet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:50%}.nombre[_ngcontent-%COMP%]{background-color:#fdf2c0;padding:2px 10px}.verdei[_ngcontent-%COMP%]{color:#18713c}.rojoi[_ngcontent-%COMP%]{color:red}.estadobol[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:100%}.estado-verde[_ngcontent-%COMP%]{background:#85b84f}.estado-amarillo[_ngcontent-%COMP%]{background:#fcd573}.estado-azul[_ngcontent-%COMP%]{background:#5591b1}.flexbetver[_ngcontent-%COMP%]{margin-top:15px;text-align:center}.flexbetver[_ngcontent-%COMP%]   .tituloGrande[_ngcontent-%COMP%]{opacity:.3}.placa[_ngcontent-%COMP%]{width:150px;background-color:#ffa800;color:#000;font-size:22px;text-align:center;padding:10px;border-radius:5px;font-weight:700;border:3px solid #000}"]}),t})()}];let _=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(o){return new(o||t)},imports:[[s.i.forChild(P)],s.i]}),t})();var y=e("iTUp");let w=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(o){return new(o||t)},imports:[[i.b,n.e,a.kb,_,y.a]]}),t})()},fqim:function(t,o,e){"use strict";e.d(o,"a",function(){return n});var i=e("fXoL");let n=(()=>{class t{transform(t,o){return 0===t?0:new Intl.NumberFormat(o,{minimumFractionDigits:1}).format(t)}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275pipe=i.Ib({name:"decimales",type:t,pure:!0}),t})()}}]);