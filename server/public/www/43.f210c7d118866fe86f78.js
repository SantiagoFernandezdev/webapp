(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{SpuA:function(t,i,o){"use strict";o.d(i,"a",function(){return a});var e=o("wd/R"),n=o("fXoL");let a=(()=>{class t{transform(t){console.log(t,"fechin");let i=e.utc(t).toDate();return e(i).format("dddd, DD MMMM YYYY h:mm:a")}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=n.Ib({name:"cambioUTC",type:t,pure:!0}),t})()},sUzL:function(t,i,o){"use strict";o.r(i),o.d(i,"IVTsalidasPageModule",function(){return S});var e=o("ofXK"),n=o("3Pt+"),a=o("TEn/"),s=o("tyNb"),r=o("mrSG"),c=o("SQQW"),l=o("fXoL"),d=o("fsfq"),b=o("5yQV"),h=o("fmoy"),f=o("7JkF"),u=o("fqim"),p=o("SpuA");const m=["inifinito"],g=["contenido"];function M(t,i){if(1&t){const t=l.Nb();l.Mb(0,"ion-button",5),l.Ub("click",function(){return l.lc(t),l.Wb().borrar()}),l.Kb(1,"ion-icon",13),l.Lb()}}function v(t,i){if(1&t){const t=l.Nb();l.Mb(0,"div",14),l.Mb(1,"ion-item"),l.Mb(2,"ion-label",15),l.rc(3,"Seleccionar desde que fecha"),l.Lb(),l.Mb(4,"ion-datetime",16),l.Ub("ionChange",function(i){return l.lc(t),l.Wb().filtro(i,1)}),l.Lb(),l.Lb(),l.Mb(5,"ion-item"),l.Mb(6,"ion-label",15),l.rc(7,"Seleccionar hasta que fecha"),l.Lb(),l.Mb(8,"ion-datetime",17),l.Ub("ionChange",function(i){return l.lc(t),l.Wb().filtro(i,2)}),l.Lb(),l.Lb(),l.Mb(9,"div",18),l.Mb(10,"ion-button",19),l.Ub("click",function(){return l.lc(t),l.Wb().toggleFiltro()}),l.rc(11,"CERRAR"),l.Lb(),l.Mb(12,"ion-button",20),l.Ub("click",function(){return l.lc(t),l.Wb().filtrar()}),l.rc(13,"BUSCAR"),l.Lb(),l.Lb(),l.Lb()}if(2&t){const t=l.Wb();l.zb(4),l.dc("value",t.fecha1),l.zb(4),l.dc("value",t.fecha2)}}function L(t,i){1&t&&(l.Mb(0,"div",32),l.Kb(1,"img",33),l.Mb(2,"h3",34),l.rc(3,"No tiene salidas registrados"),l.Lb(),l.Lb())}function k(t,i){1&t&&(l.Mb(0,"ion-item"),l.Kb(1,"ion-skeleton-text",37),l.Mb(2,"ion-label"),l.Kb(3,"ion-skeleton-text",38),l.Kb(4,"ion-skeleton-text",39),l.Lb(),l.Lb())}const x=function(){return[1,1,1,1,1]};function C(t,i){1&t&&(l.Mb(0,"div",35),l.Mb(1,"ion-list"),l.qc(2,k,5,0,"ion-item",36),l.Lb(),l.Lb()),2&t&&(l.zb(2),l.dc("ngForOf",l.gc(1,x)))}function y(t,i){if(1&t){const t=l.Nb();l.Mb(0,"ion-item-sliding"),l.Mb(1,"ion-item"),l.Mb(2,"ion-avatar",2),l.Kb(3,"img",40),l.Lb(),l.Mb(4,"ion-label",41),l.Mb(5,"div",42),l.rc(6),l.Lb(),l.Mb(7,"div",43),l.Kb(8,"br"),l.Mb(9,"strong",44),l.rc(10,"Cantidad: "),l.Mb(11,"span",45),l.rc(12),l.Lb(),l.Lb(),l.Mb(13,"strong",44),l.rc(14,"Precio Unitario: "),l.Mb(15,"span",45),l.rc(16),l.Xb(17,"decimales"),l.Lb(),l.Lb(),l.Mb(18,"strong",44),l.rc(19,"Costo Total : "),l.Mb(20,"span",45),l.rc(21),l.Xb(22,"decimales"),l.Lb(),l.Lb(),l.Kb(23,"br"),l.Mb(24,"strong",44),l.rc(25,"Creador: "),l.Mb(26,"span",46),l.rc(27),l.Lb(),l.Lb(),l.Mb(28,"strong",44),l.rc(29,"Fecha: "),l.Mb(30,"span",47),l.rc(31),l.Xb(32,"cambioUTC"),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Mb(33,"ion-item-options",48),l.Mb(34,"ion-item-option",49),l.Ub("click",function(){l.lc(t);const o=i.$implicit;return l.Wb(3).editar(o)}),l.Kb(35,"ion-icon",50),l.Lb(),l.Mb(36,"ion-item-option",51),l.Ub("click",function(){l.lc(t);const o=i.$implicit,e=i.index;return l.Wb(3).eliminar(o,e)}),l.Kb(37,"ion-icon",52),l.Lb(),l.Lb(),l.Lb()}if(2&t){const t=i.$implicit;l.zb(6),l.sc(t.producto.nombre),l.zb(6),l.sc(t.cantidad),l.zb(4),l.tc("$",l.Zb(17,6,t.precio,"es-CO"),""),l.zb(5),l.tc(" $",l.Zb(22,9,t.total,"es-CO"),""),l.zb(6),l.sc(t.creador.nombrecompleto),l.zb(4),l.sc(l.Yb(32,12,t.fecha))}}function A(t,i){if(1&t&&(l.Mb(0,"ion-list"),l.qc(1,y,38,14,"ion-item-sliding",36),l.Lb()),2&t){const t=l.Wb(2);l.zb(1),l.dc("ngForOf",t.salidas)}}function w(t,i){if(1&t){const t=l.Nb();l.Mb(0,"ion-infinite-scroll",53,54),l.Ub("ionInfinite",function(i){return l.lc(t),l.Wb(2).loadData(i)}),l.Kb(2,"ion-infinite-scroll-content",55),l.Lb()}}function D(t,i){if(1&t){const t=l.Nb();l.Mb(0,"ion-content",null,21),l.Mb(2,"ion-refresher",22),l.Ub("ionRefresh",function(i){return l.lc(t),l.Wb().refrescando(i)}),l.Kb(3,"ion-refresher-content",23),l.Lb(),l.Kb(4,"div",24),l.Kb(5,"div",25),l.qc(6,L,4,0,"div",26),l.qc(7,C,3,2,"div",27),l.qc(8,A,2,1,"ion-list",12),l.qc(9,w,3,0,"ion-infinite-scroll",28),l.Mb(10,"ion-fab",29),l.Mb(11,"ion-fab-button",30),l.Ub("click",function(){return l.lc(t),l.Wb().modal()}),l.Kb(12,"ion-icon",31),l.Lb(),l.Lb(),l.Lb()}if(2&t){const t=l.Wb();l.zb(6),l.dc("ngIf",0===t.salidas.length),l.zb(1),l.dc("ngIf",t.load),l.zb(1),l.dc("ngIf",t.salidas.length>0),l.zb(1),l.dc("ngIf",t.carga)}}const I=[{path:"",component:(()=>{class t{constructor(t,i,o,e,n,a,s){this.modalCtrl=t,this.almacenamiento=i,this.ivtApi=o,this.toast=e,this.alertCtrl=n,this.ActiveRouter=a,this.sockect=s,this.salidas=[],this.load=!1,this.fecha1="",this.fecha2="",this.formato1="AAAA-MM-DDTHH: mm: ssTZD",this.formato2="AAAA-MM-DDTHH: mm: ssTZD",this.filtros=!1,this.partida=0,this.partida2=0,this.patron="",this.carga=!0}ngOnInit(){}ionViewWillEnter(){this.cargarsalidas()}refrescando(t){this.partida=0,this.partida2=0,this.cargarsalidas().then(()=>{t.target.complete()}).catch(()=>t.target.complete())}cargarsalidas(){return Object(r.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&(this.carga=!0,this.ivtApi.leerSalida(t.token,{ivt:this.ActiveRouter.snapshot.paramMap.get("id"),partida:this.partida2,patron:this.patron}).subscribe(t=>{t.exe?this.salidas=t.response:this.toast.toastError("No se pudo listar las salidas, intentelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo listar las salidas, intentelo m\xe1s tarde")}))})}modal(){return Object(r.a)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:c.a,componentProps:{tipo:"salidas",creador:this.ActiveRouter.snapshot.paramMap.get("creador"),inventario:this.ActiveRouter.snapshot.paramMap.get("id")}});yield t.present();const i=yield t.onWillDismiss();i.data&&i.data.exe&&this.cargarsalidas()})}eliminar(t,i){return Object(r.a)(this,void 0,void 0,function*(){})}editar(t){return Object(r.a)(this,void 0,void 0,function*(){})}filtro(t,i){1===i?this.fecha1=t.detail.value:this.fecha2=t.detail.value}filtrar(){return Object(r.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&(this.partida=0,""!==this.fecha1&&""!==this.fecha2?this.ivtApi.filtrarSalidas(t.token,{desde:this.fecha1,hasta:this.fecha2,partida:this.partida}).subscribe(t=>{t.exe?(this.salidas=t.response,this.filtros=!1):this.toast.toastError("No se pudo consultar las salidas, intentelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo consultar las salidas, intentelo m\xe1s tarde")}):this.toast.toastError("Debe de especificar las fechas (desde, hasta)"))})}loadData(t){return Object(r.a)(this,void 0,void 0,function*(){this.partida=this.partida+10;const i=yield this.almacenamiento.obtenerToken();i&&(""!==this.fecha1&&""!==this.fecha2?this.ivtApi.filtrarSalidas(i.token,{desde:this.fecha1,hasta:this.fecha2,partida:this.partida,patron:this.patron}).subscribe(i=>{i.exe?i.response.length>0?(i.response.forEach(t=>{this.salidas.push(t)}),t.target.complete()):(t.target.disabled=!0,this.partida=0):this.toast.toastError("No se pudo consultar las salidas, intentelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo consultar las salidas, intentelo m\xe1s tarde")}):(this.partida2=this.partida2+10,this.ivtApi.leerSalida(i.token,{ivt:this.ActiveRouter.snapshot.paramMap.get("id"),partida:this.partida2,patron:this.patron}).subscribe(i=>{i.exe?i.response.length>0?(i.response.forEach(t=>{this.salidas.push(t)}),t.target.complete()):(t.target.disabled=!0,this.partida2=0):this.toast.toastError("No se pudo listar las salidas, intentelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo listar las salidas, intentelo m\xe1s tarde")})))})}buscarProducto(t){return Object(r.a)(this,void 0,void 0,function*(){this.partida=0,this.partida2=0;const i=yield this.almacenamiento.obtenerToken();yield this.contenido.scrollToTop(),i&&(""===t.detail.value?""!==this.fecha1&&""!==this.fecha2&&this.filtros?this.filtrar():this.cargarsalidas():(this.patron=t.detail.value,""!==this.fecha1&&""!==this.fecha2&&this.filtros?this.ivtApi.filtrarEntradasPatron(i.token,{desde:this.fecha1,hasta:this.fecha2,patron:t.detail.value,tipo:"filtro"}).subscribe(t=>{t.exe?(this.inifinito.disabled=!(t.response.length>0),this.salidas=t.response):this.toast.toastError("No se pudo consultar las salidas, intentelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo consultar las salidas, intentelo m\xe1s tarde")}):this.ivtApi.filtrarSalidasPatron(i.token,{patron:t.detail.value,tipo:"normal"}).subscribe(t=>{t.exe?(this.inifinito.disabled=!(t.response.length>0),this.salidas=t.response):this.toast.toastError("No se pudo consultar las salidas, intentelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo consultar las salidas, intentelo m\xe1s tarde")})))})}borrar(){return Object(r.a)(this,void 0,void 0,function*(){this.fecha1="",this.fecha2="",yield this.contenido.scrollToTop(),this.partida=0,this.partida2=0,this.inifinito.disabled=!1,this.cargarsalidas()})}toggleFiltro(){this.filtros=!this.filtros}}return t.\u0275fac=function(i){return new(i||t)(l.Jb(a.ob),l.Jb(d.a),l.Jb(b.a),l.Jb(h.a),l.Jb(a.b),l.Jb(s.a),l.Jb(f.a))},t.\u0275cmp=l.Db({type:t,selectors:[["app-ivtsalidas"]],viewQuery:function(t,i){if(1&t&&(l.vc(m,1),l.vc(g,1)),2&t){let t;l.kc(t=l.Vb())&&(i.inifinito=t.first),l.kc(t=l.Vb())&&(i.contenido=t.first)}},decls:18,vars:4,consts:[[1,"ion-no-border"],["color","success"],["slot","start"],["icon","chevron-back-outline","defaultHref","/central/menu/ivt-inicio"],["slot","end"],[3,"click"],["name","search-outline","slot","icon-only"],[3,"click",4,"ngIf"],["class","filtros blanco",4,"ngIf"],[1,"buscar"],["mode","ios","placeholder","Buscar Productos",3,"ionChange"],[1,"divider","verdeo"],[4,"ngIf"],["name","trash-outline","slot","icon-only"],[1,"filtros","blanco"],["position","floating"],["displayFormat","DD-MM-YYYY hh:mm:a","pickerFormat","DD MM YYYY, hh:mm:a","done-text","Aceptar","cancel-text","Cancelar","placeholder","Seleccione Desde",3,"value","ionChange"],["displayFormat","DD-MM-YYYY hh:mm:a","pickerFormat","DD MM YYYY, hh:mm:a","done-text","Aceptar","placeholder","Seleccione Hasta","cancel-text","Cancelar",3,"value","ionChange"],[1,"btns","divider"],["color","medium","shape","round","mode","ios",3,"click"],["color","warning","shape","round","mode","ios",3,"click"],["contenido",""],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],[1,"divider","light"],[1,"divider"],["class","cen",4,"ngIf"],["class","carga",4,"ngIf"],["threshold","100px",3,"ionInfinite",4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],["color","success",3,"click"],["name","add-outline"],[1,"cen"],["src","/assets/Salidas.png","width","100px","alt",""],[1,"tituloGrande"],[1,"carga"],[4,"ngFor","ngForOf"],["slot","start","animated","",2,"width","50px","height","50px"],["animated","",2,"width","50%","height","20px"],["animated","",2,"width","90%","height","20px"],["src","/assets/Salidas.png","width","100%","heigth","100%"],[1,"ion-text-wrap"],[1,"titulo"],[1,"info"],[1,"flexbet"],[1,"verdei"],[1,"rojoi"],[1,"amarilloi"],["side","end"],["color","warning",3,"click"],["slot","icon-only","name","pencil-outline"],["color","danger",3,"click"],["slot","icon-only","name","trash-outline"],["threshold","100px",3,"ionInfinite"],["inifinito",""],["loadingSpinner","bubbles","loadingText","Cargando salidas..."]],template:function(t,i){1&t&&(l.Mb(0,"ion-header",0),l.Mb(1,"ion-toolbar",1),l.Mb(2,"ion-buttons",2),l.Kb(3,"ion-back-button",3),l.Lb(),l.Mb(4,"ion-title"),l.rc(5,"Inventario - Salidas"),l.Lb(),l.Mb(6,"ion-buttons",4),l.Mb(7,"ion-button",5),l.Ub("click",function(){return i.toggleFiltro()}),l.Kb(8,"ion-icon",6),l.Lb(),l.qc(9,M,2,0,"ion-button",7),l.Lb(),l.Lb(),l.qc(10,v,14,2,"div",8),l.Mb(11,"div",9),l.Mb(12,"ion-searchbar",10),l.Ub("ionChange",function(t){return i.buscarProducto(t)}),l.Lb(),l.Lb(),l.Mb(13,"div",11),l.rc(14," CANTIDAD DE SALIDAS "),l.Mb(15,"strong"),l.rc(16),l.Lb(),l.Lb(),l.Lb(),l.qc(17,D,13,4,"ion-content",12)),2&t&&(l.zb(9),l.dc("ngIf",""!==i.fecha1&&""!==i.fecha2),l.zb(1),l.dc("ngIf",i.filtros),l.zb(6),l.tc(" ",i.salidas.length,""),l.zb(1),l.dc("ngIf",i.carga))},directives:[a.z,a.jb,a.k,a.g,a.h,a.hb,a.j,a.A,e.j,a.T,a.wb,a.F,a.K,a.u,a.vb,a.t,a.P,a.Q,a.v,a.w,a.L,e.i,a.Y,a.J,a.f,a.I,a.H,a.C,a.D],pipes:[u.a,p.a],styles:[".cen[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.tituloGrande[_ngcontent-%COMP%]{width:300px;text-align:center}.verdei[_ngcontent-%COMP%]{color:#1e8c4a}ion-item-divider[_ngcontent-%COMP%]{border:0!important;margin-bottom:15px}.rojoi[_ngcontent-%COMP%]{color:#c1302c}.amarilloi[_ngcontent-%COMP%]{color:#aaa}.flexbet[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.btns[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.verdeo[_ngcontent-%COMP%]{background-color:#fef4c5;color:#333}"]}),t})()}];let O=(()=>{class t{}return t.\u0275mod=l.Hb({type:t}),t.\u0275inj=l.Gb({factory:function(i){return new(i||t)},imports:[[s.i.forChild(I)],s.i]}),t})();var Y=o("iTUp"),z=o("5Wwd");let S=(()=>{class t{}return t.\u0275mod=l.Hb({type:t}),t.\u0275inj=l.Gb({factory:function(i){return new(i||t)},imports:[[e.b,n.e,a.kb,O,z.a,Y.a]]}),t})()}}]);