(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{ORVy:function(t,n,a){"use strict";a.r(n),a.d(n,"PatinadasMiasPageModule",function(){return A});var e=a("ofXK"),i=a("3Pt+"),o=a("TEn/"),c=a("tyNb"),s=a("mrSG"),r=a("fXoL"),d=a("fsfq"),l=a("fmoy"),b=a("2qE+"),p=a("7JkF"),u=a("SpuA");function h(t,n){1&t&&(r.Ob(0,"div",7),r.Mb(1,"ion-spinner",8),r.Ob(2,"div"),r.wc(3," Cargando patinadas... "),r.Mb(4,"br"),r.Mb(5,"strong"),r.Nb(),r.Nb())}function f(t,n){1&t&&(r.Ob(0,"div",7),r.Ob(1,"div",11),r.Mb(2,"img",12),r.Mb(3,"br"),r.wc(4," A\xfan no tiene patinadas para mostrar "),r.Mb(5,"br"),r.Nb(),r.Nb())}function g(t,n){if(1&t){const t=r.Pb();r.Ob(0,"ion-button",24),r.Wb("click",function(){r.pc(t);const n=r.Yb(2).$implicit;return r.Yb(3).navegar(n._id)}),r.wc(1,"CHAT"),r.Nb()}}function m(t,n){if(1&t){const t=r.Pb();r.Ob(0,"ion-item"),r.Ob(1,"ion-label",26),r.Ob(2,"div"),r.wc(3),r.Nb(),r.Ob(4,"strong"),r.wc(5),r.Nb(),r.Nb(),r.Ob(6,"ion-button",27),r.Wb("click",function(){r.pc(t);const a=n.$implicit,e=r.Yb(3).$implicit;return r.Yb(3).navegarChat(e._id,a._id)}),r.wc(7,"CHAT"),r.Nb(),r.Nb()}if(2&t){const t=n.$implicit;r.Ab(3),r.xc(t.nombrecompleto),r.Ab(2),r.xc(t.nombreusuario)}}function v(t,n){if(1&t&&(r.Ob(0,"ion-list"),r.Ob(1,"ion-item-divider"),r.Ob(2,"ion-label"),r.wc(3,"Usuarios que apoyan para tu patinada"),r.Nb(),r.Nb(),r.vc(4,m,8,2,"ion-item",25),r.Nb()),2&t){const t=r.Yb(2).$implicit;r.Ab(4),r.fc("ngForOf",t.tomados)}}function O(t,n){if(1&t){const t=r.Pb();r.Ob(0,"ion-button",28),r.Wb("click",function(){r.pc(t);const n=r.Yb(2).$implicit;return r.Yb(3).cancelar(n)}),r.wc(1,"CANCELAR PATINADA"),r.Nb()}}function N(t,n){if(1&t&&(r.Ob(0,"div",20),r.Ob(1,"p"),r.wc(2),r.Nb(),r.Mb(3,"div",21),r.Ob(4,"div"),r.Ob(5,"strong"),r.wc(6),r.Nb(),r.Nb(),r.Ob(7,"div"),r.Ob(8,"strong"),r.wc(9,"Tel\xe9fono: "),r.Nb(),r.wc(10),r.Nb(),r.Ob(11,"div"),r.Ob(12,"strong"),r.wc(13,"Correo: "),r.Nb(),r.wc(14),r.Nb(),r.Mb(15,"br"),r.vc(16,g,2,0,"ion-button",22),r.vc(17,v,5,1,"ion-list",6),r.vc(18,O,2,0,"ion-button",23),r.Nb()),2&t){const t=r.Yb().$implicit,n=r.Yb(3);r.Ab(2),r.xc(t.descripcion),r.Ab(4),r.zc("Ubicado en ",t.creador.ciudad,", ",t.creador.pais,""),r.Ab(4),r.yc(" ",t.creador.tel,""),r.Ab(4),r.yc(" ",t.creador.correo,""),r.Ab(2),r.fc("ngIf",t.creador._id!==n.id),r.Ab(1),r.fc("ngIf",t.creador._id===n.id),r.Ab(1),r.fc("ngIf",t.creador._id===n.id)}}function x(t,n){if(1&t){const t=r.Pb();r.Ob(0,"ion-card",16),r.Ob(1,"ion-card-header"),r.Mb(2,"img",17),r.Nb(),r.Ob(3,"strong"),r.wc(4),r.Zb(5,"cambioUTC"),r.Nb(),r.Ob(6,"ion-card-title"),r.wc(7),r.Nb(),r.Ob(8,"ion-chip",18),r.Wb("click",function(){r.pc(t);const a=n.index;return r.Yb(3).mostrar(a)}),r.wc(9,"Ver informaci\xf3n "),r.Nb(),r.Mb(10,"br"),r.vc(11,N,19,8,"div",19),r.Nb()}if(2&t){const t=n.$implicit;r.Ab(4),r.xc(r.ac(5,3,t.fecha)),r.Ab(3),r.yc("",t.creador.nombrecompleto," "),r.Ab(4),r.fc("ngIf",t.vs)}}function w(t,n){if(1&t&&(r.Ob(0,"div",13),r.Ob(1,"div",14),r.vc(2,x,12,5,"ion-card",15),r.Nb(),r.Nb()),2&t){const t=r.Yb(2);r.Ab(2),r.fc("ngForOf",t.patinadas)}}function M(t,n){if(1&t&&(r.Ob(0,"div"),r.vc(1,f,6,0,"div",9),r.vc(2,w,3,1,"div",10),r.Nb()),2&t){const t=r.Yb();r.Ab(1),r.fc("ngIf",0===t.patinadas.length),r.Ab(1),r.fc("ngIf",t.patinadas.length>0)}}const C=[{path:"",component:(()=>{class t{constructor(t,n,a,e,i,o,c,s){this.almacenamiento=t,this.toast=n,this.router=a,this.alert=e,this.apiPatinada=i,this.modal=o,this.socket=c,this.nav=s,this.patinadas=[],this.cargado=!1,this.id=""}ngOnInit(){}ionViewWillEnter(){this.patinadas=[],this.traer()}refrescando(t){this.traer().then(()=>{t.detail.complete()}).catch(()=>{t.detail.complete()})}traer(){return Object(s.a)(this,void 0,void 0,function*(){this.patinadas=[];const t=yield this.almacenamiento.obtenerToken();t&&(this.id=t._id,this.apiPatinada.consultarPatinadaMias(t.token).subscribe(t=>{console.log(t,"wu"),t.exe?(t.response.forEach(t=>{t.vs=!1,this.patinadas.push(t)}),this.cargado=!0):(this.toast.toastError("No se pudo consultar las patinadas, int\xe9ntelo m\xe1s tarde"),this.router.navigate(["/central/menu"]))},t=>{this.toast.toastError("No se pudo consultar las patinadas, int\xe9ntelo m\xe1s tarde"),this.router.navigate(["/central/menu"])}))})}cancelar(t){return Object(s.a)(this,void 0,void 0,function*(){const n=yield this.alert.create({header:"Atenci\xf3n!",message:"\xbfQuieres finalizar esta patinada? al aceptar ya nadie podr\xe1 ver tu solicitud en la bandeja de patinadas.",buttons:[{text:"Cancelar",cssClass:"cancelarAlerta",role:"cancel",handler:()=>{}},{text:"Finalizar",cssClass:"botonalerta",handler:()=>Object(s.a)(this,void 0,void 0,function*(){const n=yield this.almacenamiento.obtenerToken();if(n){const a=t.tomados.map(t=>{if(t._id!==this.id)return t.usuarioID});this.apiPatinada.patinadaEliminar(n.token,{id:t._id,accesos:t.tomados,dispositivos:a}).subscribe(t=>{t.exe?(this.toast.Especial("Patinada finalizada"),this.traer()):(this.toast.toastError("No se pudo eliminar las patinadas, int\xe9ntelo m\xe1s tarde"),this.router.navigate(["/central/menu"]))},t=>{this.toast.toastError("No se pudo eliminar las patinadas, int\xe9ntelo m\xe1s tarde"),this.router.navigate(["/central/menu"])})}})}]});yield n.present()})}mostrar(t){this.patinadas[t].vs=!this.patinadas[t].vs}navegar(t){return Object(s.a)(this,void 0,void 0,function*(){const n=yield this.almacenamiento.obtenerToken();n&&this.apiPatinada.consultarChat(n.token,{patinada:t}).subscribe(t=>{t.exe?t.response.length>0?t.response[0].accesos.length>0?this.almacenamiento.insertarChat(t.response[0]).then(()=>{this.nav.navigateRoot(["/central/menu/chats/chat"])}).catch(()=>{this.toast.toastError("No se puede acceder al chat, int\xe9ntelo m\xe1s tarde")}):this.toast.Especial("Este chat ya no tiene usuarios por dentro"):this.toast.toastError("No se encuentra la sala de chat, seguramente la patina ya ha sido cancelada"):this.toast.toastError("No se puede acceder al chat, int\xe9ntelo m\xe1s tarde")},t=>{this.toast.toastError("No se puede acceder al chat, int\xe9ntelo m\xe1s tarde")})})}navegarChat(t,n){return Object(s.a)(this,void 0,void 0,function*(){const a=yield this.almacenamiento.obtenerToken();a&&this.apiPatinada.consultarChat(a.token,{patinada:t,usuario:n}).subscribe(t=>{t.exe?t.response.length>0?t.response[0].accesos.length>0?this.almacenamiento.insertarChat(t.response[0]).then(()=>{this.nav.navigateRoot(["/central/menu/chats/chat"])}).catch(()=>{this.toast.toastError("No se puede acceder al chat, int\xe9ntelo m\xe1s tarde")}):this.toast.Especial("Este chat ya no tiene usuarios por dentro"):this.toast.toastError("No se encuentra la sala de chat, seguramente la patina ya ha sido cancelada"):this.toast.toastError("No se puede acceder al chat, int\xe9ntelo m\xe1s tarde")},t=>{this.toast.toastError("No se puede acceder al chat, int\xe9ntelo m\xe1s tarde")})})}}return t.\u0275fac=function(n){return new(n||t)(r.Lb(d.a),r.Lb(l.a),r.Lb(c.g),r.Lb(o.b),r.Lb(b.a),r.Lb(o.qb),r.Lb(p.a),r.Lb(o.rb))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-patinadas-mias"]],decls:11,vars:2,consts:[["color","oscuro"],["slot","start","icon","chevron-back-outline","defaultHref","/central/menu/patinadas"],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],["class","flcenter ion-padding",4,"ngIf"],[1,"divider","light"],[4,"ngIf"],[1,"flcenter","ion-padding"],["name","crescent","color","oscuro"],["class","flcenter ion-padding ",4,"ngIf"],["class"," ",4,"ngIf"],[1,"ct"],["src","/assets/Estados.png","width","80px","alt",""],[1,""],[1,"opts"],["mode","ios",4,"ngFor","ngForOf"],["mode","ios"],["src","/assets/Estados.png","width","100px"],["mode","ios","color","success",3,"click"],["class","info",4,"ngIf"],[1,"info"],[1,"separador"],["mode","ios","color","light","expand","block",3,"click",4,"ngIf"],["mode","ios","color","danger","expand","block",3,"click",4,"ngIf"],["mode","ios","color","light","expand","block",3,"click"],[4,"ngFor","ngForOf"],["mode","ios",1,"ion-text-wrap"],["expand","block","color","success","slot","end",3,"click"],["mode","ios","color","danger","expand","block",3,"click"]],template:function(t,n){1&t&&(r.Ob(0,"ion-header"),r.Ob(1,"ion-toolbar",0),r.Mb(2,"ion-back-button",1),r.Ob(3,"ion-title"),r.wc(4,"Mis Patinadas"),r.Nb(),r.Nb(),r.Nb(),r.Ob(5,"ion-content"),r.Ob(6,"ion-refresher",2),r.Wb("ionRefresh",function(t){return n.refrescando(t)}),r.Mb(7,"ion-refresher-content",3),r.Nb(),r.vc(8,h,6,0,"div",4),r.Mb(9,"div",5),r.vc(10,M,3,2,"div",6),r.Nb()),2&t&&(r.Ab(8),r.fc("ngIf",!n.cargado),r.Ab(2),r.fc("ngIf",n.cargado))},directives:[o.z,o.lb,o.g,o.h,o.jb,o.t,o.Q,o.R,e.j,o.cb,e.i,o.l,o.n,o.p,o.r,o.j,o.L,o.G,o.K,o.F],pipes:[u.a],styles:[".flcenter[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:20px;text-align:center}.opts[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}.opts[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{width:calc(100% - 10px);margin:10px 5px;display:flex;flex-direction:column;justify-content:center;align-items:center;transition:all .5s}.opts[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{width:100%;text-align:center;padding:5px;background-color:#d5dcba}.opts[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:22px;text-align:center;padding:10px}.info[_ngcontent-%COMP%]{padding:10px}div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:10px;font-size:18px;line-height:1.5}.separador[_ngcontent-%COMP%]{margin:10px;padding:1px;background-color:#333}@media screen and (min-width:600px){.opts[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{width:calc(50% - 10px)}}"]}),t})()}];let P=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({imports:[[c.j.forChild(C)],c.j]}),t})();var k=a("iTUp");let A=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({imports:[[e.b,i.e,o.mb,P,k.a]]}),t})()},SpuA:function(t,n,a){"use strict";a.d(n,"a",function(){return o});var e=a("wd/R"),i=a("fXoL");let o=(()=>{class t{transform(t){console.log(t,"fechin");let n=e.utc(t).toDate();return e(n).format("dddd, DD MMMM YYYY h:mm:a")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=i.Kb({name:"cambioUTC",type:t,pure:!0}),t})()}}]);