(window.webpackJsonp=window.webpackJsonp||[]).push([[159],{lBrD:function(o,i,e){"use strict";e.r(i),e.d(i,"ClavePageModule",function(){return w});var t=e("ofXK"),n=e("3Pt+"),a=e("TEn/"),s=e("tyNb"),c=e("mrSG"),r=e("fXoL"),l=e("fsfq"),b=e("oQG1"),d=e("fmoy");function u(o,i){if(1&o){const o=r.Pb();r.Ob(0,"ion-item",23),r.Ob(1,"ion-label",9),r.wc(2,"A\xf1adir Veh\xedculo"),r.Nb(),r.Ob(3,"ion-buttons",24),r.Ob(4,"ion-button",25),r.Wb("click",function(){return r.pc(o),r.Yb(2).agregarvehiculo()}),r.Mb(5,"ion-icon",26),r.Nb(),r.Nb(),r.Nb()}}function h(o,i){if(1&o){const o=r.Pb();r.Ob(0,"ion-item-sliding"),r.Ob(1,"ion-item",27),r.Ob(2,"div"),r.Ob(3,"ion-input",28),r.Wb("ionChange",function(e){r.pc(o);const t=i.index;return r.Yb(2).cambioVehiculoPlaca(e,t)}),r.Nb(),r.Mb(4,"br"),r.Ob(5,"ion-input",29),r.Wb("ionChange",function(e){r.pc(o);const t=i.index;return r.Yb(2).cambioVehiculoModelo(e,t)}),r.Nb(),r.Ob(6,"ion-input",30),r.Wb("ionChange",function(e){r.pc(o);const t=i.index;return r.Yb(2).cambioVehiculoMarca(e,t)}),r.Nb(),r.Ob(7,"ion-input",31),r.Wb("ionChange",function(e){r.pc(o);const t=i.index;return r.Yb(2).cambioVehiculoNombre(e,t)}),r.Nb(),r.Nb(),r.Ob(8,"ion-select",32),r.Wb("ionChange",function(e){r.pc(o);const t=i.index;return r.Yb(2).cambioVehiculo(e,t)}),r.Ob(9,"ion-select-option",33),r.wc(10,"Moto"),r.Nb(),r.Ob(11,"ion-select-option",34),r.wc(12,"Carro"),r.Nb(),r.Nb(),r.Nb(),r.Ob(13,"ion-item-options",35),r.Ob(14,"ion-item-option",36),r.Wb("click",function(){r.pc(o);const e=i.index;return r.Yb(2).eliminarvehiculo(e)}),r.Mb(15,"ion-icon",37),r.Nb(),r.Nb(),r.Nb()}if(2&o){const o=i.$implicit;r.Ab(3),r.fc("value",o.placa),r.Ab(2),r.fc("value",o.modelo),r.Ab(1),r.fc("value",o.marca),r.Ab(1),r.fc("value",o.nombre),r.Ab(1),r.gc("value",""!==o.tipo?o.tipo:"Moto")}}function p(o,i){if(1&o&&(r.Ob(0,"ion-select-option",38),r.wc(1),r.Nb()),2&o){const o=i.$implicit;r.gc("value",o.nombre),r.Ab(1),r.xc(o.nombre)}}function m(o,i){if(1&o&&(r.Ob(0,"ion-select-option",38),r.wc(1),r.Nb()),2&o){const o=i.$implicit;r.gc("value",o.nombre),r.Ab(1),r.xc(o.nombre)}}function f(o,i){if(1&o){const o=r.Pb();r.Ob(0,"ion-item",18),r.Ob(1,"ion-label",9),r.wc(2,"Selecciona la ciudad"),r.Nb(),r.Ob(3,"ion-select",19),r.Wb("ionChange",function(i){return r.pc(o),r.Yb(2).seleccionarCiudad(i)}),r.vc(4,m,2,2,"ion-select-option",20),r.Nb(),r.Nb()}if(2&o){const o=r.Yb(2);r.Ab(3),r.fc("value",o.miciudad),r.Ab(1),r.fc("ngForOf",o.ciudades)}}function g(o,i){if(1&o){const o=r.Pb();r.Ob(0,"ion-list"),r.Ob(1,"ion-item-divider",7),r.wc(2,"Privacidad de la cuenta"),r.Nb(),r.Ob(3,"ion-item",8),r.Ob(4,"ion-label",9),r.wc(5,"Cuenta P\xfablica"),r.Nb(),r.Ob(6,"ion-toggle",10),r.Wb("ionChange",function(i){return r.pc(o),r.Yb().cambio(i)}),r.Nb(),r.Nb(),r.Ob(7,"ion-item",8),r.Ob(8,"ion-label",9),r.wc(9,"Si tu cuenta es p\xfablica, los usuarios podr\xe1nver tus publicaciones e informaci\xf3n sin necesidad de seguirte. Por otro lado si te envian una solicitud, comenzar\xe1n a seguirte al instante sin antes tener que aceptar la solicitud."),r.Nb(),r.Nb(),r.Ob(10,"ion-item-divider",0),r.wc(11,"DATOS DEL USUARIO"),r.Nb(),r.Ob(12,"ion-item",11),r.Ob(13,"ion-label",9),r.wc(14,"NOMBRE"),r.Nb(),r.Nb(),r.Ob(15,"ion-item",12),r.Ob(16,"ion-input",13),r.Wb("ngModelChange",function(i){return r.pc(o),r.Yb().ncompleto=i}),r.Nb(),r.Nb(),r.vc(17,u,6,0,"ion-item",14),r.vc(18,h,16,5,"ion-item-sliding",15),r.Ob(19,"ion-item",11),r.Ob(20,"ion-label",9),r.wc(21,"TEL\xc9FONO O CELULAR"),r.Nb(),r.Nb(),r.Ob(22,"ion-item",12),r.Ob(23,"ion-input",16),r.Wb("ngModelChange",function(i){return r.pc(o),r.Yb().tel=i}),r.Nb(),r.Nb(),r.Ob(24,"ion-item",11),r.Ob(25,"ion-label",9),r.wc(26,"CORREO ELECTR\xd3NICO"),r.Nb(),r.Nb(),r.Ob(27,"ion-item",12),r.Ob(28,"ion-input",17),r.Wb("ngModelChange",function(i){return r.pc(o),r.Yb().correo=i}),r.Nb(),r.Nb(),r.Ob(29,"ion-item",11),r.Ob(30,"ion-label",9),r.wc(31,"PAIS"),r.Nb(),r.Nb(),r.Ob(32,"ion-item",18),r.Ob(33,"ion-label",9),r.wc(34,"Selecciona el Pa\xeds"),r.Nb(),r.Ob(35,"ion-select",19),r.Wb("ionChange",function(i){return r.pc(o),r.Yb().listarCiudades(i)}),r.vc(36,p,2,2,"ion-select-option",20),r.Nb(),r.Nb(),r.Ob(37,"ion-item",11),r.Ob(38,"ion-label",9),r.wc(39,"CIUDAD"),r.Nb(),r.Nb(),r.vc(40,f,5,2,"ion-item",21),r.Ob(41,"ion-button",22),r.Wb("click",function(){return r.pc(o),r.Yb().guardar()}),r.wc(42,"GUARDAR DATOS"),r.Nb(),r.Nb()}if(2&o){const o=r.Yb();r.Ab(6),r.fc("checked",o.publica),r.Ab(10),r.fc("ngModel",o.ncompleto),r.Ab(1),r.fc("ngIf","TALLER_ROLE"!==o.role),r.Ab(1),r.fc("ngForOf",o.vehiculos),r.Ab(5),r.fc("ngModel",o.tel),r.Ab(5),r.fc("ngModel",o.correo),r.Ab(7),r.fc("value",o.pais),r.Ab(1),r.fc("ngForOf",o.paises),r.Ab(4),r.fc("ngIf",o.ciudad)}}function v(o,i){if(1&o){const o=r.Pb();r.Ob(0,"div"),r.Ob(1,"ion-item",39),r.Ob(2,"ion-label",9),r.wc(3,"Contrase\xf1a Actual"),r.Nb(),r.Nb(),r.Ob(4,"ion-item",12),r.Ob(5,"ion-input",40),r.Wb("ngModelChange",function(i){return r.pc(o),r.Yb().valido=i}),r.Nb(),r.Nb(),r.Ob(6,"ion-button",41),r.Wb("click",function(){return r.pc(o),r.Yb().validar()}),r.wc(7,"Validar Contrase\xf1a"),r.Nb(),r.Nb()}if(2&o){const o=r.Yb();r.Ab(5),r.fc("ngModel",o.valido)}}function O(o,i){1&o&&(r.Ob(0,"div",42),r.Mb(1,"ion-spinner",43),r.wc(2," Validando, por favor espere... "),r.Nb())}function N(o,i){if(1&o){const o=r.Pb();r.Ob(0,"div"),r.Ob(1,"ion-item",8),r.Ob(2,"ion-label",9),r.wc(3,"Escriba su contrase\xf1a"),r.Nb(),r.Nb(),r.Ob(4,"ion-item",44),r.Ob(5,"ion-input",45),r.Wb("ngModelChange",function(i){return r.pc(o),r.Yb().clave=i}),r.Nb(),r.Nb(),r.Ob(6,"ion-item",8),r.Ob(7,"ion-label",9),r.wc(8,"Confirmar la contrase\xf1a"),r.Nb(),r.Nb(),r.Ob(9,"ion-item",44),r.Ob(10,"ion-input",46),r.Wb("ngModelChange",function(i){return r.pc(o),r.Yb().confirmar=i}),r.Nb(),r.Nb(),r.Ob(11,"ion-button",41),r.Wb("click",function(){return r.pc(o),r.Yb().actualizar()}),r.wc(12,"Actualizar Contrase\xf1a"),r.Nb(),r.Nb()}if(2&o){const o=r.Yb();r.Ab(5),r.fc("ngModel",o.clave),r.Ab(5),r.fc("ngModel",o.confirmar)}}const C=[{path:"",component:(()=>{class o{constructor(o,i,e){this.almacenamiento=o,this.apiUsuario=i,this.toast=e,this.validado=!1,this.clave="",this.confirmar="",this.valido="",this.vl=!1,this.paises=[],this.ciudades=[],this.ciudad=!1,this.load=!1,this.pais="",this.miciudad="",this.correo="",this.tel=0,this.ncompleto="",this.placa="",this.cargatodo=!1,this.role="",this.vehiculos=[],this.publica=!1}ngOnInit(){}ionViewWillEnter(){this.datos()}refrescando(o){this.cargatodo=!1,this.datos().then(()=>{o.detail.complete()}).catch(()=>{o.detail.complete()})}agregarvehiculo(){this.vehiculos.push({placa:"",tipo:"Moto",nombre:"",modelo:"",marca:""})}eliminarvehiculo(o){this.vehiculos.splice(o,1)}cambioVehiculoPlaca(o,i){this.vehiculos[i].placa=o.detail.value}cambioVehiculoNombre(o,i){this.vehiculos[i].nombre=o.detail.value}cambioVehiculoModelo(o,i){this.vehiculos[i].modelo=o.detail.value}cambioVehiculoMarca(o,i){this.vehiculos[i].marca=o.detail.value}cambioVehiculo(o,i){this.vehiculos[i].tipo=o.detail.value}validar(){return Object(c.a)(this,void 0,void 0,function*(){this.vl=!0;const o=yield this.almacenamiento.obtenerToken();o&&this.apiUsuario.validarClave(o.token,{clave:this.valido}).subscribe(o=>{o.exe?this.validado=!0:this.toast.toastError("la contrase\xf1a no es correcta"),this.vl=!1},o=>{this.vl=!1,this.toast.toastError("No se pudo validar la contrase\xf1a, int\xe9ntelo m\xe1s tarde")})})}actualizar(){return Object(c.a)(this,void 0,void 0,function*(){if(this.clave===this.confirmar&&""!==this.clave&&""!==this.confirmar){const o=yield this.almacenamiento.obtenerToken();o&&this.apiUsuario.editarClaves(o.token,{clave:this.confirmar}).subscribe(o=>{o.exe?(this.validado=!1,this.toast.toastExitoso("Contrase\xf1a actualizada")):this.toast.toastError("No se pudo actualizar la contrase\xf1a, int\xe9ntelo m\xe1s tarde")},o=>{this.toast.toastError("No se pudo actualizar la contrase\xf1a, int\xe9ntelo m\xe1s tarde")})}else this.toast.toastError("Las contrase\xf1as no co\xednciden")})}datos(){return Object(c.a)(this,void 0,void 0,function*(){const o=yield this.almacenamiento.obtenerToken();o&&(this.role=o.role,this.apiUsuario.usuarioDatos(o.token).subscribe(o=>{o.exe?(this.publica=!!o.response.publica&&o.response.publica,this.ncompleto=o.response.nombrecompleto,this.tel=o.response.tel,this.correo=o.response.correo,this.vehiculos=o.response.vehiculo?o.response.vehiculo:[],this.pais=o.response.pais,this.miciudad=o.response.ciudad,this.cargatodo=!0,this.listarPaises()):this.toast.toastError("No se pudo traer los datos del usuario, int\xe9ntelo m\xe1s tarde")},o=>{this.toast.toastError("No se pudo traer los datos del usuario, int\xe9ntelo m\xe1s tarde")}))})}cambio(o){return Object(c.a)(this,void 0,void 0,function*(){const i=yield this.almacenamiento.obtenerToken();i&&this.apiUsuario.tipo(i.token,{id:i._id,estado:o.detail.checked}).subscribe(i=>{i.exe?(this.publica=o.detail.checked,this.toast.Especial("Privacidad actualizada")):this.toast.toastError("No se pudo cambiar la privacidad de la cuenta, int\xe9ntelo m\xe1s tarde")},o=>{this.toast.toastError("No se pudo cambiar la privacidad de la cuenta, int\xe9ntelo m\xe1s tarde")})})}listarPaises(){this.apiUsuario.listarPaises().subscribe(o=>{o.exe?(this.paises=o.response,""!==this.pais&&this.listarCiudades({detail:{value:this.pais}})):this.paises.push("Colombia")},o=>{this.paises.push("Colombia")})}listarCiudades(o){this.pais=o.detail.value,this.miciudad=""!==this.miciudad?this.miciudad:"";const i=this.paises.filter(o=>o.nombre===this.pais)[0]._id;this.apiUsuario.listarCiudades(i).subscribe(o=>{o.exe?(this.ciudades=o.response,this.ciudad=!0):this.toast.toastError("No se pudo traer las ciudades, intente registrarse m\xe1s tarde")},o=>{this.toast.toastError("No se pudo traer las ciudades, intente registrarse m\xe1s tarde")})}seleccionarCiudad(o){this.miciudad=o.detail.value}guardar(){return Object(c.a)(this,void 0,void 0,function*(){if(0===this.vehiculos.length||this.vehiculos.filter(o=>""===o.placa||""===o.tipo).length>0)this.toast.toastError("Debe de registar aunque sea un Veh\xedculo en su cuenta o la informaci\xf3n esta incorrecta");else{const o=yield this.almacenamiento.obtenerToken();o&&(this.role=o.role,this.apiUsuario.editarUusuario(o.token,{ciudad:this.miciudad,pais:this.pais,vehiculos:this.vehiculos,nombrecompleto:this.ncompleto,telefono:this.tel,correo:this.correo}).subscribe(o=>{o.exe?this.toast.Especial("Uusario editado correctamente"):this.toast.toastError("No se pudo editar los datos del usuario, int\xe9ntelo m\xe1s tarde")},o=>{this.toast.toastError("No se pudo editar los datos del usuario, int\xe9ntelo m\xe1s tarde")}))}})}}return o.\u0275fac=function(i){return new(i||o)(r.Lb(l.a),r.Lb(b.a),r.Lb(d.a))},o.\u0275cmp=r.Fb({type:o,selectors:[["app-clave"]],decls:15,vars:4,consts:[["color","oscuro"],["slot","start","icon","chevron-back-outline","defaultHref","/central/menu"],[1,"ion-padding"],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],[4,"ngIf"],["class","fl",4,"ngIf"],["color","masoscuro"],["lines","none","mode","md",1,"sinfondo","ion-margin-top"],[1,"ion-text-wrap"],["slot","end","color","primary","mode","ios",3,"checked","ionChange"],["color","light","lines","none","mode","md",1,"ion-margin-top"],["lines","none","mode","ios"],["placeholder","Escribe tu Nombre","type","text",3,"ngModel","ngModelChange"],["lines","none","color","light","class"," ion-margin-top","mode","md",4,"ngIf"],[4,"ngFor","ngForOf"],["placeholder","Digita tu n\xfamero tel\xe9fono o celular","type","number",3,"ngModel","ngModelChange"],["placeholder","Escribe tu correo","type","text",3,"ngModel","ngModelChange"],["lines","none","mode","md",1,"noborder"],["okText","Aceptar","cancelText","Cancelar",3,"value","ionChange"],[3,"value",4,"ngFor","ngForOf"],["lines","none","class"," noborder","mode","md",4,"ngIf"],["color","barra","expand","block","mode","ios",3,"click"],["lines","none","color","light","mode","md",1,"ion-margin-top"],["slot","end"],["color","barra",3,"click"],["name","add","slot","icon-only"],["lines","none","mode","ios",1,"sinfondo","sep"],["placeholder","Placa","type","text",3,"value","ionChange"],["placeholder","M\xf3delo","type","text",3,"value","ionChange"],["placeholder","Marca","type","text",3,"value","ionChange"],["placeholder","Nombre","type","text",3,"value","ionChange"],["slot","end","placeholder","Tipo",3,"value","ionChange"],["value","Moto"],["value","Carro"],["side","end"],["color","danger",3,"click"],["name","trash","slot","icon-only"],[3,"value"],["lines","none","mode","md",1,"ion-margin-top"],["placeholder","Escribe tu contrase\xf1a","type","password",3,"ngModel","ngModelChange"],["color","light","expand","block","mode","ios",3,"click"],[1,"fl"],["name","crescent","color","oscuro"],["color","light","lines","none","mode","ios",1,"campo","ion-margin-top"],["placeholder","Escriba nueva contrase\xf1a","type","password",3,"ngModel","ngModelChange"],["placeholder","Confirmar nueva contrase\xf1a","type","password",3,"ngModel","ngModelChange"]],template:function(o,i){1&o&&(r.Ob(0,"ion-header"),r.Ob(1,"ion-toolbar",0),r.Mb(2,"ion-back-button",1),r.Ob(3,"ion-title"),r.wc(4,"Informaci\xf3n"),r.Nb(),r.Nb(),r.Nb(),r.Ob(5,"ion-content",2),r.Ob(6,"ion-refresher",3),r.Wb("ionRefresh",function(o){return i.refrescando(o)}),r.Mb(7,"ion-refresher-content",4),r.Nb(),r.Ob(8,"ion-list"),r.vc(9,g,43,9,"ion-list",5),r.Ob(10,"ion-item-divider",0),r.wc(11,"Cambiar Contrase\xf1a"),r.Nb(),r.vc(12,v,8,1,"div",5),r.vc(13,O,3,0,"div",6),r.vc(14,N,13,2,"div",5),r.Nb(),r.Nb()),2&o&&(r.Ab(9),r.fc("ngIf",i.cargatodo),r.Ab(3),r.fc("ngIf",!i.validado),r.Ab(1),r.fc("ngIf",!i.validado&&i.vl),r.Ab(1),r.fc("ngIf",i.validado))},directives:[a.z,a.lb,a.g,a.h,a.jb,a.t,a.Q,a.R,a.L,t.j,a.G,a.F,a.K,a.kb,a.d,a.E,a.yb,n.i,n.k,t.i,a.sb,a.X,a.xb,a.j,a.k,a.A,a.J,a.Y,a.I,a.H,a.cb],styles:[".fl[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:5px 0}ion-spinner[_ngcontent-%COMP%]{margin-right:5px}.sep[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.1);margin-bottom:5px}"]}),o})()}];let M=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=r.Jb({type:o}),o.\u0275inj=r.Ib({imports:[[s.j.forChild(C)],s.j]}),o})(),w=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=r.Jb({type:o}),o.\u0275inj=r.Ib({imports:[[t.b,n.e,a.mb,M]]}),o})()}}]);