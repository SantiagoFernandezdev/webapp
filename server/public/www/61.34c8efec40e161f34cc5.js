(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{Cw8s:function(i,t,n){"use strict";n.r(t),n.d(t,"PatinadasInicioPageModule",function(){return U});var e=n("ofXK"),a=n("3Pt+"),o=n("TEn/"),s=n("tyNb"),c=n("mrSG"),r=n("fXoL"),d=n("oQG1"),b=n("fmoy"),l=n("fsfq"),u=n("2qE+"),p=n("7JkF"),h=n("CDls");function f(i,t){1&i&&(r.Mb(0,"ion-item-divider",6),r.Mb(1,"ion-label"),r.rc(2,"Escoja un pa\xeds"),r.Lb(),r.Lb())}function m(i,t){if(1&i&&(r.Mb(0,"ion-select-option",19),r.rc(1),r.Lb()),2&i){const i=t.$implicit;r.ec("value",i.nombre),r.zb(1),r.sc(i.nombre)}}function g(i,t){if(1&i){const i=r.Nb();r.Mb(0,"ion-item",15),r.Mb(1,"ion-label",16),r.rc(2,"Selecciona el Pa\xeds"),r.Lb(),r.Mb(3,"ion-select",17),r.Ub("ionChange",function(t){return r.lc(i),r.Wb().paissel(t)}),r.qc(4,m,2,2,"ion-select-option",18),r.Lb(),r.Lb()}if(2&i){const i=r.Wb();r.zb(3),r.dc("value",i.pais),r.zb(1),r.dc("ngForOf",i.paises)}}function v(i,t){1&i&&(r.Mb(0,"ion-item-divider",6),r.Mb(1,"ion-label"),r.rc(2,"Escoja un pa\xeds y luego las ciudades"),r.Lb(),r.Lb())}function M(i,t){if(1&i&&(r.Mb(0,"ion-select-option",19),r.rc(1),r.Lb()),2&i){const i=t.$implicit;r.ec("value",i.nombre),r.zb(1),r.sc(i.nombre)}}function L(i,t){if(1&i){const i=r.Nb();r.Mb(0,"ion-item",15),r.Mb(1,"ion-label",16),r.rc(2,"Selecciona el Pa\xeds"),r.Lb(),r.Mb(3,"ion-select",17),r.Ub("ionChange",function(t){return r.lc(i),r.Wb().listarCiudades(t)}),r.qc(4,M,2,2,"ion-select-option",18),r.Lb(),r.Lb()}if(2&i){const i=r.Wb();r.zb(3),r.dc("value",i.pais),r.zb(1),r.dc("ngForOf",i.paises)}}function x(i,t){if(1&i){const i=r.Nb();r.Mb(0,"ion-item"),r.Mb(1,"ion-label"),r.rc(2),r.Lb(),r.Mb(3,"ion-checkbox",22),r.Ub("ionChange",function(n){r.lc(i);const e=t.index;return r.Wb(2).seleccionarCiudad(n,e)}),r.Lb(),r.Lb()}if(2&i){const i=t.$implicit;r.zb(2),r.sc(i.nombre),r.zb(1),r.ec("value",i.nombre),r.dc("checked",i.check)}}function C(i,t){if(1&i){const i=r.Nb();r.Mb(0,"ion-list"),r.Mb(1,"ion-searchbar",20),r.Ub("ionChange",function(t){return r.lc(i),r.Wb().buscar(t)}),r.Lb(),r.qc(2,x,4,3,"ion-item",21),r.Xb(3,"filtrociudad"),r.Lb()}if(2&i){const i=r.Wb();r.zb(2),r.dc("ngForOf",r.Zb(3,1,i.ciudades,i.texto))}}let k=(()=>{class i{constructor(i,t,n,e,a,o){this.modal=i,this.apiUsuario=t,this.toast=n,this.almacenamiento=e,this.apiPatinada=a,this.socket=o,this.descripcion="",this.paises=[],this.ciudades=[],this.ciudad=!1,this.load=!1,this.pais="",this.miciudad="",this.vista=0,this.selecionadas=[],this.texto=""}ngOnInit(){}ionViewWillEnter(){this.listarPaises()}cerrar(){this.modal.dismiss()}listarPaises(){return Object(c.a)(this,void 0,void 0,function*(){(yield this.almacenamiento.obtenerToken())&&this.apiUsuario.listarPaises().subscribe(i=>{i.exe?(this.paises=i.response,console.log(this.paises,this.pais)):this.paises.push("Colombia")},i=>{this.paises.push("Colombia")})})}listarCiudades(i){this.miciudad=""!==this.miciudad?this.miciudad:"";const t=this.paises.filter(t=>t.nombre===i.detail.value)[0]._id;this.apiUsuario.listarCiudades(t).subscribe(i=>{i.exe?(i.response.forEach(i=>{i.check=!1,this.ciudades.push(i)}),console.log(this.ciudades),this.ciudad=!0):this.toast.toastError("No se pudo traer las ciudades, intente registrarse m\xe1s tarde")},i=>{this.toast.toastError("No se pudo traer las ciudades, intente registrarse m\xe1s tarde")})}seleccionarCiudad(i,t){this.ciudades[t].check=i.detail.checked,i.detail.checked?this.selecionadas.find(t=>t===i.detail.value)||this.selecionadas.push(i.detail.value):this.selecionadas=this.selecionadas.filter(t=>t!==i.detail.value),console.log(this.selecionadas)}cambiar(i){this.pais="",this.selecionadas=[],this.vista="pais"===i.detail.value?1:"ciudad"===i.detail.value?2:0}paissel(i){this.pais=i.detail.value}buscar(i){this.texto=i.detail.value}escribir(i){this.descripcion=i.detail.value}guardar(){return Object(c.a)(this,void 0,void 0,function*(){if(""!==this.descripcion&&(""!==this.pais||this.selecionadas.length>0)){const i=yield this.almacenamiento.obtenerToken();i&&this.apiPatinada.crearPatinada(i.token,{pais:this.pais,ciudad:this.selecionadas,descripcion:this.descripcion}).subscribe(t=>{t.exe?(this.toast.Especial("Patinada creada correctamente"),console.log(t,"midata"),this.socket.emit("patinada",{dispositivos:t.response,usuarios:t.response2,nombre:i.nombre,_id:i._id}),this.modal.dismiss({exe:!0})):(this.toast.toastError("No se pudo crer la patinada, int\xe9ntelo m\xe1s tarde"),this.modal.dismiss())},i=>{this.toast.toastError("No se pudo crer la patinada, int\xe9ntelo m\xe1s tarde"),this.modal.dismiss()})}else this.toast.toastError("Verifique que tenga la descripci\xf3n de la patinada, el pa\xeds o ciudad de notificaci\xf3n")})}}return i.\u0275fac=function(t){return new(t||i)(r.Jb(o.pb),r.Jb(d.a),r.Jb(b.a),r.Jb(l.a),r.Jb(u.a),r.Jb(p.a))},i.\u0275cmp=r.Db({type:i,selectors:[["app-modal-patinada"]],decls:34,vars:5,consts:[[1,"ion-no-border"],["color","oscuro"],["slot","end"],[3,"click"],["name","checkmark-outline","slot","icon-only"],["name","close-outline","slot","icon-only"],["color","light"],["mode","ios",1,"sinfondo"],["rows","5","placeholder","Escriba la descripci\xf3n de la patinada",3,"ionChange"],[3,"ionChange"],["slot","start","value","pais"],["slot","start","value","ciudad"],["color","light",4,"ngIf"],["lines","none","class","noborder","mode","md",4,"ngIf"],[4,"ngIf"],["lines","none","mode","md",1,"noborder"],[1,"ion-text-wrap"],["okText","Aceptar","cancelText","Cancelar",3,"value","ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mode","ios","placeholder","Buscar Ciudad",3,"ionChange"],[4,"ngFor","ngForOf"],["mode","ios","slot","end","color","success",3,"checked","value","ionChange"]],template:function(i,t){1&i&&(r.Mb(0,"ion-header",0),r.Mb(1,"ion-toolbar",1),r.Mb(2,"ion-title"),r.rc(3,"Configurar patinada"),r.Lb(),r.Mb(4,"ion-buttons",2),r.Mb(5,"ion-button",3),r.Ub("click",function(){return t.guardar()}),r.Kb(6,"ion-icon",4),r.Lb(),r.Mb(7,"ion-button",3),r.Ub("click",function(){return t.cerrar()}),r.Kb(8,"ion-icon",5),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Mb(9,"ion-content"),r.Mb(10,"ion-list"),r.Mb(11,"ion-item-divider",6),r.Mb(12,"ion-label"),r.rc(13,"Descripci\xf3n"),r.Lb(),r.Lb(),r.Mb(14,"ion-item",7),r.Mb(15,"ion-textarea",8),r.Ub("ionChange",function(i){return t.escribir(i)}),r.Lb(),r.Lb(),r.Kb(16,"br"),r.Mb(17,"ion-item-divider",6),r.Mb(18,"ion-label"),r.rc(19,"Enviar notificaci\xf3n a:"),r.Lb(),r.Lb(),r.Mb(20,"ion-radio-group",9),r.Ub("ionChange",function(i){return t.cambiar(i)}),r.Mb(21,"ion-item"),r.Mb(22,"ion-label"),r.rc(23,"Pa\xeds"),r.Lb(),r.Kb(24,"ion-radio",10),r.Lb(),r.Mb(25,"ion-item"),r.Mb(26,"ion-label"),r.rc(27,"Ciudades"),r.Lb(),r.Kb(28,"ion-radio",11),r.Lb(),r.Lb(),r.qc(29,f,3,0,"ion-item-divider",12),r.qc(30,g,5,2,"ion-item",13),r.qc(31,v,3,0,"ion-item-divider",12),r.qc(32,L,5,2,"ion-item",13),r.Lb(),r.qc(33,C,4,4,"ion-list",14),r.Lb()),2&i&&(r.zb(29),r.dc("ngIf",1===t.vista),r.zb(1),r.dc("ngIf",1===t.vista),r.zb(1),r.dc("ngIf",2===t.vista),r.zb(1),r.dc("ngIf",2===t.vista),r.zb(1),r.dc("ngIf",t.ciudad&&2===t.vista))},directives:[o.z,o.kb,o.ib,o.k,o.j,o.A,o.t,o.L,o.G,o.K,o.F,o.hb,o.xb,o.O,o.wb,o.N,o.ub,e.j,o.X,e.i,o.Y,o.U,o.q,o.d],pipes:[h.a],styles:[""]}),i})();var P=n("SpuA");function y(i,t){1&i&&(r.Mb(0,"div",10),r.Kb(1,"ion-spinner",11),r.Mb(2,"div"),r.rc(3," Cargando patinadas... "),r.Kb(4,"br"),r.Kb(5,"strong"),r.Lb(),r.Lb())}function w(i,t){1&i&&(r.Mb(0,"div",10),r.Mb(1,"div",14),r.Kb(2,"img",15),r.Kb(3,"br"),r.rc(4," No hay patinas solicitadas por los usuarios hasta el momento "),r.Kb(5,"br"),r.Lb(),r.Lb())}function z(i,t){if(1&i){const i=r.Nb();r.Mb(0,"div",23),r.Mb(1,"p"),r.rc(2),r.Lb(),r.Kb(3,"div",24),r.Mb(4,"div"),r.Mb(5,"strong"),r.rc(6),r.Lb(),r.Lb(),r.Mb(7,"div"),r.Mb(8,"strong"),r.rc(9,"Tel\xe9fono: "),r.Lb(),r.rc(10),r.Lb(),r.Mb(11,"div"),r.Mb(12,"strong"),r.rc(13,"Correo: "),r.Lb(),r.rc(14),r.Lb(),r.Kb(15,"br"),r.Mb(16,"ion-button",25),r.Ub("click",function(){r.lc(i);const t=r.Wb().$implicit;return r.Wb(3).ayudar(t)}),r.rc(17,"ACEPTAR PATINADA"),r.Lb(),r.Lb()}if(2&i){const i=r.Wb().$implicit;r.zb(2),r.sc(i.descripcion),r.zb(4),r.uc("Ubicado en ",i.creador.ciudad,", ",i.creador.pais,""),r.zb(4),r.tc(" ",i.creador.tel,""),r.zb(4),r.tc(" ",i.creador.correo,"")}}function O(i,t){if(1&i){const i=r.Nb();r.Mb(0,"ion-card",19),r.Mb(1,"ion-card-header"),r.Kb(2,"img",20),r.Lb(),r.Mb(3,"strong"),r.rc(4),r.Xb(5,"cambioUTC"),r.Lb(),r.Mb(6,"ion-card-title"),r.rc(7),r.Lb(),r.Mb(8,"ion-chip",21),r.Ub("click",function(){r.lc(i);const n=t.index;return r.Wb(3).mostrar(n)}),r.rc(9,"Ver informaci\xf3n "),r.Lb(),r.Kb(10,"br"),r.qc(11,z,18,5,"div",22),r.Lb()}if(2&i){const i=t.$implicit;r.zb(4),r.sc(r.Yb(5,3,i.fecha)),r.zb(3),r.tc("",i.creador.nombrecompleto," "),r.zb(4),r.dc("ngIf",i.vs)}}function E(i,t){if(1&i&&(r.Mb(0,"div",16),r.Mb(1,"div",17),r.qc(2,O,12,5,"ion-card",18),r.Lb(),r.Lb()),2&i){const i=r.Wb(2);r.zb(2),r.dc("ngForOf",i.patinadas)}}function I(i,t){if(1&i&&(r.Mb(0,"div"),r.qc(1,w,6,0,"div",12),r.qc(2,E,3,1,"div",13),r.Lb()),2&i){const i=r.Wb();r.zb(1),r.dc("ngIf",0===i.patinadas.length),r.zb(1),r.dc("ngIf",i.patinadas.length>0)}}const K=[{path:"",component:(()=>{class i{constructor(i,t,n,e,a,o,s){this.almacenamiento=i,this.toast=t,this.router=n,this.alert=e,this.apiPatinada=a,this.modal=o,this.socket=s,this.patinadas=[],this.cargado=!1}ngOnInit(){}ionViewWillEnter(){this.traer()}refrescando(i){this.traer().then(()=>{i.detail.complete()}).catch(()=>{i.detail.complete()})}traer(){return Object(c.a)(this,void 0,void 0,function*(){this.patinadas=[];const i=yield this.almacenamiento.obtenerToken();i&&this.apiPatinada.consultarPatinada(i.token).subscribe(i=>{console.log(i,"wu"),i.exe?(i.response.forEach(i=>{i.vs=!1,this.patinadas.push(i)}),this.cargado=!0):(this.toast.toastError("No se pudo consultar las patinadas, int\xe9ntelo m\xe1s tarde"),this.router.navigate(["/central/menu"]))},i=>{this.toast.toastError("No se pudo consultar las patinadas, int\xe9ntelo m\xe1s tarde"),this.router.navigate(["/central/menu"])})})}crear(){return Object(c.a)(this,void 0,void 0,function*(){const i=yield this.modal.create({component:k});yield i.present();const t=yield i.onWillDismiss();t&&t.data&&this.router.navigate(["/central/menu/patinadas/lista"])})}ayudar(i){return Object(c.a)(this,void 0,void 0,function*(){const t=yield this.alert.create({header:"Atenci\xf3n!",message:"\xbfQuieres colaborarle a "+i.creador.nombrecompleto+" en su patinada? al aceptar se crear\xe1 una sala de chat para que puedan hablar del asunto.",buttons:[{text:"No Acepto",cssClass:"cancelarAlerta",role:"cancel",handler:()=>{}},{text:"Acepto",cssClass:"botonalerta",handler:()=>Object(c.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&this.apiPatinada.patinadaEditar(t.token,{id:i._id}).subscribe(i=>{console.log(i,"wu"),i.exe?(this.socket.emit("patinadasayuda",{nombre:t.nombre,usuario:i.response.creador._id}),this.router.navigate(["/central/menu/patinadas/lista"])):(this.toast.toastError("No se pudo consultar las patinadas, int\xe9ntelo m\xe1s tarde"),this.router.navigate(["/central/menu"]))},i=>{this.toast.toastError("No se pudo consultar las patinadas, int\xe9ntelo m\xe1s tarde"),this.router.navigate(["/central/menu"])})})}]});yield t.present()})}mostrar(i){this.patinadas[i].vs=!this.patinadas[i].vs}}return i.\u0275fac=function(t){return new(t||i)(r.Jb(l.a),r.Jb(b.a),r.Jb(s.g),r.Jb(o.b),r.Jb(u.a),r.Jb(o.pb),r.Jb(p.a))},i.\u0275cmp=r.Db({type:i,selectors:[["app-patinadas-inicio"]],decls:14,vars:2,consts:[["color","oscuro"],["slot","start","icon","chevron-back-outline","defaultHref","/central/menu/patinadas"],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],["class","flcenter ion-padding",4,"ngIf"],[1,"divider","light"],[4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],["color","oscuro",3,"click"],["name","add"],[1,"flcenter","ion-padding"],["name","crescent","color","oscuro"],["class","flcenter ion-padding ",4,"ngIf"],["class"," ",4,"ngIf"],[1,"ct"],["src","/assets/Estados.png","width","80px","alt",""],[1,""],[1,"opts"],["mode","ios",4,"ngFor","ngForOf"],["mode","ios"],["src","/assets/Estados.png","width","100px"],["mode","ios","color","success",3,"click"],["class","info",4,"ngIf"],[1,"info"],[1,"separador"],["mode","ios","color","barra","expand","block",3,"click"]],template:function(i,t){1&i&&(r.Mb(0,"ion-header"),r.Mb(1,"ion-toolbar",0),r.Kb(2,"ion-back-button",1),r.Mb(3,"ion-title"),r.rc(4,"Bandeja Patinadas"),r.Lb(),r.Lb(),r.Lb(),r.Mb(5,"ion-content"),r.Mb(6,"ion-refresher",2),r.Ub("ionRefresh",function(i){return t.refrescando(i)}),r.Kb(7,"ion-refresher-content",3),r.Lb(),r.qc(8,y,6,0,"div",4),r.Kb(9,"div",5),r.qc(10,I,3,2,"div",6),r.Mb(11,"ion-fab",7),r.Mb(12,"ion-fab-button",8),r.Ub("click",function(){return t.crear()}),r.Kb(13,"ion-icon",9),r.Lb(),r.Lb(),r.Lb()),2&i&&(r.zb(8),r.dc("ngIf",!t.cargado),r.zb(2),r.dc("ngIf",t.cargado))},directives:[o.z,o.kb,o.g,o.h,o.ib,o.t,o.Q,o.R,e.j,o.v,o.w,o.A,o.cb,e.i,o.l,o.n,o.p,o.r,o.j],pipes:[P.a],styles:[".flcenter[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:20px;text-align:center}.opts[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}.opts[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{width:calc(100% - 10px);margin:10px 5px;display:flex;flex-direction:column;justify-content:center;align-items:center;transition:all .5s}.opts[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{width:100%;text-align:center;padding:5px;background-color:#f1f1ff}.opts[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:22px;text-align:center;padding:10px}.info[_ngcontent-%COMP%]{padding:10px}div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:10px;font-size:18px;line-height:1.5}.separador[_ngcontent-%COMP%]{margin:10px;padding:1px;background-color:#333}@media screen and (min-width:600px){.opts[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{width:calc(50% - 10px)}}"]}),i})()}];let _=(()=>{class i{}return i.\u0275mod=r.Hb({type:i}),i.\u0275inj=r.Gb({factory:function(t){return new(t||i)},imports:[[s.i.forChild(K)],s.i]}),i})();var q=n("iTUp");let U=(()=>{class i{}return i.\u0275mod=r.Hb({type:i}),i.\u0275inj=r.Gb({factory:function(t){return new(t||i)},imports:[[e.b,a.e,o.lb,_,q.a]]}),i})()},SpuA:function(i,t,n){"use strict";n.d(t,"a",function(){return o});var e=n("wd/R"),a=n("fXoL");let o=(()=>{class i{transform(i){console.log(i,"fechin");let t=e.utc(i).toDate();return e(t).format("dddd, DD MMMM YYYY h:mm:a")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=a.Ib({name:"cambioUTC",type:i,pure:!0}),i})()}}]);