(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"/cRh":function(i,t,e){"use strict";e.d(t,"a",function(){return s});var o=e("wd/R"),n=e("fXoL");let s=(()=>{class i{transform(i){return o.locale("es"),o(i).format("LLLL")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=n.Ib({name:"fecha",type:i,pure:!0}),i})()},W7Eg:function(i,t,e){"use strict";e.d(t,"a",function(){return u});var o=e("R0Ic"),n=e("fXoL"),s=e("ofXK"),a=e("TEn/");const c=["video"],r=["range"];function l(i,t){1&i&&(n.Mb(0,"ion-chip",6),n.Kb(1,"ion-spinner",7),n.rc(2,"Cargando Video..."),n.Lb())}function d(i,t){if(1&i){const i=n.Nb();n.Mb(0,"ion-button",15),n.Ub("click",function(){return n.lc(i),n.Wb(2).play()}),n.Kb(1,"ion-icon",16),n.Lb()}}function b(i,t){if(1&i){const i=n.Nb();n.Mb(0,"ion-button",15),n.Ub("click",function(){return n.lc(i),n.Wb(2).pause()}),n.Kb(1,"ion-icon",17),n.Lb()}}function h(i,t){if(1&i){const i=n.Nb();n.Mb(0,"div",8),n.Mb(1,"div",9),n.qc(2,d,2,0,"ion-button",10),n.qc(3,b,2,0,"ion-button",10),n.Mb(4,"div",11),n.Mb(5,"ion-range",12,13),n.Ub("ionChange",function(t){return n.lc(i),n.Wb().progreso(t)})("ionFocus",function(t){return n.lc(i),n.Wb().foco(t)})("ionBlur",function(t){return n.lc(i),n.Wb().foco(t)}),n.Lb(),n.Lb(),n.Mb(7,"div",14),n.Mb(8,"strong"),n.rc(9),n.Lb(),n.Lb(),n.Lb(),n.Lb()}if(2&i){const i=n.Wb();n.zb(2),n.dc("ngIf",!i.paused),n.zb(1),n.dc("ngIf",i.paused),n.zb(2),n.dc("value",i.currProgress),n.zb(4),n.sc(i.currentt)}}let u=(()=>{class i{constructor(){this.paused=!0,this.currProgress=0,this.slideOpts={zoom:{maxRatio:3,minRatio:1,toggle:!0}},this.focus=!1,this.progress=0,this.value=0,this.bandera=!0,this.carga=!0,this.mostrar=!1}ngAfterViewInit(){this.current(),console.log(this.url," archivo")}play(){this.paused=!0,this.bandera=!0,this.focus=!0,this.video.nativeElement.play()}pause(){this.paused=!1,this.bandera=!1,this.focus=!1,this.video.nativeElement.pause()}current(){this.video.nativeElement.addEventListener("canplay",()=>{this.carga=!1,this.bandera&&this.play()}),this.video.nativeElement.addEventListener("progress",()=>{this.carga=!0}),this.video.nativeElement.addEventListener("timeupdate",()=>{this.currProgress=100*this.video.nativeElement.currentTime/this.video.nativeElement.duration,this.currentt=Math.round(this.video.nativeElement.currentTime),this.currentt<10&&(this.currentt="0"+this.currentt),this.video.nativeElement.currentTime===this.video.nativeElement.duration&&this.play()})}toggle(){console.log(this.bandera,this.focus),this.bandera?(this.mostrar=!0,this.bandera=!1,this.pause()):(this.mostrar=!1,this.focus?this.pause():this.play())}progreso(i){this.progress=i.detail.value,this.focus&&(this.play(),this.focus=!1),this.video.nativeElement.currentTime=Number((this.video.nativeElement.duration*(i.detail.value/100)).toFixed(6))}foco(i){this.bandera=!0,this.focus=!0,this.pause()}onProgress(){}ngOnDestroy(){this.video.nativeElement.pause(),console.log("Destrucci\xf3n")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=n.Db({type:i,selectors:[["app-video"]],viewQuery:function(i,t){if(1&i&&(n.vc(c,3),n.vc(r,1)),2&i){let i;n.kc(i=n.Vb())&&(t.video=i.first),n.kc(i=n.Vb())&&(t.range=i.first)}},inputs:{url:"url"},decls:6,vars:3,consts:[[1,"reproductor"],[1,"video",3,"click"],["poster","/assets/Video.png",3,"src"],["video",""],["class","cargando","color","success",4,"ngIf"],["class","controles",4,"ngIf"],["color","success",1,"cargando"],["name","crescent"],[1,"controles"],[1,"botones"],["fill","clear","color","blanco","mode","ios",3,"click",4,"ngIf"],[1,"volumen"],["debounce","500","min","0","max","100","color","success",3,"value","ionChange","ionFocus","ionBlur"],["range",""],[1,"tiempo"],["fill","clear","color","blanco","mode","ios",3,"click"],["name","play-outline","slot","icon-only"],["name","pause-outline","slot","icon-only"]],template:function(i,t){1&i&&(n.Mb(0,"div",0),n.Mb(1,"div",1),n.Ub("click",function(){return t.toggle()}),n.Kb(2,"video",2,3),n.qc(4,l,3,0,"ion-chip",4),n.Lb(),n.qc(5,h,10,4,"div",5),n.Lb()),2&i&&(n.zb(2),n.dc("src",t.url,n.mc),n.zb(2),n.dc("ngIf",t.carga),n.zb(1),n.dc("ngIf",t.mostrar))},directives:[s.j,a.r,a.bb,a.O,a.vb,a.j,a.A],styles:[".reproductor[_ngcontent-%COMP%]{width:100%;height:100%;position:relative}video[_ngcontent-%COMP%]{width:100vw;height:100vh}.cargando[_ngcontent-%COMP%]{position:absolute;width:200px;bottom:10px;right:10px;display:flex;justify-content:center;align-items:center;z-index:100}.oculto[_ngcontent-%COMP%]{opacity:0}.controles[_ngcontent-%COMP%]{width:100%;height:70px;padding:5px;background:rgba(0,0,0,.01);position:absolute;bottom:0;left:0}.botones[_ngcontent-%COMP%]{width:100%;height:50px;display:flex;align-items:center}.volumen[_ngcontent-%COMP%]{padding-left:5px;width:60%}.tiempo[_ngcontent-%COMP%]{width:calc(100% - 80%);color:#fff;font-size:12px;display:flex;justify-content:center;align-items:center}ion-range[_ngcontent-%COMP%]{--bar-height:10px}ion-slides[_ngcontent-%COMP%]{width:100%;height:calc(100% - 70px)}"],data:{animation:[Object(o.l)("entry",[Object(o.i)("closed",Object(o.j)({transform:"scale(0)"})),Object(o.i)("open",Object(o.j)({transform:"scale(1)"})),Object(o.k)("* <=> *",[Object(o.e)("50ms")])])]}}),i})()},"c+zm":function(i,t,e){"use strict";e.r(t),e.d(t,"ChatPageModule",function(){return Oi});var o=e("ofXK"),n=e("3Pt+"),s=e("TEn/"),a=e("tyNb"),c=e("mrSG"),r=e("HDdC"),l=e("R0Ic"),d=e("wd/R"),b=e("fXoL"),h=e("AQLj"),u=e("fmoy"),p=e("fsfq"),m=e("W7Eg"),f=e("Y6Il"),g=e("/cRh");const v=["slide"];function M(i,t){if(1&i){const i=b.Nb();b.Mb(0,"ion-buttons",5),b.Mb(1,"ion-button",6),b.Ub("click",function(){return b.lc(i),b.Wb(2).descartar()}),b.Kb(2,"ion-icon",7),b.Lb(),b.Lb()}}function C(i,t){if(1&i&&(b.Mb(0,"ion-header"),b.Mb(1,"ion-toolbar",3),b.Mb(2,"ion-title"),b.rc(3,"Creando nuevas citas"),b.Lb(),b.qc(4,M,3,0,"ion-buttons",4),b.Lb(),b.Lb()),2&i){const i=b.Wb();b.zb(4),b.dc("ngIf","chat"!==i.type)}}function O(i,t){if(1&i){const i=b.Nb();b.Mb(0,"ion-header"),b.Mb(1,"ion-toolbar",8),b.Mb(2,"ion-buttons",9),b.Mb(3,"ion-button",6),b.Ub("click",function(){return b.lc(i),b.Wb().descartar()}),b.Kb(4,"ion-icon",7),b.Lb(),b.Lb(),b.Mb(5,"ion-title"),b.rc(6,"Fotos y V\xeddeos"),b.Lb(),b.Lb(),b.Lb()}}function j(i,t){if(1&i){const i=b.Nb();b.Mb(0,"ion-header"),b.Mb(1,"ion-toolbar",3),b.Mb(2,"ion-buttons",9),b.Mb(3,"ion-button",6),b.Ub("click",function(){return b.lc(i),b.Wb().descartar()}),b.Kb(4,"ion-icon",7),b.Lb(),b.Lb(),b.Mb(5,"ion-title"),b.rc(6,"Carpeta de Citas"),b.Lb(),b.Lb(),b.Lb()}}function x(i,t){if(1&i){const i=b.Nb();b.Mb(0,"ion-item",23),b.Ub("press",function(){b.lc(i);const e=t.$implicit;return b.Wb(3).opciones(e.usuarioReceptor.nombrecompleto)})("click",function(){b.lc(i);const e=t.$implicit;return b.Wb(3).crear(e)}),b.Mb(1,"ion-avatar",24),b.Kb(2,"img",25),b.Lb(),b.Mb(3,"ion-label",26),b.Mb(4,"div"),b.rc(5),b.Lb(),b.Mb(6,"div"),b.rc(7),b.Lb(),b.Lb(),b.Lb()}if(2&i){const i=t.$implicit;b.zb(2),b.fc("src","https://motocaliapp.com/",i.avatar,"",b.mc),b.zb(3),b.sc(i.usuarioReceptor.nombrecompleto),b.zb(2),b.sc(i.usuarioReceptor.nombreusuario)}}function L(i,t){if(1&i){const i=b.Nb();b.Mb(0,"div",12),b.Mb(1,"ion-slides",null,13),b.Mb(3,"ion-slide"),b.Mb(4,"ion-grid",14),b.Mb(5,"ion-row"),b.Mb(6,"ion-col",15),b.Kb(7,"ion-searchbar",16),b.Lb(),b.Mb(8,"ion-col",15),b.Kb(9,"div",12),b.Lb(),b.Lb(),b.Mb(10,"ion-row"),b.Mb(11,"ion-col",15),b.Mb(12,"ion-list"),b.qc(13,x,8,3,"ion-item",17),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(14,"ion-slide",18),b.Mb(15,"ion-grid",14),b.Mb(16,"ion-row"),b.Mb(17,"ion-col",15),b.Mb(18,"h3",19),b.rc(19),b.Lb(),b.Lb(),b.Lb(),b.Mb(20,"ion-row"),b.Mb(21,"ion-col",20),b.Mb(22,"ion-button",21),b.Ub("click",function(){return b.lc(i),b.Wb(2).cancelar()}),b.rc(23,"Cancelar "),b.Lb(),b.Lb(),b.Mb(24,"ion-col",20),b.Mb(25,"ion-button",22),b.Ub("click",function(){return b.lc(i),b.Wb(2).generarTicket()}),b.rc(26,"Generar "),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb()}if(2&i){const i=b.Wb(2);b.zb(13),b.dc("ngForOf",i.listaTalleres),b.zb(6),b.tc("Creando un nuevo turno para ",i.usuario,"")}}function y(i,t){if(1&i&&(b.Mb(0,"ion-content",10),b.qc(1,L,27,2,"div",11),b.Kb(2,"div"),b.Lb()),2&i){const i=b.Wb();b.zb(1),b.dc("ngIf","buscar"===i.vista)}}function k(i,t){if(1&i&&b.Kb(0,"app-video",30),2&i){const i=b.Wb(2);b.fc("url","https://motocaliapp.com/Citas/",i.urlArchivo,"")}}function _(i,t){if(1&i&&(b.Mb(0,"ion-slides",31),b.Mb(1,"ion-slide"),b.Kb(2,"img",32),b.Lb(),b.Lb()),2&i){const i=b.Wb(2);b.dc("options",i.slideOpt),b.zb(2),b.fc("src","https://motocaliapp.com/Citas/",i.urlArchivo,"",b.mc)}}function I(i,t){if(1&i&&(b.Mb(0,"ion-content",27),b.qc(1,k,1,1,"app-video",28),b.qc(2,_,3,2,"ion-slides",29),b.Lb()),2&i){const i=b.Wb();b.zb(1),b.dc("ngIf","video"===i.tipoArchivo),b.zb(1),b.dc("ngIf","imagen"===i.tipoArchivo)}}const w=function(i,t,e){return{"estado-amarillo ":i,"estado-azul ":t,"estado-verde ":e}};function P(i,t){if(1&i){const i=b.Nb();b.Mb(0,"ion-item-sliding"),b.Mb(1,"ion-item",35),b.Ub("click",function(){b.lc(i);const e=t.$implicit;return b.Wb(2).escogerChat(e._id)}),b.Mb(2,"ion-avatar",36),b.Kb(3,"img",37),b.Lb(),b.Mb(4,"ion-label",26),b.Mb(5,"strong",38),b.rc(6),b.Lb(),b.Mb(7,"p"),b.rc(8),b.Lb(),b.rc(9),b.Xb(10,"fecha"),b.Lb(),b.Kb(11,"div",39),b.Lb(),b.Mb(12,"ion-item-options",40),b.Mb(13,"ion-item-option",16),b.Kb(14,"ion-icon",41),b.Lb(),b.Mb(15,"ion-item-option",42),b.Kb(16,"ion-icon",43),b.Lb(),b.Lb(),b.Lb()}if(2&i){const i=t.$implicit;b.zb(3),b.fc("src","https://motocaliapp.com/",i.imagenTaller,"",b.mc),b.zb(3),b.sc(i.nombrecompleto),b.zb(2),b.tc("@",i.nombreusuario," - Estado pendiente"),b.zb(1),b.tc("Cita creada el ",b.Yb(10,5,i.fechainicio)," "),b.zb(2),b.dc("ngClass",b.jc(7,w,"PENDIENTE"===i.estado,"EN PROGRESO"===i.estado,"TERMINADO"===i.estado))}}function z(i,t){if(1&i){const i=b.Nb();b.Mb(0,"ion-content",10),b.Mb(1,"div",12),b.Mb(2,"ion-searchbar",33),b.Ub("ionChange",function(t){return b.lc(i),b.Wb().filtro(t)}),b.Lb(),b.Lb(),b.Mb(3,"ion-list"),b.qc(4,P,17,11,"ion-item-sliding",34),b.Xb(5,"miFiltro"),b.Lb(),b.Lb()}if(2&i){const i=b.Wb();b.zb(4),b.dc("ngForOf",b.Zb(5,1,i.citas,i.texto))}}d.locale("es");let E=(()=>{class i{constructor(i,t,e,o,n,s,a){this.modalCtrl=i,this.actionSheetCtrl=t,this.citasService=e,this.utitlities=o,this.almacenamiento=n,this.animationCtrl=s,this.toast=a,this.titulo="Configuraci\xf3n",this.listaTalleres=[],this.mensaje="",this.estado="",this.estadoCambio="",this.role="",this.usuario="",this.urlArchivo="",this.tipoArchivo="",this.slideOpt={zoom:{maxRatio:3,minRatio:1,toggle:!0}},this.citas=[],this.texto="",this.listaCreados=[],this.trabajos=[],this.nuevoTrabajo=!1,this.textoTrabajo="",this.textoBuscar="",this.precioconfig=!1,this.precio=0,this.msgEstado="",this.msgpro="",this.msgter="",this.terminado=!1}ngOnInit(){}ionViewWillEnter(){return Object(c.a)(this,void 0,void 0,function*(){switch(this.type){case"setting":const i=yield this.almacenamiento.obtenerToken();i&&this.citasService.obtenerListaTrabajos(i.token).subscribe(i=>{i.exe&&(this.listaCreados=i.response[0].listaTrabajos)}),this.vista="setting";break;case"buscar":this.titulo="Buscar Talleres",this.vista="buscar",setTimeout(()=>{this.slide.lockSwipes(!0).then(()=>{})},500),this.listarTalleres();break;case"media":this.vista="media",this.urlArchivo=this.data.url,this.tipoArchivo=this.data.tipo;break;case"carpetas":if(this.vista="carpetas","TALLER_ROLE"===this.data.role){const i=this.data.info.filter(i=>i.usuariopedido._id===this.data.unico);this.citas=i}else{const i=this.data.info.filter(i=>i.idtaller._id===this.data.unico);this.citas=i}}})}filtro(i){this.texto=i.detail.value}guardar(){return Object(c.a)(this,void 0,void 0,function*(){(yield this.almacenamiento.obtenerToken())&&(this.modalCtrl.dismiss({estado:this.estadoCambio,info:{trabajos:this.trabajos,precio:this.precio}}),this.nuevoTrabajo=!1)})}escogerChat(i){this.modalCtrl.dismiss({salir:!0,cita:i})}descartar(){this.modalCtrl.dismiss({salir:!0})}listarTalleres(){this.almacenamiento.obtenerToken().then(i=>{this.citasService.listadoTalleres(i.token).subscribe(i=>{i.response.length>0&&i.response.forEach(i=>{i.avatar=i.usuarioReceptor.imagen[0].path,this.listaTalleres.push(i)})})})}opciones(i){return Object(c.a)(this,void 0,void 0,function*(){yield this.slide.lockSwipes(!0);const t=yield this.actionSheetCtrl.create({translucent:!0,header:`Que quieres hacer con ${i}`,buttons:[{text:"Compartir Perf\xedl",icon:"arrow-redo-outline",handler:()=>{}},{text:"Enviar mensaje",icon:"chatbubble-outline",handler:()=>{}},{text:"Invitar a grupo",icon:"people-outline",handler:()=>{}},{text:"Eliminar Usuario",icon:"trash-outline",cssClass:"eliminar",handler:()=>{}},{text:"Cancelar",role:"cancel",icon:"close-outline"}]});return yield t.present()})}crear(i){return Object(c.a)(this,void 0,void 0,function*(){yield this.slide.lockSwipes(!1),yield this.slide.slideNext(300),this.usuario=i.usuarioReceptor.nombrecompleto,this.taller=i,yield this.slide.lockSwipes(!0)})}generarTicket(){this.almacenamiento.obtenerToken().then(i=>{this.citasService.crearCita(i.token,{idtaller:this.taller.usuarioReceptor._id}).subscribe(i=>Object(c.a)(this,void 0,void 0,function*(){yield this.modalCtrl.dismiss({})}),i=>Object(c.a)(this,void 0,void 0,function*(){yield this.utitlities.alertApplication("No se pudo agendar la cita",!1),yield this.modalCtrl.dismiss({})}))})}cancelar(){return Object(c.a)(this,void 0,void 0,function*(){yield this.slide.lockSwipes(!1),yield this.slide.slidePrev(300),yield this.slide.lockSwipes(!0)})}filtroTrabajo(i){this.textoBuscar=i.detail.value}check(i){return this.trabajos.find(t=>t===i)}borrarTrabajo(i){this.trabajos.splice(i,1)}habilitarTrabajo(){this.nuevoTrabajo=!0}}return i.\u0275fac=function(t){return new(t||i)(b.Jb(s.ob),b.Jb(s.a),b.Jb(h.a),b.Jb(u.a),b.Jb(p.a),b.Jb(s.c),b.Jb(u.a))},i.\u0275cmp=b.Db({type:i,selectors:[["app-modal-citas"]],viewQuery:function(i,t){if(1&i&&b.vc(v,1),2&i){let i;b.kc(i=b.Vb())&&(t.slide=i.first)}},inputs:{type:"type",data:"data"},decls:6,vars:6,consts:[[4,"ngIf"],["fullscreen","true",4,"ngIf"],["fullscreen","true","color","darkgold",4,"ngIf"],["color","blanco"],["fill","clear","slot","end",4,"ngIf"],["fill","clear","slot","end"],["fill","clear",3,"click"],["name","close-outline"],["color","dark"],["fill","clear","slot","start"],["fullscreen","true"],["class","divider",4,"ngIf"],[1,"divider"],["slide",""],["fixed",""],["size","12"],["color","light"],[3,"press","click",4,"ngFor","ngForOf"],[1,"anchofull"],[1,"opacity"],["size","6"],["expand","block","mode","ios","color","light",3,"click"],["expand","block","mode","ios","color","primary",3,"click"],[3,"press","click"],["slot","start"],["width","100%","alt","",3,"src"],[1,"ion-text-wrap"],["fullscreen","true","color","darkgold"],[3,"url",4,"ngIf"],["class","diapositiva",3,"options",4,"ngIf"],[3,"url"],[1,"diapositiva",3,"options"],["alt","",3,"src"],["mode","ios",3,"ionChange"],[4,"ngFor","ngForOf"],[3,"click"],["slot","start",1,"avatar"],["width","100%",3,"src"],[1,"medium"],["slot","end",1,"estadobol",3,"ngClass"],["side","start"],["slot","icon-only","name","ellipsis-vertical-outline"],["color","secondary"],["slot","icon-only","name","trash-outline"]],template:function(i,t){1&i&&(b.qc(0,C,5,1,"ion-header",0),b.qc(1,O,7,0,"ion-header",0),b.qc(2,j,7,0,"ion-header",0),b.qc(3,y,3,1,"ion-content",1),b.qc(4,I,3,2,"ion-content",2),b.qc(5,z,6,4,"ion-content",1)),2&i&&(b.dc("ngIf","buscar"===t.vista),b.zb(1),b.dc("ngIf","media"===t.vista),b.zb(1),b.dc("ngIf","carpetas"===t.vista),b.zb(1),b.dc("ngIf","buscar"===t.vista||"chat"===t.vista||"setting"===t.vista),b.zb(1),b.dc("ngIf","media"===t.vista),b.zb(1),b.dc("ngIf","carpetas"===t.vista))},directives:[o.j,s.z,s.jb,s.hb,s.k,s.j,s.A,s.t,s.ab,s.Z,s.y,s.S,s.s,s.T,s.wb,s.L,o.i,s.F,s.f,s.K,m.a,s.J,o.h,s.I,s.H],pipes:[f.a,g.a],styles:["ion-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}ion-item[_ngcontent-%COMP%]{touch-action:pan-y!important}ion-list[_ngcontent-%COMP%], ion-slide[_ngcontent-%COMP%], ion-slides[_ngcontent-%COMP%]{width:100%}.fullancho[_ngcontent-%COMP%]{min-height:100%;height:auto}.diapositiva[_ngcontent-%COMP%]{width:100%;height:100%}.estado[_ngcontent-%COMP%]{padding:10px}.estadobol[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:100%}.estado-verde[_ngcontent-%COMP%]{background:#85b84f}.estado-amarillo[_ngcontent-%COMP%]{background:#fcd573}.estado-azul[_ngcontent-%COMP%]{background:#5591b1}.es-bottom[_ngcontent-%COMP%]{margin-bottom:15px}.es-bottom-small[_ngcontent-%COMP%]{margin-bottom:10px}.precio[_ngcontent-%COMP%]{height:80px;display:flex;justify-content:center;align-items:center;font-size:42px;opacity:.8;font-weight:bolder;color:var(--ion-color-success)}.trabajo[_ngcontent-%COMP%]{border-bottom:1px solid rgba(3,3,3,.1)}.trabajo[_ngcontent-%COMP%]:nth-child(2n){--background:#f9f9f9}ion-item-divider[_ngcontent-%COMP%]{margin-bottom:10px}.ok[_ngcontent-%COMP%]{opacity:.3}video[_ngcontent-%COMP%]{max-height:100%}.fl[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.aviso[_ngcontent-%COMP%]{--background:#fee491}.aviso[_ngcontent-%COMP%]:hover{--background:#fee491!important}"],data:{animation:[Object(l.l)("entrada",[Object(l.k)(":enter",[Object(l.j)({opacity:0,transform:"scale(0)"}),Object(l.e)("250ms",Object(l.j)({opacity:1,transform:"scale(1)"}))]),Object(l.k)(":leave",[Object(l.j)({opacity:1,transform:"scale(1)"}),Object(l.e)("250ms",Object(l.j)({opacity:0,transform:"scale(0)"}))])])]}}),i})();var T=e("7JkF"),W=e("cb8P"),q=e("Bfh1"),A=e("a/9d"),K=e("r3ab"),D=e("/sJY"),S=e("1+ow");let F=(()=>{class i{constructor(i){this.el=i}cargando(){this.el.nativeElement.currentTime=.3}}return i.\u0275fac=function(t){return new(t||i)(b.Jb(b.m))},i.\u0275dir=b.Eb({type:i,selectors:[["","video-load",""]],hostBindings:function(i,t){1&i&&b.Ub("canplay",function(){return t.cargando()})}}),i})();const $=["contenido"],R=["infinito"];function J(i,t){if(1&i&&(b.Mb(0,"ion-avatar"),b.Kb(1,"img",22),b.Lb()),2&i){const i=b.Wb();b.zb(1),b.dc("src",i.imagen,b.mc)}}function N(i,t){1&i&&(b.Mb(0,"h5",26),b.Kb(1,"span",27),b.rc(2," Conectado"),b.Lb())}function U(i,t){1&i&&(b.Mb(0,"h5",26),b.Kb(1,"span",28),b.rc(2," Desconectado"),b.Lb())}function B(i,t){1&i&&(b.Mb(0,"h5",29),b.rc(1," Escribiendo..."),b.Lb())}function V(i,t){if(1&i&&(b.Mb(0,"div",23),b.Mb(1,"h4"),b.rc(2),b.Lb(),b.qc(3,N,3,0,"h5",24),b.qc(4,U,3,0,"h5",24),b.qc(5,B,2,0,"h5",25),b.Lb()),2&i){const i=b.Wb();b.zb(2),b.sc(i.nombre),b.zb(1),b.dc("ngIf",!1===i.escribiendo&&"conexion"===i.conexion),b.zb(1),b.dc("ngIf",!1===i.escribiendo&&"desconexion"===i.conexion),b.zb(1),b.dc("ngIf",i.escribiendo)}}function H(i,t){if(1&i){const i=b.Nb();b.Mb(0,"img",42),b.Ub("click",function(){b.lc(i);const t=b.Wb().$implicit;return b.Wb(4).seleccionarMedia(t.nameBD,"imagen")}),b.Lb()}if(2&i){const i=b.Wb().$implicit;b.fc("src","https://motocaliapp.com/Citas/",i.nameBD,"",b.mc)}}function Y(i,t){1&i&&(b.Mb(0,"div"),b.Kb(1,"ion-spinner",43),b.rc(2," El v\xeddeo estar\xe1 disponible en un momento "),b.Lb())}function G(i,t){if(1&i){const i=b.Nb();b.Mb(0,"div",45),b.Ub("click",function(){b.lc(i);const t=b.Wb(2).$implicit;return b.Wb(4).seleccionarMedia(t.nameBD,"video")}),b.Kb(1,"video",46),b.Mb(2,"ion-button",47),b.Kb(3,"ion-icon",48),b.Lb(),b.Lb()}if(2&i){const i=b.Wb(2).$implicit;b.zb(1),b.fc("src","https://motocaliapp.com/Citas/",i.nameBD,"",b.mc)}}function X(i,t){if(1&i&&(b.Mb(0,"div"),b.qc(1,G,4,1,"div",44),b.Lb()),2&i){const i=b.Wb().$implicit;b.zb(1),b.dc("ngIf",!i.type.includes("image"))}}function Q(i,t){if(1&i&&(b.Mb(0,"div",40),b.qc(1,H,1,1,"img",41),b.qc(2,Y,3,0,"div",5),b.qc(3,X,2,1,"div",5),b.Lb()),2&i){const i=t.$implicit;b.zb(1),b.dc("ngIf",i.type.includes("image")),b.zb(1),b.dc("ngIf","none"===i.nameBD),b.zb(1),b.dc("ngIf","none"!==i.nameBD)}}function Z(i,t){if(1&i&&(b.Mb(0,"div",38),b.qc(1,Q,4,3,"div",39),b.Lb()),2&i){const i=b.Wb(2).$implicit;b.zb(1),b.dc("ngForOf",i.archivos)}}function ii(i,t){if(1&i&&(b.Mb(0,"ion-col",32),b.Mb(1,"div",33),b.qc(2,Z,2,1,"div",34),b.Mb(3,"div",35),b.rc(4),b.Lb(),b.Mb(5,"div",36),b.Mb(6,"div",37),b.rc(7),b.Lb(),b.Lb(),b.Lb(),b.Lb()),2&i){const i=b.Wb().$implicit;b.zb(2),b.dc("ngIf",i.archivos.length>0),b.zb(2),b.tc(" ",i.mensaje," "),b.zb(3),b.sc(i.fechaMensaje)}}function ti(i,t){if(1&i&&(b.Mb(0,"ion-avatar"),b.Kb(1,"img",22),b.Lb()),2&i){const i=b.Wb(3);b.zb(1),b.dc("src",i.imagen,b.mc)}}function ei(i,t){if(1&i){const i=b.Nb();b.Mb(0,"img",42),b.Ub("click",function(){b.lc(i);const t=b.Wb().$implicit;return b.Wb(4).seleccionarMedia(t.nameBD,"imagen")}),b.Lb()}if(2&i){const i=b.Wb().$implicit;b.fc("src","https://motocaliapp.com/Citas/",i.nameBD,"",b.mc)}}function oi(i,t){1&i&&(b.Mb(0,"div"),b.Kb(1,"ion-spinner",43),b.rc(2," El v\xeddeo estar\xe1 disponible en un momento "),b.Lb())}function ni(i,t){if(1&i){const i=b.Nb();b.Mb(0,"div",45),b.Ub("click",function(){b.lc(i);const t=b.Wb(2).$implicit;return b.Wb(4).seleccionarMedia(t.nameBD,"video")}),b.Kb(1,"video",46),b.Mb(2,"ion-button",47),b.Kb(3,"ion-icon",48),b.Lb(),b.Lb()}if(2&i){const i=b.Wb(2).$implicit;b.zb(1),b.fc("src","https://motocaliapp.com/Citas/",i.nameBD,"",b.mc)}}function si(i,t){if(1&i&&(b.Mb(0,"div"),b.qc(1,ni,4,1,"div",44),b.Lb()),2&i){const i=b.Wb().$implicit;b.zb(1),b.dc("ngIf",!i.type.includes("image"))}}function ai(i,t){if(1&i&&(b.Mb(0,"div",40),b.qc(1,ei,1,1,"img",41),b.qc(2,oi,3,0,"div",5),b.qc(3,si,2,1,"div",5),b.Lb()),2&i){const i=t.$implicit;b.zb(1),b.dc("ngIf",i.type.includes("image")),b.zb(1),b.dc("ngIf","none"===i.nameBD),b.zb(1),b.dc("ngIf","none"!==i.nameBD)}}function ci(i,t){if(1&i&&(b.Mb(0,"div",38),b.qc(1,ai,4,3,"div",39),b.Lb()),2&i){const i=b.Wb(2).$implicit;b.zb(1),b.dc("ngForOf",i.archivos)}}function ri(i,t){if(1&i&&(b.Mb(0,"ion-col",49),b.Mb(1,"div",50),b.qc(2,ti,2,1,"ion-avatar",5),b.Lb(),b.Mb(3,"div",51),b.qc(4,ci,2,1,"div",34),b.Mb(5,"div",35),b.rc(6),b.Lb(),b.Mb(7,"div",36),b.Mb(8,"div",37),b.rc(9),b.Lb(),b.Lb(),b.Lb(),b.Lb()),2&i){const i=b.Wb().$implicit,t=b.Wb();b.zb(2),b.dc("ngIf",""!==t.imagen),b.zb(2),b.dc("ngIf",i.archivos.length>0),b.zb(2),b.tc(" ",i.mensaje," "),b.zb(3),b.sc(i.fechaMensaje)}}function li(i,t){if(1&i&&(b.Mb(0,"ion-row"),b.qc(1,ii,8,3,"ion-col",30),b.qc(2,ri,10,4,"ion-col",31),b.Lb()),2&i){const i=t.$implicit,e=b.Wb();b.zb(1),b.dc("ngIf",e.local===i.emisor),b.zb(1),b.dc("ngIf",e.local!==i.emisor)}}function di(i,t){if(1&i&&b.Kb(0,"img",61),2&i){const i=b.Wb().$implicit;b.ec("src",i,b.mc)}}function bi(i,t){if(1&i&&b.Kb(0,"video",62),2&i){const i=b.Wb().$implicit;b.ec("src",i,b.mc)}}function hi(i,t){if(1&i){const i=b.Nb();b.Mb(0,"div",56),b.qc(1,di,1,1,"img",57),b.qc(2,bi,1,1,"video",58),b.Mb(3,"div",59),b.Ub("click",function(){b.lc(i);const e=t.index;return b.Wb(2).eliminardelCarrete(e)}),b.Mb(4,"ion-chip",60),b.rc(5,"Eliminar"),b.Lb(),b.Lb(),b.Lb()}if(2&i){const i=t.$implicit;b.zb(1),b.dc("ngIf",i.includes("jpg")),b.zb(1),b.dc("ngIf",i.includes("mp4"))}}function ui(i,t){if(1&i&&(b.Mb(0,"div",52),b.Mb(1,"div",53),b.rc(2,"Fotos para subir"),b.Lb(),b.Mb(3,"div",54),b.qc(4,hi,6,2,"div",55),b.Lb(),b.Lb()),2&i){const i=b.Wb();b.dc("@entrada",void 0),b.zb(4),b.dc("ngForOf",i.carrete)}}const pi=[{path:"",component:(()=>{class i{constructor(i,t,e,o,n,s,a,r,l,d,b,h,u,p,m){this.activeRoute=i,this.apiEstadoCitas=t,this.sockect=e,this.almacenamiento=o,this.cargarElementos=n,this.modalCtrl=s,this.geo=a,this.camera=r,this.actionSheet=l,this.myLoading=d,this.media=b,this.toast=h,this.conexiones=u,this.menu=p,this.animationCtrl=m,this.color="",this.idCita="",this.data=[],this.imagen="",this.taller="",this.conversacionTemporal=[],this.conversacion=[],this.mensaje="",this.usuario="",this.local="",this.nombre="",this.red="wifi",this.tallerId="",this.usuarioID="",this.idActual="",this.dataInfoCita={},this.escribiendo=!1,this.carrete=[],this.carreteArriba=[],this.directorios=[],this.urlInfo={url:"",tipo:"video"},this.paginacion=0,this.cargar=!1,this.conexion="",this.cargoprimero=!1,this.video=!1,this.cargarElementos.$cargarRed.subscribe(i=>Object(c.a)(this,void 0,void 0,function*(){this.red=i,"none"!==this.red&&this.almacenamiento.obtenerToken().then(i=>{this.sockect.emit("conectar",i),this.volver(i)})})),this.recibirMensaje().subscribe(i=>Object(c.a)(this,void 0,void 0,function*(){this.conversacion.push({id:i._id,taller:this.taller,usuario:this.usuario,emisor:i.emisor,mensaje:i.mensaje,fechaMensaje:i.fechaMensaje,archivos:i.archivos}),new Audio("/assets/Notificacion.mp3").play()})),this.escribirOnCita().subscribe(i=>Object(c.a)(this,void 0,void 0,function*(){this.escribiendo=i.exe})),this.conexiones.$conexiones.subscribe(i=>{i.usuario===this.idActual&&(this.conexion=i.estado)}),this.actualizarVideo().subscribe(i=>{this.conversacion=this.conversacion.map(t=>(t.id&&t.id===i._id&&(t.archivos=t.archivos.map(t=>("none"===t.nameBD&&(t.nameBD=i.nameSecret),t))),t)),console.log(this.conversacion,"Ultimo")})}ngOnInit(){}ionViewWillEnter(){this.menu.enable(!1,"perfilMenu"),this.arrancar()}volver(i){return Object(c.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerCita();t&&(this.idCita=t,this.apiEstadoCitas.obtenerCita(i.token,this.idCita).subscribe(t=>Object(c.a)(this,void 0,void 0,function*(){this.data=t.response,t.response.length>0&&(i.nusuario===t.response[0].idtaller.nombreusuario?(this.imagen=`https://motocaliapp.com/${t.response[0].usuariopedido.imagen[0].path}`,this.nombre=t.response[0].usuariopedido.nombrecompleto,this.sockect.emit("entrarChatCita",{_id:this.idCita,usuario:t.response[0].usuariopedido._id,usuariohost:t.response[0].idtaller._id}),this.idActual=t.response[0].usuariopedido._id):i.nusuario===t.response[0].usuariopedido.nombreusuario&&(this.imagen=`https://motocaliapp.com/${t.response[0].idtaller.imagen[0].path}`,this.nombre=t.response[0].idtaller.nombrecompleto,this.sockect.emit("entrarChatCita",{_id:this.idCita,usuario:t.response[0].idtaller._id,usuariohost:t.response[0].usuariopedido._id}),this.idActual=t.response[0].idtaller._id),this.taller=t.response[0].idtaller.nombreusuario,this.usuario=t.response[0].usuariopedido.nombreusuario,this.tallerId=t.response[0].idtaller._id,this.usuarioID=t.response[0].usuariopedido._id,this.dataInfoCita.fechaInicio=t.response[0].fechainicio,this.dataInfoCita.fechaprogreso=t.response[0].fechaprogreso,this.dataInfoCita.fechacumplido=t.response[0].fechacumplido,this.dataInfoCita.role=i.role,this.dataInfoCita.precio=t.response[0].precio,this.dataInfoCita.trabajos=t.response[0].listaTrabajos,this.conversacion.length>0&&this.apiEstadoCitas.obtenerConversacionesPendientes(i.token,this.idCita,this.conversacion[this.conversacion.length-1].fechaMensaje).subscribe(i=>Object(c.a)(this,void 0,void 0,function*(){i.exe&&i.response.forEach(i=>{this.conversacion.push(i)})})))})))})}arrancar(){return Object(c.a)(this,void 0,void 0,function*(){const i=yield this.almacenamiento.obtenerCita();i&&(this.cargoprimero=!0,this.idCita=i,this.almacenamiento.obtenerToken().then(i=>{this.local=i.nusuario,this.apiEstadoCitas.obtenerCita(i.token,this.idCita).subscribe(t=>Object(c.a)(this,void 0,void 0,function*(){this.data=t.response,t.response.length>0&&(i.nusuario===t.response[0].idtaller.nombreusuario?(this.imagen=`https://motocaliapp.com/${t.response[0].usuariopedido.imagen[0].path}`,this.nombre=t.response[0].usuariopedido.nombrecompleto,this.idActual=t.response[0].usuariopedido._id,this.sockect.emit("entrarChatCita",{_id:this.idCita,usuario:t.response[0].usuariopedido._id,usuariohost:t.response[0].idtaller._id})):i.nusuario===t.response[0].usuariopedido.nombreusuario&&(this.imagen=`https://motocaliapp.com/${t.response[0].idtaller.imagen[0].path}`,this.nombre=t.response[0].idtaller.nombrecompleto,this.idActual=t.response[0].idtaller._id,this.sockect.emit("entrarChatCita",{_id:this.idCita,usuario:t.response[0].idtaller._id,usuariohost:t.response[0].usuariopedido._id})),this.taller=t.response[0].idtaller.nombreusuario,this.usuario=t.response[0].usuariopedido.nombreusuario,this.tallerId=t.response[0].idtaller._id,this.usuarioID=t.response[0].usuariopedido._id,this.dataInfoCita.estado=t.response[0].estado,this.dataInfoCita.fechaInicio=t.response[0].fechainicio,this.dataInfoCita.fechaprogreso=t.response[0].fechaprogreso,this.dataInfoCita.fechacumplido=t.response[0].fechacumplido,this.dataInfoCita.role=i.role,this.dataInfoCita.precio=t.response[0].precio,this.dataInfoCita.trabajos=t.response[0].listaTrabajos,this.apiEstadoCitas.obtenerConversaciones(i.token,this.idCita,this.paginacion.toString()).subscribe(i=>Object(c.a)(this,void 0,void 0,function*(){i.exe&&(i.response.forEach(i=>{this.conversacion.unshift(i)}),setTimeout(()=>{this.scrollbajar()},1e3))})))}))}))})}loadData(i){this.cargar&&(this.paginacion=this.paginacion+10,this.almacenamiento.obtenerToken().then(t=>{this.apiEstadoCitas.obtenerConversaciones(t.token,this.idCita,this.paginacion.toString()).subscribe(t=>Object(c.a)(this,void 0,void 0,function*(){t.exe&&t.response.forEach(i=>{this.conversacion.unshift(i)}),i.target.complete(),0===t.response.length&&(this.infinito.disabled=!0)}))}).catch(()=>{this.toast.alertApplication("No se pudo traer mas mensajes",!1),i.target.complete()}))}scrollbajar(){this.contenido.scrollToBottom(0).then(()=>{this.cargar=!0})}actualizarVideo(){return new r.a(i=>{this.sockect.on("subirVideo",t=>{i.next(t),console.log(t,"actualizado")})})}enviarMensaje(){return Object(c.a)(this,void 0,void 0,function*(){if(this.carreteArriba.length>0){const i=yield this.almacenamiento.obtenerToken();this.myLoading.cargaProcesos("Subiendo mensaje con archivos media, por favor espere"),i&&this.apiEstadoCitas.ingresarChat(i.token,{_id:this.idCita,mensaje:this.mensaje,emisor:this.local,taller:this.tallerId,usuario:this.usuarioID}).subscribe(t=>{if(t.exe){const e=t.response._id;this.carreteArriba=this.carreteArriba.sort((i,t)=>i.mime>t.mime?1:i.mime<t.mime?-1:0),console.log(this.carreteArriba," imagenes");let o=this.carreteArriba.length;this.carreteArriba.forEach(t=>{this.apiEstadoCitas.subirArchivosChat(i.token,e,t.path,t.name,t.mime).subscribe(i=>{i.response=JSON.parse(i.response),i.response.exe&&(o--,0===o&&(i.response.response.tipo="file",i.response.response.idEmit=this.idActual,t.mime.includes("video")&&this.sockect.emit("subirarchivo",i.response.response),this.sockect.emit("mensajeCita",i.response.response),i.response.response.id=i.response.response._id,this.conversacion.push(i.response.response),this.carrete=[],this.carreteArriba=[],this.mensaje="",this.myLoading.finalizarCargado()))},i=>{this.myLoading.finalizarCargado(),this.toast.alertApplication("No se pudo subir el archivo de v\xeddeo o imagen",!0)})})}})}else""!==this.mensaje&&(this.conversacion.push({taller:this.taller,usuario:this.usuario,emisor:this.local,mensaje:this.mensaje,archivos:[],fechaMensaje:d().format("YYYY-MM-DD HH:mm")}),this.sockect.emit("mensajeCita",{_id:this.idCita,mensaje:this.mensaje,emisor:this.local,taller:this.tallerId,usuario:this.usuarioID,tipo:"msg",idEmit:this.idActual}),this.mensaje="")})}escribirMensaje(){this.sockect.emit("escribiendoCita",{exe:!0,_id:this.idCita})}cambiar(){this.sockect.emit("escribiendoCita",{exe:!1,_id:this.idCita})}recibirMensaje(){return new r.a(i=>{this.sockect.on("mensajeCita",t=>{i.next(t),console.log(t)})})}seleccionarMedia(i,t){this.urlInfo.url=i,this.urlInfo.tipo=t,this.modal("media")}modal(i){return Object(c.a)(this,void 0,void 0,function*(){const t=i=>{const t=this.animationCtrl.create().addElement(i.querySelector("ion-backdrop")).fromTo("opacity","0.01","var(--backdrop-opacity)"),e=this.animationCtrl.create().addElement(i.querySelector(".modal-wrapper")).keyframes([{offset:0,opacity:"0",transform:"scale(0)"},{offset:1,opacity:"0.99",transform:"scale(1)"}]);return this.animationCtrl.create().addElement(i).easing("ease-out").duration(500).addAnimation([t,e])};let e;e="media"===i?this.urlInfo:this.dataInfoCita;const o=yield this.modalCtrl.create({component:E,componentProps:{type:i,data:e},mode:"ios",enterAnimation:t,leaveAnimation:i=>t(i).direction("reverse")});yield o.present();const n=yield o.onWillDismiss();if(n&&n.data&&n.data.estado){const i={listaTrabajos:n.data.info.trabajos,estado:n.data.estado,precio:n.data.info.precio};this.dataInfoCita.estado=n.data.estado,this.almacenamiento.obtenerToken().then(t=>{this.apiEstadoCitas.editarCita(t.token,this.idCita,i).subscribe(i=>{})})}})}escribirOnCita(){return new r.a(i=>{this.sockect.on("escribiendoCita",t=>{i.next(t)})})}ubicacion(){return Object(c.a)(this,void 0,void 0,function*(){yield this.geo.getCurrentPosition()})}camaraOpciones(){return Object(c.a)(this,void 0,void 0,function*(){const i=yield this.actionSheet.create({subHeader:"",header:"Selecciona cualquier opci\xf3n para subir una foto, recuerda que solo puedes subir un v\xeddeo por mensaje",mode:"md",buttons:[{text:"Tomar foto",icon:"camera-outline",handler:()=>{this.tomarFoto(this.camera.PictureSourceType.CAMERA)}},{text:"Grabar V\xeddeo",icon:"videocam-outline",handler:()=>{this.video||this.capturarVideo()}},{text:"Seleccionar Im\xe1gen de galer\xeda",icon:"image-outline",handler:()=>{this.tomarFoto(this.camera.PictureSourceType.PHOTOLIBRARY,"image")}},{text:"Seleccionar V\xeddeo de galer\xeda",icon:"image-outline",handler:()=>{this.video||this.tomarFoto(this.camera.PictureSourceType.PHOTOLIBRARY,"video")}}]});return yield i.present()})}tomarFoto(i,t){this.camera.getPicture({quality:80,allowEdit:!0,correctOrientation:!0,destinationType:this.camera.DestinationType.FILE_URI,mediaType:"image"===t?this.camera.MediaType.PICTURE:this.camera.MediaType.VIDEO,sourceType:i}).then(i=>Object(c.a)(this,void 0,void 0,function*(){let t="",e="";i.includes("jpg")?(t="image/jpg",e="image.jpg"):i.includes("png")?(t="image/png",e="image.png"):i.includes("jpeg")?(t="image/jpeg",e="image.jpeg"):i.includes("gif")?(t="image/gif",e="image.gif"):(e="video.mp4",t="video/mp4"),(t.includes("video")||t.includes("Video"))&&(this.video=!0),this.carreteArriba.push({path:i,name:e,mime:t});const o=window.Ionic.WebView.convertFileSrc(i);this.carrete.push(o),this.camera.cleanup().then(()=>console.log("Eliminado"))}))}capturarVideo(){this.media.captureVideo({limit:1,duration:30}).then(i=>{this.carreteArriba.push({path:i[0].fullPath,name:i[0].name,mime:i[0].type});const t=window.Ionic.WebView.convertFileSrc(i[0].fullPath);this.carrete.push(t),this.video=!0})}eliminardelCarrete(i){this.carrete.splice(i,1),this.carreteArriba.splice(i,1),this.carreteArriba.find(i=>i.mime.includes("video")||i.mime.includes("Video"))||(this.video=!1)}verMensajes(i){this.contenido.getScrollElement().then(i=>{})}ionViewWillLeave(){this.sockect.emit("salirChatCita",{_id:this.idCita}),this.almacenamiento.eleminarCita().then(i=>{if(i)return!0})}}return i.\u0275fac=function(t){return new(t||i)(b.Jb(a.a),b.Jb(h.a),b.Jb(T.a),b.Jb(p.a),b.Jb(W.a),b.Jb(s.ob),b.Jb(q.a),b.Jb(A.a),b.Jb(s.a),b.Jb(K.a),b.Jb(D.a),b.Jb(u.a),b.Jb(S.a),b.Jb(s.nb),b.Jb(s.c))},i.\u0275cmp=b.Db({type:i,selectors:[["app-chat"]],viewQuery:function(i,t){if(1&i&&(b.vc($,1),b.vc(R,1)),2&i){let i;b.kc(i=b.Vb())&&(t.contenido=i.first),b.kc(i=b.Vb())&&(t.infinito=i.first)}},decls:26,vars:5,consts:[[1,"ion-no-border"],["color","blanco"],[1,"title"],[1,"taller"],["defaultHref","/central/menu/miscitas","icon","chevron-back-outline"],[4,"ngIf"],["class","info",4,"ngIf"],["contenido",""],["position","top","threshold","100px",3,"ionInfinite"],["infinito",""],["loadingSpinner","bubbles","loadingText","Cargando mensajes..."],[4,"ngFor","ngForOf"],["class","fotos ",4,"ngIf"],[1,"flexible","ion-no-border"],[1,"text"],["placeholder","Escribe un mensaje",1,"campo",3,"ngModel","ngModelChange","ionInput","ionBlur"],[1,"opt"],["color","blanco","fill","clear",3,"click"],["slot","icon-only","name","camera-outline","color","medium"],[1,"botones"],["fill","clear",3,"click"],["slot","icon-only","name","send-outline","color","success"],[3,"src"],[1,"info"],["class","conx",4,"ngIf"],["class","small",4,"ngIf"],[1,"conx"],[1,"bola","verde"],[1,"bola","rojo"],[1,"small"],["size","9","class","final","push","3",4,"ngIf"],["size","11","class"," visi",4,"ngIf"],["size","9","push","3",1,"final"],[1,"grispo","col"],["class","images",4,"ngIf"],[1,"msg"],[1,"fh"],[1,"fecha"],[1,"images"],["class","imageChild",4,"ngFor","ngForOf"],[1,"imageChild"],["alt"," ",3,"src","click",4,"ngIf"],["alt"," ",3,"src","click"],["name","crescent"],["class","btn","color","success",3,"click",4,"ngIf"],["color","success",1,"btn",3,"click"],["video-load","","poster","/assets/icon/favicon.png",3,"src"],["color","oscuro","mode","ios",1,"btn-f"],["name","play-outline","slot","icon-only"],["size","11",1,"visi"],[1,"imagen"],[1,"grispi","col"],[1,"fotos"],[1,"titulo"],[1,"carrete"],["class","fotoHija",4,"ngFor","ngForOf"],[1,"fotoHija"],["width","70px",3,"src",4,"ngIf"],["width","70px","controls","",3,"src",4,"ngIf"],[1,"eliminar",3,"click"],["color","danger"],["width","70px",3,"src"],["width","70px","controls","",3,"src"]],template:function(i,t){1&i&&(b.Mb(0,"ion-header",0),b.Mb(1,"ion-toolbar",1),b.Mb(2,"div",2),b.Mb(3,"div",3),b.Mb(4,"ion-buttons"),b.Kb(5,"ion-back-button",4),b.Lb(),b.qc(6,J,2,1,"ion-avatar",5),b.qc(7,V,6,4,"div",6),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(8,"ion-content",null,7),b.Mb(10,"ion-infinite-scroll",8,9),b.Ub("ionInfinite",function(i){return t.loadData(i)}),b.Kb(12,"ion-infinite-scroll-content",10),b.Lb(),b.Mb(13,"ion-grid"),b.qc(14,li,3,2,"ion-row",11),b.Kb(15,"br"),b.Lb(),b.qc(16,ui,5,2,"div",12),b.Lb(),b.Mb(17,"ion-footer",13),b.Mb(18,"div",14),b.Mb(19,"ion-textarea",15),b.Ub("ngModelChange",function(i){return t.mensaje=i})("ionInput",function(){return t.escribirMensaje()})("ionBlur",function(){return t.cambiar()}),b.Lb(),b.Mb(20,"div",16),b.Mb(21,"ion-button",17),b.Ub("click",function(){return t.camaraOpciones()}),b.Kb(22,"ion-icon",18),b.Lb(),b.Lb(),b.Lb(),b.Mb(23,"div",19),b.Mb(24,"ion-button",20),b.Ub("click",function(){return t.enviarMensaje()}),b.Kb(25,"ion-icon",21),b.Lb(),b.Lb(),b.Lb()),2&i&&(b.zb(6),b.dc("ngIf",""!==t.imagen),b.zb(1),b.dc("ngIf",""!==t.nombre),b.zb(7),b.dc("ngForOf",t.conversacion),b.zb(2),b.dc("ngIf",t.carrete.length>0),b.zb(3),b.dc("ngModel",t.mensaje))},directives:[s.z,s.jb,s.k,s.g,s.h,o.j,s.t,s.C,s.D,s.y,o.i,s.x,s.fb,s.wb,n.i,n.k,s.j,s.A,s.f,s.S,s.s,s.bb,F,s.r],styles:[".flexible[_ngcontent-%COMP%]{display:flex!important;align-items:flex-start;align-items:center;padding:5px;background:#fff}ion-content[_ngcontent-%COMP%]{--background:#fcf9fc}ion-grid[_ngcontent-%COMP%]{width:100%;margin:0}ion-avatar[_ngcontent-%COMP%]{width:40px;height:40px}.title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;padding:3px 5px}.taller[_ngcontent-%COMP%]{display:flex;align-items:flex-start;align-items:center}.info[_ngcontent-%COMP%]{padding:2px 5px 0}.info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#333;margin:0}.conx[_ngcontent-%COMP%]{font-size:11px}.bola[_ngcontent-%COMP%]{display:inline-block;width:8px;height:8px;border-radius:100%}ion-row[_ngcontent-%COMP%]{margin-bottom:10px}.btn[_ngcontent-%COMP%]{width:100%;height:300px;background:#fafafa;position:relative;overflow:hidden;border-radius:10px}.btn[_ngcontent-%COMP%]   .btn-h[_ngcontent-%COMP%]{top:10px;opacity:.3}.btn[_ngcontent-%COMP%]   .btn-f[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]   .btn-h[_ngcontent-%COMP%]{position:absolute;font-size:16px}.btn[_ngcontent-%COMP%]   .btn-f[_ngcontent-%COMP%]{top:50%;transform:translateY(-50%);left:50%;transform:translateX(-50%);opacity:.5}.imagen[_ngcontent-%COMP%]{padding:0 5px}.visi[_ngcontent-%COMP%]{display:flex}.col[_ngcontent-%COMP%]{width:90%;max-width:300px;border-radius:20px;padding:2px 5px;border:1px solid rgba(3,3,3,.1)}.col[_ngcontent-%COMP%]   .msg[_ngcontent-%COMP%]{white-space:pre-wrap;word-wrap:break-word;width:100%;padding:3px 8px 1px}.col[_ngcontent-%COMP%]   .fh[_ngcontent-%COMP%]{opacity:.7;width:100%;display:flex;justify-content:flex-end;align-items:center}.col[_ngcontent-%COMP%]   .fh[_ngcontent-%COMP%]   .fecha[_ngcontent-%COMP%]{opacity:.5}.grispi[_ngcontent-%COMP%]{background:#edeaed}.grispo[_ngcontent-%COMP%]{background:#339b42;color:#fff}.text[_ngcontent-%COMP%]{width:85%;height:50px;border:1px solid rgba(0,0,0,.1);background-color:#fff;border-radius:30px;display:flex;justify-content:space-between;align-items:center}.text[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{height:50px;font-size:14px}.botones[_ngcontent-%COMP%]{width:15%;display:flex;justify-content:center}.opt[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-end:2px!important;--padding-start:2px!important;--padding-bottom:0px!important}.campo[_ngcontent-%COMP%]{width:80%;padding:0 5px}.fotos[_ngcontent-%COMP%]{position:fixed;bottom:57px;left:0;box-shadow:0 3px 25px rgba(2,2,2,.1);max-height:50%;overflow-y:scroll}.fotos[_ngcontent-%COMP%], .titulo[_ngcontent-%COMP%]{width:100%;background:#fff}.titulo[_ngcontent-%COMP%]{color:var(--ion-color-primary);padding:10px;border-bottom:1px solid rgba(0,0,0,.1)}.carrete[_ngcontent-%COMP%]{width:100%;padding:10px;display:flex;flex-wrap:wrap}.fotoHija[_ngcontent-%COMP%]{background-color:#fff;width:calc(50% - 5px);margin:5px 2.5px;box-shadow:0 2px 5px rgba(3,3,3,.1);text-align:center;overflow:hidden}video[_ngcontent-%COMP%]{width:auto;min-width:100%;max-width:100%;filter:blur(3px)}.final[_ngcontent-%COMP%]{display:flex!important;justify-content:flex-end!important}"],data:{animation:[Object(l.l)("mensajes",[Object(l.k)("* => *",[Object(l.f)(":enter",[Object(l.j)({transform:"scale(0)",opacity:0}),Object(l.h)(100,[Object(l.e)("100ms",Object(l.j)({transform:"scale(1)",opacity:1}))])],{optional:!0})])]),Object(l.l)("entrada",[Object(l.k)(":enter",[Object(l.j)({transform:"scale(0)",opacity:0}),Object(l.e)("300ms",Object(l.j)({transform:"scale(1)",opacity:1}))])])]}}),i})()}];let mi=(()=>{class i{}return i.\u0275mod=b.Hb({type:i}),i.\u0275inj=b.Gb({factory:function(t){return new(t||i)},imports:[[a.i.forChild(pi)],a.i]}),i})();const fi=[{path:"",component:E}];let gi=(()=>{class i{}return i.\u0275mod=b.Hb({type:i}),i.\u0275inj=b.Gb({factory:function(t){return new(t||i)},imports:[[a.i.forChild(fi)],a.i]}),i})();var vi=e("zon2"),Mi=e("iTUp");let Ci=(()=>{class i{}return i.\u0275mod=b.Hb({type:i}),i.\u0275inj=b.Gb({factory:function(t){return new(t||i)},imports:[[o.b,n.e,s.kb,gi,vi.a,Mi.a]]}),i})(),Oi=(()=>{class i{}return i.\u0275mod=b.Hb({type:i}),i.\u0275inj=b.Gb({factory:function(t){return new(t||i)},imports:[[o.b,n.e,s.kb,mi,Ci,Mi.a,vi.a]]}),i})()},r3ab:function(i,t,e){"use strict";e.d(t,"a",function(){return a});var o=e("mrSG"),n=e("fXoL"),s=e("TEn/");let a=(()=>{class i{constructor(i){this.loadingCtrl=i}cargaProcesos(i){return Object(o.a)(this,void 0,void 0,function*(){return this.loading=yield this.loadingCtrl.create({message:i}),this.loading.present()})}finalizarCargado(){this.loading.dismiss()}}return i.\u0275fac=function(t){return new(t||i)(n.Qb(s.mb))},i.\u0275prov=n.Fb({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}}]);