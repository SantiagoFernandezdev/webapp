(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{erKi:function(t,i,e){"use strict";e.r(i),e.d(i,"SolicitudesPageModule",function(){return j});var o=e("ofXK"),n=e("3Pt+"),a=e("TEn/"),s=e("tyNb"),c=e("R0Ic"),r=e("fXoL"),l=e("Gq8O"),b=e("fsfq"),u=e("fmoy"),m=e("cb8P");function d(t,i){if(1&t){const t=r.Nb();r.Mb(0,"ion-item",9),r.Mb(1,"ion-avatar",10),r.Kb(2,"ion-img",11),r.Lb(),r.Mb(3,"ion-label",12),r.Mb(4,"strong",13),r.rc(5),r.Lb(),r.Kb(6,"br"),r.Mb(7,"div"),r.rc(8),r.Lb(),r.Mb(9,"div",14),r.Mb(10,"ion-button",15),r.Ub("click",function(){r.lc(t);const e=i.$implicit,o=i.index;return r.Wb(2).aceptar(e,o)}),r.rc(11,"Aceptar"),r.Lb(),r.Mb(12,"ion-button",16),r.Ub("click",function(){r.lc(t);const e=i.$implicit,o=i.index;return r.Wb(2).eliminar(e,o)}),r.rc(13,"Eliminar"),r.Lb(),r.Lb(),r.Lb(),r.Lb()}if(2&t){const t=i.$implicit;r.zb(2),r.fc("src","https://motocaliapp.com/",t.imagen,""),r.zb(3),r.sc(t.usuarioEmisor.nombrecompleto),r.zb(3),r.tc("@",t.usuarioEmisor.nombreusuario,"")}}function p(t,i){if(1&t&&(r.Mb(0,"ion-list",7),r.qc(1,d,14,3,"ion-item",8),r.Lb()),2&t){const t=r.Wb();r.dc("@solicitudes",t.seguimientos.length),r.zb(1),r.dc("ngForOf",t.seguimientos)}}const h=function(t){return{"hauto centrar":t}},g=[{path:"",component:(()=>{class t{constructor(t,i,e,o){this.apiSeguimiento=t,this.almacenamiento=i,this.toastUtilidad=e,this.cargarElementos=o,this.seguimientos=[],this.red="wifi",this.cargarElementos.$cargarRed.subscribe(t=>{this.red=t,"none"!==this.red&&this.arrancar()})}ngOnInit(){}ionViewDidEnter(){"none"!==this.red&&this.arrancar()}arrancar(){this.almacenamiento.obtenerToken().then(t=>{this.cancelSuscribe=this.apiSeguimiento.solicitudesRecibidas(t.token).subscribe(t=>{this.seguimientos=[];const i=t.response.SeguimientoData;i.length>0&&i.forEach(t=>{t.imagen=t.usuarioEmisor.imagen.length>0?t.usuarioEmisor.imagen[0].path:"",this.seguimientos.push(t)})},t=>{this.toastUtilidad.alertApplication("No se pudo aceptar la solicitud",!1)})})}aceptar(t,i){this.almacenamiento.obtenerToken().then(e=>{this.apiSeguimiento.aceptarSolicitud(e.token,t.usuarioEmisor._id).subscribe(t=>{this.toastUtilidad.alertApplication("Solicitud aceptada",!0),this.seguimientos.splice(i,1)},t=>{this.toastUtilidad.alertApplication("No se pudo aceptar la solicitud",!1)})})}eliminar(t,i){this.almacenamiento.obtenerToken().then(e=>{this.apiSeguimiento.cancelarSolicitud(e.token,t.usuarioEmisor._id,"0").subscribe(()=>{this.seguimientos.splice(i,1)},t=>{this.toastUtilidad.alertApplication("No se pudo aceptar la solicitud",!1)})})}ionViewDidLeave(){}}return t.\u0275fac=function(i){return new(i||t)(r.Jb(l.a),r.Jb(b.a),r.Jb(u.a),r.Jb(m.a))},t.\u0275cmp=r.Db({type:t,selectors:[["app-solicitudes"]],decls:9,vars:5,consts:[[1,"ion-no-border"],["color","oscuro"],["slot","start","defaultHref","/central/menu/","icon","chevron-back-outline"],[1,"medium"],[1,"divider"],[1,"blanco",3,"ngClass"],["class","blanco ",4,"ngIf"],[1,"blanco"],["lines","none","color","blanco",4,"ngFor","ngForOf"],["lines","none","color","blanco"],["slot","start",1,"avatar"],[3,"src"],[1,"ion-text-wrap"],[1,"small"],[1,"moto-padre"],["color","success","shape","round","mode","ios",3,"click"],["color","light","shape","round","mode","ios",3,"click"]],template:function(t,i){1&t&&(r.Mb(0,"ion-header",0),r.Mb(1,"ion-toolbar",1),r.Kb(2,"ion-back-button",2),r.Mb(3,"ion-title",3),r.rc(4),r.Lb(),r.Lb(),r.Lb(),r.Mb(5,"ion-content"),r.Kb(6,"div",4),r.Mb(7,"div",5),r.qc(8,p,2,2,"ion-list",6),r.Lb(),r.Lb()),2&t&&(r.zb(4),r.tc("solicitudes de Seguimiento ",i.seguimientos.length,""),r.zb(3),r.dc("ngClass",r.hc(3,h,0===i.seguimientos.length)),r.zb(1),r.dc("ngIf",i.seguimientos.length>0))},directives:[a.z,a.jb,a.g,a.h,a.hb,a.t,o.h,o.j,a.L,o.i,a.F,a.f,a.B,a.K,a.j],styles:[".avatar[_ngcontent-%COMP%]{width:80px;height:80px}.moto-padre[_ngcontent-%COMP%]{display:flex}.moto-padre[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:calc(50% - 2px);max-width:200px}"],data:{animation:[Object(c.l)("solicitudes",[Object(c.k)("* => *",[Object(c.f)(":enter",[Object(c.j)({opacity:0,transform:"translateY(400px)"}),Object(c.h)(300,[Object(c.e)("500ms",Object(c.j)({opacity:1,transform:"none"}))])],{optional:!0}),Object(c.f)(":leave",[Object(c.j)({opacity:1,transform:"none"}),Object(c.h)(300,[Object(c.e)("500ms",Object(c.j)({opacity:0,transform:"translateY(-100%)"}))])],{optional:!0})])])]}}),t})()}];let f=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(i){return new(i||t)},imports:[[s.i.forChild(g)],s.i]}),t})(),j=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(i){return new(i||t)},imports:[[o.b,n.e,a.kb,f]]}),t})()}}]);