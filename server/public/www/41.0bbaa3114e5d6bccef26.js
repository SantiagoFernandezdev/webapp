(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{"4oo8":function(t,e,o){"use strict";o.r(e),o.d(e,"InicioGruaPageModule",function(){return I});var i=o("ofXK"),n=o("3Pt+"),s=o("TEn/"),a=o("tyNb"),r=o("mrSG"),c=o("R0Ic"),d=o("HDdC"),l=o("fXoL"),h=o("fsfq"),p=o("0xwK"),b=o("fmoy"),u=o("7JkF"),f=o("HavB"),m=o("SpuA");const g=["mapa"];function v(t,e){if(1&t){const t=l.Nb();l.Mb(0,"div",8),l.Mb(1,"h3",9),l.rc(2,"No tienes ninguna solicitud activa en este momento"),l.Lb(),l.Mb(3,"ion-button",10),l.Ub("click",function(){return l.lc(t),l.Wb().crear()}),l.rc(4,"CREAR SOLICITUD"),l.Lb(),l.Lb()}}function x(t,e){if(1&t&&(l.Mb(0,"ion-avatar",33),l.Kb(1,"img",34),l.Lb()),2&t){const t=l.Wb().$implicit;l.dc("@escribiendo",t.escribiendo?"activo":"noactivo"),l.zb(1),l.fc("src","https://www.motocaliapp.com/",t.taller.imagen[0].path,"",l.mc)}}function M(t,e){if(1&t&&(l.Mb(0,"ion-avatar",33),l.Kb(1,"img",34),l.Lb()),2&t){const t=l.Wb().$implicit;l.dc("@escribiendo",t.escribiendo?"activo":"noactivo"),l.zb(1),l.fc("src","https://www.motocaliapp.com/",t.creador.imagen[0].path,"",l.mc)}}function k(t,e){if(1&t&&(l.Mb(0,"strong"),l.rc(1),l.Lb()),2&t){const t=l.Wb().$implicit;l.zb(1),l.tc(" ",t.creador.nombrecompleto,"")}}function O(t,e){if(1&t&&(l.Mb(0,"strong"),l.rc(1),l.Lb()),2&t){const t=l.Wb().$implicit;l.zb(1),l.tc(" ",t.taller.nombrecompleto,"")}}function w(t,e){1&t&&(l.Mb(0,"span"),l.rc(1," Escribiendo..."),l.Lb())}function j(t,e){if(1&t&&(l.Mb(0,"div",35),l.rc(1),l.Lb()),2&t){const t=l.Wb().$implicit;l.zb(1),l.sc(t.novistos)}}function E(t,e){if(1&t){const t=l.Nb();l.Mb(0,"ion-item-options",36),l.Mb(1,"ion-item-option",37),l.Ub("click",function(){l.lc(t);const e=l.Wb().$implicit;return l.Wb(3).marcar(e.taller)}),l.Kb(2,"ion-icon",38),l.Lb(),l.Lb()}}function L(t,e){if(1&t){const t=l.Nb();l.Mb(0,"ion-item-sliding"),l.Mb(1,"ion-item",25),l.Ub("click",function(){l.lc(t);const o=e.$implicit;return l.Wb(3).entrar(o)}),l.qc(2,x,2,2,"ion-avatar",26),l.qc(3,M,2,2,"ion-avatar",26),l.Mb(4,"ion-label",27),l.Mb(5,"div",28),l.qc(6,k,2,1,"strong",29),l.qc(7,O,2,1,"strong",29),l.Lb(),l.Mb(8,"div"),l.Mb(9,"strong"),l.rc(10),l.Lb(),l.Lb(),l.Mb(11,"div"),l.rc(12),l.Xb(13,"cambioUTC"),l.Lb(),l.Mb(14,"div",30),l.qc(15,w,2,0,"span",29),l.Lb(),l.qc(16,j,2,1,"div",31),l.Lb(),l.Lb(),l.qc(17,E,3,0,"ion-item-options",32),l.Lb()}if(2&t){const t=e.$implicit,o=l.Wb(3);l.zb(2),l.dc("ngIf",t.creador._id===o.id),l.zb(1),l.dc("ngIf",t.creador._id!==o.id),l.zb(2),l.dc("@escribiendo",t.escribiendo?"activo":"noactivo"),l.zb(1),l.dc("ngIf",t.creador._id!==o.id),l.zb(1),l.dc("ngIf",t.creador._id===o.id),l.zb(2),l.Bb("ticket","ticket"===t.tipo)("pedido","pedido"===t.tipo)("hoja","hoja"===t.tipo),l.dc("@escribiendo",t.escribiendo?"activo":"noactivo"),l.zb(1),l.tc("Chat Tipo: ",t.tipo,""),l.zb(1),l.dc("@escribiendo",t.escribiendo?"activo":"noactivo"),l.zb(1),l.sc(l.Yb(13,18,t.fecha)),l.zb(3),l.dc("ngIf",t.escribiendo),l.zb(1),l.dc("ngIf",t.novistos>0),l.zb(1),l.dc("ngIf",!o.grua.persona)}}function C(t,e){if(1&t&&(l.Mb(0,"div",21),l.Mb(1,"div",22),l.rc(2,"Lista de Conversaciones"),l.Lb(),l.Mb(3,"ion-list",23),l.qc(4,L,18,20,"ion-item-sliding",24),l.Lb(),l.Lb()),2&t){const t=l.Wb(2);l.zb(4),l.dc("ngForOf",t.salas)}}function y(t,e){if(1&t){const t=l.Nb();l.Mb(0,"div",11),l.Mb(1,"ion-card",12),l.Mb(2,"ion-card-header"),l.Kb(3,"div",13,14),l.Lb(),l.Mb(5,"strong",15),l.rc(6),l.Xb(7,"cambioUTC"),l.Lb(),l.Mb(8,"ion-card-title",16),l.rc(9),l.Lb(),l.Mb(10,"div",17),l.Mb(11,"p"),l.rc(12),l.Lb(),l.Kb(13,"div",18),l.Mb(14,"div"),l.Mb(15,"strong"),l.rc(16),l.Lb(),l.Lb(),l.Mb(17,"div"),l.Mb(18,"strong"),l.rc(19,"Tel\xe9fono: "),l.Lb(),l.rc(20),l.Lb(),l.Mb(21,"div"),l.Mb(22,"strong"),l.rc(23,"Correo: "),l.Lb(),l.rc(24),l.Lb(),l.Kb(25,"br"),l.Lb(),l.qc(26,C,5,1,"div",19),l.Mb(27,"ion-button",20),l.Ub("click",function(){return l.lc(t),l.Wb().eliminar()}),l.rc(28,"FINALIZAR SOLICITUD"),l.Lb(),l.Lb(),l.Lb()}if(2&t){const t=l.Wb();l.zb(6),l.sc(l.Yb(7,8,t.grua.fecha)),l.zb(3),l.tc("",t.grua.creador.nombrecompleto," "),l.zb(3),l.sc(t.grua.descripcion),l.zb(4),l.uc("Ubicado en ",t.grua.creador.ciudad,", ",t.grua.creador.pais,""),l.zb(4),l.tc(" ",t.grua.creador.tel,""),l.zb(4),l.tc(" ",t.grua.creador.correo,""),l.zb(2),l.dc("ngIf",t.salas.length>0)}}const _=[{path:"",component:(()=>{class t{constructor(t,e,o,i,n,s,a,c){this.router=t,this.almacenamiento=e,this.apiMonitoreo=o,this.toast=i,this.socket=n,this.apiPedido=s,this.active=a,this.alert=c,this.visor=!1,this.cargado=!1,this.lng=0,this.lat=0,this.salas=[],this.usuario="",this.role="",this.id="",this.escucharEscritoss().subscribe(t=>{console.log("escribiendo...",t),t.exe&&this.salas.forEach(e=>{e._id===t.idsala&&(console.log("existe"),e.escribiendo=!0,setTimeout(()=>{e.escribiendo=!1},500))})}),this.escucharGruas().subscribe(t=>Object(r.a)(this,void 0,void 0,function*(){if(t.info){console.log(t,"sockets",this.grua),this.grua.tomados.push(t.info.personas),this.salas?this.salas.push(t.info.chat):this.salas=[t.info.chat];const e=yield this.almacenamiento.obtenerToken();e&&this.apiPedido.mensajes(e.token,{idsala:t.info.chat._id}).subscribe(e=>{e.exe?(console.log(e,"RESPUESTA DEL TODO"),t.info.chat.fechamsg=e.response.lemgth>0?e.response[e.response.length-1]:t.info.chat.fecha,t.info.chat.novistos=e.response.length):t.info.chat.novistos=0,this.salas=[t.info.chat]},e=>{t.info.chat.novistos=0,this.salas=[t.info.chat]})}})),this.escucharMensaje().subscribe(t=>Object(r.a)(this,void 0,void 0,function*(){if(console.log("mensaje",t),t.exe){const e=yield this.almacenamiento.obtenerToken();if(e){const o=this.salas.filter(e=>e._id===t.resp.sala._id);this.apiPedido.mensajes(e.token,{idsala:o[0]._id}).subscribe(e=>{this.salas=this.salas.filter(e=>e._id!==t.resp.sala._id),o[0].novistos=e.exe?e.response.length:0,this.salas.unshift(o[0])},e=>{this.salas=this.salas.filter(e=>e._id!==t.resp.sala._id),o[0].novistos=0,this.salas.unshift(o[0])})}}}))}ngOnInit(){}ionViewWillEnter(){this.comprobar()}refrescando(){this.comprobar()}pedidosListar(){return Object(r.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&(this.role=t.role,this.id=t._id,this.usuario=t.nombre,this.apiMonitoreo.consultarChats(t.token,{grua:this.grua._id}).subscribe(e=>{if(e.exe){let o=e.response.length;e.response.forEach(i=>Object(r.a)(this,void 0,void 0,function*(){i.escribiendo=!1,this.socket.emit("iniciochat",{id:i._id}),(yield new Promise((e,o)=>{this.apiPedido.mensajes(t.token,{idsala:i._id}).subscribe(t=>{t.exe?(console.log(t,"RESPUESTA DEL TODO"),i.fechamsg=t.response.lemgth>0?t.response[t.response.length-1]:i.fecha,i.novistos=t.response.length,e(!0)):(i.novistos=0,e(!0))},t=>{i.novistos=0,e(!0)})}))&&(o-=1,0===o&&(this.salas=e.response,console.log(this.salas,"salas",o),this.salas.sort((t,e)=>(console.log(t.novistos),t.novistos<e.novistos?(console.log("meno"),1):t.novistos>e.novistos?(console.log("mayor"),-1):0))),this.cargado=!0)})),0===e.response.length&&(this.cargado=!0)}else this.toast.toastError("No se pudo consultar los chats, int\xe9ntelo m\xe1s tarde"),this.router.navigate(["/central/menu/"]),this.cargado=!0},t=>{this.toast.toastError("No se pudo consultar los chats, int\xe9ntelo m\xe1s tarde"),this.router.navigate(["/central/menu/"])}))})}entrar(t){this.almacenamiento.insertarChat(t).then(()=>{this.router.navigate(["/central/menu/monitoreo/grua",this.active.snapshot.paramMap.get("tipo"),"chat","lista"])}).catch(()=>{this.toast.toastError("No se puede acceder al chat, int\xe9ntelo m\xe1s tarde")})}escucharEscritoss(){return new d.a(t=>{this.socket.on("escribiendoChat",e=>{t.next(e)})})}escucharMensaje(){return new d.a(t=>{this.socket.on("mensajeChat",e=>{t.next(e)})})}escucharGruas(){return new d.a(t=>{this.socket.on("gruatomar",e=>{t.next(e)})})}crear(){this.router.navigate(["/central/menu/monitoreo/grua",this.active.snapshot.paramMap.get("tipo"),"crear",this.active.snapshot.paramMap.get("tipo")])}comprobar(){return Object(r.a)(this,void 0,void 0,function*(){this.salas=[];const t=yield this.almacenamiento.obtenerToken();t&&this.apiMonitoreo.consultarGruaSola(t.token).subscribe(t=>{console.log(t,"DATON"),this.cargado=!0,t.exe?t.response.length>0?(this.visor=!0,this.grua=t.response[0],this.lat=t.response[0].ubicacion.lat,this.lng=t.response[0].ubicacion.lng,0!==this.lat&&0!==this.lng?setTimeout(()=>{this.graficar(),this.pedidosListar()},1e3):this.toast.toastError("El mapa no se pudo mostar ya que no se tiene la ubicaci\xf3n definida")):this.visor=!1:this.toast.toastError("No se pudo completar la petici\xf3n, int\xe9ntelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo completar la petici\xf3n, int\xe9ntelo m\xe1s tarde")})})}marcar(t){return Object(r.a)(this,void 0,void 0,function*(){const e=yield this.alert.create({header:"Atenci\xf3n!",message:"\xbfQuieres aprobar a "+t.nombrecompleto+" para tu solicitud?",buttons:[{text:"Cancelar",cssClass:"cancelarAlerta",role:"cancel",handler:()=>{}},{text:"Acepto",cssClass:"botonalerta",handler:()=>Object(r.a)(this,void 0,void 0,function*(){const e=yield this.almacenamiento.obtenerToken();e&&this.apiMonitoreo.marcarPersona(e.token,{id:this.grua._id,persona:t._id}).subscribe(o=>{console.log(o,"DATON"),this.cargado=!0,o.exe?(this.socket.emit("gruapersona",{id:this.grua._id,usuario:t._id,otros:this.grua.tomados,_id:e._id,nombre:e.nombre}),this.grua.persona=t):this.toast.toastError("No se pudo completar la petici\xf3n, int\xe9ntelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo completar la petici\xf3n, int\xe9ntelo m\xe1s tarde")})})}]});yield e.present()})}graficar(){mapboxgl.accessToken="pk.eyJ1Ijoic2FudGlhZ29mZXJuYW5kZXpkZXYiLCJhIjoiY2tmYmh6cXdzMDM0bDJ2cHRucTI4cHpkaSJ9.-01EYvsLdJOU1Oy4BtwBwA";const t=new mapboxgl.Map({container:this.mapa.nativeElement,style:"mapbox://styles/mapbox/streets-v11",center:[this.lng,this.lat],zoom:11});t.addControl(new mapboxgl.NavigationControl);const e=document.createElement("div");e.className="marker",e.style.backgroundImage="url(/assets/Marcador.png)",e.style.backgroundSize="100%",e.style.width="50px",e.style.height="70px",new mapboxgl.Marker({element:e,draggable:!1}).setLngLat([this.lng,this.lat]).addTo(t)}eliminar(){return Object(r.a)(this,void 0,void 0,function*(){const t=yield this.alert.create({header:"Atenci\xf3n!",message:"\xbfQuieres finalizar la solicitud? Una vez finalizada se borrar\xe1 de forma permanente.",buttons:[{text:"Cancelar",cssClass:"cancelarAlerta",role:"cancel",handler:()=>{}},{text:"Acepto",cssClass:"botonalerta",handler:()=>Object(r.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&this.apiMonitoreo.GruaEliminar(t.token,{id:this.grua._id}).subscribe(e=>{console.log(e,"eliminada data"),e.exe?(e.persona?this.socket.emit("gruaeliminar",{usuario:e.response.persona?e.response.persona._id:"",adicionales:e.response.adicionales?e.response.adicionales:[],nombre:t.nombre}):this.socket.emit("gruachao",{id:e.id,usuarios:e.response2}),this.visor=!1,this.toast.toastExitoso("Solicitud finalizada")):this.toast.toastError("No se pudo completar la petici\xf3n, int\xe9ntelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo completar la petici\xf3n, int\xe9ntelo m\xe1s tarde")})})}]});yield t.present()})}}return t.\u0275fac=function(e){return new(e||t)(l.Jb(a.g),l.Jb(h.a),l.Jb(p.a),l.Jb(b.a),l.Jb(u.a),l.Jb(f.a),l.Jb(a.a),l.Jb(s.b))},t.\u0275cmp=l.Db({type:t,selectors:[["app-inicio-grua"]],viewQuery:function(t,e){if(1&t&&l.vc(g,1),2&t){let t;l.kc(t=l.Vb())&&(e.mapa=t.first)}},decls:11,vars:2,consts:[[1,"ion-no-border"],["color","oscuro"],["slot","start","icon","chevron-back-outline","defaultHref","/central/menu/monitoreo"],["slot","end"],[3,"click"],["name","reload-outline","slot","icon-only"],["class","flex",4,"ngIf"],["class","opts",4,"ngIf"],[1,"flex"],[1,"titulo"],["mode","ios","color","barra",3,"click"],[1,"opts"],["color","light","mode","ios"],[1,"mapa"],["mapa",""],[1,"gris"],[1,"tit"],[1,"info"],[1,"separador"],["class"," ",4,"ngIf"],["color","danger","mode","ios","expand","block",3,"click"],[1,""],[1,"separadorr"],[1,"light"],[4,"ngFor","ngForOf"],["color","light",3,"click"],["slot","start",4,"ngIf"],[1,"relativo"],[1,"infoo"],[4,"ngIf"],[1,"escribiendo"],["class","nv",4,"ngIf"],["side","end",4,"ngIf"],["slot","start"],[3,"src"],[1,"nv"],["side","end"],["color","barra",3,"click"],["name","checkmark","slot","icon-only"]],template:function(t,e){1&t&&(l.Mb(0,"ion-header",0),l.Mb(1,"ion-toolbar",1),l.Kb(2,"ion-back-button",2),l.Mb(3,"ion-title"),l.rc(4,"Solicitud actual"),l.Lb(),l.Mb(5,"ion-buttons",3),l.Mb(6,"ion-button",4),l.Ub("click",function(){return e.refrescando()}),l.Kb(7,"ion-icon",5),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Mb(8,"ion-content"),l.qc(9,v,5,0,"div",6),l.qc(10,y,29,10,"div",7),l.Lb()),2&t&&(l.zb(9),l.dc("ngIf",!e.visor&&e.cargado),l.zb(1),l.dc("ngIf",e.visor&&e.cargado))},directives:[s.z,s.kb,s.g,s.h,s.ib,s.k,s.j,s.A,s.t,i.j,s.l,s.n,s.p,s.L,i.i,s.J,s.F,s.K,s.f,s.I,s.H],pipes:[m.a],styles:[".flex[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center;margin:100px 0}.titulo[_ngcontent-%COMP%]{text-align:center;max-width:300px;font-size:18px;font-weight:300}.mapa[_ngcontent-%COMP%]{width:100%;height:300px}.tit[_ngcontent-%COMP%]{font-size:18px}.gris[_ngcontent-%COMP%], .tit[_ngcontent-%COMP%]{padding:10px}.gris[_ngcontent-%COMP%]{color:var(--ion-color-medium)}.info[_ngcontent-%COMP%]{padding:10px}.tp[_ngcontent-%COMP%]{z-index:10;background-color:initial}.ct[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:20px;font-weight:300}.separadorr[_ngcontent-%COMP%]{padding:10px;color:#fff;background-color:#4a4a4a}.msg[_ngcontent-%COMP%]{position:absolute;top:0;right:0;text-align:center;padding:5px 10px;border-radius:10px}.escribiendo[_ngcontent-%COMP%]{color:#627e42;font-weight:700;font-size:14px;height:20px}.relativo[_ngcontent-%COMP%]{position:relative}.nv[_ngcontent-%COMP%]{position:absolute;bottom:5px;right:5px;background-color:#627e42;color:#fff;text-align:center;min-width:20px;min-height:20px;max-width:50px;max-height:50px;border-radius:100%}.infoo[_ngcontent-%COMP%]{font-size:14px}.ticket[_ngcontent-%COMP%]{color:#e53935}.pedido[_ngcontent-%COMP%]{color:orange}.hoja[_ngcontent-%COMP%]{color:#4a4a4a}"],data:{animation:[Object(c.l)("escribiendo",[Object(c.i)("activo",Object(c.j)({opacity:.5})),Object(c.i)("noactivo",Object(c.j)({opacity:1})),Object(c.k)("activo <=> noactivo",[Object(c.e)("300ms")])])]}}),t})()}];let z=(()=>{class t{}return t.\u0275mod=l.Hb({type:t}),t.\u0275inj=l.Gb({factory:function(e){return new(e||t)},imports:[[a.i.forChild(_)],a.i]}),t})();var P=o("iTUp");let I=(()=>{class t{}return t.\u0275mod=l.Hb({type:t}),t.\u0275inj=l.Gb({factory:function(e){return new(e||t)},imports:[[i.b,n.e,s.lb,z,P.a]]}),t})()},HavB:function(t,e,o){"use strict";o.d(e,"a",function(){return f});var i=o("AytR"),n=o("tk/3"),s=o("coGc"),a=o("lJxs"),r=o("IzEk"),c=o("MtjB"),d=o("JIr8"),l=o("PqYM"),h=o("Cfvw"),p=o("fXoL"),b=o("tyNb"),u=o("B7Rs");let f=(()=>{class t{constructor(t,e,o){this.http=t,this.router=e,this.MmyTransfer=o}hanflerError(t){return t.pipe(Object(s.a)(()=>Object(l.a)(3e3)),Object(a.a)(t=>{if(console.log("Entramos a intentos"),t instanceof ErrorEvent)throw new Error("Error de Red");if(404===t.status)throw new Error(" P\xe1gina no encontrada");if(401===t.status)throw new Error(" No tiene permisos ")}),Object(r.a)(3))}crearPedido(t,e){const o={headers:new n.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/crear/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}misPedido(t){const e={headers:new n.c({"x-token":t})};return this.http.get(`${i.a}/pedidos/lista/`,e).pipe(Object(c.a)(t=>this.hanflerError(t)))}misChats(t,e){const o={headers:new n.c({"x-token":t})};return this.http.post(`${i.a}/chats/lista/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}misChatsGrupos(t,e){const o={headers:new n.c({"x-token":t})};return this.http.post(`${i.a}/chats/lista/grupos`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}misPedidoUsuario(t,e){const o={headers:new n.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/lista/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}misSalas(t){const e={headers:new n.c({"x-token":t})};return this.http.get(`${i.a}/ticket/salas`,e).pipe(Object(c.a)(t=>this.hanflerError(t)))}mensajes(t,e){const o={headers:new n.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/chat`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}traermensajesNoVistos(t,e){const o={headers:new n.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/chat/vistos`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}marcarvisto(t,e){const o={headers:new n.c({"x-token":t})};return this.http.put(`${i.a}/pedidos/chat/vistos`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}infoPedido(t,e){const o={headers:new n.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/info`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}infoPedidoPut(t,e){const o={headers:new n.c({"x-token":t})};return this.http.put(`${i.a}/pedidos/info`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearEstados(t,e){const o={headers:new n.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/estados`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}consultarEstados(t,e){const o={headers:new n.c({"x-token":t})};return this.http.put(`${i.a}/pedidos/estados`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}consultarChat(t,e){const o={headers:new n.c({"x-token":t})};return this.http.post(`${i.a}/unico/consultar/chat`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}consultarChatFotos(t,e){const o={headers:new n.c({"x-token":t})};return this.http.post(`${i.a}/unico/consultar/chat/fotos`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}consultarSala(t,e){const o={headers:new n.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/consultar/chat`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}consultarMapa(t,e){const o={headers:new n.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/consultar/mapa`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}consultarMapaUnico(t,e){const o={headers:new n.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/consultar/mapa/unico`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearMapa(t,e){const o={headers:new n.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/crear/mapa`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarMapa(t,e){const o={headers:new n.c({"x-token":t})};return this.http.put(`${i.a}/pedidos/editar/mapa`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarMapaInfo(t,e){const o={headers:new n.c({"x-token":t})};return this.http.put(`${i.a}/pedidos/editar/mapa/info`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarMapaInfoD(t,e){const o={headers:new n.c({"x-token":t})};return this.http.put(`${i.a}/pedidos/editar/mapa/infod`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarPedido(t,e){const o={headers:new n.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/editar`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarChat(t,e){const o={headers:new n.c({"x-token":t})};return this.http.post(`${i.a}/chat/editar`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}subirArchivosChat(t,e,o,n,s,a,r){console.log("archivo",o);const c={fileKey:"archivo",fileName:a,mimeType:r,httpMethod:"PUT",headers:{"x-token":t,"x-sala":e,"x-final":n,"x-cont":s}},l=this.MmyTransfer.create();return Object(h.a)(l.upload(o,`${i.a}/pedido/upload`,c)).pipe(Object(d.a)(t=>{throw new Error(o)}))}subirweb(t,e,o,s,a){console.log(t,e,o,s);const r={headers:new n.c({"x-token":t,"x-sala":e,"x-final":o.toString(),"x-cont":s.toString()})};return this.http.put(`${i.a}/pedido/upload`,a,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(n.a),p.Qb(b.g),p.Qb(u.a))},t.\u0275prov=p.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},SpuA:function(t,e,o){"use strict";o.d(e,"a",function(){return s});var i=o("wd/R"),n=o("fXoL");let s=(()=>{class t{transform(t){console.log(t,"fechin");let e=i.utc(t).toDate();return i(e).format("dddd, DD MMMM YYYY h:mm:a")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=n.Ib({name:"cambioUTC",type:t,pure:!0}),t})()}}]);