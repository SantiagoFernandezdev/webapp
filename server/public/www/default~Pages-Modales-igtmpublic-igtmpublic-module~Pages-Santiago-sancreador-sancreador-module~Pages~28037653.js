(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["default~Pages-Modales-igtmpublic-igtmpublic-module~Pages-Santiago-sancreador-sancreador-module~Pages~28037653"],{

/***/ "11Rl":
/*!*********************************************************************!*\
  !*** ./src/app/Pages/Modales/igtmplantilla/igtmplantilla.page.scss ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("ion-slides,\nion-slide {\n  width: 100%;\n}\n\n.bl {\n  color: #ffffff !important;\n  font-size: 12px !important;\n}\n\n.visualizador {\n  width: 100%;\n  position: relative;\n}\n\n.fullancho {\n  min-height: 100%;\n  height: 100vh;\n}\n\n.diapo {\n  width: 100%;\n  height: 100%;\n}\n\n.cerrar {\n  width: 100%;\n  position: absolute;\n  top: 0px;\n  color: #ffffff;\n  z-index: 100;\n}\n\n.cblanco {\n  color: #ffffff;\n}\n\n.comentario {\n  width: 100%;\n  margin: 0px;\n}\n\n.titulo {\n  font-weight: bold;\n  color: #777777;\n}\n\n.esp {\n  white-space: pre-wrap;\n}\n\n.respuesta {\n  color: #0288D1;\n  padding: 5px 0;\n  width: 100%;\n}\n\n.respuesta:hover {\n  color: #015A8B;\n}\n\n.respuestas {\n  padding-left: 15px;\n  width: 100%;\n}\n\n.resp {\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n}\n\n.res {\n  margin-top: 20px;\n}\n\n.avatar {\n  width: 60px;\n  height: 30px;\n  margin-right: 20px;\n}\n\n.info {\n  width: calc(199% - 50px);\n}\n\n.avatar img {\n  width: 100%;\n  height: 100%;\n}\n\n.btn {\n  color: #777777;\n  opacity: 0.7;\n  margin-bottom: 10px;\n}\n\n.tituloGrande {\n  width: 300px;\n  margin: 30px auto;\n  opacity: 0.5;\n  text-align: center;\n}\n\n.comentario {\n  width: 100%;\n  text-align: left;\n  margin-top: 15px;\n}\n\n.etiquetadosc {\n  width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.etiquetadosc .targe {\n  width: calc(60px - 20px);\n  margin: 10px;\n  position: relative;\n}\n\n.etiquetadosc .targe ion-avatar {\n  width: 60px;\n  height: 60px;\n}\n\n.etiquetadosc .targe .eliminar {\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  top: 0px;\n  right: -15px;\n  border-radius: 100%;\n  background-color: #F3C5C1;\n  color: red;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.botonc {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXC4uXFwuLlxcaWd0bXBsYW50aWxsYS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0VBRUksV0FBQTtBQUNKOztBQUVBO0VBQ0kseUJBQUE7RUFDQSwwQkFBQTtBQUNKOztBQUVBO0VBQ0ksV0FBQTtFQUNBLGtCQUFBO0FBQ0o7O0FBRUE7RUFDSSxnQkFBQTtFQUNBLGFBQUE7QUFDSjs7QUFFQTtFQUNJLFdBQUE7RUFDQSxZQUFBO0FBQ0o7O0FBRUE7RUFDSSxXQUFBO0VBQ0Esa0JBQUE7RUFDQSxRQUFBO0VBQ0EsY0FBQTtFQUNBLFlBQUE7QUFDSjs7QUFFQTtFQUNJLGNBQUE7QUFDSjs7QUFFQTtFQUNJLFdBQUE7RUFDQSxXQUFBO0FBQ0o7O0FBRUE7RUFDSSxpQkFBQTtFQUNBLGNBQUE7QUFDSjs7QUFFQTtFQUNJLHFCQUFBO0FBQ0o7O0FBRUE7RUFDSSxjQUFBO0VBQ0EsY0FBQTtFQUNBLFdBQUE7QUFDSjs7QUFFQTtFQUNJLGNBQUE7QUFDSjs7QUFFQTtFQUNJLGtCQUFBO0VBQ0EsV0FBQTtBQUNKOztBQUVBO0VBQ0ksYUFBQTtFQUNBLG1CQUFBO0VBQ0EsdUJBQUE7QUFDSjs7QUFFQTtFQUNJLGdCQUFBO0FBQ0o7O0FBRUE7RUFDSSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGtCQUFBO0FBQ0o7O0FBRUE7RUFDSSx3QkFBQTtBQUNKOztBQUVBO0VBQ0ksV0FBQTtFQUNBLFlBQUE7QUFDSjs7QUFFQTtFQUNJLGNBQUE7RUFDQSxZQUFBO0VBQ0EsbUJBQUE7QUFDSjs7QUFFQTtFQUNJLFlBQUE7RUFDQSxpQkFBQTtFQUNBLFlBQUE7RUFDQSxrQkFBQTtBQUNKOztBQUVBO0VBQ0ksV0FBQTtFQUNBLGdCQUFBO0VBQ0EsZ0JBQUE7QUFDSjs7QUFFQTtFQUNJLFdBQUE7RUFDQSxhQUFBO0VBQ0EsZUFBQTtBQUNKOztBQUVBO0VBQ0ksd0JBQUE7RUFDQSxZQUFBO0VBQ0Esa0JBQUE7QUFDSjs7QUFFQTtFQUNJLFdBQUE7RUFDQSxZQUFBO0FBQ0o7O0FBRUE7RUFDSSxrQkFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsUUFBQTtFQUNBLFlBQUE7RUFDQSxtQkFBQTtFQUNBLHlCQUFBO0VBQ0EsVUFBQTtFQUNBLGFBQUE7RUFDQSx1QkFBQTtFQUNBLG1CQUFBO0FBQ0o7O0FBRUE7RUFDSSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSxtQkFBQTtBQUNKIiwiZmlsZSI6ImlndG1wbGFudGlsbGEucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLXNsaWRlcyxcclxuaW9uLXNsaWRlIHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG4uYmwge1xyXG4gICAgY29sb3I6ICNmZmZmZmYgIWltcG9ydGFudDtcclxuICAgIGZvbnQtc2l6ZTogMTJweCAhaW1wb3J0YW50O1xyXG59XHJcblxyXG4udmlzdWFsaXphZG9yIHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG59XHJcblxyXG4uZnVsbGFuY2hvIHtcclxuICAgIG1pbi1oZWlnaHQ6IDEwMCU7XHJcbiAgICBoZWlnaHQ6IDEwMHZoO1xyXG59XHJcblxyXG4uZGlhcG8ge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbn1cclxuXHJcbi5jZXJyYXIge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICB0b3A6IDBweDtcclxuICAgIGNvbG9yOiAjZmZmZmZmO1xyXG4gICAgei1pbmRleDogMTAwO1xyXG59XHJcblxyXG4uY2JsYW5jbyB7XHJcbiAgICBjb2xvcjogI2ZmZmZmZjtcclxufVxyXG5cclxuLmNvbWVudGFyaW8ge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBtYXJnaW46IDBweDtcclxufVxyXG5cclxuLnRpdHVsbyB7XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxuICAgIGNvbG9yOiAjNzc3Nzc3O1xyXG59XHJcblxyXG4uZXNwIHtcclxuICAgIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcclxufVxyXG5cclxuLnJlc3B1ZXN0YSB7XHJcbiAgICBjb2xvcjogIzAyODhEMTtcclxuICAgIHBhZGRpbmc6IDVweCAwO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbn1cclxuXHJcbi5yZXNwdWVzdGE6aG92ZXIge1xyXG4gICAgY29sb3I6ICMwMTVBOEI7XHJcbn1cclxuXHJcbi5yZXNwdWVzdGFzIHtcclxuICAgIHBhZGRpbmctbGVmdDogMTVweDtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG4ucmVzcCB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1kaXJlY3Rpb246IHJvdztcclxuICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xyXG59XHJcblxyXG4ucmVzIHtcclxuICAgIG1hcmdpbi10b3A6IDIwcHg7XHJcbn1cclxuXHJcbi5hdmF0YXIge1xyXG4gICAgd2lkdGg6IDYwcHg7XHJcbiAgICBoZWlnaHQ6IDMwcHg7XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDIwcHg7XHJcbn1cclxuXHJcbi5pbmZvIHtcclxuICAgIHdpZHRoOiBjYWxjKDE5OSUgLSA1MHB4KTtcclxufVxyXG5cclxuLmF2YXRhciBpbWcge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbn1cclxuXHJcbi5idG4ge1xyXG4gICAgY29sb3I6ICM3Nzc3Nzc7XHJcbiAgICBvcGFjaXR5OiAuNztcclxuICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XHJcbn1cclxuXHJcbi50aXR1bG9HcmFuZGUge1xyXG4gICAgd2lkdGg6IDMwMHB4O1xyXG4gICAgbWFyZ2luOiAzMHB4IGF1dG87XHJcbiAgICBvcGFjaXR5OiAuNTtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxufVxyXG5cclxuLmNvbWVudGFyaW8ge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG4gICAgbWFyZ2luLXRvcDogMTVweDtcclxufVxyXG5cclxuLmV0aXF1ZXRhZG9zYyB7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LXdyYXA6IHdyYXA7XHJcbn1cclxuXHJcbi5ldGlxdWV0YWRvc2MgLnRhcmdlIHtcclxuICAgIHdpZHRoOiBjYWxjKDYwcHggLSAyMHB4KTtcclxuICAgIG1hcmdpbjogMTBweDtcclxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxufVxyXG5cclxuLmV0aXF1ZXRhZG9zYyAudGFyZ2UgaW9uLWF2YXRhciB7XHJcbiAgICB3aWR0aDogNjBweDtcclxuICAgIGhlaWdodDogNjBweDtcclxufVxyXG5cclxuLmV0aXF1ZXRhZG9zYyAudGFyZ2UgLmVsaW1pbmFyIHtcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIHdpZHRoOiAyMHB4O1xyXG4gICAgaGVpZ2h0OiAyMHB4O1xyXG4gICAgdG9wOiAwcHg7XHJcbiAgICByaWdodDogLTE1cHg7XHJcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI0YzQzVDMTtcclxuICAgIGNvbG9yOiByZWQ7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG59XHJcblxyXG4uYm90b25jIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxufSJdfQ== */");

/***/ }),

/***/ "Jmyf":
/*!*******************************************************************!*\
  !*** ./src/app/Pages/Modales/igtmplantilla/igtmplantilla.page.ts ***!
  \*******************************************************************/
/*! exports provided: IgtmplantillaPage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgtmplantillaPage", function() { return IgtmplantillaPage; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _raw_loader_igtmplantilla_page_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! raw-loader!./igtmplantilla.page.html */ "PZ89");
/* harmony import */ var _igtmplantilla_page_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./igtmplantilla.page.scss */ "11Rl");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _providers_Almacenamiento_inicio_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../providers/Almacenamiento/inicio.service */ "fsfq");
/* harmony import */ var _providers_Api_IGTM_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../providers/Api/IGTM.service */ "WGaO");
/* harmony import */ var _providers_Utilidades_ToastService_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../providers/Utilidades/ToastService.service */ "fmoy");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ionic/angular */ "TEn/");
/* harmony import */ var _ionic_native_status_bar_ngx__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ionic-native/status-bar/ngx */ "VYYF");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/router */ "tyNb");
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/animations */ "R0Ic");
/* harmony import */ var ngx_socket_io__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ngx-socket-io */ "7JkF");












let IgtmplantillaPage = class IgtmplantillaPage {
    constructor(almacenamiento, igtmApi, toast, modalCtrl, statusbar, router, socket) {
        this.almacenamiento = almacenamiento;
        this.igtmApi = igtmApi;
        this.toast = toast;
        this.modalCtrl = modalCtrl;
        this.statusbar = statusbar;
        this.router = router;
        this.socket = socket;
        this.usuarios = [];
        this.titulo = '';
        this.color = 'blanco';
        this.colorheader = 'blanco';
        this.header = true;
        this.opt = {
            zoom: {
                maxRation: 5,
                toggle: true
            }
        };
        this.cargado = false;
        this.usuario = '';
        this.comentario = '';
        this.focus = false;
        this.tipoComentario = 'nuevo';
        this.padre = '';
        this.boton = false;
        // Compartir
        this.texto = '';
        this.auto = false;
        this.etiquetadosc = [];
        this.etiquetadoscid = [];
        this.cargares = false;
    }
    ngOnInit() {
    }
    ionViewWillEnter() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            if (this.tipo === 'etiquetar') {
                this.titulo = 'Etiquetar personas';
            }
            else if (this.tipo === 'mencionar') {
                this.titulo = 'Mencionar personas';
            }
            else if (this.tipo === 'visualizador') {
                this.header = false;
                this.color = 'darkgold';
                this.colorheader = 'darkgold';
                this.statusbar.hide();
                this.cargar();
            }
            else if (this.tipo === 'etiquetados') {
                this.titulo = 'Etiquetados';
                this.color = 'blanco';
                this.colorheader = 'blanco';
                this.statusbar.hide();
                this.etiquetados.forEach((item) => {
                    if (item.imagen.length > 0) {
                        item.image = `https://motocaliapp.com/${item.imagen[0].path}`;
                    }
                    else {
                        item.image = '/assets/notfound.png';
                    }
                });
            }
            else if (this.tipo === 'comentar') {
                this.colorheader = 'light';
                this.titulo = this.comentarios.length + ' Comentarios';
                const info = this.almacenamiento.obtenerToken();
                if (info) {
                    const msg = !info.nusuario ? '' : `@${info.nusuario}`;
                    this.usuario = `${msg} escribe un comentario`;
                    // console.log(this.comentarios)
                    if (this.comentarios.length > 0) {
                        this.comentarios.forEach((item) => {
                            if (item.creador.imagen.length > 0) {
                                item.image = `https://motocaliapp.com/${item.creador.imagen[0].path}`;
                            }
                            else {
                                item.image = '/assets/notfound.png';
                            }
                            item.habilitar = false;
                            if (item.hijos.length > 0) {
                                item.hijos.forEach((it) => {
                                    if (it.nombre.imagen.length > 0) {
                                        it.image = `https://motocaliapp.com/${it.nombre.imagen[0].path}`;
                                    }
                                    else {
                                        it.image = '/assets/notfound.png';
                                    }
                                });
                            }
                        });
                    }
                }
            }
            else if (this.tipo === 'compartir') {
                this.titulo = 'Compartir publicación';
            }
        });
    }
    cargar() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            this.cargado = true;
            const info = yield this.almacenamiento.obtenerToken();
            if (info) {
                yield this.slide.slideTo(this.indice, 0);
            }
        });
    }
    buscar(event) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            this.cargares = true;
            const info = yield this.almacenamiento.obtenerToken();
            if (info) {
                this.igtmApi.BuscarUsuarios(info.token, event.detail.value).subscribe((data) => {
                    if (data.exe) {
                        data.response.forEach((item) => {
                            if (item.imagen.length > 0) {
                                item.imagen = `https://motocaliapp.com/${item.imagen[0].path}`;
                            }
                            else {
                                item.imagen = '/assets/notfound.png';
                            }
                        });
                        this.usuarios = data.response;
                        this.cargares = false;
                    }
                    else {
                        this.cargares = false;
                        this.toast.toastError('No se pudo taer los usuarios, intentelo mas tarde');
                    }
                }, (err) => {
                    this.cargares = false;
                    this.toast.toastError('No se puede etiquetar esta publicación, intentelo mas tarde');
                });
            }
        });
    }
    seleccionar(persona) {
        this.modalCtrl.dismiss({
            exe: true,
            persona
        });
    }
    navegar(etiqueta) {
        this.router.navigate(['/central/buscar/perfil-visita', etiqueta.nombreusuario]);
        this.cerrar();
    }
    comentar(event) {
        this.comentario = event.detail.value;
        if (!this.comentario.includes('@') || this.comentario === '') {
            this.tipoComentario = 'nuevo';
        }
    }
    responder(comentario, tipo, salida, indice) {
        if (tipo === 2) {
            salida.nombre.padre = indice;
            this.usuarioRespuesta = salida.nombre;
            // console.log(this.usuarioRespuesta)
            this.comentario = `@${salida.nombre.nombreusuario} `;
        }
        else {
            this.comentario = `@${comentario.creador.nombreusuario} `;
            this.usuarioRespuesta = comentario.creador;
            this.usuarioRespuesta.padre = indice;
        }
        this.padre = comentario._id;
        this.tipoComentario = 'respuesta';
        this.text.setFocus();
    }
    cerrar() {
        if (this.tipo === 'comentar') {
            this.modalCtrl.dismiss({
                exe: true,
                comentarios: this.comentarios
            });
        }
        else {
            this.modalCtrl.dismiss();
        }
    }
    crearComentario() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            this.boton = true;
            const info = yield this.almacenamiento.obtenerToken();
            if (info) {
                this.igtmApi.crearComentario(info.token, { comentario: this.comentario, _id: this.publicacion, tipo: this.tipoComentario, padre: this.padre }).subscribe((data) => {
                    // console.log(data, 'respuesta')
                    if (data.exe) {
                        if (this.tipoComentario === 'nuevo') {
                            if (data.response.creador.imagen.length > 0) {
                                data.response.image = `https://motocaliapp.com/${data.response.creador.imagen[0].path}`;
                            }
                            else {
                                data.response.image = '/assets/notfound.png';
                            }
                            this.comentarios.push(data.response);
                        }
                        else {
                            // console.log(this.usuarioRespuesta.padre)
                            if (data.response.hijos.length > 0) {
                                if (data.response.hijos[data.response.hijos.length - 1].nombre.imagen.length > 0) {
                                    data.response.hijos[data.response.hijos.length - 1].image = `https://motocaliapp.com/${data.response.hijos[data.response.hijos.length - 1].nombre.imagen[0].path}`;
                                }
                                else {
                                    data.response.hijos[data.response.hijos.length - 1].image = '/assets/notfound.png';
                                }
                            }
                            this.comentarios[this.usuarioRespuesta.padre].hijos.push(data.response.hijos[data.response.hijos.length - 1]);
                        }
                        this.toast.toastNotificacion('Comentario enviado correctamente');
                        if (info._id !== this.creador._id) {
                            if (this.tipoComentario === 'nuevo') {
                                this.socket.emit('comentario', {
                                    creador: this.creador._id,
                                    persona: `@${info.nusuario}`,
                                    celular: [this.creador.usuarioID],
                                    ids: [this.creador._id],
                                    motivo: 'a comentado en tu publicación',
                                    comentario: this.comentario,
                                    publicacion: this.publicacion
                                });
                            }
                            else {
                                // console.log(this.usuarioRespuesta);
                                this.socket.emit('comentario', {
                                    creador: this.creador._id,
                                    persona: `@${info.nusuario}`,
                                    celular: [this.creador.usuarioID, this.usuarioRespuesta.usuarioID],
                                    ids: [this.creador._id, this.usuarioRespuesta._id],
                                    comentario: this.comentario,
                                    motivo: 'respondió a tu comentario',
                                    publicacion: this.publicacion
                                });
                            }
                        }
                        else {
                            // console.log(this.usuarioRespuesta);
                            if (this.tipoComentario === 'respuesta') {
                                this.socket.emit('comentario', {
                                    creador: this.creador._id,
                                    persona: `@${info.nusuario}`,
                                    celular: [this.usuarioRespuesta.usuarioID],
                                    ids: [this.usuarioRespuesta._id],
                                    comentario: this.comentario,
                                    motivo: 'respondió a tu comentario',
                                    publicacion: this.publicacion
                                });
                            }
                        }
                        this.comentario = '';
                        this.tipoComentario = 'respuesta';
                        this.boton = false;
                    }
                    else {
                        this.toast.toastError('No se pudo enviar el comentario, inténtelo más tarde');
                    }
                }, (err) => {
                    this.toast.toastError('No se pudo enviar el comentario, inténtelo más tarde');
                });
            }
        });
    }
    verRespuestas(indice) {
        this.comentarios[indice].habilitar = !this.comentarios[indice].habilitar;
    }
    cambiar(event) {
        this.texto = event.detail.value;
        if (this.texto !== '') {
            this.auto = true;
        }
        else {
            this.auto = false;
        }
    }
    seleccion(usuario) {
        if (!this.etiquetadosc.find((item) => item._id === usuario._id) || this.etiquetadosc.length === 0) {
            this.etiquetadosc.push(usuario);
            this.etiquetadoscid.push(usuario._id);
        }
    }
    eliminar(i) {
        this.etiquetadosc.splice(i, 1);
        this.etiquetadoscid.splice(i, 1);
    }
    publicarCompartido() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            this.boton = true;
            const info = yield this.almacenamiento.obtenerToken();
            if (info) {
                // console.log(this.publicacionc)
                this.igtmApi.crearCompartida(info.token, { etiquetas: this.etiquetadoscid, comentario: this.texto, publicacion: this.publicacionc }).subscribe((data) => {
                    // console.log(data, 'respuesta')
                    if (data.exe) {
                        this.modalCtrl.dismiss({
                            recargo: true
                        });
                    }
                    else {
                        this.toast.toastError('No se pudo compartir la publicación, inténtelo más tarde');
                    }
                }, (err) => {
                    this.toast.toastError('No se pudo compartir la publicación, inténtelo más tarde');
                });
            }
        });
    }
    perfilNavegar(usuario) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            const info = yield this.almacenamiento.obtenerToken();
            // console.log(usuario);
            if (info) {
                this.modalCtrl.dismiss();
                if (info.nusuario === usuario.nombreusuario) {
                    this.router.navigate(['/perfil/', 's']);
                }
                else {
                    this.router.navigate(['/visita/', usuario.nombreusuario, 's']);
                }
            }
        });
    }
};
IgtmplantillaPage.ctorParameters = () => [
    { type: _providers_Almacenamiento_inicio_service__WEBPACK_IMPORTED_MODULE_4__["InicioService"] },
    { type: _providers_Api_IGTM_service__WEBPACK_IMPORTED_MODULE_5__["IGTMService"] },
    { type: _providers_Utilidades_ToastService_service__WEBPACK_IMPORTED_MODULE_6__["ToastServices"] },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_7__["ModalController"] },
    { type: _ionic_native_status_bar_ngx__WEBPACK_IMPORTED_MODULE_8__["StatusBar"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_9__["Router"] },
    { type: ngx_socket_io__WEBPACK_IMPORTED_MODULE_11__["Socket"] }
];
IgtmplantillaPage.propDecorators = {
    tipo: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_3__["Input"] }],
    archivos: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_3__["Input"] }],
    indice: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_3__["Input"] }],
    info: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_3__["Input"] }],
    etiquetados: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_3__["Input"] }],
    publicacion: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_3__["Input"] }],
    creador: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_3__["Input"] }],
    comentarios: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_3__["Input"] }],
    publicacionc: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_3__["Input"] }],
    slide: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_3__["ViewChild"], args: ['slide', { static: false },] }],
    text: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_3__["ViewChild"], args: ['text', { static: false },] }]
};
IgtmplantillaPage = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["Component"])({
        selector: 'app-igtmplantilla',
        template: _raw_loader_igtmplantilla_page_html__WEBPACK_IMPORTED_MODULE_1__["default"],
        animations: [
            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_10__["trigger"])('entrada', [
                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_10__["transition"])(':enter', [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_10__["style"])({
                        opacity: 0,
                    }),
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_10__["animate"])('300ms', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_10__["style"])({
                        opacity: 1
                    }))
                ]),
                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_10__["transition"])(':leave', [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_10__["style"])({
                        opacity: 1,
                    }),
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_10__["animate"])('100ms', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_10__["style"])({
                        opacity: 0
                    }))
                ])
            ])
        ],
        styles: [_igtmplantilla_page_scss__WEBPACK_IMPORTED_MODULE_2__["default"]]
    })
], IgtmplantillaPage);



/***/ }),

/***/ "PZ89":
/*!***********************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/Pages/Modales/igtmplantilla/igtmplantilla.page.html ***!
  \***********************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<ion-header *ngIf=\"header\" class=\"ion-no-border\">\n    <ion-toolbar color=\"oscuro\">\n        <ion-title>{{ titulo }}</ion-title>\n        <ion-buttons slot=\"end\">\n            <ion-button (click)=\"cerrar()\">\n                <ion-icon name=\"close-outline\" slot=\"icon-only\"></ion-icon>\n            </ion-button>\n\n        </ion-buttons>\n    </ion-toolbar>\n\n</ion-header>\n\n<ion-content [color]=\"color\">\n\n    <div *ngIf=\"tipo === 'etiquetar' || tipo === 'mencionar'\" class=\"etiquetar\">\n        <ion-searchbar mode=\"ios\" (ionChange)=\"buscar( $event )\" placeholder=\"Buscar Usuario\"></ion-searchbar>\n        <div class=\"divider\"></div>\n        <ion-list>\n            <ion-item *ngFor=\"let usuario of usuarios\" (click)=\"seleccionar(usuario)\">\n                <ion-avatar slot=\"start\">\n                    <img [src]=\"usuario.imagen\" width=\"100%\" height=\"100%\" alt=\"\">\n                </ion-avatar>\n                <ion-label>\n                    <strong>{{ usuario.nombrecompleto }}</strong><br> @{{ usuario.nombreusuario }}\n                </ion-label>\n\n            </ion-item>\n        </ion-list>\n    </div>\n\n\n\n    <div *ngIf=\"tipo === 'visualizador'\" class=\"visualizador\">\n        <div class=\"cerrar \">\n            <ion-item lines=\"none\" class=\"transparente sinfondo\">\n                <ion-avatar slot=\"start\">\n                    <img [src]=\"info.image\" width=\"100%\" height=\"100%\" alt=\"\">\n                </ion-avatar>\n                <ion-label class=\"bl ion-text-wrap\">{{info.creador.nombrecompleto}} <br> {{info.creador.nombreusuario}}</ion-label>\n                <ion-buttons slot=\"end\">\n\n                    <ion-button (click)=\"cerrar()\">\n                        <ion-icon color=\"blanco\" name=\"close-outline\" slot=\"icon-only\"></ion-icon>\n                    </ion-button>\n                </ion-buttons>\n            </ion-item>\n\n        </div>\n        <ion-slides class=\"fullancho\" [options]=\"opt\" *ngIf=\"cargado\" #slide color=\"dark\" mode=\"ios\">\n            <ion-slide class=\"diapo\" *ngFor=\"let archivo of archivos; let i = index;\">\n                <img *ngIf=\"archivo.mime.includes('image')\" src=\"https://motocaliapp.com/11927613401/{{archivo.ruta}}\" width=\"100%\">\n\n                <app-video *ngIf=\"archivo.mime.includes('video') || archivo.mime.includes('Video') || archivo.mime.includes('mp4') || archivo.mime.includes('MP4')\" url=\"https://motocaliapp.com/11927613401/{{ archivo.ruta }}\"></app-video>\n\n\n            </ion-slide>\n        </ion-slides>\n    </div>\n\n\n    <div *ngIf=\"tipo === 'etiquetados'\" class=\"etiquetar\">\n        <div class=\"divider\"></div>\n        <ion-list>\n            <ion-item color=\"blanco\" *ngFor=\"let etiqueta of etiquetados\" (click)=\"perfilNavegar(etiqueta)\">\n                <ion-avatar slot=\"start\">\n                    <img [src]=\"etiqueta.image\" width=\"100%\" height=\"100%\" alt=\"\">\n                </ion-avatar>\n                <ion-label class=\"\">\n                    <strong>{{ etiqueta.nombrecompleto }}</strong><br> @{{ etiqueta.nombreusuario }}\n                </ion-label>\n\n            </ion-item>\n        </ion-list>\n    </div>\n\n\n    <div *ngIf=\"tipo === 'comentar'\" class=\"comentar\">\n        <h3 class=\"tituloGrande\" *ngIf=\"comentarios.length === 0\">No hay comentarios para esta publicación</h3>\n        <ion-list>\n            <ion-item class=\"sinfondo\" lines=\"none\" *ngFor=\"let comentario of comentarios; let i = index;\">\n\n                <ion-label class=\"ion-text-wrap esp resp\">\n                    <ion-avatar class=\"avatar\" (click)=\"perfilNavegar(comentario.creador)\">\n                        <img [src]=\"comentario.image\" width=\"100%\" height=\"100%\" alt=\"\">\n                    </ion-avatar>\n                    <div class=\"info\">\n                        <div (click)=\"perfilNavegar(comentario.creador)\">\n                            <span class=\"titulo\">@{{ comentario.creador.nombreusuario }}</span> <br> {{comentario.comentario}}\n                        </div>\n                        <div class=\"respuesta\" (click)=\"responder(comentario, 1, '', i)\">Responder</div>\n                        <div *ngIf=\"comentario.hijos.length > 0 && !comentario.habilitar\" class=\"btn\" (click)=\"verRespuestas(i)\">Ver respuestas</div>\n\n                        <div *ngIf=\"comentario.hijos.length > 0 && comentario.habilitar\" class=\"btn\" (click)=\"verRespuestas(i)\">Ocultar respuestas</div>\n\n                        <div @entrada class=\"respuestas\" *ngIf=\"comentario.habilitar\">\n                            <div *ngFor=\"let hijo of comentario.hijos\">\n\n                                <ion-label class=\"ion-text-wrap esp resp\">\n                                    <ion-avatar class=\"avatar\" (click)=\"perfilNavegar(hijo.nombre)\">\n                                        <img [src]=\"hijo.image\" width=\"100%\" height=\"100%\" alt=\"\">\n                                    </ion-avatar>\n                                    <div class=\"info\">\n                                        <div (click)=\"perfilNavegar(hijo.nombre)\">\n                                            <span class=\"titulo\">@{{ hijo.nombre.nombreusuario }}</span> <br> {{hijo.comentario}}\n                                        </div>\n                                        <div class=\"respuesta\" (click)=\"responder(comentario, 2, hijo, i)\">Responder</div>\n                                    </div>\n                                </ion-label>\n\n                            </div>\n                        </div>\n                    </div>\n                </ion-label>\n\n            </ion-item>\n        </ion-list>\n    </div>\n\n\n    <div *ngIf=\"tipo === 'compartir'\" class=\"etiquetar\">\n        <div class=\"etiquetadosc\" *ngIf=\"etiquetadosc.length > 0\">\n            <div class=\"targe\" *ngFor=\"let etiqueta of etiquetadosc; let i = index;\">\n                <ion-avatar>\n                    <img [src]=\"etiqueta.imagen\" width=\"100%\" height=\"100%\">\n                </ion-avatar>\n                <div class=\"eliminar\" (click)=\"eliminar(i)\">x</div>\n            </div>\n        </div>\n\n        <ion-searchbar mode=\"ios\" (ionChange)=\"buscar( $event )\" placeholder=\"Buscar usuario para etiquetarlo\"></ion-searchbar>\n        <div class=\"divider\"></div>\n\n        <div class=\"botonc\" *ngIf=\"cargares\">\n            <ion-spinner name=\"crescent\"></ion-spinner>\n            Buscando usuarios...\n        </div>\n\n        <ion-list>\n            <ion-item *ngFor=\"let usuario of usuarios\" (click)=\"seleccion(usuario)\">\n                <ion-avatar slot=\"start\">\n                    <img [src]=\"usuario.imagen\" width=\"100%\" height=\"100%\" alt=\"\">\n                </ion-avatar>\n                <ion-label>\n                    <strong>{{ usuario.nombrecompleto }}</strong><br> @{{ usuario.nombreusuario }}\n                </ion-label>\n\n            </ion-item>\n\n            <ion-item mode=\"ios\" class=\"sinfondo\">\n                <ion-textarea class=\"comentario\" inputmode=\"text\" [autoGrow]=\"auto\" maxlength=\"120\" placeholder=\"Escribe un comentario\" (ionChange)=\"cambiar( $event )\">\n\n                </ion-textarea>\n            </ion-item>\n\n\n        </ion-list>\n\n        <div class=\"botonc\">\n            <ion-button mode=\"ios\" shape=\"round\" color=\"success\" (click)=\"publicarCompartido()\">COMPARTIR PUBLICACIÓN</ion-button>\n        </div>\n    </div>\n\n\n</ion-content>\n\n<ion-footer *ngIf=\"tipo === 'comentar'\">\n    <ion-toolbar>\n        <ion-item lines=\"none\" class=\"pie sinfondo\">\n            <ion-textarea #text class=\"comentario\" [autofocus]=\"focus\" inputmode=\"text\" [autoGrow]=\"true\" maxlength=\"200\" placeholder=\"{{ usuario }}\" (ionChange)=\"comentar($event)\" [value]=\"comentario\"></ion-textarea>\n            <ion-buttons slot=\"end\">\n                <ion-button [disabled]=\"boton\" (click)=\"crearComentario()\" color=\"primary\">\n                    <ion-icon name=\"send-outline\" slot=\"icon-only\"></ion-icon>\n                </ion-button>\n            </ion-buttons>\n        </ion-item>\n    </ion-toolbar>\n</ion-footer>");

/***/ })

}]);
//# sourceMappingURL=default~Pages-Modales-igtmpublic-igtmpublic-module~Pages-Santiago-sancreador-sancreador-module~Pages~28037653.js.map