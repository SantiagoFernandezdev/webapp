(window.webpackJsonp=window.webpackJsonp||[]).push([[112],{PlGv:function(e,o,t){"use strict";t.r(o),t.d(o,"IVTProveedoresPageModule",function(){return O});var n=t("ofXK"),i=t("3Pt+"),r=t("TEn/"),s=t("tyNb"),c=t("mrSG"),a=t("SQQW"),l=t("R0Ic"),d=t("fXoL"),b=t("fsfq"),p=t("5yQV"),m=t("fmoy");function h(e,o){1&e&&(d.Mb(0,"div",15),d.Kb(1,"img",16),d.Mb(2,"h3",17),d.rc(3,"No tiene proveedores registrados"),d.Lb(),d.Lb())}function u(e,o){1&e&&(d.Mb(0,"ion-item"),d.Kb(1,"ion-skeleton-text",20),d.Mb(2,"ion-label"),d.Kb(3,"ion-skeleton-text",21),d.Kb(4,"ion-skeleton-text",22),d.Lb(),d.Lb())}const v=function(){return[1,1,1,1,1]};function f(e,o){1&e&&(d.Mb(0,"div",18),d.Mb(1,"ion-list"),d.qc(2,u,5,0,"ion-item",19),d.Lb(),d.Lb()),2&e&&(d.zb(2),d.dc("ngForOf",d.gc(1,v)))}function g(e,o){if(1&e&&(d.Mb(0,"strong",24),d.rc(1),d.Lb()),2&e){const e=d.Wb().$implicit;d.zb(1),d.tc(" - ",e.telefono2," ")}}function M(e,o){if(1&e){const e=d.Nb();d.Mb(0,"ion-item-sliding"),d.Mb(1,"ion-item"),d.Mb(2,"ion-avatar",2),d.Kb(3,"img",23),d.Lb(),d.Mb(4,"ion-label"),d.rc(5),d.Kb(6,"br"),d.Mb(7,"strong",24),d.rc(8),d.Lb(),d.qc(9,g,2,1,"strong",25),d.Kb(10,"br"),d.Mb(11,"div",26),d.rc(12),d.Lb(),d.Lb(),d.Lb(),d.Mb(13,"ion-item-options",27),d.Mb(14,"ion-item-option",28),d.Ub("click",function(){d.lc(e);const t=o.$implicit,n=o.index;return d.Wb(2).editar(t,n)}),d.Kb(15,"ion-icon",29),d.Lb(),d.Mb(16,"ion-item-option",30),d.Ub("click",function(){d.lc(e);const t=o.$implicit,n=o.index;return d.Wb(2).eliminar(t,n)}),d.Kb(17,"ion-icon",31),d.Lb(),d.Lb(),d.Lb()}if(2&e){const e=o.$implicit;d.dc("@salida",void 0),d.zb(5),d.tc(" ",e.nombre," "),d.zb(3),d.tc("",e.telefono," "),d.zb(1),d.dc("ngIf",""!==e.telefono2),d.zb(3),d.sc(e.correo)}}function x(e,o){if(1&e&&(d.Mb(0,"ion-list"),d.qc(1,M,18,5,"ion-item-sliding",19),d.Lb()),2&e){const e=d.Wb();d.zb(1),d.dc("ngForOf",e.proveedores)}}const P=[{path:"",component:(()=>{class e{constructor(e,o,t,n,i,r){this.modalCtrl=e,this.almacenamiento=o,this.ivtApi=t,this.toast=n,this.alertCtrl=i,this.activeRoute=r,this.proveedores=[],this.load=!1}ngOnInit(){}ionViewWillEnter(){this.cargarProveedores()}refrescando(e){this.cargarProveedores().then(()=>{e.target.complete()}).catch(()=>e.target.complete())}cargarProveedores(){return Object(c.a)(this,void 0,void 0,function*(){const e=yield this.almacenamiento.obtenerToken();e&&this.ivtApi.leerProveedor(e.token,this.activeRoute.snapshot.paramMap.get("id")).subscribe(e=>{e.exe?this.proveedores=e.response:this.toast.toastError("No se pudo cargar los datos, intentelo m\xe1s tarde")},e=>{this.toast.toastError("No se pudo cargar los datos, intentelo m\xe1s tarde")})})}modal(){return Object(c.a)(this,void 0,void 0,function*(){const e=yield this.modalCtrl.create({component:a.a,componentProps:{tipo:"proveedores",inventario:this.activeRoute.snapshot.paramMap.get("id")}});yield e.present();const o=yield e.onWillDismiss();o.data&&o.data.exe&&this.cargarProveedores()})}editar(e,o){return Object(c.a)(this,void 0,void 0,function*(){const t=yield this.alertCtrl.create({header:"Editar Proveedor",inputs:[{type:"text",name:"nombre",placeholder:"Escriba el nombre del proveedor",value:e.nombre},{type:"number",name:"tel1",placeholder:"Tel\xe9fono de contacto",value:e.telefono},{type:"number",name:"tel2",placeholder:"Tel\xe9fono de contacto adicional",value:e.telefono2},{type:"text",name:"correo",placeholder:"Correo electr\xf3nico de contacto",value:e.correo}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Aceptar",handler:t=>Object(c.a)(this,void 0,void 0,function*(){const n=yield this.almacenamiento.obtenerToken();n&&this.ivtApi.editarProveedor(n.token,{nombre:t.nombre,tel1:t.tel1,tel2:t.tel2,correo:t.correo,_id:e._id}).subscribe(e=>{e.exe?(this.toast.toastExitoso("Proveedor editado!"),this.proveedores[o].nombre=e.response.nombre,this.proveedores[o].telefono=e.response.telefono,this.proveedores[o].telefono2=e.response.telefono2,this.proveedores[o].correo=e.response.correo):this.toast.toastError("No se pudo editar el proveedor, intentelo m\xe1s tarde")},e=>{this.toast.toastError("No se pudo editar el proveedor, intentelo m\xe1s tarde")})})}]});yield t.present()})}eliminar(e,o){return Object(c.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&this.ivtApi.eliminarProveedor(t.token,e._id).subscribe(e=>{e.exe?(this.toast.toastExitoso("Proveedor eliminado!"),this.proveedores.splice(o,1)):this.toast.toastError("No se pudo eliminar el proveedor, intentelo m\xe1s tarde")},e=>{this.toast.toastError("No se pudo eliminar el proveedor, intentelo m\xe1s tarde")})})}}return e.\u0275fac=function(o){return new(o||e)(d.Jb(r.ob),d.Jb(b.a),d.Jb(p.a),d.Jb(m.a),d.Jb(r.b),d.Jb(s.a))},e.\u0275cmp=d.Db({type:e,selectors:[["app-ivtproveedores"]],decls:18,vars:3,consts:[[1,"ion-no-border"],["color","success"],["slot","start"],["icon","chevron-back-outline","defaultHref","/central/menu/ivt-inicio"],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],["mode","ios","placeholder","Buscar Proveedor"],[1,"divider","light"],[1,"divider"],["class","cen",4,"ngIf"],["class","carga",4,"ngIf"],[4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],["color","success",3,"click"],["name","add-outline"],[1,"cen"],["src","/assets/Proveedores.png","width","100px","alt",""],[1,"tituloGrande"],[1,"carga"],[4,"ngFor","ngForOf"],["slot","start","animated","",2,"width","50px","height","50px"],["animated","",2,"width","50%","height","20px"],["animated","",2,"width","90%","height","20px"],["src","/assets/Proveedores.png"],[1,"verdei"],["class","verdei",4,"ngIf"],[1,"rojoi"],["side","end"],["color","warning",3,"click"],["name","pencil-outline","slot","icon-only"],["color","danger",3,"click"],["name","trash-outline","slot","icon-only"]],template:function(e,o){1&e&&(d.Mb(0,"ion-header",0),d.Mb(1,"ion-toolbar",1),d.Mb(2,"ion-buttons",2),d.Kb(3,"ion-back-button",3),d.Lb(),d.Mb(4,"ion-title"),d.rc(5,"Proveedores"),d.Lb(),d.Lb(),d.Lb(),d.Mb(6,"ion-content"),d.Mb(7,"ion-refresher",4),d.Ub("ionRefresh",function(e){return o.refrescando(e)}),d.Kb(8,"ion-refresher-content",5),d.Lb(),d.Kb(9,"ion-searchbar",6),d.Kb(10,"div",7),d.Kb(11,"div",8),d.qc(12,h,4,0,"div",9),d.qc(13,f,3,2,"div",10),d.qc(14,x,2,1,"ion-list",11),d.Mb(15,"ion-fab",12),d.Mb(16,"ion-fab-button",13),d.Ub("click",function(){return o.modal()}),d.Kb(17,"ion-icon",14),d.Lb(),d.Lb(),d.Lb()),2&e&&(d.zb(12),d.dc("ngIf",0===o.proveedores.length),d.zb(1),d.dc("ngIf",o.load),d.zb(1),d.dc("ngIf",o.proveedores.length>0))},directives:[r.z,r.jb,r.k,r.g,r.h,r.hb,r.t,r.P,r.Q,r.T,r.wb,n.j,r.v,r.w,r.A,r.L,n.i,r.F,r.Y,r.K,r.J,r.f,r.I,r.H],styles:[".cen[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.tituloGrande[_ngcontent-%COMP%]{width:300px;text-align:center}.verdei[_ngcontent-%COMP%]{color:#1e8c4a}ion-item-divider[_ngcontent-%COMP%]{border:0!important;margin-bottom:15px}.rojoi[_ngcontent-%COMP%]{color:#c1302c}.padreflex[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.numero[_ngcontent-%COMP%], .padreflex[_ngcontent-%COMP%]{display:flex;align-items:center}.numero[_ngcontent-%COMP%]{padding-right:10px}ion-item-sliding[_ngcontent-%COMP%]:nth-child(odd)   ion-item[_ngcontent-%COMP%]{--background:var(--ion-color-light)!important}"],data:{animation:[Object(l.l)("salida",[Object(l.k)(":leave",[Object(l.j)({transform:"scale(1)",opacity:1}),Object(l.e)("300ms",Object(l.j)({transform:"scale(0)",opacity:0}))])])]}}),e})()}];let y=(()=>{class e{}return e.\u0275mod=d.Hb({type:e}),e.\u0275inj=d.Gb({factory:function(o){return new(o||e)},imports:[[s.i.forChild(P)],s.i]}),e})();var L=t("5Wwd");let O=(()=>{class e{}return e.\u0275mod=d.Hb({type:e}),e.\u0275inj=d.Gb({factory:function(o){return new(o||e)},imports:[[n.b,i.e,r.kb,y,L.a]]}),e})()}}]);