(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"6V7b":function(t,i,e){"use strict";e.r(i),e.d(i,"PedidoInfoPageModule",function(){return Y});var o=e("ofXK"),a=e("3Pt+"),n=e("TEn/"),r=e("tyNb"),c=e("mrSG"),s=e("HDdC"),d=e("fXoL"),l=e("fsfq"),p=e("fmoy"),b=e("HavB"),h=e("7JkF"),u=e("SpuA");function f(t,i){if(1&t){const t=d.Nb();d.Mb(0,"ion-buttons",8),d.Mb(1,"ion-button",9),d.Ub("click",function(){return d.lc(t),d.Wb().guardar()}),d.Kb(2,"ion-icon",10),d.Lb(),d.Lb()}}function m(t,i){1&t&&(d.Mb(0,"div",11),d.Kb(1,"ion-spinner",12),d.Mb(2,"div"),d.rc(3," Cargando informaci\xf3n del pedido... "),d.Kb(4,"br"),d.Lb(),d.Lb())}function g(t,i){if(1&t){const t=d.Nb();d.Mb(0,"ion-textarea",18),d.Ub("ngModelChange",function(i){return d.lc(t),d.Wb(3).texto=i}),d.Lb()}if(2&t){const t=d.Wb(3);d.dc("ngModel",t.texto)("value",t.texto)}}function M(t,i){if(1&t&&(d.Mb(0,"p"),d.rc(1),d.Lb()),2&t){const t=d.Wb(3);d.zb(1),d.sc(t.texto)}}function v(t,i){if(1&t&&(d.Mb(0,"div",16),d.qc(1,g,1,2,"ion-textarea",17),d.Kb(2,"br"),d.qc(3,M,2,1,"p",7),d.Lb()),2&t){const t=d.Wb(2);d.zb(1),d.dc("ngIf",t.id===t.pedido.taller._id),d.zb(2),d.dc("ngIf",t.id!==t.pedido.taller._id)}}function x(t,i){if(1&t){const t=d.Nb();d.Mb(0,"div",25),d.Mb(1,"ion-item",26),d.Mb(2,"ion-label"),d.rc(3,"Cambiar estado del pedido"),d.Lb(),d.Mb(4,"ion-select",27),d.Ub("ionChange",function(i){return d.lc(t),d.Wb(3).cambiarEstado(i)}),d.Mb(5,"ion-select-option",28),d.rc(6,"Pedido en preparaci\xf3n"),d.Lb(),d.Mb(7,"ion-select-option",29),d.rc(8,"Pedido listo para su entrega"),d.Lb(),d.Mb(9,"ion-select-option",30),d.rc(10,"Pedido en camino"),d.Lb(),d.Mb(11,"ion-select-option",31),d.rc(12,"Pedido entregado"),d.Lb(),d.Lb(),d.Lb(),d.Lb()}}function E(t,i){if(1&t&&(d.Mb(0,"ion-item"),d.Mb(1,"ion-label",33),d.Mb(2,"strong"),d.rc(3),d.Lb(),d.Mb(4,"div"),d.rc(5),d.Xb(6,"cambioUTC"),d.Lb(),d.Lb(),d.Lb()),2&t){const t=i.$implicit;d.Bb("verdee",t.estado.includes("entregado")),d.zb(3),d.sc(t.estado),d.zb(2),d.sc(d.Yb(6,4,t.fecha))}}function k(t,i){if(1&t&&(d.Mb(0,"div"),d.Mb(1,"h3"),d.rc(2,"Estados"),d.Lb(),d.qc(3,E,7,6,"ion-item",32),d.Lb()),2&t){const t=d.Wb(3);d.zb(3),d.dc("ngForOf",t.estados)}}function L(t,i){if(1&t&&(d.Mb(0,"ion-item"),d.Mb(1,"ion-label"),d.Mb(2,"strong"),d.rc(3,"Domiciliario actual: "),d.Lb(),d.Kb(4,"br"),d.rc(5),d.Lb(),d.Lb()),2&t){const t=d.Wb(4);d.zb(5),d.sc(t.mapa.domiciliario.nombrecompleto)}}function O(t,i){if(1&t&&(d.Mb(0,"ion-select-option",38),d.rc(1),d.Lb()),2&t){const t=i.$implicit;d.dc("value",t),d.zb(1),d.sc(t.nombrecompleto)}}function w(t,i){if(1&t){const t=d.Nb();d.Mb(0,"ion-item",26),d.Mb(1,"ion-label"),d.rc(2,"Escoger Domiciliario"),d.Lb(),d.Mb(3,"ion-select",27),d.Ub("ionChange",function(i){return d.lc(t),d.Wb(4).escogerdomiciliario(i)}),d.qc(4,O,2,2,"ion-select-option",37),d.Lb(),d.Lb()}if(2&t){const t=d.Wb(4);d.zb(4),d.dc("ngForOf",t.domicilios)}}function P(t,i){1&t&&(d.Mb(0,"ion-chip",41),d.rc(1,"El usuario a\xfan no ha compartido su ubicaci\xf3n"),d.Lb())}function I(t,i){if(1&t){const t=d.Nb();d.Mb(0,"ion-button",42),d.Ub("click",function(){return d.lc(t),d.Wb(5).entregar()}),d.rc(1,"ENTREGAR PEDIDO"),d.Lb()}}function C(t,i){if(1&t){const t=d.Nb();d.Mb(0,"ion-button",42),d.Ub("click",function(){return d.lc(t),d.Wb(5).entregar2()}),d.rc(1,"RASTREAR PEDIDO"),d.Lb()}}function j(t,i){if(1&t&&(d.Mb(0,"div"),d.qc(1,P,2,0,"ion-chip",39),d.qc(2,I,2,0,"ion-button",40),d.qc(3,C,2,0,"ion-button",40),d.Lb()),2&t){const t=d.Wb(4);d.zb(1),d.dc("ngIf",!t.mapa.ubicacion),d.zb(1),d.dc("ngIf",t.id===t.mapa.domiciliario._id&&t.mapa.ubicacion),d.zb(1),d.dc("ngIf",t.id!==t.mapa.domiciliario._id&&t.mapa.ubicacion)}}function _(t,i){if(1&t){const t=d.Nb();d.Mb(0,"ion-card",20),d.Mb(1,"ion-card-header"),d.Kb(2,"img",34),d.Lb(),d.Mb(3,"ion-card-title"),d.rc(4,"Mapa del Domicilio "),d.Lb(),d.Mb(5,"ion-card-content"),d.Mb(6,"div",25),d.Mb(7,"ion-item",26),d.Mb(8,"ion-label"),d.rc(9,"Habilitar domicilio"),d.Lb(),d.Mb(10,"ion-toggle",35),d.Ub("ionChange",function(i){return d.lc(t),d.Wb(3).habilitar(i)}),d.Lb(),d.Lb(),d.Kb(11,"br"),d.qc(12,L,6,1,"ion-item",7),d.Kb(13,"br"),d.qc(14,w,5,1,"ion-item",36),d.Lb(),d.Kb(15,"br"),d.qc(16,j,4,3,"div",7),d.Lb(),d.Lb()}if(2&t){const t=d.Wb(3);d.zb(10),d.dc("checked",t.habilitado),d.zb(2),d.dc("ngIf",t.mapa&&t.mapa.domiciliario&&""!==t.mapa.domiciliario.nombrecompleto),d.zb(2),d.dc("ngIf",t.mapa&&t.mapa.apagar),d.zb(2),d.dc("ngIf",t.mapa&&t.mapa.domiciliario)}}function y(t,i){1&t&&(d.Mb(0,"ion-chip",41),d.rc(1,"El usuario a\xfan no ha compartido su ubicaci\xf3n"),d.Lb())}function z(t,i){if(1&t){const t=d.Nb();d.Mb(0,"ion-button",44),d.Ub("click",function(){return d.lc(t),d.Wb(4).entregar()}),d.rc(1,"ENTREGAR PEDIDO"),d.Lb()}}function N(t,i){if(1&t&&(d.Mb(0,"ion-card",20),d.Mb(1,"ion-card-header"),d.Kb(2,"img",34),d.Lb(),d.Mb(3,"ion-card-title"),d.rc(4,"Mapa del Domicilio "),d.Lb(),d.Mb(5,"ion-card-content"),d.qc(6,y,2,0,"ion-chip",39),d.qc(7,z,2,0,"ion-button",43),d.Lb(),d.Lb()),2&t){const t=d.Wb(3);d.zb(6),d.dc("ngIf",!t.mapa.ubicacion),d.zb(1),d.dc("ngIf",t.mapa.ubicacion)}}function q(t,i){if(1&t){const t=d.Nb();d.Mb(0,"ion-card",20),d.Mb(1,"ion-card-header"),d.Kb(2,"img",34),d.Lb(),d.Mb(3,"ion-card-title"),d.rc(4,"Mapa del Domicilio "),d.Lb(),d.Mb(5,"ion-card-content"),d.Mb(6,"ion-button",44),d.Ub("click",function(){return d.lc(t),d.Wb(3).entregar2()}),d.rc(7,"RASTREAR PEDIDO"),d.Lb(),d.Lb(),d.Lb()}}function D(t,i){1&t&&(d.Mb(0,"ion-card-subtitle"),d.rc(1,"Comparte tu ubcicaci\xf3n para que el domiciliario lleve tu pedido "),d.Lb())}function $(t,i){1&t&&(d.Mb(0,"ion-card-subtitle"),d.rc(1,"Ya compartiste la ubicaci\xf3n, puedes ingresar para saber por donde viene tu pedido "),d.Lb())}function W(t,i){1&t&&(d.Mb(0,"ion-chip",48),d.rc(1,"Ubicaci\xf3n compartida para el taller"),d.Lb())}function K(t,i){1&t&&(d.Mb(0,"ion-chip",49),d.rc(1,"Espera hasta que el domiciliario comparta su ubicaci\xf3n"),d.Lb())}function T(t,i){1&t&&(d.Mb(0,"ion-chip",41),d.rc(1,"A\xfan no has compartido la ubicaci\xf3n"),d.Lb())}function A(t,i){if(1&t){const t=d.Nb();d.Mb(0,"ion-card",45),d.Ub("click",function(){return d.lc(t),d.Wb(3).navegar()}),d.Mb(1,"ion-card-header"),d.Kb(2,"br"),d.Kb(3,"img",34),d.Lb(),d.Mb(4,"ion-card-title"),d.rc(5,"Mapa del Domicilio "),d.Lb(),d.qc(6,D,2,0,"ion-card-subtitle",7),d.qc(7,$,2,0,"ion-card-subtitle",7),d.Mb(8,"div"),d.qc(9,W,2,0,"ion-chip",46),d.Kb(10,"br"),d.qc(11,K,2,0,"ion-chip",47),d.qc(12,T,2,0,"ion-chip",39),d.Lb(),d.Lb()}if(2&t){const t=d.Wb(3);d.zb(6),d.dc("ngIf",!t.mapa.ubicacion),d.zb(1),d.dc("ngIf",t.mapa.ubicacion),d.zb(2),d.dc("ngIf",t.mapa.ubicacion),d.zb(2),d.dc("ngIf",t.mapa.ubicacion&&!t.mapa.ubicacionactual),d.zb(1),d.dc("ngIf",!t.mapa.ubicacion)}}function U(t,i){if(1&t&&(d.Mb(0,"div",19),d.Mb(1,"ion-card",20),d.Mb(2,"ion-card-header"),d.Kb(3,"img",21),d.Lb(),d.Mb(4,"ion-card-title"),d.rc(5,"Estados del pedido "),d.Lb(),d.Mb(6,"ion-card-content"),d.qc(7,x,13,0,"div",22),d.Kb(8,"br"),d.qc(9,k,4,1,"div",7),d.Lb(),d.Lb(),d.qc(10,_,17,4,"ion-card",23),d.qc(11,N,8,2,"ion-card",23),d.qc(12,q,8,0,"ion-card",23),d.qc(13,A,13,5,"ion-card",24),d.Lb()),2&t){const t=d.Wb(2);d.zb(7),d.dc("ngIf",t.id===t.pedido.taller._id),d.zb(2),d.dc("ngIf",t.estados.length>0),d.zb(1),d.dc("ngIf",t.id===t.pedido.taller._id),d.zb(1),d.dc("ngIf",t.mapa&&t.mapa.domiciliario&&t.id===t.mapa.domiciliario._id&&t.id!==t.pedido.taller._id),d.zb(1),d.dc("ngIf",t.mapa&&t.mapa.domiciliario&&t.id!==t.mapa.domiciliario._id&&t.id!==t.pedido.creador._id&&t.id!==t.pedido.taller._id),d.zb(1),d.dc("ngIf",t.mapa&&t.id===t.pedido.creador._id&&t.mapa.apagar)}}function R(t,i){if(1&t&&(d.Mb(0,"div"),d.Mb(1,"h2",13),d.rc(2,"Descrici\xf3n del pedido"),d.Lb(),d.qc(3,v,4,2,"div",14),d.qc(4,U,14,6,"div",15),d.Lb()),2&t){const t=d.Wb();d.zb(3),d.dc("ngIf",t.pedido),d.zb(1),d.dc("ngIf",t.cargan)}}const J=[{path:"",component:(()=>{class t{constructor(t,i,e,o,a,n,r){this.router=t,this.alert=i,this.almacenamiento=e,this.toast=o,this.apiPedidos=a,this.active=n,this.socket=r,this.configurando=!1,this.cargado=!1,this.id="",this.texto="",this.estados=[],this.habilitado=!1,this.domicilios=[],this.editar=!1,this.cargan=!1,this.frenar=!1,this.escucharNotificacion().subscribe(t=>{"pedido"===t.action&&this.informaci\u00f3nPedido()})}ngOnInit(){}ionViewWillEnter(){this.frenar=!1,this.informaci\u00f3nPedido()}refrescando(t){this.informaci\u00f3nPedido().then(()=>{t.detail.complete()}).catch(()=>{t.detail.complete()})}"informaci\xf3nPedido"(){return Object(c.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&(this.id=t._id,this.apiPedidos.infoPedido(t.token,{id:this.active.snapshot.paramMap.get("id")}).subscribe(t=>{console.log(t),t.exe?t.response.length>0&&(this.pedido=t.response[0],this.domicilios=t.response[0].accesos.filter(t=>t._id!==this.pedido.creador._id),this.texto=t.response[0].descripcion,this.estadosLista(this.pedido),this.estadosMapa(this.pedido)):(this.toast.toastError("No se pudo consultar el pedido, int\xe9ntelo m\xe1s tarde"),this.router.navigate(["/central/menu/"])),this.cargado=!0},t=>{this.toast.toastError("No se pudo consultar el pedido, int\xe9ntelo m\xe1s tarde"),this.router.navigate(["/central/menu/"])}))})}estadosLista(t){return Object(c.a)(this,void 0,void 0,function*(){const i=yield this.almacenamiento.obtenerToken();i&&this.apiPedidos.consultarEstados(i.token,{pedido:t}).subscribe(t=>{t.exe?(console.log(t),this.estados=t.response):this.toast.toastError("No se pudo consultar el pedido, int\xe9ntelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo consultar el pedido, int\xe9ntelo m\xe1s tarde")})})}estadosMapa(t){return Object(c.a)(this,void 0,void 0,function*(){const i=yield this.almacenamiento.obtenerToken();i&&this.apiPedidos.consultarMapa(i.token,{pedido:t}).subscribe(t=>{t.exe?(console.log(t),t.response.length>0&&(this.mapa=t.response[0],this.habilitado=this.mapa.apagar),this.cargan=!0):this.toast.toastError("No se pudo consultar el mapa, int\xe9ntelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo consultar el mapa, int\xe9ntelo m\xe1s tarde")})})}guardar(){return Object(c.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&this.apiPedidos.infoPedidoPut(t.token,{id:this.active.snapshot.paramMap.get("id"),texto:this.texto}).subscribe(t=>{console.log(t),t.exe?(t.response&&(this.texto=t.response.descripcion),this.toast.toastExitoso("Descripci\xf3n actualizada")):(this.toast.toastError("No se pudo guardar la descripci\xf3n del pedido, int\xe9ntelo m\xe1s tarde"),this.router.navigate(["/central/menu/"])),this.cargado=!0},t=>{this.toast.toastError("No se pudo guardar la descripci\xf3n del pedido, int\xe9ntelo m\xe1s tarde"),this.router.navigate(["/central/menu/"])})})}cambiarEstado(t){return Object(c.a)(this,void 0,void 0,function*(){console.log(t);const i=yield this.alert.create({header:"Cambiar Estado",message:"\xbfEstas seguro de cambiar el estado del pedido a:"+t.detail.value,buttons:[{text:"Cancelar",cssClass:"cancelarAlerta",role:"cancel",handler:()=>{}},{text:"Crear",cssClass:"botonalerta",handler:i=>Object(c.a)(this,void 0,void 0,function*(){const i=yield this.almacenamiento.obtenerToken();i&&this.apiPedidos.crearEstados(i.token,{pedido:this.pedido._id,estado:t.detail.value,destino:this.pedido.creador._id,usuarioID:this.pedido.creador.usuarioID}).subscribe(i=>{i.exe?(this.estados.push(i.response),this.toast.Especial("El pedido ha cambiado de estado"),this.socket.emit("estadosPedido",{accesos:this.pedido.accesos,id:this.pedido._id,estado:t.detail.value})):this.toast.toastError("No se pudo cambiar el estado, int\xe9ntelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo cambiar el estado, int\xe9ntelo m\xe1s tarde")})})}]});yield i.present()})}habilitar(t){return Object(c.a)(this,void 0,void 0,function*(){if(console.log(t.detail.checked),this.habilitado=t.detail.checked,this.mapa){const i=yield this.almacenamiento.obtenerToken();i&&(this.editar?this.apiPedidos.editarMapaInfo(i.token,{id:this.mapa._id,destino:this.pedido.creador._id,apagar:t.detail.checked}).subscribe(t=>{t.exe?(this.mapa=t.response,this.toast.toastExitoso("Domicilio editado")):this.toast.toastError("No se pudo editar el domicilio, int\xe9ntelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo editar el domicilio, int\xe9ntelo m\xe1s tarde")}):this.editar=!0)}else{const t=yield this.almacenamiento.obtenerToken();t&&this.apiPedidos.crearMapa(t.token,{pedido:this.pedido._id,destino:this.pedido.creador._id}).subscribe(t=>{t.exe?(this.mapa=t.response,this.habilitado=!0,this.toast.toastExitoso("Domicilio habilitado")):this.toast.toastError("No se pudo crear el domicilio, int\xe9ntelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo crear el domicilio, int\xe9ntelo m\xe1s tarde")})}})}escogerdomiciliario(t){return Object(c.a)(this,void 0,void 0,function*(){console.log(t);const i=yield this.almacenamiento.obtenerToken();i&&this.apiPedidos.editarMapaInfoD(i.token,{id:this.mapa._id,domiciliario:t.detail.value._id}).subscribe(t=>{t.exe?(this.mapa=t.response,this.toast.toastExitoso("Domicilio editado")):this.toast.toastError("No se pudo editar el domicilio, int\xe9ntelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo editar el domicilio, int\xe9ntelo m\xe1s tarde")})})}escucharNotificacion(){if(!this.frenar)return new s.a(t=>{this.socket.on("notificacion",i=>{t.next(i)})})}navegar(){return Object(c.a)(this,void 0,void 0,function*(){const t=yield this.alert.create({header:"Atenci\xf3n!",message:"No olvide encender su GPS, si lo tiene encendido haga caso omiso al mensaje",buttons:[{text:"Cancelar",cssClass:"cancelarAlerta",role:"cancel",handler:()=>{}},{text:"Listo",cssClass:"botonalerta",handler:t=>Object(c.a)(this,void 0,void 0,function*(){this.mapa.ubicacion?this.mapa.ubicacionactual?this.router.navigate(["/central/pedidos/mapa","vivo",this.mapa._id]):this.toast.toastError("A\xfan no se ha confirmado la ubicaci\xf3n del domiciliario"):this.router.navigate(["/central/pedidos/mapa","destino",this.mapa._id])})}]});yield t.present()})}entregar(){return Object(c.a)(this,void 0,void 0,function*(){if(this.mapa.ubicacionactual)this.router.navigate(["/central/pedidos/mapa","entrega",this.mapa._id]);else{const t=yield this.alert.create({header:"Atenci\xf3n!",message:"\xbfYa vas a despachar el pedido?, una vez que aceptes el cliente recibir\xe1 una notificaci\xf3n de que su pedido esta en camino, no olvides encender tu GPS ",buttons:[{text:"Cancelar",cssClass:"cancelarAlerta",role:"cancel"},{text:"Confirmar",cssClass:"botonalerta",handler:()=>{this.socket.emit("entregaPedido",{pedido:this.pedido}),this.router.navigate(["/central/pedidos/mapa","entrega",this.mapa._id])}}]});yield t.present()}})}entregar2(){return Object(c.a)(this,void 0,void 0,function*(){this.mapa.ubicacionactual&&this.router.navigate(["/central/pedidos/mapa","vivo",this.mapa._id])})}ionViewWillLeave(){this.frenar=!0}}return t.\u0275fac=function(i){return new(i||t)(d.Jb(r.g),d.Jb(n.b),d.Jb(l.a),d.Jb(p.a),d.Jb(b.a),d.Jb(r.a),d.Jb(h.a))},t.\u0275cmp=d.Db({type:t,selectors:[["app-pedido-info"]],decls:12,vars:3,consts:[["color","oscuro"],["slot","start","icon","chevron-back-outline","defaultHref","/central/pedidos"],["slot","end",4,"ngIf"],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],["class","flcenter ion-padding",4,"ngIf"],[1,"divider","light"],[4,"ngIf"],["slot","end"],[3,"click"],["name","checkmark-outline","slot","icon-only"],[1,"flcenter","ion-padding"],["name","crescent","color","oscuro"],[1,"titulo"],["class","pedido",4,"ngIf"],["class","opts",4,"ngIf"],[1,"pedido"],["rows","3","placeholder","Escriba la descripci\xf3n del pedido",3,"ngModel","value","ngModelChange",4,"ngIf"],["rows","3","placeholder","Escriba la descripci\xf3n del pedido",3,"ngModel","value","ngModelChange"],[1,"opts"],["mode","ios"],["src","/assets/Estados.png","width","100px"],["class","cambiar",4,"ngIf"],["mode","ios",4,"ngIf"],["mode","ios",3,"click",4,"ngIf"],[1,"cambiar"],["color","light"],["color","light","value","",3,"ionChange"],["value","Pedido en preparaci\xf3n"],["value","Pedido listo para su entrega"],["value","Pedido en camino"],["value","Pedido entregado"],[3,"verdee",4,"ngFor","ngForOf"],[1,"ion-text-wrap"],["src","/assets/MapaDomicilio.png","width","100px"],["mode","ios","slot","end","color","barra",3,"checked","ionChange"],["color","light",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["color","danger",4,"ngIf"],["color","primary","expand","block","mode","ios",3,"click",4,"ngIf"],["color","danger"],["color","primary","expand","block","mode","ios",3,"click"],["mode","ios","color","primary","expand","block",3,"click",4,"ngIf"],["mode","ios","color","primary","expand","block",3,"click"],["mode","ios",3,"click"],["color","barra",4,"ngIf"],["color","warning",4,"ngIf"],["color","barra"],["color","warning"]],template:function(t,i){1&t&&(d.Mb(0,"ion-header"),d.Mb(1,"ion-toolbar",0),d.Kb(2,"ion-back-button",1),d.Mb(3,"ion-title"),d.rc(4,"Mi pedido"),d.Lb(),d.qc(5,f,3,0,"ion-buttons",2),d.Lb(),d.Lb(),d.Mb(6,"ion-content"),d.Mb(7,"ion-refresher",3),d.Ub("ionRefresh",function(t){return i.refrescando(t)}),d.Kb(8,"ion-refresher-content",4),d.Lb(),d.qc(9,m,5,0,"div",5),d.Kb(10,"div",6),d.qc(11,R,5,2,"div",7),d.Lb()),2&t&&(d.zb(5),d.dc("ngIf",i.pedido&&i.id===i.pedido.taller._id),d.zb(4),d.dc("ngIf",!i.cargan),d.zb(2),d.dc("ngIf",i.cargan))},directives:[n.z,n.lb,n.g,n.h,n.jb,o.j,n.t,n.Q,n.R,n.k,n.j,n.A,n.cb,n.hb,n.yb,a.i,a.k,n.l,n.n,n.p,n.m,n.F,n.K,n.X,n.xb,n.Y,o.i,n.kb,n.d,n.r,n.o],pipes:[u.a],styles:[".flcenter[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:20px;text-align:center}.opts[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}.opts[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{width:100%;margin:10px 5px;display:flex;flex-direction:column;align-items:center;transition:all .5s}.opts[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:22px;text-align:center}.opts[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{text-align:center;padding:5px}ion-card-header[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#f1f1ff;position:relative}.titulo[_ngcontent-%COMP%]{width:100%;background-color:#fff3e2;margin:0 0 10px}.titulo[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{padding:10px}p[_ngcontent-%COMP%]{word-wrap:break-word}ion-card-content[_ngcontent-%COMP%]{width:100%;padding:10px}.cambiar[_ngcontent-%COMP%], .cambiar[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{width:100%}.verdee[_ngcontent-%COMP%]{--background:#b7b218!important}ion-card-subtitle[_ngcontent-%COMP%]{text-align:center;padding:10px;margin-top:10px;font-weight:300}@media screen and (min-width:800px){.opts[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{width:calc(50% - 10px)}}"]}),t})()}];let S=(()=>{class t{}return t.\u0275mod=d.Hb({type:t}),t.\u0275inj=d.Gb({factory:function(i){return new(i||t)},imports:[[r.i.forChild(J)],r.i]}),t})();var F=e("iTUp");let Y=(()=>{class t{}return t.\u0275mod=d.Hb({type:t}),t.\u0275inj=d.Gb({factory:function(i){return new(i||t)},imports:[[o.b,a.e,n.mb,S,F.a]]}),t})()},HavB:function(t,i,e){"use strict";e.d(i,"a",function(){return f});var o=e("AytR"),a=e("tk/3"),n=e("coGc"),r=e("lJxs"),c=e("IzEk"),s=e("MtjB"),d=e("JIr8"),l=e("PqYM"),p=e("Cfvw"),b=e("fXoL"),h=e("tyNb"),u=e("B7Rs");let f=(()=>{class t{constructor(t,i,e){this.http=t,this.router=i,this.MmyTransfer=e}hanflerError(t){return t.pipe(Object(n.a)(()=>Object(l.a)(3e3)),Object(r.a)(t=>{if(console.log("Entramos a intentos"),t instanceof ErrorEvent)throw new Error("Error de Red");if(404===t.status)throw new Error(" P\xe1gina no encontrada");if(401===t.status)throw new Error(" No tiene permisos ")}),Object(c.a)(3))}crearPedido(t,i){const e={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/crear/`,i,e).pipe(Object(s.a)(t=>this.hanflerError(t)))}misPedido(t){const i={headers:new a.c({"x-token":t})};return this.http.get(`${o.a}/pedidos/lista/`,i).pipe(Object(s.a)(t=>this.hanflerError(t)))}misChats(t,i){const e={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/chats/lista/`,i,e).pipe(Object(s.a)(t=>this.hanflerError(t)))}misPedidoUsuario(t,i){const e={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/lista/`,i,e).pipe(Object(s.a)(t=>this.hanflerError(t)))}misSalas(t){const i={headers:new a.c({"x-token":t})};return this.http.get(`${o.a}/ticket/salas`,i).pipe(Object(s.a)(t=>this.hanflerError(t)))}mensajes(t,i){const e={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/chat`,i,e).pipe(Object(s.a)(t=>this.hanflerError(t)))}traermensajesNoVistos(t,i){const e={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/chat/vistos`,i,e).pipe(Object(s.a)(t=>this.hanflerError(t)))}marcarvisto(t,i){const e={headers:new a.c({"x-token":t})};return this.http.put(`${o.a}/pedidos/chat/vistos`,i,e).pipe(Object(s.a)(t=>this.hanflerError(t)))}infoPedido(t,i){const e={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/info`,i,e).pipe(Object(s.a)(t=>this.hanflerError(t)))}infoPedidoPut(t,i){const e={headers:new a.c({"x-token":t})};return this.http.put(`${o.a}/pedidos/info`,i,e).pipe(Object(s.a)(t=>this.hanflerError(t)))}crearEstados(t,i){const e={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/estados`,i,e).pipe(Object(s.a)(t=>this.hanflerError(t)))}consultarEstados(t,i){const e={headers:new a.c({"x-token":t})};return this.http.put(`${o.a}/pedidos/estados`,i,e).pipe(Object(s.a)(t=>this.hanflerError(t)))}consultarChat(t,i){const e={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/unico/consultar/chat`,i,e).pipe(Object(s.a)(t=>this.hanflerError(t)))}consultarChatFotos(t,i){const e={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/unico/consultar/chat/fotos`,i,e).pipe(Object(s.a)(t=>this.hanflerError(t)))}consultarSala(t,i){const e={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/consultar/chat`,i,e).pipe(Object(s.a)(t=>this.hanflerError(t)))}consultarMapa(t,i){const e={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/consultar/mapa`,i,e).pipe(Object(s.a)(t=>this.hanflerError(t)))}consultarMapaUnico(t,i){const e={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/consultar/mapa/unico`,i,e).pipe(Object(s.a)(t=>this.hanflerError(t)))}crearMapa(t,i){const e={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/crear/mapa`,i,e).pipe(Object(s.a)(t=>this.hanflerError(t)))}editarMapa(t,i){const e={headers:new a.c({"x-token":t})};return this.http.put(`${o.a}/pedidos/editar/mapa`,i,e).pipe(Object(s.a)(t=>this.hanflerError(t)))}editarMapaInfo(t,i){const e={headers:new a.c({"x-token":t})};return this.http.put(`${o.a}/pedidos/editar/mapa/info`,i,e).pipe(Object(s.a)(t=>this.hanflerError(t)))}editarMapaInfoD(t,i){const e={headers:new a.c({"x-token":t})};return this.http.put(`${o.a}/pedidos/editar/mapa/infod`,i,e).pipe(Object(s.a)(t=>this.hanflerError(t)))}editarPedido(t,i){const e={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/pedidos/editar`,i,e).pipe(Object(s.a)(t=>this.hanflerError(t)))}editarChat(t,i){const e={headers:new a.c({"x-token":t})};return this.http.post(`${o.a}/chat/editar`,i,e).pipe(Object(s.a)(t=>this.hanflerError(t)))}subirArchivosChat(t,i,e,a,n,r,c){console.log("archivo",e);const s={fileKey:"archivo",fileName:r,mimeType:c,httpMethod:"PUT",headers:{"x-token":t,"x-sala":i,"x-final":a,"x-cont":n}},l=this.MmyTransfer.create();return Object(p.a)(l.upload(e,`${o.a}/pedido/upload`,s)).pipe(Object(d.a)(t=>{throw new Error(e)}))}subirweb(t,i,e,n,r){console.log(t,i,e,n);const c={headers:new a.c({"x-token":t,"x-sala":i,"x-final":e.toString(),"x-cont":n.toString()})};return this.http.put(`${o.a}/pedido/upload`,r,c).pipe(Object(s.a)(t=>this.hanflerError(t)))}}return t.\u0275fac=function(i){return new(i||t)(b.Qb(a.a),b.Qb(h.g),b.Qb(u.a))},t.\u0275prov=b.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},SpuA:function(t,i,e){"use strict";e.d(i,"a",function(){return n});var o=e("wd/R"),a=e("fXoL");let n=(()=>{class t{transform(t){console.log(t,"fechin");let i=o.utc(t).toDate();return o(i).format("dddd, DD MMMM YYYY h:mm:a")}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=a.Ib({name:"cambioUTC",type:t,pure:!0}),t})()}}]);