(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{"4stX":function(i,t,o){"use strict";o.r(t),o.d(t,"InterfazGrupoSolicitudesPageModule",function(){return f});var e=o("ofXK"),n=o("3Pt+"),s=o("TEn/"),a=o("tyNb"),r=o("fXoL"),c=o("Gq8O"),l=o("fsfq"),b=o("fmoy"),u=o("cb8P");function p(i,t){if(1&i){const i=r.Nb();r.Mb(0,"ion-item",13),r.Mb(1,"ion-avatar",14),r.Kb(2,"ion-img",15),r.Lb(),r.Mb(3,"ion-label",16),r.Mb(4,"strong",17),r.rc(5),r.Lb(),r.Kb(6,"br"),r.Mb(7,"div"),r.rc(8),r.Lb(),r.Mb(9,"div",18),r.Mb(10,"ion-button",19),r.Ub("click",function(){r.lc(i);const o=t.$implicit,e=t.index;return r.Wb(2).aceptar(o,e)}),r.rc(11,"Aceptar"),r.Lb(),r.Mb(12,"ion-button",20),r.Ub("click",function(){r.lc(i);const o=t.$implicit,e=t.index;return r.Wb(2).eliminar(o,e)}),r.rc(13,"Eliminar"),r.Lb(),r.Lb(),r.Lb(),r.Lb()}if(2&i){const i=t.$implicit;r.zb(2),r.fc("src","https://motocaliapp.com/",i.imagen,""),r.zb(3),r.sc(i.usuarioEmisor.nombrecompleto),r.zb(3),r.tc("@",i.usuarioEmisor.nombreusuario,"")}}function d(i,t){if(1&i&&(r.Mb(0,"ion-list",10),r.qc(1,p,14,3,"ion-item",11),r.Kb(2,"div",12),r.Lb()),2&i){const i=r.Wb();r.zb(1),r.dc("ngForOf",i.seguimientos)}}const m=function(i){return{"hauto centrar":i}},h=[{path:"",component:(()=>{class i{constructor(i,t,o,e,n){this.apiSeguimiento=i,this.almacenamiento=t,this.toastUtilidad=o,this.cargarElementos=e,this.active=n,this.seguimientos=[],this.red="wifi"}ngOnInit(){}ionViewDidEnter(){"none"!==this.red&&this.arrancar()}refrescando(i){this.arrancar(),i.detail.complete()}arrancar(){this.almacenamiento.obtenerToken().then(i=>{this.cancelSuscribe=this.apiSeguimiento.solicitudesRecibidasGrupos(i.token,{id:this.active.snapshot.paramMap.get("grupo")}).subscribe(i=>{this.seguimientos=[];const t=i.response.SeguimientoData;t.length>0&&t.forEach(i=>{i.imagen=i.usuarioEmisor.imagen.length>0?i.usuarioEmisor.imagen[0].path:"",this.seguimientos.push(i)})},i=>{this.toastUtilidad.alertApplication("No se pudo aceptar la solicitud",!1)})})}aceptar(i,t){console.log(i.usuarioEmisor._id),this.almacenamiento.obtenerToken().then(o=>{this.apiSeguimiento.aceptarSolicitudGrupo(o.token,i.usuarioEmisor._id,{grupo:this.active.snapshot.paramMap.get("id"),usuario:this.active.snapshot.paramMap.get("grupo")}).subscribe(i=>{console.log(i," Solicitud aceptada"),this.toastUtilidad.alertApplication("Solicitud aceptada",!0),this.seguimientos.splice(t,1)},i=>{this.toastUtilidad.alertApplication("No se pudo aceptar la solicitud",!1)})})}eliminar(i,t){this.almacenamiento.obtenerToken().then(o=>{this.apiSeguimiento.cancelarSolicitud(o.token,i.usuarioEmisor._id,"0").subscribe(()=>{this.seguimientos.splice(t,1)},i=>{this.toastUtilidad.alertApplication("No se pudo aceptar la solicitud",!1)})})}ionViewDidLeave(){}}return i.\u0275fac=function(t){return new(t||i)(r.Jb(c.a),r.Jb(l.a),r.Jb(b.a),r.Jb(u.a),r.Jb(a.a))},i.\u0275cmp=r.Db({type:i,selectors:[["app-interfaz-grupo-solicitudes"]],decls:16,vars:5,consts:[[1,"ion-no-border"],["color","oscuro"],["slot","start","defaultHref","/interactivo/grupos","icon","chevron-back-outline"],[1,"medium"],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],["color","warning"],[1,"divider","light"],[1,"blanco",3,"ngClass"],["class","blanco ",4,"ngIf"],[1,"blanco"],["color","blanco",4,"ngFor","ngForOf"],[1,"divider"],["color","blanco"],["slot","start",1,"avatar"],[3,"src"],[1,"ion-text-wrap"],[1,"small"],[1,"moto-padre"],["color","barra","shape","round","mode","ios",3,"click"],["color","oscuro","shape","round","mode","ios",3,"click"]],template:function(i,t){1&i&&(r.Mb(0,"ion-header",0),r.Mb(1,"ion-toolbar",1),r.Kb(2,"ion-back-button",2),r.Mb(3,"ion-title",3),r.rc(4,"Solicitudes de Grupos "),r.Lb(),r.Lb(),r.Lb(),r.Mb(5,"ion-content"),r.Mb(6,"ion-refresher",4),r.Ub("ionRefresh",function(i){return t.refrescando(i)}),r.Kb(7,"ion-refresher-content",5),r.Lb(),r.Mb(8,"ion-item-divider",6),r.Mb(9,"ion-label"),r.rc(10,"Solicitudes "),r.Mb(11,"strong"),r.rc(12),r.Lb(),r.Lb(),r.Lb(),r.Kb(13,"div",7),r.Mb(14,"div",8),r.qc(15,d,3,1,"ion-list",9),r.Lb(),r.Lb()),2&i&&(r.zb(12),r.sc(t.seguimientos.length),r.zb(2),r.dc("ngClass",r.hc(3,m,0===t.seguimientos.length)),r.zb(1),r.dc("ngIf",t.seguimientos.length>0))},directives:[s.z,s.kb,s.g,s.h,s.ib,s.t,s.Q,s.R,s.G,s.K,e.h,e.j,s.L,e.i,s.F,s.f,s.B,s.j],styles:[""]}),i})()}];let g=(()=>{class i{}return i.\u0275mod=r.Hb({type:i}),i.\u0275inj=r.Gb({factory:function(t){return new(t||i)},imports:[[a.i.forChild(h)],a.i]}),i})(),f=(()=>{class i{}return i.\u0275mod=r.Hb({type:i}),i.\u0275inj=r.Gb({factory:function(t){return new(t||i)},imports:[[e.b,n.e,s.lb,g]]}),i})()}}]);