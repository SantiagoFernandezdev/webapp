(window.webpackJsonp=window.webpackJsonp||[]).push([[144],{"8+ML":function(o,i,e){"use strict";e.r(i),e.d(i,"RegistroPageModule",function(){return U});var n=e("ofXK"),t=e("3Pt+"),r=e("tyNb"),a=e("TEn/"),c=e("mrSG"),s=e("h7Pn"),l=e("fXoL"),b=e("oQG1"),d=e("fmoy"),u=e("3qam"),h=e("fsfq");let m=(()=>{class o{constructor(o){this.alertCtrl=o}alertBasicApplication(o,i,e){return Object(c.a)(this,void 0,void 0,function*(){const n=yield this.alertCtrl.create({header:o,message:i,buttons:[{role:"cancel",text:"Cancelar"},{text:"Confirmar",handler:()=>{e()}}]});return yield n.present()})}}return o.\u0275fac=function(i){return new(i||o)(l.Qb(a.b))},o.\u0275prov=l.Fb({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var p=e("CkIw");const g=["slide"],M=["content"];function f(o,i){1&o&&(l.Mb(0,"div",49),l.Mb(1,"div",50),l.Kb(2,"ion-spinner",51),l.Mb(3,"p"),l.rc(4,"Validando Usuario..."),l.Lb(),l.Lb(),l.Lb())}function v(o,i){if(1&o){const o=l.Nb();l.Mb(0,"ion-item-sliding"),l.Mb(1,"ion-item",52),l.Mb(2,"ion-input",53),l.Ub("ionChange",function(e){l.lc(o);const n=i.index;return l.Wb(2).cambioVehiculoPlaca(e,n)}),l.Lb(),l.Mb(3,"ion-select",54),l.Ub("ionChange",function(e){l.lc(o);const n=i.index;return l.Wb(2).cambioVehiculo(e,n)}),l.Mb(4,"ion-select-option",55),l.rc(5,"Moto"),l.Lb(),l.Mb(6,"ion-select-option",56),l.rc(7,"Carro"),l.Lb(),l.Lb(),l.Lb(),l.Mb(8,"ion-item-options",57),l.Mb(9,"ion-item-option",58),l.Ub("click",function(){l.lc(o);const e=i.index;return l.Wb(2).eliminarvehiculo(e)}),l.Kb(10,"ion-icon",59),l.Lb(),l.Lb(),l.Lb()}}function L(o,i){if(1&o&&(l.Mb(0,"ion-select-option",60),l.rc(1),l.Lb()),2&o){const o=i.$implicit;l.dc("value",o),l.zb(1),l.sc(o.nombre)}}function C(o,i){1&o&&(l.Mb(0,"ion-item",27),l.Mb(1,"ion-chip",28),l.rc(2,"Requerido"),l.Lb(),l.Lb())}function S(o,i){if(1&o&&(l.Mb(0,"ion-select-option",60),l.rc(1),l.Lb()),2&o){const o=i.$implicit;l.ec("value",o.nombre),l.zb(1),l.sc(o.nombre)}}function w(o,i){if(1&o){const o=l.Nb();l.Mb(0,"ion-item",35),l.Mb(1,"ion-label",22),l.rc(2,"Selecciona la ciudad"),l.Lb(),l.Mb(3,"ion-select",36),l.Ub("ionChange",function(i){return l.lc(o),l.Wb(2).seleccionarCiudad(i)}),l.qc(4,S,2,2,"ion-select-option",37),l.Lb(),l.Lb()}if(2&o){const o=l.Wb(2);l.zb(4),l.dc("ngForOf",o.ciudades)}}function x(o,i){1&o&&(l.Mb(0,"div",49),l.Mb(1,"ion-spinner",51),l.rc(2," Guardando informaci\xf3n"),l.Lb(),l.Lb())}function O(o,i){if(1&o){const o=l.Nb();l.Mb(0,"ion-slides",15,16),l.Mb(2,"ion-slide",17),l.Mb(3,"div",18),l.Mb(4,"ion-grid"),l.Mb(5,"ion-row"),l.Mb(6,"ion-col",19),l.Kb(7,"p",20),l.Mb(8,"ion-item",21),l.Mb(9,"ion-label",22),l.rc(10,"Escriba su nombre completo de Persona o negocio correspondiente"),l.Lb(),l.Lb(),l.Mb(11,"ion-item",23),l.Mb(12,"ion-input",24),l.Ub("ionChange",function(){l.lc(o);const i=l.Wb();return i.changeOne([i.forma.controls.nombreCompleto.errors])}),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Mb(13,"ion-slide",17),l.Mb(14,"div",18),l.Mb(15,"ion-grid"),l.Mb(16,"ion-row"),l.Mb(17,"ion-col",19),l.Mb(18,"ion-item",21),l.Mb(19,"ion-label",22),l.rc(20,"Escriba un nombre de usuario para la aplicaci\xf3n"),l.Lb(),l.Lb(),l.Mb(21,"ion-item",23),l.Mb(22,"ion-input",25),l.Ub("ionChange",function(i){return l.lc(o),l.Wb().comprobarUsuario(i)}),l.Lb(),l.Lb(),l.Lb(),l.Mb(23,"ion-col",19),l.Kb(24,"br"),l.Lb(),l.Mb(25,"ion-col",19),l.Kb(26,"br"),l.qc(27,f,5,0,"div",26),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Mb(28,"ion-slide",17),l.Mb(29,"div",18),l.Mb(30,"ion-grid"),l.Mb(31,"ion-row"),l.Mb(32,"ion-col",19),l.Mb(33,"ion-item",27),l.Mb(34,"ion-chip",28),l.rc(35,"Requerido"),l.Lb(),l.Lb(),l.Mb(36,"ion-item",29),l.Mb(37,"ion-label",22),l.rc(38,"A\xf1adir Veh\xedculo"),l.Lb(),l.Mb(39,"ion-buttons",12),l.Mb(40,"ion-button",30),l.Ub("click",function(){return l.lc(o),l.Wb().agregarvehiculo()}),l.Kb(41,"ion-icon",31),l.Lb(),l.Lb(),l.Lb(),l.qc(42,v,11,0,"ion-item-sliding",32),l.Mb(43,"ion-item",27),l.Mb(44,"ion-chip",28),l.rc(45,"Requerido"),l.Lb(),l.Lb(),l.Mb(46,"ion-item",21),l.Mb(47,"ion-label",22),l.rc(48,"Escriba su correo electr\xf3nico (obligatorio)"),l.Lb(),l.Lb(),l.Mb(49,"ion-item",23),l.Mb(50,"ion-input",33),l.Ub("ionChange",function(i){return l.lc(o),l.Wb().correom(i)}),l.Lb(),l.Lb(),l.Mb(51,"ion-item",21),l.Mb(52,"ion-label",22),l.rc(53,"Escriba su tel\xe9fono celular (opcional)"),l.Lb(),l.Lb(),l.Mb(54,"ion-item",23),l.Mb(55,"ion-input",34),l.Ub("ionChange",function(){l.lc(o);const i=l.Wb();return i.changeOne([i.forma.controls.correo.errors,i.forma.controls.tel.errors])}),l.Lb(),l.Lb(),l.Mb(56,"ion-item",27),l.Mb(57,"ion-chip",28),l.rc(58,"Requerido"),l.Lb(),l.Lb(),l.Mb(59,"ion-item",35),l.Mb(60,"ion-label",22),l.rc(61,"Selecciona el Pa\xeds"),l.Lb(),l.Mb(62,"ion-select",36),l.Ub("ionChange",function(i){return l.lc(o),l.Wb().listarCiudades(i)}),l.qc(63,L,2,2,"ion-select-option",37),l.Lb(),l.Lb(),l.rc(64,"\xb4 "),l.qc(65,C,3,0,"ion-item",38),l.qc(66,w,5,1,"ion-item",39),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Mb(67,"ion-slide",17),l.Mb(68,"div",18),l.Mb(69,"ion-grid"),l.Mb(70,"ion-row"),l.Mb(71,"ion-col",19),l.Mb(72,"ion-item",40),l.Mb(73,"ion-label",22),l.rc(74,"Contrase\xf1a de m\xednimo 8 caracteres"),l.Lb(),l.Lb(),l.Mb(75,"ion-item",40),l.Mb(76,"ion-label",22),l.rc(77,"Mostrar clave"),l.Lb(),l.Mb(78,"ion-toggle",41),l.Ub("ionChange",function(i){return l.lc(o),l.Wb().cambiocl(i)}),l.Lb(),l.Lb(),l.Mb(79,"ion-item",21),l.Mb(80,"ion-label",22),l.rc(81,"Escriba su contrase\xf1a"),l.Lb(),l.Lb(),l.Mb(82,"ion-item",23),l.Mb(83,"ion-input",42),l.Ub("ionChange",function(){l.lc(o);const i=l.Wb();return i.changeOne([i.forma.controls.clave.errors,i.forma.controls.confirmarClave.errors])}),l.Lb(),l.Lb(),l.Lb(),l.Mb(84,"ion-col",19),l.Mb(85,"ion-item",21),l.Mb(86,"ion-label",22),l.rc(87,"Confirmar la contrase\xf1a"),l.Lb(),l.Lb(),l.Mb(88,"ion-item",23),l.Mb(89,"ion-input",43),l.Ub("ionChange",function(){l.lc(o);const i=l.Wb();return i.changeOne([i.forma.controls.clave.errors,i.forma.controls.confirmarClave.errors])}),l.Lb(),l.Lb(),l.Mb(90,"h4",44),l.rc(91,"Clave Privada"),l.Lb(),l.Kb(92,"br"),l.Kb(93,"br"),l.Lb(),l.Mb(94,"ion-col",19),l.Mb(95,"ion-item",45),l.Ub("click",function(){return l.lc(o),l.Wb().politicas()}),l.Mb(96,"ion-label",46),l.rc(97,"Leer pol\xedticas de datos"),l.Lb(),l.Lb(),l.Mb(98,"ion-item",47),l.Mb(99,"ion-checkbox",48),l.Ub("ionChange",function(i){return l.lc(o),l.Wb().aceptar(i)}),l.Lb(),l.Mb(100,"ion-label",22),l.rc(101,"Acepto pol\xedticas de datos"),l.Lb(),l.Lb(),l.Kb(102,"br"),l.Kb(103,"br"),l.Lb(),l.Mb(104,"ion-col",19),l.Kb(105,"br"),l.qc(106,x,3,0,"div",26),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb()}if(2&o){const o=l.Wb();l.zb(27),l.dc("ngIf",!o.usuarioValido),l.zb(15),l.dc("ngForOf",o.vehiculos),l.zb(21),l.dc("ngForOf",o.paises),l.zb(2),l.dc("ngIf",o.ciudad),l.zb(1),l.dc("ngIf",o.ciudad),l.zb(17),l.dc("type",o.tipocl),l.zb(6),l.dc("type",o.tipocl),l.zb(17),l.dc("ngIf",!o.usuarioValido)}}let y=(()=>{class o{constructor(o,i,e,n,r,a,c,s,l,b){this.usuarioService=o,this.toastService=i,this.router=e,this.navCtrl=n,this.registroService=r,this.almacenamiento=a,this.platform=c,this.alertService=s,this.OSSignal=l,this.modal=b,this.tipocl="password",this.usuarioValido=!0,this.colorStatus="blanco",this.mensaje="Ingresa su nombre completo",this.usuarioID="",this.paises=[],this.ciudades=[],this.ciudad=!1,this.load=!1,this.correo="",this.pais="",this.miciudad="",this.placa="",this.index=0,this.acepto=!1,this.vehiculos=[],this.forma=new t.c({nombreCompleto:new t.a("",[t.m.required,t.m.minLength(10)]),nombreUsuario:new t.a("",[t.m.required,t.m.minLength(5)]),clave:new t.a("",[t.m.required,t.m.minLength(8)]),confirmarClave:new t.a,tel:new t.a("",[t.m.required])}),this.forma.controls.confirmarClave.setValidators([t.m.required,t.m.minLength(8),this.compareClaves.bind(this.forma)]),this.OSSignal.$usuarioID.subscribe(o=>{this.usuarioID=o})}ngOnInit(){}ionViewWillEnter(){this.colorStatus="blanco",this.mensaje="Ingresa su nombre completo",this.paises=[],this.ciudades=[],this.vehiculos=[],this.ciudad=!1,this.load=!1,this.correo="",this.pais="",this.miciudad="",this.placa="",this.index=0,this.probar(),this.listarPaises()}cambiocl(o){console.log(o),this.tipocl=o.detail.checked?"text":"password"}listarPaises(){this.usuarioService.listarPaises().subscribe(o=>{o.exe?this.paises=o.response:this.paises.push("Colombia")},o=>{this.paises.push("Colombia")})}correom(o){this.correo=o.detail.value}placam(o){this.placa=o.detail.value}agregarvehiculo(){this.vehiculos.push({placa:"",tipo:"Moto",nombre:"",modelo:"",marca:""}),this.changeOne2()}eliminarvehiculo(o){this.vehiculos.splice(o,1),this.changeOne2()}cambioVehiculoPlaca(o,i){this.vehiculos[i].placa=o.detail.value,this.changeOne2()}cambioVehiculo(o,i){this.vehiculos[i].tipo=o.detail.value,this.changeOne2()}listarCiudades(o){this.ciudad=!0,this.pais=o.detail.value.nombre,this.miciudad="",this.usuarioService.listarCiudades(o.detail.value._id).subscribe(o=>{o.exe?(this.ciudades=o.response,this.changeOne2()):this.toastService.toastError("No se pudo traer las ciudades, intente registrarse m\xe1s tarde")},o=>{this.toastService.toastError("No se pudo traer las ciudades, intente registrarse m\xe1s tarde")})}seleccionarCiudad(o){this.miciudad=o.detail.value,this.changeOne2()}probar(){return Object(c.a)(this,void 0,void 0,function*(){this.load=!0,(yield this.almacenamiento.obtenerToken())&&this.Slide.lockSwipes(!0).then(()=>{})})}changeOne2(){return Object(c.a)(this,void 0,void 0,function*(){this.colorStatus=1===this.index&&""!==this.pais&&""!==this.miciudad&&this.vehiculos.length>0&&0===this.vehiculos.filter(o=>""===o.tipo||""===o.placa).length&&""!==this.correo||1!==this.index?"success":"blanco"})}changeOne(o){return Object(c.a)(this,void 0,void 0,function*(){o.filter(o=>null===o).length===o.length?1===this.index&&""!==this.pais&&""!==this.miciudad||(this.colorStatus=1!==this.index?"success":"blanco"):this.colorStatus="blanco"})}retroceso(){this.alertService.alertBasicApplication("Mensaje","\xbfEstas seguro de que deseas cancelar el registro?",()=>{this.registroService.cambioEstado(!0),this.navCtrl.navigateBack("/home")})}compareClaves(o){return o.value!==this.controls.clave.value?{compare:!0}:null}guardarCambios(){const o=this.forma.value;o.usuarioID=""===this.usuarioID?"hola":this.usuarioID,o.pais=this.pais,o.ciudad=this.miciudad,o.vehiculos=this.vehiculos,o.correo=this.correo,o.acepto=this.acepto,this.acepto?(this.usuarioValido=!1,this.usuarioService.registrar(o).subscribe(o=>{this.usuarioValido=!0,delete o.clave,o.clave=this.forma.controls.clave.value,o.usuarioID="hola",this.almacenamiento.guardarUsuario(o).then(()=>{this.toastService.alertApplication("Usuario registrado corectamente",!0),this.registroService.cambioEstado(!0),this.almacenamiento.cambiarEstado(!1),this.navCtrl.navigateForward(["/central"])},o=>{this.usuarioValido=!0,this.toastService.alertApplication(o,!1)})},o=>{this.toastService.alertApplication(o,!1),this.usuarioValido=!0},()=>{})):this.toastService.toastError("Debe aceptar las pol\xedticas de la aplicaci\xf3n")}comprobarUsuario(o){this.forma.controls.nombreUsuario.errors?this.colorStatus="blanco":(this.usuarioValido=!1,this.usuarioService.usuario(o.detail.value).subscribe(o=>Object(c.a)(this,void 0,void 0,function*(){o.exe?(this.usuarioValido=!0,this.colorStatus="blanco",this.mensaje="El usuario ya existe, por favor escoge otro nombre"):(this.colorStatus="success",this.usuarioValido=!0,this.mensaje="El nombre de usuario esta disponible")}),o=>Object(c.a)(this,void 0,void 0,function*(){yield this.toastService.alertApplication(o,!1),this.usuarioValido=!0}),()=>{}))}next(){return Object(c.a)(this,void 0,void 0,function*(){"success"===this.colorStatus&&(yield this.Content.scrollToTop(100),this.Slide.getActiveIndex().then(o=>{this.index=o,3!==o?(0===o?this.mensaje="Escge un nombre de usuario personalizado":1===o?this.mensaje="Ingresa un correo y n\xfamero celular v\xe1lido al cual se contacten contigo":2===o&&(this.mensaje="T\xfa contrase\xf1a debe tener almenos 8 caracteres"),this.avanzar()):this.guardarCambios()}))})}avanzar(){return Object(c.a)(this,void 0,void 0,function*(){this.colorStatus="blanco",this.registroService.cambioEstado(!1),yield this.Slide.lockSwipes(!1),yield this.Slide.lockSwipeToPrev(!0),yield this.Slide.slideNext(300),yield this.Slide.lockSwipeToNext(!0)})}politicas(){return Object(c.a)(this,void 0,void 0,function*(){const o=yield this.modal.create({component:s.a});yield o.present()})}aceptar(o){this.acepto=o.detail.checked}ioniewDidLeave(){this.Slide.lockSwipes(!0).then(()=>{})}}return o.\u0275fac=function(i){return new(i||o)(l.Jb(b.a),l.Jb(d.a),l.Jb(r.g),l.Jb(a.qb),l.Jb(u.a),l.Jb(h.a),l.Jb(a.sb),l.Jb(m),l.Jb(p.a),l.Jb(a.pb))},o.\u0275cmp=l.Db({type:o,selectors:[["app-registro"]],viewQuery:function(o,i){if(1&o&&(l.vc(g,1),l.vc(M,1)),2&o){let o;l.kc(o=l.Vb())&&(i.Slide=o.first),l.kc(o=l.Vb())&&(i.Content=o.first)}},decls:19,vars:3,consts:[["color","",1,"ion-no-border"],["color","oscuro"],["slot","start"],["fill","clear",1,"cancelar",3,"click"],["name","arrow-back-outline","slot","icon-only"],["color","blanco"],["content",""],[1,"contenedor"],[3,"formGroup","ngSubmit"],["class","slide-full",4,"ngIf"],["mode","md"],[3,"color","click"],["slot","end"],["fill","clear"],["name","arrow-round-forward","slot","icon-only"],[1,"slide-full"],["slide",""],[1,"slide"],[1,"content",2,"width","100%"],["size","12"],[1,"ion-margin-top"],["lines","none","mode","md",1,"ion-margin-top"],[1,"ion-text-wrap"],["lines","none","mode","ios",1,"campo","ion-margin-top"],["placeholder","Nombre Completo","type","text","formControlName","nombreCompleto",3,"ionChange"],["placeholder","Moto_28","type","text","formControlName","nombreUsuario",3,"ionChange"],["class","contenido",4,"ngIf"],["lines","none","mode","md",1,"ion-margin-top","sinfondo"],["color","danger"],["lines","none","color","light","mode","md",1,"ion-margin-top"],["color","barra",3,"click"],["name","add","slot","icon-only"],[4,"ngFor","ngForOf"],["placeholder","Correo Electr\xf3nico","type","email",3,"ionChange"],["placeholder","N\xfamero de Celular","type","tel","formControlName","tel",3,"ionChange"],["lines","none","mode","md",1,""],["okText","Aceptar","cancelText","Cancelar",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],["lines","none","class"," ion-margin-top sinfondo","mode","md",4,"ngIf"],["lines","none","class"," ","mode","md",4,"ngIf"],["lines","none","mode","md","color","light",1,"ion-margin-top"],["slot","end","mode","ios","color","primary",3,"ionChange"],["formControlName","clave",3,"type","ionChange"],["formControlName","confirmarClave",3,"type","ionChange"],[1,"ion-text-center","ion-margin-top","opacity"],["color","light","lines","none","mode","md",1,"noborder","ion-margin-top",3,"click"],[1,"ion-text-wrap","azul"],["lines","none","color","light","mode","md",1,"noborder","ion-margin-top"],["color","barra","slot","start",3,"ionChange"],[1,"contenido"],[1,"load"],["color","primary","name","crescent"],["lines","none","mode","ios",1,"sinfondo","sep"],["placeholder","N\xfamero de Placa","type","text",3,"ionChange"],["value","Moto","placeholder","Tipo",3,"ionChange"],["value","Moto"],["value","Carro"],["side","end"],["color","danger",3,"click"],["name","trash","slot","icon-only"],[3,"value"]],template:function(o,i){1&o&&(l.Mb(0,"ion-header",0),l.Mb(1,"ion-toolbar",1),l.Mb(2,"ion-buttons",2),l.Mb(3,"ion-button",3),l.Ub("click",function(){return i.retroceso()}),l.Kb(4,"ion-icon",4),l.Lb(),l.Lb(),l.Mb(5,"ion-title"),l.rc(6,"Crear cuenta"),l.Lb(),l.Lb(),l.Lb(),l.Mb(7,"ion-content",5,6),l.Mb(9,"div",7),l.Mb(10,"form",8),l.Ub("ngSubmit",function(){return i.guardarCambios()}),l.qc(11,O,107,8,"ion-slides",9),l.Lb(),l.Lb(),l.Lb(),l.Mb(12,"ion-footer",10),l.Mb(13,"ion-toolbar",11),l.Ub("click",function(){return i.next()}),l.Mb(14,"ion-title",2),l.rc(15,"Continuar"),l.Lb(),l.Mb(16,"ion-buttons",12),l.Mb(17,"ion-button",13),l.Kb(18,"ion-icon",14),l.Lb(),l.Lb(),l.Lb(),l.Lb()),2&o&&(l.zb(10),l.dc("formGroup",i.forma),l.zb(1),l.dc("ngIf",i.load),l.zb(2),l.dc("color",i.colorStatus))},directives:[a.z,a.kb,a.k,a.j,a.A,a.ib,a.t,t.n,t.j,t.d,n.j,a.x,a.bb,a.ab,a.y,a.T,a.s,a.F,a.K,a.E,a.xb,t.i,t.b,a.r,n.i,a.X,a.wb,a.jb,a.d,a.q,a.cb,a.J,a.Y,a.I,a.H],styles:[".contenedor[_ngcontent-%COMP%]{width:auto;max-width:600px;margin:auto}.cancelar[_ngcontent-%COMP%]{display:flex;align-items:center}ion-item[_ngcontent-%COMP%]{width:100%!important}.campo[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.3)}.contenido[_ngcontent-%COMP%]   .load[_ngcontent-%COMP%]{width:100%;justify-content:center}.contenido[_ngcontent-%COMP%], .contenido[_ngcontent-%COMP%]   .load[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.contenido[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;width:80%;opacity:.7}.message[_ngcontent-%COMP%]{background:#ffeec0}.sizeM[_ngcontent-%COMP%]{font-size:14px}.sep[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.1);margin-bottom:5px}"]}),o})();var k=e("zon2");const P=[{path:"",component:y}];let U=(()=>{class o{}return o.\u0275mod=l.Hb({type:o}),o.\u0275inj=l.Gb({factory:function(i){return new(i||o)},imports:[[n.b,t.e,t.l,a.lb,r.i.forChild(P),k.a]]}),o})()}}]);