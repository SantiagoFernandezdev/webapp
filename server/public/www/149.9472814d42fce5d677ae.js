(window.webpackJsonp=window.webpackJsonp||[]).push([[149],{PlGv:function(e,o,t){"use strict";t.r(o),t.d(o,"IVTProveedoresPageModule",function(){return y});var n=t("ofXK"),i=t("3Pt+"),r=t("TEn/"),s=t("tyNb"),c=t("mrSG"),a=t("SQQW"),l=t("R0Ic"),d=t("fXoL"),b=t("fsfq"),p=t("5yQV"),m=t("fmoy");function v(e,o){1&e&&(d.Ob(0,"div",15),d.Mb(1,"img",16),d.Ob(2,"h3",17),d.wc(3,"No tiene proveedores registrados"),d.Nb(),d.Nb())}function f(e,o){1&e&&(d.Ob(0,"ion-item"),d.Mb(1,"ion-skeleton-text",20),d.Ob(2,"ion-label"),d.Mb(3,"ion-skeleton-text",21),d.Mb(4,"ion-skeleton-text",22),d.Nb(),d.Nb())}const h=function(){return[1,1,1,1,1]};function u(e,o){1&e&&(d.Ob(0,"div",18),d.Ob(1,"ion-list"),d.vc(2,f,5,0,"ion-item",19),d.Nb(),d.Nb()),2&e&&(d.Ab(2),d.fc("ngForOf",d.kc(1,h)))}function g(e,o){if(1&e&&(d.Ob(0,"strong",24),d.wc(1),d.Nb()),2&e){const e=d.Yb().$implicit;d.Ab(1),d.yc(" - ",e.telefono2," ")}}function O(e,o){if(1&e){const e=d.Pb();d.Ob(0,"ion-item-sliding"),d.Ob(1,"ion-item"),d.Ob(2,"ion-avatar",2),d.Mb(3,"img",23),d.Nb(),d.Ob(4,"ion-label"),d.wc(5),d.Mb(6,"br"),d.Ob(7,"strong",24),d.wc(8),d.Nb(),d.vc(9,g,2,1,"strong",25),d.Mb(10,"br"),d.Ob(11,"div",26),d.wc(12),d.Nb(),d.Nb(),d.Nb(),d.Ob(13,"ion-item-options",27),d.Ob(14,"ion-item-option",28),d.Wb("click",function(){d.pc(e);const t=o.$implicit,n=o.index;return d.Yb(2).editar(t,n)}),d.Mb(15,"ion-icon",29),d.Nb(),d.Ob(16,"ion-item-option",30),d.Wb("click",function(){d.pc(e);const t=o.$implicit,n=o.index;return d.Yb(2).eliminar(t,n)}),d.Mb(17,"ion-icon",31),d.Nb(),d.Nb(),d.Nb()}if(2&e){const e=o.$implicit;d.fc("@salida",void 0),d.Ab(5),d.yc(" ",e.nombre," "),d.Ab(3),d.yc("",e.telefono," "),d.Ab(1),d.fc("ngIf",""!==e.telefono2),d.Ab(3),d.xc(e.correo)}}function x(e,o){if(1&e&&(d.Ob(0,"ion-list"),d.vc(1,O,18,5,"ion-item-sliding",19),d.Nb()),2&e){const e=d.Yb();d.Ab(1),d.fc("ngForOf",e.proveedores)}}const N=[{path:"",component:(()=>{class e{constructor(e,o,t,n,i,r){this.modalCtrl=e,this.almacenamiento=o,this.ivtApi=t,this.toast=n,this.alertCtrl=i,this.activeRoute=r,this.proveedores=[],this.load=!1}ngOnInit(){}ionViewWillEnter(){this.cargarProveedores()}refrescando(e){this.cargarProveedores().then(()=>{e.target.complete()}).catch(()=>e.target.complete())}cargarProveedores(){return Object(c.a)(this,void 0,void 0,function*(){const e=yield this.almacenamiento.obtenerToken();e&&this.ivtApi.leerProveedor(e.token,this.activeRoute.snapshot.paramMap.get("id")).subscribe(e=>{e.exe?this.proveedores=e.response:this.toast.toastError("No se pudo cargar los datos, intentelo m\xe1s tarde")},e=>{this.toast.toastError("No se pudo cargar los datos, intentelo m\xe1s tarde")})})}modal(){return Object(c.a)(this,void 0,void 0,function*(){const e=yield this.modalCtrl.create({component:a.a,componentProps:{tipo:"proveedores",inventario:this.activeRoute.snapshot.paramMap.get("id")}});yield e.present();const o=yield e.onWillDismiss();o.data&&o.data.exe&&this.cargarProveedores()})}editar(e,o){return Object(c.a)(this,void 0,void 0,function*(){const t=yield this.alertCtrl.create({header:"Editar Proveedor",inputs:[{type:"text",name:"nombre",placeholder:"Escriba el nombre del proveedor",value:e.nombre},{type:"number",name:"tel1",placeholder:"Tel\xe9fono de contacto",value:e.telefono},{type:"number",name:"tel2",placeholder:"Tel\xe9fono de contacto adicional",value:e.telefono2},{type:"text",name:"correo",placeholder:"Correo electr\xf3nico de contacto",value:e.correo}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Aceptar",handler:t=>Object(c.a)(this,void 0,void 0,function*(){const n=yield this.almacenamiento.obtenerToken();n&&this.ivtApi.editarProveedor(n.token,{nombre:t.nombre,tel1:t.tel1,tel2:t.tel2,correo:t.correo,_id:e._id}).subscribe(e=>{e.exe?(this.toast.toastExitoso("Proveedor editado!"),this.proveedores[o].nombre=e.response.nombre,this.proveedores[o].telefono=e.response.telefono,this.proveedores[o].telefono2=e.response.telefono2,this.proveedores[o].correo=e.response.correo):this.toast.toastError("No se pudo editar el proveedor, intentelo m\xe1s tarde")},e=>{this.toast.toastError("No se pudo editar el proveedor, intentelo m\xe1s tarde")})})}]});yield t.present()})}eliminar(e,o){return Object(c.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&this.ivtApi.eliminarProveedor(t.token,e._id).subscribe(e=>{e.exe?(this.toast.toastExitoso("Proveedor eliminado!"),this.proveedores.splice(o,1)):this.toast.toastError("No se pudo eliminar el proveedor, intentelo m\xe1s tarde")},e=>{this.toast.toastError("No se pudo eliminar el proveedor, intentelo m\xe1s tarde")})})}}return e.\u0275fac=function(o){return new(o||e)(d.Lb(r.qb),d.Lb(b.a),d.Lb(p.a),d.Lb(m.a),d.Lb(r.b),d.Lb(s.a))},e.\u0275cmp=d.Fb({type:e,selectors:[["app-ivtproveedores"]],decls:18,vars:3,consts:[[1,"ion-no-border"],["color","oscuro"],["slot","start"],["icon","chevron-back-outline","defaultHref","/central/menu/ivt-inicio"],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],["mode","ios","placeholder","Buscar Proveedor"],[1,"divider","light"],[1,"divider"],["class","cen",4,"ngIf"],["class","carga",4,"ngIf"],[4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],["color","oscuro",3,"click"],["name","add-outline"],[1,"cen"],["src","/assets/Proveedores.png","width","100px","alt",""],[1,"tituloGrande"],[1,"carga"],[4,"ngFor","ngForOf"],["slot","start","animated","",2,"width","50px","height","50px"],["animated","",2,"width","50%","height","20px"],["animated","",2,"width","90%","height","20px"],["src","/assets/Proveedores.png"],[1,"verdei"],["class","verdei",4,"ngIf"],[1,"rojoi"],["side","end"],["color","warning",3,"click"],["name","pencil-outline","slot","icon-only"],["color","danger",3,"click"],["name","trash-outline","slot","icon-only"]],template:function(e,o){1&e&&(d.Ob(0,"ion-header",0),d.Ob(1,"ion-toolbar",1),d.Ob(2,"ion-buttons",2),d.Mb(3,"ion-back-button",3),d.Nb(),d.Ob(4,"ion-title"),d.wc(5,"Proveedores"),d.Nb(),d.Nb(),d.Nb(),d.Ob(6,"ion-content"),d.Ob(7,"ion-refresher",4),d.Wb("ionRefresh",function(e){return o.refrescando(e)}),d.Mb(8,"ion-refresher-content",5),d.Nb(),d.Mb(9,"ion-searchbar",6),d.Mb(10,"div",7),d.Mb(11,"div",8),d.vc(12,v,4,0,"div",9),d.vc(13,u,3,2,"div",10),d.vc(14,x,2,1,"ion-list",11),d.Ob(15,"ion-fab",12),d.Ob(16,"ion-fab-button",13),d.Wb("click",function(){return o.modal()}),d.Mb(17,"ion-icon",14),d.Nb(),d.Nb(),d.Nb()),2&e&&(d.Ab(12),d.fc("ngIf",0===o.proveedores.length),d.Ab(1),d.fc("ngIf",o.load),d.Ab(1),d.fc("ngIf",o.proveedores.length>0))},directives:[r.z,r.lb,r.k,r.g,r.h,r.jb,r.t,r.Q,r.R,r.U,r.yb,n.j,r.v,r.w,r.A,r.L,n.i,r.F,r.Z,r.K,r.J,r.f,r.I,r.H],styles:[".cen[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.tituloGrande[_ngcontent-%COMP%]{width:300px;text-align:center}.verdei[_ngcontent-%COMP%]{color:#1e8c4a}ion-item-divider[_ngcontent-%COMP%]{border:0!important;margin-bottom:15px}.rojoi[_ngcontent-%COMP%]{color:#c1302c}.padreflex[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.numero[_ngcontent-%COMP%], .padreflex[_ngcontent-%COMP%]{display:flex;align-items:center}.numero[_ngcontent-%COMP%]{padding-right:10px}ion-item-sliding[_ngcontent-%COMP%]:nth-child(odd)   ion-item[_ngcontent-%COMP%]{--background:var(--ion-color-light)!important}"],data:{animation:[Object(l.m)("salida",[Object(l.l)(":leave",[Object(l.k)({transform:"scale(1)",opacity:1}),Object(l.e)("300ms",Object(l.k)({transform:"scale(0)",opacity:0}))])])]}}),e})()}];let M=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=d.Jb({type:e}),e.\u0275inj=d.Ib({imports:[[s.j.forChild(N)],s.j]}),e})();var P=t("5Wwd");let y=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=d.Jb({type:e}),e.\u0275inj=d.Ib({imports:[[n.b,i.e,r.mb,M,P.a]]}),e})()}}]);