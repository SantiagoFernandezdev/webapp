(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{"4YEd":function(t,e,r){"use strict";r.r(e),r.d(e,"IvtMovimientosPageModule",function(){return j});var n=r("ofXK"),o=r("3Pt+"),i=r("TEn/"),a=r("tyNb"),s=r("mrSG"),c=r("fXoL"),h=r("fsfq"),p=r("5yQV"),d=r("fmoy");let l=(()=>{class t{transform(t){let e="";return(t=t.toLowerCase()).includes("entrada")?e="/assets/Entradas.png":t.includes("salida")&&(e="/assets/Salidas.png"),e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=c.Kb({name:"ImagenSelect",type:t,pure:!0}),t})();var u=r("SpuA");const b=["inifinito"];function f(t,e){1&t&&(c.Ob(0,"h3",6),c.wc(1,"No hay movimientos en el inventario"),c.Nb())}function v(t,e){if(1&t&&(c.Ob(0,"ion-item",9),c.Ob(1,"ion-avatar",10),c.Mb(2,"ion-img",11),c.Zb(3,"ImagenSelect"),c.Nb(),c.Ob(4,"ion-label",12),c.Ob(5,"div"),c.wc(6),c.Nb(),c.Mb(7,"br"),c.Ob(8,"div",13),c.Ob(9,"strong",14),c.wc(10),c.Zb(11,"cambioUTC"),c.Nb(),c.Nb(),c.Nb(),c.Nb()),2&t){const t=e.$implicit;c.Ab(2),c.gc("src",c.ac(3,3,t.mensaje)),c.Ab(4),c.xc(t.mensaje),c.Ab(4),c.xc(c.ac(11,5,t.fecha))}}function m(t,e){if(1&t&&(c.Ob(0,"ion-list",7),c.vc(1,v,12,7,"ion-item",8),c.Nb()),2&t){const t=c.Yb();c.Ab(1),c.fc("ngForOf",t.movimientos)}}function w(t,e){if(1&t){const t=c.Pb();c.Ob(0,"ion-infinite-scroll",15,16),c.Wb("ionInfinite",function(e){return c.pc(t),c.Yb().loadData(e)}),c.Mb(2,"ion-infinite-scroll-content",17),c.Nb()}}const E=[{path:"",component:(()=>{class t{constructor(t,e,r,n,o){this.almacenamiento=t,this.ivtApi=e,this.toastCtrl=r,this.router=n,this.activeRoute=o,this.movimientos=[],this.desde=0,this.carga=!1}ngOnInit(){}ionViewWillEnter(){this.inicio()}inicio(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&this.ivtApi.leerMovmientos(t.token,{desde:this.desde,id:this.activeRoute.snapshot.paramMap.get("id")}).subscribe(t=>{t.exe?(this.movimientos=t.response,this.carga=!0):this.toastCtrl.alertApplication("No se pudo traer los movimientos, intentelo m\xe1s tarde",!1)},t=>{this.toastCtrl.alertApplication("No se pudo traer los movimientos, intentelo m\xe1s tarde",!1)})})}refrescando(t){this.desde=0,this.inicio().then(()=>{t.detail.complete()})}loadData(t){return Object(s.a)(this,void 0,void 0,function*(){this.desde=this.desde+10;const e=yield this.almacenamiento.obtenerToken();e&&this.ivtApi.leerMovmientos(e.token,{desde:this.desde,id:this.activeRoute.snapshot.paramMap.get("id")}).subscribe(e=>{e.exe?e.response.length>0?(e.response.forEach(t=>{this.movimientos.push(t)}),t.target.complete()):(t.target.disabled=!0,this.desde=0):this.toastCtrl.alertApplication("No se pudo traer los movimientos, intentelo m\xe1s tarde",!1)},t=>{this.toastCtrl.alertApplication("No se pudo traer los movimientos, intentelo m\xe1s tarde",!1)})})}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(h.a),c.Lb(p.a),c.Lb(d.a),c.Lb(a.g),c.Lb(a.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-ivt-movimientos"]],viewQuery:function(t,e){if(1&t&&c.Ac(b,1),2&t){let t;c.oc(t=c.Xb())&&(e.infinite=t.first)}},decls:9,vars:3,consts:[[1,"ion-no-border"],["color","oscuro"],["slot","start","icon","chevron-back-outline","defaultHref","/central/menu/ivt-inicio"],["class","tituloGrande",4,"ngIf"],["class","blanco ",4,"ngIf"],["threshold","100px",3,"ionInfinite",4,"ngIf"],[1,"tituloGrande"],[1,"blanco"],["mode","ios",4,"ngFor","ngForOf"],["mode","ios"],["slot","start",1,"avatar"],[3,"src"],[1,"ion-text-wrap"],[1,"ion-text-right"],[1,"ama"],["threshold","100px",3,"ionInfinite"],["inifinito",""],["loadingSpinner","bubbles","loadingText","Cargando entradas..."]],template:function(t,e){1&t&&(c.Ob(0,"ion-header",0),c.Ob(1,"ion-toolbar",1),c.Mb(2,"ion-back-button",2),c.Ob(3,"ion-title"),c.wc(4,"Movimientos"),c.Nb(),c.Nb(),c.Nb(),c.Ob(5,"ion-content"),c.vc(6,f,2,0,"h3",3),c.vc(7,m,2,1,"ion-list",4),c.vc(8,w,3,0,"ion-infinite-scroll",5),c.Nb()),2&t&&(c.Ab(6),c.fc("ngIf",0===e.movimientos.length),c.Ab(1),c.fc("ngIf",e.movimientos.length>0),c.Ab(1),c.fc("ngIf",e.carga))},directives:[i.z,i.lb,i.g,i.h,i.jb,i.t,n.j,i.L,n.i,i.F,i.f,i.B,i.K,i.C,i.D],pipes:[l,u.a],styles:[".ama[_ngcontent-%COMP%]{color:#777}"]}),t})()}];let O=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({imports:[[a.j.forChild(E)],a.j]}),t})();var x=r("iTUp");let j=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({imports:[[n.b,o.e,i.mb,O,x.a]]}),t})()},"5yQV":function(t,e,r){"use strict";r.d(e,"a",function(){return d});var n=r("AytR"),o=r("tk/3"),i=r("coGc"),a=r("lJxs"),s=r("IzEk"),c=r("MtjB"),h=r("PqYM"),p=r("fXoL");let d=(()=>{class t{constructor(t){this.http=t}hanflerError(t){return t.pipe(Object(i.a)(()=>Object(h.a)(3e3)),Object(a.a)(t=>{if(console.log("Entramos a intentos"),t instanceof ErrorEvent)throw new Error("Error de Red");if(404===t.status)throw new Error(" P\xe1gina no encontrada")}),Object(s.a)(3))}crearInventario(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${n.a}/ivt/tipo/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}actualizarInventario(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${n.a}/ivt/cierre/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerInventarios(t){const e={headers:new o.c({"x-token":t})};return this.http.get(`${n.a}/ivt/tipo/`,e).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerInventario(t,e){const r={headers:new o.c({"x-token":t,"x-id":e})};return this.http.get(`${n.a}/ivt/tipo/uno`,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarAcceso(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${n.a}/ivt/tipo/accesos/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}BuscarUsuarios(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${n.a}/empleados/buscar/`,{patron:e},r).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearEmpleado(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${n.a}/empleados/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarEmpleado(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${n.a}/empleados/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerEmpleados(t){const e={headers:new o.c({"x-token":t})};return this.http.get(`${n.a}/empleados/`,e).pipe(Object(c.a)(t=>this.hanflerError(t)))}eliminarEmpleados(t,e){const r={headers:new o.c({"x-token":t,"x-id":e})};return this.http.delete(`${n.a}/empleados/`,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearProveedor(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${n.a}/ivt/proveedores/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarProveedor(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${n.a}/ivt/proveedores/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}eliminarProveedor(t,e){const r={headers:new o.c({"x-token":t,"x-id":e})};return this.http.delete(`${n.a}/ivt/proveedores/`,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerProveedor(t,e){const r={headers:new o.c({"x-token":t,"x-ivt":e})};return this.http.get(`${n.a}/ivt/proveedores/`,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearCategoria(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${n.a}/ivt/categorias/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarCategoria(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${n.a}/ivt/categorias/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}eliminarCategoria(t,e){const r={headers:new o.c({"x-token":t,"x-id":e})};return this.http.delete(`${n.a}/ivt/categorias/`,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerCategoria(t,e){const r={headers:new o.c({"x-token":t,"x-ivt":e})};return this.http.get(`${n.a}/ivt/categorias/`,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearProducto(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${n.a}/ivt/productos/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarProducto(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${n.a}/ivt/productos/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}eliminarProducto(t,e){const r={headers:new o.c({"x-token":t,"x-id":e})};return this.http.delete(`${n.a}/ivt/productos/`,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerProducto(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${n.a}/ivt/productos/filtro/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerProductoEstadistica(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${n.a}/ivt/productos/filtro/estadistica/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerProductosPorInventario(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${n.a}/ivt/productos/buscarivt/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}buscarProducto(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${n.a}/ivt/productos/buscar`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}buscarProductoEntrada(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${n.a}/ivt/productos/buscar/entrada`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearEntrada(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${n.a}/ivt/entradas/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerEntrada(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${n.a}/ivt/entradas/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}filtrarEntradas(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${n.a}/ivt/entradas/buscar/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}filtrarEntradasPatron(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${n.a}/ivt/entradas/buscar/patron/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearSalida(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${n.a}/ivt/salidas/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerSalida(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${n.a}/ivt/salidas/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}filtrarSalidas(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${n.a}/ivt/salidas/buscar/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}filtrarSalidasPatron(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${n.a}/ivt/salidas/buscar/patron/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}CargarInventarios(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${n.a}/ivt/tipo/almacen/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}CierresInventario(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${n.a}/ivt/cierre/buscar/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}MovCantidades(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${n.a}/ivt/mov/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}MovCantidades2(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${n.a}/ivt/mov/salidas/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerMovmientos(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${n.a}/ivt/movimientos/filtro/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerAgotados(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${n.a}/ivt/productos/agotados/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerProximos(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${n.a}/ivt/productos/proximos/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}}return t.\u0275fac=function(e){return new(e||t)(p.Sb(o.a))},t.\u0275prov=p.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},SpuA:function(t,e,r){"use strict";r.d(e,"a",function(){return i});var n=r("wd/R"),o=r("fXoL");let i=(()=>{class t{transform(t){console.log(t,"fechin");let e=n.utc(t).toDate();return n(e).format("dddd, DD MMMM YYYY h:mm:a")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o.Kb({name:"cambioUTC",type:t,pure:!0}),t})()}}]);