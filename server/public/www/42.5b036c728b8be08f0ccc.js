(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{LwKO:function(t,i,n){"use strict";n.r(i),n.d(i,"IVTentradasPageModule",function(){return T});var e=n("ofXK"),o=n("3Pt+"),a=n("TEn/"),r=n("tyNb"),s=n("mrSG"),c=n("SQQW"),l=n("fXoL"),d=n("fsfq"),b=n("5yQV"),h=n("fmoy"),f=n("fqim"),u=n("SpuA");const p=["inifinito"],m=["contenido"];function g(t,i){if(1&t){const t=l.Nb();l.Mb(0,"ion-button",5),l.Ub("click",function(){return l.lc(t),l.Wb().borrar()}),l.Kb(1,"ion-icon",13),l.Lb()}}function M(t,i){if(1&t){const t=l.Nb();l.Mb(0,"div",14),l.Mb(1,"ion-item"),l.Mb(2,"ion-label",15),l.rc(3,"Seleccionar desde que fecha"),l.Lb(),l.Mb(4,"ion-datetime",16),l.Ub("ionChange",function(i){return l.lc(t),l.Wb().filtro(i,1)}),l.Lb(),l.Lb(),l.Mb(5,"ion-item"),l.Mb(6,"ion-label",15),l.rc(7,"Seleccionar hasta que fecha"),l.Lb(),l.Mb(8,"ion-datetime",17),l.Ub("ionChange",function(i){return l.lc(t),l.Wb().filtro(i,2)}),l.Lb(),l.Lb(),l.Mb(9,"div",18),l.Mb(10,"ion-button",19),l.Ub("click",function(){return l.lc(t),l.Wb().toggleFiltro()}),l.rc(11,"CERRAR"),l.Lb(),l.Mb(12,"ion-button",20),l.Ub("click",function(){return l.lc(t),l.Wb().filtrar()}),l.rc(13,"BUSCAR"),l.Lb(),l.Lb(),l.Lb()}}function v(t,i){1&t&&(l.Mb(0,"div",32),l.Kb(1,"img",33),l.Mb(2,"h3",34),l.rc(3,"No tiene entradas registrados"),l.Lb(),l.Lb())}function L(t,i){1&t&&(l.Mb(0,"ion-item"),l.Kb(1,"ion-skeleton-text",37),l.Mb(2,"ion-label"),l.Kb(3,"ion-skeleton-text",38),l.Kb(4,"ion-skeleton-text",39),l.Lb(),l.Lb())}const k=function(){return[1,1,1,1,1]};function x(t,i){1&t&&(l.Mb(0,"div",35),l.Mb(1,"ion-list"),l.qc(2,L,5,0,"ion-item",36),l.Lb(),l.Lb()),2&t&&(l.zb(2),l.dc("ngForOf",l.gc(1,k)))}function E(t,i){if(1&t&&(l.Mb(0,"div"),l.Kb(1,"br"),l.Mb(2,"strong",43),l.rc(3,"Inventario Origen: "),l.Mb(4,"span",52),l.rc(5),l.Lb(),l.Lb(),l.Lb()),2&t){const t=l.Wb().$implicit;l.zb(5),l.sc(t.origenivt.name)}}function C(t,i){if(1&t){const t=l.Nb();l.Mb(0,"ion-item-sliding"),l.Mb(1,"ion-item"),l.Mb(2,"ion-avatar",2),l.Kb(3,"img",40),l.Lb(),l.Mb(4,"ion-label"),l.Mb(5,"div",41),l.rc(6),l.Lb(),l.Mb(7,"div",42),l.Kb(8,"br"),l.Mb(9,"strong",43),l.rc(10,"Cantidad: "),l.Mb(11,"span",44),l.rc(12),l.Lb(),l.Lb(),l.Mb(13,"strong",43),l.rc(14,"Precio Unitario: "),l.Mb(15,"span",44),l.rc(16),l.Xb(17,"decimales"),l.Lb(),l.Lb(),l.Mb(18,"strong",43),l.rc(19,"Costo Total : "),l.Mb(20,"span",44),l.rc(21),l.Xb(22,"decimales"),l.Lb(),l.Lb(),l.Kb(23,"br"),l.Mb(24,"strong",43),l.rc(25,"Creador: "),l.Mb(26,"span",45),l.rc(27),l.Lb(),l.Lb(),l.Mb(28,"strong",43),l.rc(29,"Fecha: "),l.Mb(30,"span",46),l.rc(31),l.Xb(32,"cambioUTC"),l.Lb(),l.Lb(),l.qc(33,E,6,1,"div",12),l.Lb(),l.Lb(),l.Lb(),l.Mb(34,"ion-item-options",47),l.Mb(35,"ion-item-option",48),l.Ub("click",function(){l.lc(t);const n=i.$implicit;return l.Wb(3).editar(n)}),l.Kb(36,"ion-icon",49),l.Lb(),l.Mb(37,"ion-item-option",50),l.Ub("click",function(){l.lc(t);const n=i.$implicit,e=i.index;return l.Wb(3).eliminar(n,e)}),l.Kb(38,"ion-icon",51),l.Lb(),l.Lb(),l.Lb()}if(2&t){const t=i.$implicit;l.zb(6),l.sc(t.producto.nombre),l.zb(6),l.sc(t.cantidad),l.zb(4),l.tc("$",l.Zb(17,7,t.precio,"es-CO"),""),l.zb(5),l.tc(" $",l.Zb(22,10,t.total,"es-CO"),""),l.zb(6),l.sc(t.creador.nombrecompleto),l.zb(4),l.sc(l.Yb(32,13,t.fecha)),l.zb(2),l.dc("ngIf",""!==t.origenivt&&t.origenivt)}}function y(t,i){if(1&t&&(l.Mb(0,"ion-list"),l.qc(1,C,39,15,"ion-item-sliding",36),l.Lb()),2&t){const t=l.Wb(2);l.zb(1),l.dc("ngForOf",t.entradas)}}function A(t,i){if(1&t){const t=l.Nb();l.Mb(0,"ion-infinite-scroll",53,54),l.Ub("ionInfinite",function(i){return l.lc(t),l.Wb(2).loadData(i)}),l.Kb(2,"ion-infinite-scroll-content",55),l.Lb()}}function D(t,i){if(1&t){const t=l.Nb();l.Mb(0,"ion-content",null,21),l.Mb(2,"ion-refresher",22),l.Ub("ionRefresh",function(i){return l.lc(t),l.Wb().refrescando(i)}),l.Kb(3,"ion-refresher-content",23),l.Lb(),l.Kb(4,"div",24),l.Kb(5,"div",25),l.qc(6,v,4,0,"div",26),l.qc(7,x,3,2,"div",27),l.qc(8,y,2,1,"ion-list",12),l.qc(9,A,3,0,"ion-infinite-scroll",28),l.Mb(10,"ion-fab",29),l.Mb(11,"ion-fab-button",30),l.Ub("click",function(){return l.lc(t),l.Wb().modal()}),l.Kb(12,"ion-icon",31),l.Lb(),l.Lb(),l.Lb()}if(2&t){const t=l.Wb();l.zb(6),l.dc("ngIf",0===t.entradas.length),l.zb(1),l.dc("ngIf",t.load),l.zb(1),l.dc("ngIf",t.entradas.length>0),l.zb(1),l.dc("ngIf",t.carga)}}const w=[{path:"",component:(()=>{class t{constructor(t,i,n,e,o,a){this.modalCtrl=t,this.almacenamiento=i,this.ivtApi=n,this.toast=e,this.alertCtrl=o,this.ActiveRouter=a,this.entradas=[],this.load=!1,this.fecha1="",this.fecha2="",this.formato1="AAAA-MM-DDTHH: mm: ssTZD",this.formato2="AAAA-MM-DDTHH: mm: ssTZD",this.filtros=!1,this.partida=0,this.partida2=0,this.patron="",this.carga=!0}ngOnInit(){}ionViewWillEnter(){this.cargarEntradas()}refrescando(t){this.partida=0,this.partida2=0,this.cargarEntradas().then(()=>{t.target.complete()}).catch(()=>t.target.complete())}cargarEntradas(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&(this.carga=!0,this.ivtApi.leerEntrada(t.token,{ivt:this.ActiveRouter.snapshot.paramMap.get("id"),partida:this.partida2,patron:this.patron}).subscribe(t=>{t.exe?this.entradas=t.response:this.toast.toastError("No se pudo listar las entradas, intentelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo listar las entradas, intentelo m\xe1s tarde")}))})}modal(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:c.a,componentProps:{tipo:"entradas",inventario:this.ActiveRouter.snapshot.paramMap.get("id")}});yield t.present();const i=yield t.onWillDismiss();i.data&&i.data.exe&&this.cargarEntradas()})}eliminar(t,i){return Object(s.a)(this,void 0,void 0,function*(){})}editar(t){return Object(s.a)(this,void 0,void 0,function*(){})}filtro(t,i){1===i?this.fecha1=t.detail.value:this.fecha2=t.detail.value}filtrar(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&(this.partida=0,""!==this.fecha1&&""!==this.fecha2?this.ivtApi.filtrarEntradas(t.token,{desde:this.fecha1,hasta:this.fecha2,partida:this.partida}).subscribe(t=>{t.exe?(this.entradas=t.response,this.filtros=!1):this.toast.toastError("No se pudo consultar las entradas, intentelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo consultar las entradas, intentelo m\xe1s tarde")}):this.toast.toastError("Debe de especificar las fechas (desde, hasta)"))})}loadData(t){return Object(s.a)(this,void 0,void 0,function*(){this.partida=this.partida+10;const i=yield this.almacenamiento.obtenerToken();i&&(""!==this.fecha1&&""!==this.fecha2?this.ivtApi.filtrarEntradas(i.token,{desde:this.fecha1,hasta:this.fecha2,partida:this.partida,patron:this.patron}).subscribe(i=>{i.exe?i.response.length>0?(i.response.forEach(t=>{this.entradas.push(t)}),t.target.complete()):(t.target.disabled=!0,this.partida=0):this.toast.toastError("No se pudo consultar las entradas, intentelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo consultar las entradas, intentelo m\xe1s tarde")}):(this.partida2=this.partida2+10,this.ivtApi.leerEntrada(i.token,{ivt:this.ActiveRouter.snapshot.paramMap.get("id"),partida:this.partida2,patron:this.patron}).subscribe(i=>{i.exe?i.response.length>0?(i.response.forEach(t=>{this.entradas.push(t)}),t.target.complete()):(t.target.disabled=!0,this.partida2=0):this.toast.toastError("No se pudo listar las entradas, intentelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo listar las entradas, intentelo m\xe1s tarde")})))})}buscarProducto(t){return Object(s.a)(this,void 0,void 0,function*(){this.partida=0,this.partida2=0;const i=yield this.almacenamiento.obtenerToken();yield this.contenido.scrollToTop(),i&&(""===t.detail.value?""!==this.fecha1&&""!==this.fecha2&&this.filtros?this.filtrar():this.cargarEntradas():(this.patron=t.detail.value,""!==this.fecha1&&""!==this.fecha2&&this.filtros?this.ivtApi.filtrarEntradasPatron(i.token,{desde:this.fecha1,hasta:this.fecha2,patron:t.detail.value,tipo:"filtro"}).subscribe(t=>{t.exe?(this.inifinito.disabled=!(t.response.length>0),this.entradas=t.response):this.toast.toastError("No se pudo consultar las entradas, intentelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo consultar las entradas, intentelo m\xe1s tarde")}):this.ivtApi.filtrarEntradasPatron(i.token,{patron:t.detail.value,tipo:"normal"}).subscribe(t=>{t.exe?(this.inifinito.disabled=!(t.response.length>0),this.entradas=t.response):this.toast.toastError("No se pudo consultar las entradas, intentelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo consultar las entradas, intentelo m\xe1s tarde")})))})}borrar(){return Object(s.a)(this,void 0,void 0,function*(){this.fecha1="",this.fecha2="",yield this.contenido.scrollToTop(),this.partida=0,this.partida2=0,this.inifinito.disabled=!1,this.cargarEntradas()})}toggleFiltro(){this.filtros=!this.filtros}}return t.\u0275fac=function(i){return new(i||t)(l.Jb(a.ob),l.Jb(d.a),l.Jb(b.a),l.Jb(h.a),l.Jb(a.b),l.Jb(r.a))},t.\u0275cmp=l.Db({type:t,selectors:[["app-ivtentradas"]],viewQuery:function(t,i){if(1&t&&(l.vc(p,1),l.vc(m,1)),2&t){let t;l.kc(t=l.Vb())&&(i.inifinito=t.first),l.kc(t=l.Vb())&&(i.contenido=t.first)}},decls:18,vars:4,consts:[[1,"ion-no-border"],["color","success"],["slot","start"],["icon","chevron-back-outline","defaultHref","/central/menu/ivt-inicio"],["slot","end"],[3,"click"],["name","search-outline","slot","icon-only"],[3,"click",4,"ngIf"],["class","filtros blanco",4,"ngIf"],[1,"buscar"],["mode","ios","placeholder","Buscar Productos",3,"ionChange"],[1,"divider","verdeo"],[4,"ngIf"],["name","trash-outline","slot","icon-only"],[1,"filtros","blanco"],["position","floating"],["displayFormat","DD-MM-YYYY hh:mm:a","pickerFormat","DD MM YYYY, hh:mm:a","done-text","Aceptar","cancel-text","Cancelar","placeholder","Seleccione Desde",3,"ionChange"],["displayFormat","DD-MM-YYYY hh:mm:a","pickerFormat","DD MM YYYY, hh:mm:a","done-text","Aceptar","placeholder","Seleccione Hasta","cancel-text","Cancelar",3,"ionChange"],[1,"btns","divider"],["color","medium","shape","round","mode","ios",3,"click"],["color","warning","shape","round","mode","ios",3,"click"],["contenido",""],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],[1,"divider","light"],[1,"divider"],["class","cen",4,"ngIf"],["class","carga",4,"ngIf"],["threshold","100px",3,"ionInfinite",4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],["color","success",3,"click"],["name","add-outline"],[1,"cen"],["src","/assets/Entradas.png","width","100px","alt",""],[1,"tituloGrande"],[1,"carga"],[4,"ngFor","ngForOf"],["slot","start","animated","",2,"width","50px","height","50px"],["animated","",2,"width","50%","height","20px"],["animated","",2,"width","90%","height","20px"],["src","/assets/Entradas.png","width","100%","heigth","100%"],[1,"titulo"],[1,"info"],[1,"flexbet"],[1,"verdei"],[1,"rojoi"],[1,"grisi"],["side","end"],["color","warning",3,"click"],["slot","icon-only","name","pencil-outline"],["color","danger",3,"click"],["slot","icon-only","name","trash-outline"],[1,"amarilloi"],["threshold","100px",3,"ionInfinite"],["inifinito",""],["loadingSpinner","bubbles","loadingText","Cargando entradas..."]],template:function(t,i){1&t&&(l.Mb(0,"ion-header",0),l.Mb(1,"ion-toolbar",1),l.Mb(2,"ion-buttons",2),l.Kb(3,"ion-back-button",3),l.Lb(),l.Mb(4,"ion-title"),l.rc(5,"Inventario - Entradas"),l.Lb(),l.Mb(6,"ion-buttons",4),l.Mb(7,"ion-button",5),l.Ub("click",function(){return i.toggleFiltro()}),l.Kb(8,"ion-icon",6),l.Lb(),l.qc(9,g,2,0,"ion-button",7),l.Lb(),l.Lb(),l.qc(10,M,14,0,"div",8),l.Mb(11,"div",9),l.Mb(12,"ion-searchbar",10),l.Ub("ionChange",function(t){return i.buscarProducto(t)}),l.Lb(),l.Lb(),l.Mb(13,"div",11),l.rc(14," CANTIDAD DE ENTRADAS "),l.Mb(15,"strong"),l.rc(16),l.Lb(),l.Lb(),l.Lb(),l.qc(17,D,13,4,"ion-content",12)),2&t&&(l.zb(9),l.dc("ngIf",""!==i.fecha1&&""!==i.fecha2),l.zb(1),l.dc("ngIf",i.filtros),l.zb(6),l.tc(" ",i.entradas.length,""),l.zb(1),l.dc("ngIf",i.carga))},directives:[a.z,a.jb,a.k,a.g,a.h,a.hb,a.j,a.A,e.j,a.T,a.wb,a.F,a.K,a.u,a.vb,a.t,a.P,a.Q,a.v,a.w,a.L,e.i,a.Y,a.J,a.f,a.I,a.H,a.C,a.D],pipes:[f.a,u.a],styles:[".cen[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.tituloGrande[_ngcontent-%COMP%]{width:300px;text-align:center}.verdei[_ngcontent-%COMP%]{color:#1e8c4a}ion-item-divider[_ngcontent-%COMP%]{border:0!important;margin-bottom:15px}.rojoi[_ngcontent-%COMP%]{color:#c1302c}.grisi[_ngcontent-%COMP%]{color:#aaa}.amarilloi[_ngcontent-%COMP%]{color:#f5ad45}.flexbet[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.btns[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.verdeo[_ngcontent-%COMP%]{background-color:#fef4c5;color:#333}"]}),t})()}];let O=(()=>{class t{}return t.\u0275mod=l.Hb({type:t}),t.\u0275inj=l.Gb({factory:function(i){return new(i||t)},imports:[[r.i.forChild(w)],r.i]}),t})();var I=n("iTUp");let T=(()=>{class t{}return t.\u0275mod=l.Hb({type:t}),t.\u0275inj=l.Gb({factory:function(i){return new(i||t)},imports:[[e.b,o.e,a.kb,O,I.a]]}),t})()},SpuA:function(t,i,n){"use strict";n.d(i,"a",function(){return a});var e=n("wd/R"),o=n("fXoL");let a=(()=>{class t{transform(t){console.log(t,"fechin");let i=e.utc(t).toDate();return e(i).format("dddd, DD MMMM YYYY h:mm:a")}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=o.Ib({name:"cambioUTC",type:t,pure:!0}),t})()}}]);