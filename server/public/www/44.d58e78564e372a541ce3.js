(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{flfU:function(t,e,a){"use strict";a.r(e),a.d(e,"GruaPageModule",function(){return k});var n=a("ofXK"),o=a("3Pt+"),i=a("TEn/"),r=a("tyNb"),s=a("mrSG"),c=a("iM4M"),l=a("fXoL"),d=a("Bfh1"),u=a("oQG1"),b=a("fsfq"),m=a("VYYF"),g=a("fmoy"),h=a("r3ab");const p=["mapa"],f=[{path:"",component:(()=>{class t{constructor(t,e,a,n,o,i,r,s,c){this.alertCtrl=t,this.geoReferencia=e,this.usuaripService=a,this.almacenamiento=n,this.statusbar=o,this.router=i,this.toast=r,this.loading=s,this.modalCtrl=c,this.lat=0,this.lng=0,this.mensaje="",this.imagen=""}ngOnInit(){}ionViewWillEnter(){this.statusbar.backgroundColorByHexString("#273238"),this.llamarFoto(),this.confirmarUbicacion()}confirmarUbicacion(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.alertCtrl.create({header:"Mensaje de la App",message:"Permitir compartir la ubciaci\xf3n para realizar esta acci\xf3n",backdropDismiss:!1,buttons:[{role:"cancel",text:"Cancelar",handler:()=>{this.toast.toastNotificacion("No se puede realizar la acci\xf3n debido a no compartir la ubicaci\xf3n",3e3),this.router.navigate(["/central/menu/inicioMapa"])}},{text:"Permitir",handler:()=>{this.calcular()}}]});yield t.present()})}calcular(){return Object(s.a)(this,void 0,void 0,function*(){try{console.log("entramos al click");const t=yield this.geoReferencia.getCurrentPosition();t&&(console.log(t),this.lat=t.coords.latitude,this.lng=t.coords.longitude,this.graficar())}catch(t){this.mensaje=t}})}llamarFoto(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&this.usuaripService.viewImagen(t.token).subscribe(t=>{this.imagen=`https://motocaliapp.com/${t.paquete}`,console.log(this.imagen)},t=>{})})}graficar(){mapboxgl.accessToken="pk.eyJ1Ijoic2FudGlhZ29mZXJuYW5kZXpkZXYiLCJhIjoiY2tmYmh6cXdzMDM0bDJ2cHRucTI4cHpkaSJ9.-01EYvsLdJOU1Oy4BtwBwA";const t=new mapboxgl.Map({container:this.mapa.nativeElement,style:"mapbox://styles/mapbox/streets-v11",center:[this.lng,this.lat],zoom:15});t.addControl(new mapboxgl.NavigationControl);const e=document.createElement("div");e.className="marker",e.style.backgroundImage="url("+this.imagen+")",e.style.backgroundSize="100%",e.style.width="50px",e.style.height="50px";const a=new mapboxgl.Marker({element:e,draggable:!0}).setLngLat([this.lng,this.lat]).addTo(t),n=document.createElement("div");n.className="marker",n.style.backgroundImage="url("+this.imagen+")",n.style.backgroundSize="100%",n.style.width="50px",n.style.height="50px",a.on("dragend",()=>{const t=a.getLngLat();console.log("Longitude: "+t.lng+"<br />Latitude: "+t.lat)});const o=new mapboxgl.Marker({element:n,draggable:!0}).setLngLat([-76.49279796685475,3.4727944759127922]).addTo(t);o.on("dragend",()=>{const t=o.getLngLat();console.log("Longitude: "+t.lng+"<br />Latitude: "+t.lat)})}modal(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:c.a,componentProps:{}});yield t.present()})}ionViewWillLeave(){this.statusbar.backgroundColorByHexString("#777777")}}return t.\u0275fac=function(e){return new(e||t)(l.Jb(i.b),l.Jb(d.a),l.Jb(u.a),l.Jb(b.a),l.Jb(m.a),l.Jb(r.g),l.Jb(g.a),l.Jb(h.a),l.Jb(i.ob))},t.\u0275cmp=l.Db({type:t,selectors:[["app-grua"]],viewQuery:function(t,e){if(1&t&&l.vc(p,1),2&t){let t;l.kc(t=l.Vb())&&(e.mapa=t.first)}},decls:11,vars:0,consts:[["color","oscuro"],["slot","start","icon","chevron-back-outline","defaultHref","/central/menu/inicioMapa"],["slot","end"],[3,"click"],["name","add-outline","slot","icon-only"],[1,"mapa"],["mapa",""]],template:function(t,e){1&t&&(l.Mb(0,"ion-header"),l.Mb(1,"ion-toolbar",0),l.Kb(2,"ion-back-button",1),l.Mb(3,"ion-title"),l.rc(4,"Sistema de Gr\xfaa"),l.Lb(),l.Mb(5,"ion-buttons",2),l.Mb(6,"ion-button",3),l.Ub("click",function(){return e.modal()}),l.Kb(7,"ion-icon",4),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Mb(8,"ion-content"),l.Kb(9,"div",5,6),l.Lb())},directives:[i.z,i.jb,i.g,i.h,i.hb,i.k,i.j,i.A,i.t],styles:[".mapa[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#f3f3f3}"]}),t})()}];let y=(()=>{class t{}return t.\u0275mod=l.Hb({type:t}),t.\u0275inj=l.Gb({factory:function(e){return new(e||t)},imports:[[r.i.forChild(f)],r.i]}),t})();var v=a("utQI");let k=(()=>{class t{}return t.\u0275mod=l.Hb({type:t}),t.\u0275inj=l.Gb({factory:function(e){return new(e||t)},imports:[[n.b,o.e,i.kb,y,v.a]]}),t})()},r3ab:function(t,e,a){"use strict";a.d(e,"a",function(){return r});var n=a("mrSG"),o=a("fXoL"),i=a("TEn/");let r=(()=>{class t{constructor(t){this.loadingCtrl=t}cargaProcesos(t){return Object(n.a)(this,void 0,void 0,function*(){return this.loading=yield this.loadingCtrl.create({message:t}),this.loading.present()})}finalizarCargado(){this.loading.dismiss()}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(i.mb))},t.\u0275prov=o.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);