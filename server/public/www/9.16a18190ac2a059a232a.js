(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"5yQV":function(t,e,r){"use strict";r.d(e,"a",function(){return d});var i=r("AytR"),o=r("tk/3"),a=r("coGc"),s=r("lJxs"),n=r("IzEk"),c=r("MtjB"),h=r("PqYM"),p=r("fXoL");let d=(()=>{class t{constructor(t){this.http=t}hanflerError(t){return t.pipe(Object(a.a)(()=>Object(h.a)(3e3)),Object(s.a)(t=>{if(console.log("Entramos a intentos"),t instanceof ErrorEvent)throw new Error("Error de Red");if(404===t.status)throw new Error(" P\xe1gina no encontrada")}),Object(n.a)(3))}crearInventario(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${i.a}/ivt/tipo/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}actualizarInventario(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/ivt/cierre/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerInventarios(t){const e={headers:new o.c({"x-token":t})};return this.http.get(`${i.a}/ivt/tipo/`,e).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerInventario(t,e){const r={headers:new o.c({"x-token":t,"x-id":e})};return this.http.get(`${i.a}/ivt/tipo/uno`,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarAcceso(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/ivt/tipo/accesos/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}BuscarUsuarios(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/empleados/buscar/`,{patron:e},r).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearEmpleado(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${i.a}/empleados/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarEmpleado(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/empleados/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerEmpleados(t){const e={headers:new o.c({"x-token":t})};return this.http.get(`${i.a}/empleados/`,e).pipe(Object(c.a)(t=>this.hanflerError(t)))}eliminarEmpleados(t,e){const r={headers:new o.c({"x-token":t,"x-id":e})};return this.http.delete(`${i.a}/empleados/`,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearProveedor(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${i.a}/ivt/proveedores/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarProveedor(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/ivt/proveedores/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}eliminarProveedor(t,e){const r={headers:new o.c({"x-token":t,"x-id":e})};return this.http.delete(`${i.a}/ivt/proveedores/`,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerProveedor(t,e){const r={headers:new o.c({"x-token":t,"x-ivt":e})};return this.http.get(`${i.a}/ivt/proveedores/`,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearCategoria(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${i.a}/ivt/categorias/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarCategoria(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/ivt/categorias/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}eliminarCategoria(t,e){const r={headers:new o.c({"x-token":t,"x-id":e})};return this.http.delete(`${i.a}/ivt/categorias/`,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerCategoria(t,e){const r={headers:new o.c({"x-token":t,"x-ivt":e})};return this.http.get(`${i.a}/ivt/categorias/`,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearProducto(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${i.a}/ivt/productos/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarProducto(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/ivt/productos/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}eliminarProducto(t,e){const r={headers:new o.c({"x-token":t,"x-id":e})};return this.http.delete(`${i.a}/ivt/productos/`,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerProducto(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/ivt/productos/filtro/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerProductoEstadistica(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/ivt/productos/filtro/estadistica/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerProductosPorInventario(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/ivt/productos/buscarivt/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}buscarProducto(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/ivt/productos/buscar`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}buscarProductoEntrada(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/ivt/productos/buscar/entrada`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearEntrada(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${i.a}/ivt/entradas/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerEntrada(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/ivt/entradas/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}filtrarEntradas(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/ivt/entradas/buscar/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}filtrarEntradasPatron(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/ivt/entradas/buscar/patron/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearSalida(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${i.a}/ivt/salidas/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerSalida(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/ivt/salidas/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}filtrarSalidas(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/ivt/salidas/buscar/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}filtrarSalidasPatron(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/ivt/salidas/buscar/patron/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}CargarInventarios(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/ivt/tipo/almacen/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}CierresInventario(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/ivt/cierre/buscar/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}MovCantidades(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/ivt/mov/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}MovCantidades2(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/ivt/mov/salidas/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerMovmientos(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/ivt/movimientos/filtro/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerAgotados(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/ivt/productos/agotados/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerProximos(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/ivt/productos/proximos/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}}return t.\u0275fac=function(e){return new(e||t)(p.Sb(o.a))},t.\u0275prov=p.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},HavB:function(t,e,r){"use strict";r.d(e,"a",function(){return f});var i=r("AytR"),o=r("tk/3"),a=r("coGc"),s=r("lJxs"),n=r("IzEk"),c=r("MtjB"),h=r("JIr8"),p=r("PqYM"),d=r("Cfvw"),l=r("fXoL"),u=r("tyNb"),b=r("B7Rs");let f=(()=>{class t{constructor(t,e,r){this.http=t,this.router=e,this.MmyTransfer=r}hanflerError(t){return t.pipe(Object(a.a)(()=>Object(p.a)(3e3)),Object(s.a)(t=>{if(console.log("Entramos a intentos"),t instanceof ErrorEvent)throw new Error("Error de Red");if(404===t.status)throw new Error(" P\xe1gina no encontrada");if(401===t.status)throw new Error(" No tiene permisos ")}),Object(n.a)(3))}crearPedido(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/crear/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}misPedido(t){const e={headers:new o.c({"x-token":t})};return this.http.get(`${i.a}/pedidos/lista/`,e).pipe(Object(c.a)(t=>this.hanflerError(t)))}misChats(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${i.a}/chats/lista/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}misChatsGrupos(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${i.a}/chats/lista/grupos`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}misPedidoUsuario(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/lista/`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}misSalas(t){const e={headers:new o.c({"x-token":t})};return this.http.get(`${i.a}/ticket/salas`,e).pipe(Object(c.a)(t=>this.hanflerError(t)))}mensajes(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/chat`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}traermensajesNoVistos(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/chat/vistos`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}marcarvisto(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/pedidos/chat/vistos`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}infoPedido(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/info`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}infoPedidoPut(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/pedidos/info`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearEstados(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/estados`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}consultarEstados(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/pedidos/estados`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}consultarChat(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${i.a}/unico/consultar/chat`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}consultarChatFotos(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${i.a}/unico/consultar/chat/fotos`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}consultarSala(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/consultar/chat`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}consultarMapa(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/consultar/mapa`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}consultarMapaUnico(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/consultar/mapa/unico`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearMapa(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/crear/mapa`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarMapa(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/pedidos/editar/mapa`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarMapaInfo(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/pedidos/editar/mapa/info`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarMapaInfoD(t,e){const r={headers:new o.c({"x-token":t})};return this.http.put(`${i.a}/pedidos/editar/mapa/infod`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarPedido(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/editar`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarChat(t,e){const r={headers:new o.c({"x-token":t})};return this.http.post(`${i.a}/chat/editar`,e,r).pipe(Object(c.a)(t=>this.hanflerError(t)))}subirArchivosChat(t,e,r,o,a,s,n){console.log("archivo",r);const c={fileKey:"archivo",fileName:s,mimeType:n,httpMethod:"PUT",headers:{"x-token":t,"x-sala":e,"x-final":o,"x-cont":a}},p=this.MmyTransfer.create();return Object(d.a)(p.upload(r,`${i.a}/pedido/upload`,c)).pipe(Object(h.a)(t=>{throw new Error(r)}))}subirweb(t,e,r,a,s){console.log(t,e,r,a);const n={headers:new o.c({"x-token":t,"x-sala":e,"x-final":r.toString(),"x-cont":a.toString()})};return this.http.put(`${i.a}/pedido/upload`,s,n).pipe(Object(c.a)(t=>this.hanflerError(t)))}}return t.\u0275fac=function(e){return new(e||t)(l.Sb(o.a),l.Sb(u.g),l.Sb(b.a))},t.\u0275prov=l.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},SpuA:function(t,e,r){"use strict";r.d(e,"a",function(){return a});var i=r("wd/R"),o=r("fXoL");let a=(()=>{class t{transform(t){console.log(t,"fechin");let e=i.utc(t).toDate();return i(e).format("dddd, DD MMMM YYYY h:mm:a")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o.Kb({name:"cambioUTC",type:t,pure:!0}),t})()},ypew:function(t,e,r){"use strict";r.d(e,"a",function(){return k});var i=r("mrSG"),o=r("fXoL"),a=r("fsfq"),s=r("5yQV"),n=r("fmoy"),c=r("TEn/"),h=r("HavB"),p=r("ofXK");function d(t,e){1&t&&(o.Ob(0,"ion-item"),o.Mb(1,"ion-skeleton-text",10),o.Ob(2,"ion-label"),o.Mb(3,"ion-skeleton-text",11),o.Mb(4,"ion-skeleton-text",12),o.Nb(),o.Nb())}const l=function(){return[1,1,1,1,1]};function u(t,e){1&t&&(o.Ob(0,"div",8),o.Ob(1,"ion-list"),o.vc(2,d,5,0,"ion-item",9),o.Nb(),o.Nb()),2&t&&(o.Ab(2),o.fc("ngForOf",o.kc(1,l)))}function b(t,e){if(1&t&&(o.Ob(0,"div",20),o.wc(1),o.Nb()),2&t){const t=o.Yb().$implicit;o.Ab(1),o.yc("Cargo: ",t.cargo,"")}}function f(t,e){if(1&t&&(o.Ob(0,"div",20),o.wc(1),o.Nb()),2&t){const t=o.Yb().$implicit;o.Ab(1),o.yc("Al\xedas: ",t.alias,"")}}function m(t,e){if(1&t){const t=o.Pb();o.Ob(0,"ion-item-sliding"),o.Ob(1,"ion-item"),o.Ob(2,"ion-avatar",1),o.Mb(3,"img",14),o.Nb(),o.Ob(4,"ion-label"),o.Ob(5,"span"),o.wc(6),o.Nb(),o.Mb(7,"br"),o.Ob(8,"strong",15),o.wc(9),o.Nb(),o.vc(10,b,2,1,"div",16),o.vc(11,f,2,1,"div",16),o.Nb(),o.Nb(),o.Ob(12,"ion-item-options",17),o.Ob(13,"ion-item-option",18),o.Wb("click",function(){o.pc(t);const r=e.$implicit,i=e.index;return o.Yb(2).quitar(r,i)}),o.Mb(14,"ion-icon",19),o.Nb(),o.Nb(),o.Nb()}if(2&t){const t=e.$implicit;o.Ab(3),o.fc("src",t.usuario.imagen,o.qc),o.Ab(3),o.xc(t.usuario.nombrecompleto),o.Ab(3),o.yc("@",t.usuario.nombreusuario,""),o.Ab(1),o.fc("ngIf",t.cargo),o.Ab(1),o.fc("ngIf",t.alias)}}function E(t,e){if(1&t&&(o.Ob(0,"ion-list"),o.Ob(1,"ion-item-divider",13),o.wc(2,"Miembros"),o.Nb(),o.vc(3,m,15,5,"ion-item-sliding",9),o.Nb()),2&t){const t=o.Yb();o.Ab(3),o.fc("ngForOf",t.incluidos)}}function v(t,e){if(1&t&&(o.Ob(0,"div",20),o.wc(1),o.Nb()),2&t){const t=o.Yb().$implicit;o.Ab(1),o.yc("Cargo: ",t.cargo,"")}}function O(t,e){if(1&t&&(o.Ob(0,"div",20),o.wc(1),o.Nb()),2&t){const t=o.Yb().$implicit;o.Ab(1),o.yc("Al\xedas: ",t.alias,"")}}function w(t,e){if(1&t){const t=o.Pb();o.Ob(0,"ion-item-sliding"),o.Ob(1,"ion-item"),o.Ob(2,"ion-avatar",1),o.Mb(3,"img",14),o.Nb(),o.Ob(4,"ion-label"),o.Ob(5,"span"),o.wc(6),o.Nb(),o.Mb(7,"br"),o.Ob(8,"strong",15),o.wc(9),o.Nb(),o.vc(10,v,2,1,"div",16),o.vc(11,O,2,1,"div",16),o.Nb(),o.Nb(),o.Ob(12,"ion-item-options",17),o.Ob(13,"ion-item-option",22),o.Wb("click",function(){o.pc(t);const r=e.$implicit,i=e.index;return o.Yb(2).agregar(r,i)}),o.Mb(14,"ion-icon",23),o.Nb(),o.Nb(),o.Nb()}if(2&t){const t=e.$implicit;o.Ab(3),o.fc("src",t.usuario.imagen,o.qc),o.Ab(3),o.xc(t.usuario.nombrecompleto),o.Ab(3),o.yc("@",t.usuario.nombreusuario,""),o.Ab(1),o.fc("ngIf",t.cargo),o.Ab(1),o.fc("ngIf",t.alias)}}function x(t,e){if(1&t&&(o.Ob(0,"ion-list"),o.Ob(1,"ion-item-divider",21),o.wc(2,"Empleados"),o.Nb(),o.vc(3,w,15,5,"ion-item-sliding",9),o.Nb()),2&t){const t=o.Yb();o.Ab(3),o.fc("ngForOf",t.empleados)}}let k=(()=>{class t{constructor(t,e,r,i,o,a){this.almacenamiento=t,this.IVTapi=e,this.toast=r,this.loading=i,this.modal=o,this.apiPedido=a,this.empleados=[],this.incluidos=[],this.accesos=[],this.load=!1,this.marcar=!1,this.id="",this.ivt={},this.cargauno=!1}ngOnInit(){}ionViewWillEnter(){return Object(i.a)(this,void 0,void 0,function*(){this.sala?yield this.traerEmpleados2():yield this.traerEmpleados()})}refrescando(t){this.traerEmpleados().then(()=>{t.target.complete()}).catch(()=>{t.target.complete()})}traerEmpleados(){return Object(i.a)(this,void 0,void 0,function*(){this.load=!0;const t=yield this.almacenamiento.obtenerToken();t&&this.IVTapi.leerEmpleados(t.token).subscribe(t=>{console.log(this.pedido),t.exe?t.response.forEach(t=>{t.usuario.imagen=t.usuario.imagen[0].path.includes("notfound")?"/assets/notfound.png":`https://motocaliapp.com/${t.usuario.imagen[0].path}`,0===this.pedido.accesos.filter(e=>e._id===t.usuario._id).length?this.empleados.push(t):this.incluidos.push(t)}):this.toast.toastError("No se pudo traer la informaci\xf3n, intentelo m\xe1s tarde"),this.load=!1},t=>{this.toast.toastError("No se pudo traer la informaci\xf3n, intentelo m\xe1s tarde")})})}traerEmpleados2(){return Object(i.a)(this,void 0,void 0,function*(){this.load=!0;const t=yield this.almacenamiento.obtenerToken();t&&this.IVTapi.leerEmpleados(t.token).subscribe(t=>{t.exe?t.response.forEach(t=>{t.usuario.imagen=t.usuario.imagen[0].path.includes("notfound")?"/assets/notfound.png":`https://motocaliapp.com/${t.usuario.imagen[0].path}`,console.log("INCLUIDOS",this.sala.accesos),0===this.sala.accesos.filter(e=>e._id===t.usuario._id).length?this.empleados.push(t):this.incluidos.push(t)}):this.toast.toastError("No se pudo traer la informaci\xf3n, intentelo m\xe1s tarde"),this.load=!1},t=>{this.toast.toastError("No se pudo traer la informaci\xf3n, intentelo m\xe1s tarde")})})}quitar(t,e){return Object(i.a)(this,void 0,void 0,function*(){const r=yield this.almacenamiento.obtenerToken();if(r)if(this.pedido){let i=this.pedido.accesos.map(t=>t._id);i=i.filter(e=>e!==t.usuario._id),this.apiPedido.editarPedido(r.token,{id:this.pedido._id,accesos:i}).subscribe(r=>{r.exe?(this.empleados.push(t),this.incluidos.splice(e,1),this.toast.Especial("Empleado excluido de esta sala")):(this.toast.toastError("No se pudo realizar la petici\xf3n, int\xe9ntelo m\xe1s tarde"),this.cerrar())},t=>{this.toast.toastError("No se pudo realizar la petici\xf3n, int\xe9ntelo m\xe1s tarde"),this.cerrar()})}else{let i=this.sala.accesos.map(t=>t);i=i.filter(e=>e._id!==t.usuario._id),this.apiPedido.editarChat(r.token,{id:this.sala._id,accesos:i}).subscribe(r=>{r.exe?(this.empleados.push(t),this.incluidos.splice(e,1),this.toast.Especial("Empleado excluido de esta sala")):(this.toast.toastError("No se pudo realizar la petici\xf3n, int\xe9ntelo m\xe1s tarde"),this.cerrar())},t=>{this.toast.toastError("No se pudo realizar la petici\xf3n, int\xe9ntelo m\xe1s tarde"),this.cerrar()})}})}agregar(t,e){return Object(i.a)(this,void 0,void 0,function*(){const r=yield this.almacenamiento.obtenerToken();if(r)if(this.pedido){let i=this.pedido.accesos.map(t=>t._id);i.push(t.usuario._id),console.log(i,"nuevo"),this.apiPedido.editarPedido(r.token,{id:this.pedido._id,accesos:i}).subscribe(r=>{r.exe?(this.toast.Especial("Empleado a\xf1adido a esta sala"),this.incluidos.push(t),this.empleados.splice(e,1)):(this.toast.toastError("No se pudo realizar la petici\xf3n, int\xe9ntelo m\xe1s tarde"),this.cerrar())},t=>{this.toast.toastError("No se pudo realizar la petici\xf3n, int\xe9ntelo m\xe1s tarde"),this.cerrar()})}else{let i=this.sala.accesos.map(t=>t);i.push(t.usuario._id),console.log(i,"nuevo"),this.apiPedido.editarChat(r.token,{id:this.sala._id,accesos:i}).subscribe(r=>{r.exe?(this.toast.Especial("Empleado a\xf1adido a esta sala"),this.incluidos.push(t),this.empleados.splice(e,1)):(this.toast.toastError("No se pudo realizar la petici\xf3n, int\xe9ntelo m\xe1s tarde"),this.cerrar())},t=>{this.toast.toastError("No se pudo realizar la petici\xf3n, int\xe9ntelo m\xe1s tarde"),this.cerrar()})}})}cerrar(){this.modal.dismiss()}ionViewDidLeave(){this.cargauno=!1,this.empleados=[]}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(a.a),o.Lb(s.a),o.Lb(n.a),o.Lb(c.ob),o.Lb(c.qb),o.Lb(h.a))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-modal-mapas"]],inputs:{pedido:"pedido",sala:"sala"},decls:13,vars:3,consts:[["color","oscuro"],["slot","start"],[3,"click"],["name","chevron-back-outline","slot","icon-only"],[1,"divider","light"],[1,"divider"],["class","carga",4,"ngIf"],[4,"ngIf"],[1,"carga"],[4,"ngFor","ngForOf"],["slot","start","animated","",2,"width","50px","height","50px"],["animated","",2,"width","50%","height","20px"],["animated","",2,"width","90%","height","20px"],["color","secondary"],["width","100%","height","100%","alt","",3,"src"],[1,"verdei"],["class","rojoi",4,"ngIf"],["side","end"],["color","danger",3,"click"],["name","trash-outline","slot","icon-only"],[1,"rojoi"],["color","primary"],["color","barra",3,"click"],["name","add-outline","slot","icon-only"]],template:function(t,e){1&t&&(o.Ob(0,"ion-header"),o.Ob(1,"ion-toolbar",0),o.Ob(2,"ion-buttons",1),o.Ob(3,"ion-button",2),o.Wb("click",function(){return e.cerrar()}),o.Mb(4,"ion-icon",3),o.Nb(),o.Nb(),o.Ob(5,"ion-title"),o.wc(6,"A\xf1adir Empleados al pedido"),o.Nb(),o.Nb(),o.Nb(),o.Ob(7,"ion-content"),o.Mb(8,"div",4),o.Mb(9,"div",5),o.vc(10,u,3,2,"div",6),o.vc(11,E,4,1,"ion-list",7),o.vc(12,x,4,1,"ion-list",7),o.Nb()),2&t&&(o.Ab(10),o.fc("ngIf",e.load),o.Ab(1),o.fc("ngIf",e.incluidos.length>0),o.Ab(1),o.fc("ngIf",e.empleados.length>0))},directives:[c.z,c.lb,c.k,c.j,c.A,c.jb,c.t,p.j,c.L,p.i,c.F,c.Z,c.K,c.G,c.J,c.f,c.I,c.H],styles:[".cen[_ngcontent-%COMP%]{max-width:350px;display:flex;justify-content:center;flex-direction:column;align-items:center}"]}),t})()}}]);