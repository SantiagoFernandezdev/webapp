(window.webpackJsonp=window.webpackJsonp||[]).push([[111],{oaNa:function(t,e,i){"use strict";i.r(e),i.d(e,"IVTcategoriasPageModule",function(){return C});var o=i("ofXK"),n=i("3Pt+"),a=i("TEn/"),r=i("tyNb"),s=i("mrSG"),c=i("SQQW"),l=i("fXoL"),b=i("fsfq"),d=i("5yQV"),g=i("fmoy");function m(t,e){1&t&&(l.Mb(0,"div",15),l.Kb(1,"img",16),l.Mb(2,"h3",17),l.rc(3,"No tiene categor\xedas registradas"),l.Lb(),l.Lb())}function h(t,e){1&t&&(l.Mb(0,"ion-item"),l.Kb(1,"ion-skeleton-text",20),l.Mb(2,"ion-label"),l.Kb(3,"ion-skeleton-text",21),l.Kb(4,"ion-skeleton-text",22),l.Lb(),l.Lb())}const u=function(){return[1,1,1,1,1]};function p(t,e){1&t&&(l.Mb(0,"div",18),l.Mb(1,"ion-list"),l.qc(2,h,5,0,"ion-item",19),l.Lb(),l.Lb()),2&t&&(l.zb(2),l.dc("ngForOf",l.gc(1,u)))}function f(t,e){if(1&t){const t=l.Nb();l.Mb(0,"ion-item-sliding"),l.Mb(1,"ion-item"),l.Mb(2,"ion-avatar",2),l.Kb(3,"img",23),l.Lb(),l.Mb(4,"ion-label"),l.rc(5),l.Kb(6,"br"),l.Lb(),l.Lb(),l.Mb(7,"ion-item-options",24),l.Mb(8,"ion-item-option",25),l.Ub("click",function(){l.lc(t);const i=e.$implicit,o=e.index;return l.Wb(2).editar(i,o)}),l.Kb(9,"ion-icon",26),l.Lb(),l.Mb(10,"ion-item-option",27),l.Ub("click",function(){l.lc(t);const i=e.$implicit,o=e.index;return l.Wb(2).eliminar(i,o)}),l.Kb(11,"ion-icon",28),l.Lb(),l.Lb(),l.Lb()}if(2&t){const t=e.$implicit;l.zb(5),l.tc(" ",t.nombre," ")}}function v(t,e){if(1&t&&(l.Mb(0,"ion-list"),l.qc(1,f,12,1,"ion-item-sliding",19),l.Lb()),2&t){const t=l.Wb();l.zb(1),l.dc("ngForOf",t.categorias)}}const M=[{path:"",component:(()=>{class t{constructor(t,e,i,o,n,a){this.modalCtrl=t,this.almacenamiento=e,this.ivtApi=i,this.toast=o,this.alertCtrl=n,this.activeRoute=a,this.categorias=[],this.load=!1}ngOnInit(){}ionViewWillEnter(){this.cargarCategorias()}refrescando(t){this.cargarCategorias().then(()=>{t.target.complete()}).catch(()=>t.target.complete())}cargarCategorias(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&this.ivtApi.leerCategoria(t.token,this.activeRoute.snapshot.paramMap.get("id")).subscribe(t=>{t.exe?this.categorias=t.response:this.toast.toastError("No se pudo cargar los datos, intentelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo cargar los datos, intentelo m\xe1s tarde")})})}modal(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:c.a,componentProps:{tipo:"categorias",inventario:this.activeRoute.snapshot.paramMap.get("id")}});yield t.present();const e=yield t.onWillDismiss();e.data&&e.data.exe&&this.cargarCategorias()})}editar(t,e){return Object(s.a)(this,void 0,void 0,function*(){const i=yield this.alertCtrl.create({header:"Editar Categor\xeda",inputs:[{type:"text",name:"nombre",placeholder:"Escriba el nombre de la categor\xeda",value:t.nombre}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Aceptar",handler:i=>Object(s.a)(this,void 0,void 0,function*(){const o=yield this.almacenamiento.obtenerToken();o&&this.ivtApi.editarCategoria(o.token,{nombre:i.nombre,_id:t._id}).subscribe(t=>{t.exe?(this.toast.toastExitoso("Categor\xeda editado!"),this.categorias[e].nombre=t.response.nombre):this.toast.toastError("No se pudo editar la categor\xeda, intentelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo editar la categor\xeda, intentelo m\xe1s tarde")})})}]});yield i.present()})}eliminar(t,e){return Object(s.a)(this,void 0,void 0,function*(){const i=yield this.almacenamiento.obtenerToken();i&&this.ivtApi.eliminarCategoria(i.token,t._id).subscribe(t=>{t.exe?(this.toast.toastExitoso("Categor\xeda eliminada!"),this.categorias.splice(e,1)):this.toast.toastError("No se pudo eliminar la categor\xeda, intentelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo eliminar la categor\xeda, intentelo m\xe1s tarde")})})}}return t.\u0275fac=function(e){return new(e||t)(l.Jb(a.ob),l.Jb(b.a),l.Jb(d.a),l.Jb(g.a),l.Jb(a.b),l.Jb(r.a))},t.\u0275cmp=l.Db({type:t,selectors:[["app-ivtcategorias"]],decls:18,vars:3,consts:[[1,"ion-no-border"],["color","success"],["slot","start"],["icon","chevron-back-outline","defaultHref","/central/menu/ivt-inicio"],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],["mode","ios","placeholder","Buscar Categor\xeda"],[1,"divider","light"],[1,"divider"],["class","cen",4,"ngIf"],["class","carga",4,"ngIf"],[4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],["color","success",3,"click"],["name","add-outline"],[1,"cen"],["src","/assets/Categorias.png","width","100px","alt",""],[1,"tituloGrande"],[1,"carga"],[4,"ngFor","ngForOf"],["slot","start","animated","",2,"width","50px","height","50px"],["animated","",2,"width","50%","height","20px"],["animated","",2,"width","90%","height","20px"],["src","/assets/Categorias.png"],["side","end"],["color","warning",3,"click"],["name","pencil-outline","slot","icon-only"],["color","danger",3,"click"],["name","trash-outline","slot","icon-only"]],template:function(t,e){1&t&&(l.Mb(0,"ion-header",0),l.Mb(1,"ion-toolbar",1),l.Mb(2,"ion-buttons",2),l.Kb(3,"ion-back-button",3),l.Lb(),l.Mb(4,"ion-title"),l.rc(5,"Categor\xedas"),l.Lb(),l.Lb(),l.Lb(),l.Mb(6,"ion-content"),l.Mb(7,"ion-refresher",4),l.Ub("ionRefresh",function(t){return e.refrescando(t)}),l.Kb(8,"ion-refresher-content",5),l.Lb(),l.Kb(9,"ion-searchbar",6),l.Kb(10,"div",7),l.Kb(11,"div",8),l.qc(12,m,4,0,"div",9),l.qc(13,p,3,2,"div",10),l.qc(14,v,2,1,"ion-list",11),l.Mb(15,"ion-fab",12),l.Mb(16,"ion-fab-button",13),l.Ub("click",function(){return e.modal()}),l.Kb(17,"ion-icon",14),l.Lb(),l.Lb(),l.Lb()),2&t&&(l.zb(12),l.dc("ngIf",0===e.categorias.length),l.zb(1),l.dc("ngIf",e.load),l.zb(1),l.dc("ngIf",e.categorias.length>0))},directives:[a.z,a.jb,a.k,a.g,a.h,a.hb,a.t,a.P,a.Q,a.T,a.wb,o.j,a.v,a.w,a.A,a.L,o.i,a.F,a.Y,a.K,a.J,a.f,a.I,a.H],styles:[".cen[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.tituloGrande[_ngcontent-%COMP%]{width:300px;text-align:center}.verdei[_ngcontent-%COMP%]{color:#1e8c4a}ion-item-divider[_ngcontent-%COMP%]{border:0!important;margin-bottom:15px}.rojoi[_ngcontent-%COMP%]{color:#c1302c}ion-item-sliding[_ngcontent-%COMP%]:nth-child(odd)   ion-item[_ngcontent-%COMP%]{--background:var(--ion-color-light)!important}"]}),t})()}];let x=(()=>{class t{}return t.\u0275mod=l.Hb({type:t}),t.\u0275inj=l.Gb({factory:function(e){return new(e||t)},imports:[[r.i.forChild(M)],r.i]}),t})(),C=(()=>{class t{}return t.\u0275mod=l.Hb({type:t}),t.\u0275inj=l.Gb({factory:function(e){return new(e||t)},imports:[[o.b,n.e,a.kb,x]]}),t})()}}]);