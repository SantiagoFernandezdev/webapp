(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{HavB:function(t,e,s){"use strict";s.d(e,"a",function(){return u});var i=s("AytR"),a=s("tk/3"),n=s("coGc"),o=s("lJxs"),r=s("IzEk"),c=s("MtjB"),h=s("JIr8"),d=s("PqYM"),l=s("Cfvw"),b=s("fXoL"),p=s("tyNb"),f=s("B7Rs");let u=(()=>{class t{constructor(t,e,s){this.http=t,this.router=e,this.MmyTransfer=s}hanflerError(t){return t.pipe(Object(n.a)(()=>Object(d.a)(3e3)),Object(o.a)(t=>{if(console.log("Entramos a intentos"),t instanceof ErrorEvent)throw new Error("Error de Red");if(404===t.status)throw new Error(" P\xe1gina no encontrada");if(401===t.status)throw new Error(" No tiene permisos ")}),Object(r.a)(3))}crearPedido(t,e){const s={headers:new a.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/crear/`,e,s).pipe(Object(c.a)(t=>this.hanflerError(t)))}misPedido(t){const e={headers:new a.c({"x-token":t})};return this.http.get(`${i.a}/pedidos/lista/`,e).pipe(Object(c.a)(t=>this.hanflerError(t)))}misChats(t,e){const s={headers:new a.c({"x-token":t})};return this.http.post(`${i.a}/chats/lista/`,e,s).pipe(Object(c.a)(t=>this.hanflerError(t)))}misPedidoUsuario(t,e){const s={headers:new a.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/lista/`,e,s).pipe(Object(c.a)(t=>this.hanflerError(t)))}misSalas(t){const e={headers:new a.c({"x-token":t})};return this.http.get(`${i.a}/ticket/salas`,e).pipe(Object(c.a)(t=>this.hanflerError(t)))}mensajes(t,e){const s={headers:new a.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/chat`,e,s).pipe(Object(c.a)(t=>this.hanflerError(t)))}traermensajesNoVistos(t,e){const s={headers:new a.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/chat/vistos`,e,s).pipe(Object(c.a)(t=>this.hanflerError(t)))}marcarvisto(t,e){const s={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/pedidos/chat/vistos`,e,s).pipe(Object(c.a)(t=>this.hanflerError(t)))}infoPedido(t,e){const s={headers:new a.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/info`,e,s).pipe(Object(c.a)(t=>this.hanflerError(t)))}infoPedidoPut(t,e){const s={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/pedidos/info`,e,s).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearEstados(t,e){const s={headers:new a.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/estados`,e,s).pipe(Object(c.a)(t=>this.hanflerError(t)))}consultarEstados(t,e){const s={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/pedidos/estados`,e,s).pipe(Object(c.a)(t=>this.hanflerError(t)))}consultarChat(t,e){const s={headers:new a.c({"x-token":t})};return this.http.post(`${i.a}/unico/consultar/chat`,e,s).pipe(Object(c.a)(t=>this.hanflerError(t)))}consultarChatFotos(t,e){const s={headers:new a.c({"x-token":t})};return this.http.post(`${i.a}/unico/consultar/chat/fotos`,e,s).pipe(Object(c.a)(t=>this.hanflerError(t)))}consultarSala(t,e){const s={headers:new a.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/consultar/chat`,e,s).pipe(Object(c.a)(t=>this.hanflerError(t)))}consultarMapa(t,e){const s={headers:new a.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/consultar/mapa`,e,s).pipe(Object(c.a)(t=>this.hanflerError(t)))}consultarMapaUnico(t,e){const s={headers:new a.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/consultar/mapa/unico`,e,s).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearMapa(t,e){const s={headers:new a.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/crear/mapa`,e,s).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarMapa(t,e){const s={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/pedidos/editar/mapa`,e,s).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarMapaInfo(t,e){const s={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/pedidos/editar/mapa/info`,e,s).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarMapaInfoD(t,e){const s={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/pedidos/editar/mapa/infod`,e,s).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarPedido(t,e){const s={headers:new a.c({"x-token":t})};return this.http.post(`${i.a}/pedidos/editar`,e,s).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarChat(t,e){const s={headers:new a.c({"x-token":t})};return this.http.post(`${i.a}/chat/editar`,e,s).pipe(Object(c.a)(t=>this.hanflerError(t)))}subirArchivosChat(t,e,s,a,n,o,r){console.log("archivo",s);const c={fileKey:"archivo",fileName:o,mimeType:r,httpMethod:"PUT",headers:{"x-token":t,"x-sala":e,"x-final":a,"x-cont":n}},d=this.MmyTransfer.create();return Object(l.a)(d.upload(s,`${i.a}/pedido/upload`,c)).pipe(Object(h.a)(t=>{throw new Error(s)}))}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(a.a),b.Qb(p.g),b.Qb(f.a))},t.\u0275prov=b.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},SpuA:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("wd/R"),a=s("fXoL");let n=(()=>{class t{transform(t){console.log(t,"fechin");let e=i.utc(t).toDate();return i(e).format("dddd, DD MMMM YYYY h:mm:a")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=a.Ib({name:"cambioUTC",type:t,pure:!0}),t})()},wYDu:function(t,e,s){"use strict";s.r(e),s.d(e,"SalasChatPageModule",function(){return F});var i=s("ofXK"),a=s("3Pt+"),n=s("TEn/"),o=s("tyNb"),r=s("mrSG"),c=s("HDdC"),h=s("R0Ic"),d=s("fXoL");let l=(()=>{class t{constructor(t,e){this.router=t,this.popover=e}ngOnInit(){}ver(){this.router.navigate(["/central/chats/modal-chat",this.id,"ver"]),this.popover.dismiss()}abrir(){this.router.navigate(["/central/chats/modal-chat",this.id]),this.popover.dismiss()}}return t.\u0275fac=function(e){return new(e||t)(d.Jb(o.g),d.Jb(n.sb))},t.\u0275cmp=d.Db({type:t,selectors:[["app-detalles"]],inputs:{id:"id"},decls:9,vars:0,consts:[[3,"click"],["slot","start","name","image-outline","color","oscuro"],["slot","start","name","add-outline","color","barra"]],template:function(t,e){1&t&&(d.Mb(0,"ion-list"),d.Mb(1,"ion-item",0),d.Ub("click",function(){return e.ver()}),d.Kb(2,"ion-icon",1),d.Mb(3,"ion-label"),d.rc(4,"Ver Fotos"),d.Lb(),d.Lb(),d.Mb(5,"ion-item",0),d.Ub("click",function(){return e.abrir()}),d.Kb(6,"ion-icon",2),d.Mb(7,"ion-label"),d.rc(8,"A\xf1adir Fotos"),d.Lb(),d.Lb(),d.Lb())},directives:[n.L,n.F,n.A,n.K],styles:[""]}),t})();var b=s("fsfq"),p=s("fmoy"),f=s("7JkF"),u=s("HavB"),m=s("cb8P"),g=s("SpuA");let v=(()=>{class t{transform(t,e,s){const i=[];return 1===s?e.forEach(e=>{let s=t.filter(t=>t._id===e);s.length>0&&i.push(s[0].nombrecompleto)}):t.forEach(t=>{0===e.filter(e=>e===t._id).length&&i.push(t.nombrecompleto)}),i}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=d.Ib({name:"fchat",type:t,pure:!0}),t})();const j=["contenido"];function M(t,e){if(1&t&&(d.Mb(0,"span",5),d.rc(1),d.Lb()),2&t){const t=d.Wb();d.zb(1),d.sc(t.sala.tipo)}}function k(t,e){if(1&t&&(d.Mb(0,"div"),d.rc(1),d.Lb()),2&t){const t=d.Wb();d.zb(1),d.sc(t.sala.creador.nombrecompleto)}}function w(t,e){if(1&t&&(d.Mb(0,"div"),d.rc(1),d.Lb()),2&t){const t=d.Wb();d.zb(1),d.sc(t.sala.taller.nombrecompleto)}}function x(t,e){if(1&t){const t=d.Nb();d.Mb(0,"ion-avatar",6),d.Ub("click",function(e){return d.lc(t),d.Wb().abrir(e)}),d.Kb(1,"img",7),d.Lb()}if(2&t){const t=d.Wb();d.zb(1),d.ec("src",t.sala.creador.imagen[0].path,d.mc)}}function O(t,e){if(1&t){const t=d.Nb();d.Mb(0,"ion-avatar",6),d.Ub("click",function(e){return d.lc(t),d.Wb().abrir(e)}),d.Kb(1,"img",7),d.Lb()}if(2&t){const t=d.Wb();d.zb(1),d.ec("src",t.sala.taller.imagen[0].path,d.mc)}}function _(t,e){if(1&t){const t=d.Nb();d.Mb(0,"ion-infinite-scroll",14,15),d.Ub("ionInfinite",function(e){return d.lc(t),d.Wb(2).cargaMensajesLimite(e)}),d.Kb(2,"ion-infinite-scroll-content",16),d.Lb()}}function E(t,e){if(1&t&&(d.Mb(0,"div",26),d.rc(1),d.Lb()),2&t){const t=d.Wb(2).$implicit;d.zb(1),d.tc(" ",t.creador.nombrecompleto," ")}}function C(t,e){1&t&&(d.Mb(0,"div",27),d.rc(1," T\xfa "),d.Kb(2,"br"),d.Lb())}function P(t,e){1&t&&d.Kb(0,"div",28)}function L(t,e){if(1&t&&(d.Mb(0,"div",34),d.rc(1),d.Lb()),2&t){const t=e.$implicit;d.zb(1),d.tc(" - ",t," ")}}function I(t,e){if(1&t&&(d.Mb(0,"div",34),d.rc(1),d.Lb()),2&t){const t=e.$implicit;d.zb(1),d.tc(" - ",t," ")}}function y(t,e){if(1&t&&(d.Mb(0,"div",29),d.Mb(1,"div",30),d.rc(2),d.Xb(3,"cambioUTC"),d.Lb(),d.Kb(4,"br"),d.Mb(5,"strong",31),d.rc(6,"Visto por: "),d.Lb(),d.Kb(7,"br"),d.qc(8,L,2,1,"div",32),d.Xb(9,"fchat"),d.Kb(10,"br"),d.Mb(11,"strong",33),d.rc(12,"No lo ha visto: "),d.Lb(),d.Kb(13,"br"),d.qc(14,I,2,1,"div",32),d.Xb(15,"fchat"),d.Lb()),2&t){const t=d.Wb(2).$implicit;d.zb(2),d.sc(d.Yb(3,3,t.fecha)),d.zb(6),d.dc("ngForOf",d.ac(9,5,t.accesos,t.vistos,2)),d.zb(6),d.dc("ngForOf",d.ac(15,9,t.accesos,t.vistos,1))}}function z(t,e){if(1&t&&(d.Mb(0,"div",20),d.qc(1,E,2,1,"div",21),d.qc(2,C,3,0,"div",22),d.Mb(3,"div",23),d.rc(4),d.Lb(),d.qc(5,P,1,0,"div",24),d.qc(6,y,16,13,"div",25),d.Lb()),2&t){const t=d.Wb().$implicit,e=d.Wb(2);d.zb(1),d.dc("ngIf",t.creador._id!==e.id),d.zb(1),d.dc("ngIf",t.creador._id===e.id),d.zb(2),d.tc(" ",t.mensaje," "),d.zb(1),d.dc("ngIf",0===t.vistos.length&&t.creador._id===e.id),d.zb(1),d.dc("ngIf",t.vs)}}function $(t,e){1&t&&(d.Mb(0,"div",35),d.Mb(1,"div"),d.rc(2," Mensajes sin leer "),d.Lb(),d.Lb())}function N(t,e){if(1&t){const t=d.Nb();d.Mb(0,"div",17),d.Ub("click",function(){d.lc(t);const s=e.$implicit,i=e.index;return d.Wb(2).ver(s,i)}),d.qc(1,z,7,5,"div",18),d.qc(2,$,3,0,"div",19),d.Lb()}if(2&t){const t=e.$implicit,s=d.Wb(2);d.Bb("right",t.creador._id===s.id)("left",t.creador._id!==s.id),d.zb(1),d.dc("ngIf",!t.ms),d.zb(1),d.dc("ngIf",t.ms)}}function W(t,e){if(1&t){const t=d.Nb();d.Mb(0,"ion-content",null,8),d.Mb(2,"ion-refresher",9),d.Ub("ionRefresh",function(e){return d.lc(t),d.Wb().refrescando(e)}),d.Kb(3,"ion-refresher-content",10),d.Lb(),d.qc(4,_,3,0,"ion-infinite-scroll",11),d.Mb(5,"div",12),d.qc(6,N,3,6,"div",13),d.Lb(),d.Lb()}if(2&t){const t=d.Wb();d.zb(4),d.dc("ngIf",t.carga),d.zb(1),d.dc("@escribiendo",t.escribiendo?"activo":"noactivo"),d.zb(1),d.dc("ngForOf",t.mensajes)}}function T(t,e){if(1&t){const t=d.Nb();d.Mb(0,"ion-footer"),d.Mb(1,"ion-toolbar"),d.Mb(2,"div",36),d.Mb(3,"ion-textarea",37),d.Ub("ionChange",function(e){return d.lc(t),d.Wb().escribir(e)})("ngModelChange",function(e){return d.lc(t),d.Wb().mensaje=e}),d.Lb(),d.Mb(4,"ion-buttons"),d.Mb(5,"ion-button",38),d.Ub("click",function(){return d.lc(t),d.Wb().enviarmensaje()}),d.Kb(6,"ion-icon",39),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Lb()}if(2&t){const t=d.Wb();d.zb(3),d.dc("ngModel",t.mensaje)}}const q=[{path:"",component:(()=>{class t{constructor(t,e,s,i,a,n,o,c,h){this.almacenamiento=t,this.router=e,this.toast=s,this.socket=i,this.apiPedidos=a,this.cargarElementos=n,this.plt=o,this.modal=c,this.popover=h,this.mensaje="",this.mensajes=[],this.desde=0,this.carga=!0,this.escribiendo=!1,this.frenar=!1,this.parar=!1,this.cargamsg=!1,this.escucharEnvios().subscribe(t=>Object(r.a)(this,void 0,void 0,function*(){if(console.log(t),!this.parar&&t.exe){this.mensaje="",t.resp.ms=!1,t.resp.vs=!1,this.mensajes.push(t.resp);const e=yield this.almacenamiento.obtenerToken();e&&(console.log("entrando",e),this.contenido.scrollToBottom().then(()=>{}).catch(()=>{}),t.resp.creador._id!==e._id&&(console.log("marcar",t,this.parar),this.parar||this.marcar(t.resp._id,this.mensajes.length-1)))}})),this.escucharVistos().subscribe(t=>{console.log(t,"vistos"),this.parar||t.exe&&this.mensajes.map(e=>{e._id===t.id&&(e.vistos=e.vistos.filter(e=>e!==t.usuario))})}),this.escucharEscritoss().subscribe(t=>{console.log("escribiendo..."),t.exe&&(this.escribiendo=!0,setTimeout(()=>{this.escribiendo=!1},1e3))}),this.cargarElementos.$cargarRed.subscribe(t=>Object(r.a)(this,void 0,void 0,function*(){"none"===t&&this.almacenamiento.eleminarSala().then(()=>{this.toast.Especial("Perdiste la conexi\xf3n, verifica la red de internet e intenta nuevamente"),this.router.navigate(["/central/chats"]),this.socket.emit("salidachat",{id:this.sala._id})}).catch(()=>{this.toast.Especial("Perdiste la conexi\xf3n, verifica la red de internet e intenta nuevamente"),this.router.navigate(["/central/chats"]),this.socket.emit("salidachat",{id:this.sala._id})})})),this.plt.resume.subscribe(t=>Object(r.a)(this,void 0,void 0,function*(){this.parar||this.contenido.scrollToBottom().then(()=>{this.arranca()}).catch(()=>{this.arranca()})}))}ngOnInit(){}ionViewWillEnter(){this.parar=!1,this.arranca()}arranca(){this.mensajes=[],this.almacenamiento.obtenerToken().then(t=>{this.id=t._id,this.almacenamiento.obtenerSala().then(t=>{t.length>0?(console.log(t,"info"),this.sala=t[0],this.sala2=t[0],this.socket.emit("iniciochat",{id:this.sala._id}),this.sala.creador.imagen[0].path="notfound.png"===this.sala.creador.imagen[0].path?"/assets/notfound.png":this.sala.creador.imagen[0].path.includes("https://www.motocaliapp.com")?this.sala.creador.imagen[0].path:"https://www.motocaliapp.com/"+this.sala.creador.imagen[0].path,this.sala.taller.imagen[0].path="notfound.png"===this.sala.taller.imagen[0].path?"/assets/notfound.png":this.sala.taller.imagen[0].path.includes("https://www.motocaliapp.com")?this.sala.taller.imagen[0].path:"https://www.motocaliapp.com/"+this.sala.taller.imagen[0].path,this.cargarmensajesVistos()):this.router.navigate(["/central/chats"])})})}refrescando(t){t.detail.complete()}cargaMensajesLimite(t){return Object(r.a)(this,void 0,void 0,function*(){this.desde=this.desde+15;const e=yield this.almacenamiento.obtenerToken();e&&this.apiPedidos.traermensajesNoVistos(e.token,{idsala:this.sala._id,desde:this.desde,accesos:this.sala.accesos}).subscribe(e=>{console.log(e),e.exe?e.response.length>0?(t.target.complete(),e.response.forEach(t=>{t.ms=!1,t.vs=!1,this.mensajes.unshift(t)})):(t.target.disabled=!0,this.desde=0):this.toast.toastError("No se pudo traer los mensajes, int\xe9ntelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo traer los mensajes, int\xe9ntelo m\xe1s tarde")})})}cargarmensajes(){return Object(r.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&this.apiPedidos.mensajes(t.token,{idsala:this.sala._id,accesos:this.sala.accesos}).subscribe(e=>{console.log(e),e.exe?(e.response.length>0&&this.mensajes.push({ms:!0,creador:{_id:""}}),e.response.forEach(e=>{e.ms=!1,e.vs=!1,this.mensajes.push(e),this.marcar(e._id,this.mensajes.length-1),this.socket.emit("vistoChat",{idsala:this.sala._id,usuario:t._id,id:e._id})}),this.cargamsg=!0):this.toast.toastError("No se pudo traer los mensajes, int\xe9ntelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo traer los mensajes, int\xe9ntelo m\xe1s tarde")})})}cargarmensajesVistos(){return Object(r.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&this.apiPedidos.traermensajesNoVistos(t.token,{idsala:this.sala._id,desde:this.desde}).subscribe(t=>{console.log(t),t.exe?(t.response.forEach(t=>{t.ms=!1,this.mensajes.unshift(t)}),this.contenido.scrollToBottom().then(()=>{this.cargarmensajes()}).catch(()=>{this.cargarmensajes()})):this.toast.toastError("No se pudo traer los mensajes, int\xe9ntelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo traer los mensajes, int\xe9ntelo m\xe1s tarde")})})}marcar(t,e){return Object(r.a)(this,void 0,void 0,function*(){const s=yield this.almacenamiento.obtenerToken();s&&this.apiPedidos.marcarvisto(s.token,{id:t}).subscribe(t=>{console.log(t,"MARCADO"),t.exe?(this.mensajes[e].vistos=this.mensajes[e].vistos.filter(t=>(console.log(t,"ITEMMMM",this.mensajes[e]),t!==s._id)),this.socket.emit("vistoChat",{idsala:this.sala._id,usuario:s._id,id:this.mensajes[e]._id})):this.toast.toastError("No se marc\xf3 en visto el mensaje, int\xe9ntelo m\xe1s tarde")},t=>{this.toast.toastError("No se marc\xf3 en visto el mensaje, int\xe9ntelo m\xe1s tarde")})})}escribir(t){this.escribiendo=!1,this.mensaje=t.detail.value,this.socket.emit("escribiendoChat",{idsala:this.sala._id})}escucharEnvios(){if(!this.frenar)return new c.a(t=>{this.socket.on("mensajeChat",e=>{t.next(e)})})}escucharEscritoss(){if(!this.frenar)return new c.a(t=>{this.socket.on("escribiendoChat",e=>{t.next(e)})})}escucharVistos(){if(!this.frenar)return new c.a(t=>{this.socket.on("vistoChat",e=>{t.next(e)})})}enviarmensaje(){if(""!==this.mensaje){let t="",e="";this.id!==this.sala.creador._id?(t=this.sala.creador._id,e=this.sala.creador.nombreusuario):(t=this.sala.taller._id,e=this.sala.taller.nombreusuario),console.log(this.sala.accesos),this.socket.emit("mensajeChat",{idsala:this.sala._id,idenvio:t,emisor:e,id:this.id,msg:this.mensaje,sala:this.sala2,accesos:this.sala.accesos,emite:this.id})}}cerrar(){}ver(t,e){t.creador._id===this.id&&(this.mensajes[e].vs=!this.mensajes[e].vs)}abrir(t){return Object(r.a)(this,void 0,void 0,function*(){this.parar=!0;const e=yield this.popover.create({component:l,componentProps:{id:this.sala._id},event:t});return yield e.present()})}ionViewWillLeave(){this.parar=!0,this.socket.emit("salidachat",{id:this.sala._id}),this.almacenamiento.eleminarSala().then(()=>{this.socket.emit("salidachat",{id:this.sala._id})}).catch(()=>{this.socket.emit("salidachat",{id:this.sala._id})})}}return t.\u0275fac=function(e){return new(e||t)(d.Jb(b.a),d.Jb(o.g),d.Jb(p.a),d.Jb(f.a),d.Jb(u.a),d.Jb(m.a),d.Jb(n.rb),d.Jb(n.ob),d.Jb(n.sb))},t.\u0275cmp=d.Db({type:t,selectors:[["app-salas-chat"]],viewQuery:function(t,e){if(1&t&&d.vc(j,1),2&t){let t;d.kc(t=d.Vb())&&(e.contenido=t.first)}},decls:13,vars:7,consts:[["color","oscuro"],["slot","start","icon","chevron-back-outline","defaultHref","/central/chats"],["class","tipo",4,"ngIf"],[4,"ngIf"],["slot","end",3,"click",4,"ngIf"],[1,"tipo"],["slot","end",3,"click"],["alt","",3,"src"],["contenido",""],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],["threshold","100px","position","top",3,"ionInfinite",4,"ngIf"],[1,"chats"],["class","chat",3,"right","left","click",4,"ngFor","ngForOf"],["threshold","100px","position","top",3,"ionInfinite"],["inifinito",""],["loadingSpinner","bubbles","loadingText","Cargando Mensajes..."],[1,"chat",3,"click"],["class","mensaje",4,"ngIf"],["class","mensaje av",4,"ngIf"],[1,"mensaje"],["class","emisor",4,"ngIf"],["class","",4,"ngIf"],[1,"texto"],["class","visto",4,"ngIf"],["class","vistos",4,"ngIf"],[1,"emisor"],[1,""],[1,"visto"],[1,"vistos"],[1,"fc"],[1,"vistopor"],["class","usuario",4,"ngFor","ngForOf"],[1,"novistopor"],[1,"usuario"],[1,"mensaje","av"],[1,"barra"],["rows","1","placeholder","Escriba el mensaje",3,"ngModel","ionChange","ngModelChange"],[3,"click"],["name","send","slot","icon-only"]],template:function(t,e){1&t&&(d.Mb(0,"ion-header"),d.Mb(1,"ion-toolbar",0),d.Kb(2,"ion-back-button",1),d.Mb(3,"ion-title"),d.rc(4,"Chat "),d.qc(5,M,2,1,"span",2),d.Kb(6,"br"),d.qc(7,k,2,1,"div",3),d.qc(8,w,2,1,"div",3),d.Lb(),d.qc(9,x,2,1,"ion-avatar",4),d.qc(10,O,2,1,"ion-avatar",4),d.Lb(),d.Lb(),d.qc(11,W,7,3,"ion-content",3),d.qc(12,T,7,1,"ion-footer",3)),2&t&&(d.zb(5),d.dc("ngIf",e.sala),d.zb(2),d.dc("ngIf",e.sala&&e.sala.creador._id!==e.id),d.zb(1),d.dc("ngIf",e.sala&&e.sala.creador._id===e.id),d.zb(1),d.dc("ngIf",e.sala&&e.sala.creador._id!==e.id),d.zb(1),d.dc("ngIf",e.sala&&e.sala.creador._id===e.id),d.zb(1),d.dc("ngIf",e.carga),d.zb(1),d.dc("ngIf",e.cargamsg))},directives:[n.z,n.jb,n.g,n.h,n.hb,i.j,n.f,n.t,n.P,n.Q,i.i,n.C,n.D,n.x,n.fb,n.wb,a.i,a.k,n.k,n.j,n.A],pipes:[g.a,v],styles:[".barra[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center}.barra[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{width:80%;border-radius:10px;padding:10px;background-color:#f1f1ff;border:1px solid rgba(0,0,0,.3)}.tipo[_ngcontent-%COMP%]{color:#e3b61c}.chats[_ngcontent-%COMP%]{padding:10px 5px}.chat[_ngcontent-%COMP%]{width:100%}.mensaje[_ngcontent-%COMP%]{width:80%;padding:15px 10px;border-radius:10px 0 10px;background-color:#f1f1ff;margin-top:10px;position:relative}.av[_ngcontent-%COMP%]{width:100%;border-radius:10px;margin:10px auto;background-color:#fbe9aa;text-align:center;font-size:14px;padding:5px;color:#333}.fc[_ngcontent-%COMP%]{font-size:12px;opacity:.5}.visto[_ngcontent-%COMP%]{position:absolute;bottom:5px;right:5px;width:10px;height:10px;background-color:#4b8bf4;border-radius:100%}.right[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]   .mensaje[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.right[_ngcontent-%COMP%]   .mensaje[_ngcontent-%COMP%]{background-color:#3b4b54;color:#f1f1ff;flex-direction:column}.left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]   .mensaje[_ngcontent-%COMP%]{font-size:14px;font-weight:300}.left[_ngcontent-%COMP%]   .emisor[_ngcontent-%COMP%]{font-weight:700;color:#819830!important;margin-bottom:5px}.vistopor[_ngcontent-%COMP%]{color:#008dd4}.novistopor[_ngcontent-%COMP%]{color:#e53935}.usuario[_ngcontent-%COMP%]{color:#eee}"],data:{animation:[Object(h.l)("escribiendo",[Object(h.i)("activo",Object(h.j)({opacity:1,background:"#BDC3C6"})),Object(h.i)("noactivo",Object(h.j)({opacity:1,background:"#ffffff"})),Object(h.k)("activo <=> noactivo",[Object(h.e)("300ms")])])]}}),t})()}];let K=(()=>{class t{}return t.\u0275mod=d.Hb({type:t}),t.\u0275inj=d.Gb({factory:function(e){return new(e||t)},imports:[[o.i.forChild(q)],o.i]}),t})();var J=s("iTUp"),U=s("zon2");let F=(()=>{class t{}return t.\u0275mod=d.Hb({type:t}),t.\u0275inj=d.Gb({factory:function(e){return new(e||t)},imports:[[i.b,a.e,n.kb,K,J.a,U.a]]}),t})()}}]);