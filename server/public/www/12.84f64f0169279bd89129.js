(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"5yQV":function(t,e,o){"use strict";o.d(e,"a",function(){return b});var i=o("AytR"),a=o("tk/3"),r=o("coGc"),n=o("lJxs"),s=o("IzEk"),c=o("MtjB"),d=o("PqYM"),l=o("fXoL");let b=(()=>{class t{constructor(t){this.http=t}hanflerError(t){return t.pipe(Object(r.a)(()=>Object(d.a)(3e3)),Object(n.a)(t=>{if(console.log("Entramos a intentos"),t instanceof ErrorEvent)throw new Error("Error de Red");if(404===t.status)throw new Error(" P\xe1gina no encontrada")}),Object(s.a)(3))}crearInventario(t,e){const o={headers:new a.c({"x-token":t})};return this.http.post(`${i.a}/ivt/tipo/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}actualizarInventario(t,e){const o={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/ivt/cierre/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerInventarios(t){const e={headers:new a.c({"x-token":t})};return this.http.get(`${i.a}/ivt/tipo/`,e).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerInventario(t,e){const o={headers:new a.c({"x-token":t,"x-id":e})};return this.http.get(`${i.a}/ivt/tipo/uno`,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarAcceso(t,e){const o={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/ivt/tipo/accesos/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}BuscarUsuarios(t,e){const o={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/empleados/buscar/`,{patron:e},o).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearEmpleado(t,e){const o={headers:new a.c({"x-token":t})};return this.http.post(`${i.a}/empleados/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarEmpleado(t,e){const o={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/empleados/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerEmpleados(t){const e={headers:new a.c({"x-token":t})};return this.http.get(`${i.a}/empleados/`,e).pipe(Object(c.a)(t=>this.hanflerError(t)))}eliminarEmpleados(t,e){const o={headers:new a.c({"x-token":t,"x-id":e})};return this.http.delete(`${i.a}/empleados/`,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearProveedor(t,e){const o={headers:new a.c({"x-token":t})};return this.http.post(`${i.a}/ivt/proveedores/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarProveedor(t,e){const o={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/ivt/proveedores/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}eliminarProveedor(t,e){const o={headers:new a.c({"x-token":t,"x-id":e})};return this.http.delete(`${i.a}/ivt/proveedores/`,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerProveedor(t,e){const o={headers:new a.c({"x-token":t,"x-ivt":e})};return this.http.get(`${i.a}/ivt/proveedores/`,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearCategoria(t,e){const o={headers:new a.c({"x-token":t})};return this.http.post(`${i.a}/ivt/categorias/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarCategoria(t,e){const o={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/ivt/categorias/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}eliminarCategoria(t,e){const o={headers:new a.c({"x-token":t,"x-id":e})};return this.http.delete(`${i.a}/ivt/categorias/`,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerCategoria(t,e){const o={headers:new a.c({"x-token":t,"x-ivt":e})};return this.http.get(`${i.a}/ivt/categorias/`,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearProducto(t,e){const o={headers:new a.c({"x-token":t})};return this.http.post(`${i.a}/ivt/productos/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}editarProducto(t,e){const o={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/ivt/productos/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}eliminarProducto(t,e){const o={headers:new a.c({"x-token":t,"x-id":e})};return this.http.delete(`${i.a}/ivt/productos/`,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerProducto(t,e){const o={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/ivt/productos/filtro/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerProductoEstadistica(t,e){const o={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/ivt/productos/filtro/estadistica/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerProductosPorInventario(t,e){const o={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/ivt/productos/buscarivt/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}buscarProducto(t,e){const o={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/ivt/productos/buscar`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearEntrada(t,e){const o={headers:new a.c({"x-token":t})};return this.http.post(`${i.a}/ivt/entradas/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerEntrada(t,e){const o={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/ivt/entradas/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}filtrarEntradas(t,e){const o={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/ivt/entradas/buscar/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}filtrarEntradasPatron(t,e){const o={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/ivt/entradas/buscar/patron/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}crearSalida(t,e){const o={headers:new a.c({"x-token":t})};return this.http.post(`${i.a}/ivt/salidas/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerSalida(t,e){const o={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/ivt/salidas/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}filtrarSalidas(t,e){const o={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/ivt/salidas/buscar/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}filtrarSalidasPatron(t,e){const o={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/ivt/salidas/buscar/patron/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}CargarInventarios(t,e){const o={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/ivt/tipo/almacen/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}CierresInventario(t,e){const o={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/ivt/cierre/buscar/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}MovCantidades(t,e){const o={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/ivt/mov/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}MovCantidades2(t,e){const o={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/ivt/mov/salidas/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerMovmientos(t,e){const o={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/ivt/movimientos/filtro/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerAgotados(t,e){const o={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/ivt/productos/agotados/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}leerProximos(t,e){const o={headers:new a.c({"x-token":t})};return this.http.put(`${i.a}/ivt/productos/proximos/`,e,o).pipe(Object(c.a)(t=>this.hanflerError(t)))}}return t.\u0275fac=function(e){return new(e||t)(l.Qb(a.a))},t.\u0275prov=l.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"7cAv":function(t,e,o){"use strict";o.r(e),o.d(e,"HojaPageModule",function(){return V});var i=o("ofXK"),a=o("3Pt+"),r=o("TEn/"),n=o("tyNb"),s=o("mrSG"),c=o("fXoL"),d=o("fsfq"),l=o("5yQV"),b=o("AQLj"),h=o("fmoy");function p(t,e){if(1&t){const t=c.Nb();c.Mb(0,"ion-item",3),c.Ub("click",function(){c.lc(t);const o=e.$implicit;return c.Wb(2).agregar(o)}),c.Mb(1,"ion-avatar",8),c.Kb(2,"img",9),c.Lb(),c.Mb(3,"ion-label"),c.Mb(4,"strong"),c.rc(5),c.Lb(),c.Kb(6,"br"),c.rc(7),c.Lb(),c.Lb()}if(2&t){const t=e.$implicit;c.zb(2),c.dc("src",t.imagen,c.mc),c.zb(3),c.sc(t.nombrecompleto),c.zb(2),c.tc(" @",t.nombreusuario," ")}}function u(t,e){if(1&t&&(c.Mb(0,"ion-list"),c.qc(1,p,8,3,"ion-item",7),c.Lb()),2&t){const t=c.Wb();c.zb(1),c.dc("ngForOf",t.buscados)}}let m=(()=>{class t{constructor(t,e,o,i,a,r,n){this.almacenamiento=t,this.modal=e,this.router=o,this.IVTapi=i,this.alertCtrl=a,this.hojaApi=r,this.toast=n,this.buscados=[]}ngOnInit(){}ionViewWillEnter(){console.log(this.id)}buscarEmpleados(t){return Object(s.a)(this,void 0,void 0,function*(){const e=yield this.almacenamiento.obtenerToken();e&&""!==t.detail.value?this.IVTapi.BuscarUsuarios(e.token,t.detail.value).subscribe(t=>{t.exe&&(t.response.forEach(t=>{t.imagen=t.imagen.length>0?`https://motocaliapp.com/19927613410/${t.imagen[0].path}`:"/assets/notfound.png"}),this.buscados=t.response)}):this.buscados=[]})}agregar(t){return Object(s.a)(this,void 0,void 0,function*(){const e=yield this.alertCtrl.create({header:"Atenci\xf3n!",message:"\xbfEstas seguro asociar a "+t.nombrecompleto+" para esta hoja de vida ?",buttons:[{text:"No quiero",cssClass:"cancelarAlerta",role:"cancel",handler:()=>{}},{text:"Aceptar",cssClass:"botonalerta",handler:()=>Object(s.a)(this,void 0,void 0,function*(){const e=yield this.almacenamiento.obtenerToken();e&&this.hojaApi.asociar(e.token,{id:this.id,usuario:t._id}).subscribe(t=>Object(s.a)(this,void 0,void 0,function*(){console.log(t),t.exe?(this.toast.toastExitoso("Usuario Asociado"),this.modal.dismiss({exe:!0})):this.toast.toastError("No se pudo asociar el usuario la hoja de vida, int\xe9ntelo m\xe1s tarde")}),t=>{this.toast.toastError("No se pudo asociar el usuario la hoja de vida, int\xe9ntelo m\xe1s tarde")})})}]});yield e.present()})}cerrar(){this.modal.dismiss()}}return t.\u0275fac=function(e){return new(e||t)(c.Jb(d.a),c.Jb(r.qb),c.Jb(n.g),c.Jb(l.a),c.Jb(r.b),c.Jb(b.a),c.Jb(h.a))},t.\u0275cmp=c.Db({type:t,selectors:[["app-buscar-usuarios"]],inputs:{id:"id"},decls:10,vars:1,consts:[[1,"ion-no-border"],["color","oscuro"],["slot","end"],[3,"click"],["name","close-outline","slot","icon-only"],["mode","ios","placeholder","Buscar Usuario",3,"ionChange"],[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],["slot","start"],["width","100%","height","100%","alt","",3,"src"]],template:function(t,e){1&t&&(c.Mb(0,"ion-header",0),c.Mb(1,"ion-toolbar",1),c.Mb(2,"ion-title"),c.rc(3,"Asociar usuario a la hoja de vida"),c.Lb(),c.Mb(4,"ion-buttons",2),c.Mb(5,"ion-button",3),c.Ub("click",function(){return e.cerrar()}),c.Kb(6,"ion-icon",4),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Mb(7,"ion-content"),c.Mb(8,"ion-searchbar",5),c.Ub("ionChange",function(t){return e.buscarEmpleados(t)}),c.Lb(),c.qc(9,u,2,1,"ion-list",6),c.Lb()),2&t&&(c.zb(9),c.dc("ngIf",e.buscados.length>0))},directives:[r.z,r.lb,r.jb,r.k,r.j,r.A,r.t,r.U,r.yb,i.j,r.L,i.i,r.F,r.f,r.K],styles:[""]}),t})();var f=o("fqim");function v(t,e){if(1&t&&(c.Mb(0,"div",18),c.rc(1),c.Lb()),2&t){const t=c.Wb();c.zb(1),c.sc(t.placa)}}function g(t,e){if(1&t&&(c.Mb(0,"ion-select-option",22),c.rc(1),c.Lb()),2&t){const t=e.$implicit;c.dc("value",t.usuario),c.zb(1),c.sc(t.usuario.nombrecompleto)}}function j(t,e){if(1&t){const t=c.Nb();c.Mb(0,"ion-item"),c.Mb(1,"ion-label",19),c.rc(2,"Marcar Inicio de trabajo"),c.Lb(),c.Mb(3,"ion-button",23),c.Ub("click",function(){return c.lc(t),c.Wb(2).marcado()}),c.rc(4,"Iniciar Trabajo"),c.Lb(),c.Lb()}}function M(t,e){if(1&t){const t=c.Nb();c.Mb(0,"ion-list"),c.Mb(1,"ion-item-divider",1),c.Mb(2,"ion-label",19),c.rc(3,"Agregar trabajador(es) para esta hoja de vida"),c.Lb(),c.Lb(),c.Mb(4,"ion-item"),c.Mb(5,"ion-label"),c.rc(6,"Escoger Trabajador"),c.Lb(),c.Mb(7,"ion-select",20),c.Ub("ionChange",function(e){return c.lc(t),c.Wb().agregar(e)}),c.qc(8,g,2,2,"ion-select-option",21),c.Lb(),c.Lb(),c.qc(9,j,5,0,"ion-item",10),c.Lb()}if(2&t){const t=c.Wb();c.zb(8),c.dc("ngForOf",t.empleados),c.zb(1),c.dc("ngIf",""===t.inicio)}}function x(t,e){1&t&&(c.Mb(0,"div",24),c.Kb(1,"img",25),c.Mb(2,"h3",26),c.rc(3,"No hay informaci\xf3n en mi hoja de vida"),c.Lb(),c.Lb())}function O(t,e){if(1&t){const t=c.Nb();c.Mb(0,"div",27),c.Ub("click",function(){return c.lc(t),c.Wb().tomarFoto()}),c.Mb(1,"span",28),c.rc(2,"ssfsdfsfs"),c.Lb(),c.Mb(3,"div",29),c.Mb(4,"ion-buttons"),c.Mb(5,"ion-button",30),c.Kb(6,"ion-icon",31),c.Lb(),c.Lb(),c.Mb(7,"strong"),c.rc(8,"A\xf1adir Fotograf\xeda"),c.Lb(),c.Lb(),c.Lb()}}function E(t,e){1&t&&(c.Mb(0,"div",32),c.Mb(1,"span",28),c.rc(2,"ssfsdfsfs"),c.Lb(),c.Kb(3,"ion-skeleton-text",33),c.Lb())}function L(t,e){1&t&&(c.Mb(0,"div",32),c.Mb(1,"span",28),c.rc(2,"ssfsdfsfs"),c.Lb(),c.Kb(3,"ion-skeleton-text",33),c.Lb())}function k(t,e){if(1&t){const t=c.Nb();c.Mb(0,"div",27),c.Ub("click",function(){c.lc(t);const o=e.index;return c.Wb().verFoto(o)}),c.Mb(1,"span",28),c.rc(2,"ssfsdfsfs"),c.Lb(),c.Kb(3,"img",34),c.Lb()}if(2&t){const t=e.$implicit;c.zb(3),c.fc("src","https://motocaliapp.com/11927613402/",t.ruta,"",c.mc)}}function w(t,e){if(1&t){const t=c.Nb();c.Mb(0,"ion-buttons",38),c.Mb(1,"ion-button",39),c.Ub("click",function(){return c.lc(t),c.Wb(2).viajar("repuestos")}),c.Kb(2,"ion-icon",31),c.Lb(),c.Lb()}}function C(t,e){1&t&&c.Kb(0,"div",8)}function y(t,e){if(1&t){const t=c.Nb();c.Mb(0,"ion-item-options",48),c.Mb(1,"ion-item-option",49),c.Ub("click",function(){c.lc(t);const e=c.Wb(),o=e.$implicit,i=e.index;return c.Wb(2).eliminarrep(o,i)}),c.Kb(2,"ion-icon",50),c.Lb(),c.Lb()}}function z(t,e){if(1&t&&(c.Mb(0,"ion-item-sliding"),c.Mb(1,"ion-item",40),c.Mb(2,"ion-label",19),c.Mb(3,"div",41),c.rc(4),c.Lb(),c.Kb(5,"br"),c.Mb(6,"div",42),c.Mb(7,"div",42),c.Mb(8,"strong"),c.rc(9,"Cantidad: "),c.Lb(),c.Mb(10,"span",43),c.rc(11),c.Lb(),c.Lb(),c.Mb(12,"div",42),c.Mb(13,"strong"),c.rc(14,"Precio: "),c.Lb(),c.Mb(15,"span",44),c.rc(16),c.Xb(17,"decimales"),c.Lb(),c.Lb(),c.Lb(),c.Mb(18,"div",45),c.Mb(19,"strong"),c.rc(20,"Total: "),c.Lb(),c.Mb(21,"span",46),c.rc(22),c.Xb(23,"decimales"),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.qc(24,y,3,0,"ion-item-options",47),c.Lb()),2&t){const t=e.$implicit,o=c.Wb(2);c.zb(4),c.tc(" ",t.nombre," "),c.zb(7),c.tc(" ",t.cantidad," "),c.zb(5),c.tc("$ ",c.Zb(17,5,t.precio,"es-CO"),""),c.zb(6),c.tc("$ ",c.Zb(23,8,t.total,"es-CO"),""),c.zb(2),c.dc("ngIf",o.accesos)}}function I(t,e){if(1&t&&(c.Mb(0,"ion-list"),c.Mb(1,"ion-item-divider",4),c.Mb(2,"ion-label"),c.rc(3," A\xf1adir Repuestos"),c.Lb(),c.qc(4,w,3,0,"ion-buttons",35),c.Lb(),c.qc(5,C,1,0,"div",36),c.qc(6,z,25,11,"ion-item-sliding",37),c.Lb()),2&t){const t=c.Wb();c.zb(4),c.dc("ngIf","TALLER_ROLE"===t.role||t.accesos),c.zb(1),c.dc("ngIf",0===t.repuestos.length),c.zb(1),c.dc("ngForOf",t.repuestos)}}function P(t,e){if(1&t){const t=c.Nb();c.Mb(0,"ion-buttons",38),c.Mb(1,"ion-button",39),c.Ub("click",function(){return c.lc(t),c.Wb(2).viajar("trabajos")}),c.Kb(2,"ion-icon",31),c.Lb(),c.Lb()}}function $(t,e){1&t&&c.Kb(0,"div",8)}function A(t,e){if(1&t){const t=c.Nb();c.Mb(0,"ion-item-options",48),c.Mb(1,"ion-item-option",49),c.Ub("click",function(){c.lc(t);const e=c.Wb(),o=e.$implicit,i=e.index;return c.Wb(2).eliminar(o,i)}),c.Kb(2,"ion-icon",50),c.Lb(),c.Lb()}}function N(t,e){if(1&t&&(c.Mb(0,"ion-item-sliding"),c.Mb(1,"ion-item",40),c.Mb(2,"ion-label",19),c.Mb(3,"div",41),c.rc(4),c.Lb(),c.Kb(5,"br"),c.Mb(6,"div",42),c.Mb(7,"strong"),c.rc(8,"Precio: "),c.Lb(),c.Mb(9,"span",44),c.rc(10),c.Xb(11,"decimales"),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.qc(12,A,3,0,"ion-item-options",47),c.Lb()),2&t){const t=e.$implicit,o=c.Wb(2);c.zb(4),c.tc(" ",t.nombre," "),c.zb(6),c.tc("$ ",c.Zb(11,3,t.precio,"es-CO"),""),c.zb(2),c.dc("ngIf",o.accesos)}}function _(t,e){if(1&t&&(c.Mb(0,"ion-list"),c.Mb(1,"ion-item-divider",4),c.Mb(2,"ion-label"),c.rc(3,"Trabajos realizados"),c.Lb(),c.qc(4,P,3,0,"ion-buttons",35),c.Lb(),c.qc(5,$,1,0,"div",36),c.qc(6,N,13,6,"ion-item-sliding",37),c.Lb()),2&t){const t=c.Wb();c.zb(4),c.dc("ngIf","TALLER_ROLE"===t.role||t.accesos),c.zb(1),c.dc("ngIf",0===t.trabajos.length),c.zb(1),c.dc("ngForOf",t.trabajos)}}function q(t,e){1&t&&(c.Mb(0,"ion-item-divider",1),c.Mb(1,"ion-label",19),c.rc(2,"Listado de trabajadores "),c.Lb(),c.Lb())}function F(t,e){if(1&t&&(c.Mb(0,"ion-item",40),c.Mb(1,"ion-label",19),c.Mb(2,"div"),c.rc(3),c.Lb(),c.Mb(4,"div"),c.Mb(5,"strong"),c.rc(6),c.Lb(),c.Lb(),c.Lb(),c.Lb()),2&t){const t=e.$implicit;c.zb(3),c.sc(t.usuario.nombrecompleto),c.zb(3),c.tc("@",t.usuario.nombreusuario,"")}}function T(t,e){if(1&t&&(c.Mb(0,"div"),c.qc(1,q,3,0,"ion-item-divider",51),c.qc(2,F,7,2,"ion-item",52),c.Lb()),2&t){const t=c.Wb();c.zb(1),c.dc("ngIf",t.escogidos.length>0),c.zb(1),c.dc("ngForOf",t.escogidos)}}function H(t,e){1&t&&(c.Mb(0,"ion-item-divider",1),c.Mb(1,"ion-label",19),c.rc(2,"Listado de trabajadores "),c.Lb(),c.Lb())}function R(t,e){if(1&t&&(c.Mb(0,"ion-item",40),c.Mb(1,"ion-label",19),c.Mb(2,"div"),c.rc(3),c.Lb(),c.Mb(4,"div"),c.Mb(5,"strong"),c.rc(6),c.Lb(),c.Lb(),c.Lb(),c.Lb()),2&t){const t=e.$implicit;c.zb(3),c.sc(t.nombrecompleto),c.zb(3),c.tc("@",t.nombreusuario,"")}}function K(t,e){if(1&t&&(c.Mb(0,"div"),c.qc(1,H,3,0,"ion-item-divider",51),c.qc(2,R,7,2,"ion-item",52),c.Lb()),2&t){const t=c.Wb();c.zb(1),c.dc("ngIf",t.trabajadores.length>0),c.zb(1),c.dc("ngForOf",t.trabajadores)}}function W(t,e){if(1&t){const t=c.Nb();c.Mb(0,"ion-item-divider",53),c.Ub("click",function(){return c.lc(t),c.Wb().buscar()}),c.Mb(1,"ion-label",19),c.rc(2,"Asociar esta hoja de vida a un usuario "),c.Lb(),c.Lb()}}function U(t,e){if(1&t){const t=c.Nb();c.Mb(0,"ion-button",54),c.Ub("click",function(){return c.lc(t),c.Wb().terminar()}),c.rc(1,"TERMINAR HOJA DE VIDA"),c.Lb()}}const J=[{path:"",component:(()=>{class t{constructor(t,e,o,i,a,r,n,s){this.modalCtrl=t,this.alertCtrl=e,this.almacenamiento=o,this.active=i,this.router=a,this.hojaApi=r,this.toast=n,this.IVTapi=s,this.fotos=[],this.repuestos=[],this.trabajos=[],this.role="",this.cargaFotos=!0,this.id="",this.idHoja="",this.estado="",this.tipo="",this.placa="",this.accesos=!1,this.empleados=[],this.miid="",this.idtaller="a",this.escogidos=[],this.trabajadores=[],this.inicio="",this.idu=""}ngOnInit(){}ionViewWillEnter(){return Object(s.a)(this,void 0,void 0,function*(){this.escogidos=[],this.tipo=this.active.snapshot.paramMap.get("tipo"),"hoja"===this.active.snapshot.paramMap.get("tipo")?yield this.miHoja2():yield this.miHoja()})}refrescando(t){return Object(s.a)(this,void 0,void 0,function*(){this.escogidos=[],"hoja"===this.active.snapshot.paramMap.get("tipo")?yield this.miHoja2():yield this.miHoja(),t.target.complete()})}tomarFoto(){this.router.navigate(["/hoja-vida-modal",this.active.snapshot.paramMap.get("id"),"fotos",this.idHoja])}verFoto(t){this.router.navigate(["/hoja-vida-modal",this.active.snapshot.paramMap.get("id"),"ver",this.idHoja,t])}viajar(t){this.router.navigate(["/hoja-vida-modal",this.active.snapshot.paramMap.get("id"),t,this.idHoja])}miHoja(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&(this.miid=t._id,this.hojaApi.leeHoja(t.token,{id:this.active.snapshot.paramMap.get("id")}).subscribe(e=>Object(s.a)(this,void 0,void 0,function*(){console.log(e,"hoja"),e.exe&&(e.response&&(this.idHoja=e.response._id,e.response.accesos.filter(e=>e===t._id).length>0&&(this.accesos=!0),this.idtaller=e.response.idataller,this.traerEmpleados(e.response.trabajador),this.repuestos=e.response.repuestos,this.trabajos=e.response.trabajos,this.estado=e.response.cita.estado),yield this.traerFotos())}),t=>{this.toast.toastError("No se pudo traer la informaci\xf3n de la hoja de vida, int\xe9ntelo m\xe1s tarde")}))})}traerEmpleados(t){return Object(s.a)(this,void 0,void 0,function*(){const e=yield this.almacenamiento.obtenerToken();e&&this.IVTapi.leerEmpleados(e.token).subscribe(e=>{e.exe?e.response.forEach(e=>{e.usuario.imagen=e.usuario.imagen[0].path.includes("notfound")?"/assets/notfound.png":`https://motocaliapp.com/${e.usuario.imagen[0].path}`,0===t.filter(t=>t._id===e.usuario._id).length?this.empleados.push(e):this.escogidos.push(e)}):this.toast.toastError("No se pudo traer los empleados, int\xe9ntelo m\xe1s tarde")},t=>{this.toast.toastError("No se pudo traer los empleados, int\xe9ntelo m\xe1s tarde")})})}escoger(t){}miHoja2(){return Object(s.a)(this,void 0,void 0,function*(){this.trabajos=[],this.repuestos=[],this.empleados=[];const t=yield this.almacenamiento.obtenerToken();t&&(this.miid=t._id,this.hojaApi.leeHoja2(t.token,{id:this.active.snapshot.paramMap.get("id")}).subscribe(e=>Object(s.a)(this,void 0,void 0,function*(){e.exe?(e.response&&(this.idHoja=e.response._id,e.response.trabajos.filter(e=>e===t._id).length>0&&(this.accesos=!0),this.inicio=e.response.inicio?e.response.inicio:"",this.idu=e.response.idusuario?e.response.idusuario:"",this.idtaller=e.response.idtaller,this.traerEmpleados(e.response.trabajador),e.response.idtaller===t._id&&(this.accesos=!0),this.accesos||(this.trabajadores=e.response.trabajador),this.repuestos=e.response.repuestos,this.trabajos=e.response.trabajos,this.placa=e.response.placa),yield this.traerFotos()):this.toast.toastError("No se pudo traer la informaci\xf3n de la hoja de vida, int\xe9ntelo m\xe1s tarde")}),t=>{this.toast.toastError("No se pudo traer la informaci\xf3n de la hoja de vida, int\xe9ntelo m\xe1s tarde")}))})}terminar(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.alertCtrl.create({header:"Atenci\xf3n!",message:"\xbfEstas seguro de marcar esta hoja de vida como terminada?",buttons:[{text:"No quiero",cssClass:"cancelarAlerta",role:"cancel",handler:()=>{}},{text:"Aceptar",cssClass:"botonalerta",handler:()=>Object(s.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&this.hojaApi.terminar(t.token,{id:this.active.snapshot.paramMap.get("id")}).subscribe(t=>Object(s.a)(this,void 0,void 0,function*(){console.log(t),t.exe?(this.toast.toastError("Hoja de vida terminada"),this.router.navigate(["/central/menu/hoja"])):this.toast.toastError("No se pudo terminar la hoja de vida, int\xe9ntelo m\xe1s tarde")}),t=>{this.toast.toastError("No se pudo terminar la hoja de vida, int\xe9ntelo m\xe1s tarde")})})}]});yield t.present()})}marcado(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.alertCtrl.create({header:"Atenci\xf3n!",message:"\xbfDeseas iniciar esta hoja de vida ?",buttons:[{text:"No quiero",cssClass:"cancelarAlerta",role:"cancel",handler:()=>{}},{text:"Aceptar",cssClass:"botonalerta",handler:()=>Object(s.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&this.hojaApi.inicio(t.token,{id:this.active.snapshot.paramMap.get("id")}).subscribe(t=>Object(s.a)(this,void 0,void 0,function*(){console.log(t),t.exe?this.toast.toastExitoso("Se inici\xf3 el trabajo en la hoja de vida"):this.toast.toastError("No se pudo actualizar la hoja de vida, int\xe9ntelo m\xe1s tarde")}),t=>{this.toast.toastError("No se pudo actualizar la hoja de vida, int\xe9ntelo m\xe1s tarde")})})}]});yield t.present()})}buscar(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:m,componentProps:{id:this.idHoja}});yield t.present();const e=yield t.onWillDismiss();e&&e.data&&(this.escogidos=[],this.miHoja2())})}agregar(t){return Object(s.a)(this,void 0,void 0,function*(){const e=yield this.alertCtrl.create({header:"Atenci\xf3n!",message:"\xbfQuieres agregar "+t.detail.value.nombrecompleto+" como trabajador para sta hoja de vida?",buttons:[{text:"No",cssClass:"cancelarAlerta",role:"cancel",handler:()=>{}},{text:"Si",cssClass:"botonalerta",handler:()=>Object(s.a)(this,void 0,void 0,function*(){const e=yield this.almacenamiento.obtenerToken();e&&this.hojaApi.trabajador(e.token,{id:this.active.snapshot.paramMap.get("id"),trabajador:t.detail.value._id}).subscribe(t=>Object(s.a)(this,void 0,void 0,function*(){console.log(t),t.exe?(this.toast.toastExitoso("Usuario agregado como trabajador"),this.miHoja2()):this.toast.toastError("No se pudo actualizar la hoja de vida, int\xe9ntelo m\xe1s tarde")}),t=>{this.toast.toastError("No se pudo actualizar la hoja de vida, int\xe9ntelo m\xe1s tarde")})})}]});yield e.present()})}eliminar(t,e){return Object(s.a)(this,void 0,void 0,function*(){const o=yield this.alertCtrl.create({header:"Atenci\xf3n!",message:"\xbfDeseas eliminar este trabajo ?",buttons:[{text:"Cancelar",cssClass:"cancelarAlerta",role:"cancel",handler:()=>{}},{text:"Aceptar",cssClass:"botonalerta",handler:()=>Object(s.a)(this,void 0,void 0,function*(){this.trabajos.splice(e,1);const o=yield this.almacenamiento.obtenerToken();o&&this.hojaApi.editarHoja(o.token,{id:this.active.snapshot.paramMap.get("id"),trabajos:this.trabajos,repuestos:this.repuestos}).subscribe(e=>Object(s.a)(this,void 0,void 0,function*(){console.log(e),e.exe?this.toast.toastExitoso("Se actualiz\xf3 la hoja de vida correctamente"):(this.toast.toastError("No se pudo actualizar la hoja de vida, int\xe9ntelo m\xe1s tarde"),this.trabajos.push(t))}),e=>{this.toast.toastError("No se pudo actualizar la hoja de vida, int\xe9ntelo m\xe1s tarde"),this.trabajos.push(t)})})}]});yield o.present()})}eliminarrep(t,e){return Object(s.a)(this,void 0,void 0,function*(){const o=yield this.alertCtrl.create({header:"Atenci\xf3n!",message:"\xbfDeseas eliminar este repuesto ?",buttons:[{text:"Cancelar",cssClass:"cancelarAlerta",role:"cancel",handler:()=>{}},{text:"Aceptar",cssClass:"botonalerta",handler:()=>Object(s.a)(this,void 0,void 0,function*(){this.repuestos.splice(e,1);const o=yield this.almacenamiento.obtenerToken();o&&this.hojaApi.editarHoja(o.token,{id:this.active.snapshot.paramMap.get("id"),trabajos:this.trabajos,repuestos:this.repuestos}).subscribe(e=>Object(s.a)(this,void 0,void 0,function*(){console.log(e),e.exe?this.toast.toastExitoso("Se actualiz\xf3 la hoja de vida correctamente"):(this.toast.toastError("No se pudo actualizar la hoja de vida, int\xe9ntelo m\xe1s tarde"),this.repuestos.push(t))}),e=>{this.toast.toastError("No se pudo actualizar la hoja de vida, int\xe9ntelo m\xe1s tarde"),this.repuestos.push(t)})})}]});yield o.present()})}traerFotos(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&(this.role=t.role,this.hojaApi.leefotos(t.token,{id:this.idHoja}).subscribe(t=>{t.exe&&(this.fotos=t.response),this.cargaFotos=!1},t=>{this.cargaFotos=!1,this.toast.toastError("No se pudo traer las fotos de la hoja de vida, int\xe9ntelo m\xe1s tarde")}))})}estados(){return Object(s.a)(this,void 0,void 0,function*(){let t="PENDIENTE";"PENDIENTE"===this.estado?t='Marcar como "en Progeso"':"EN PROGRESO"===this.estado&&(t='Marcar como "Terminado"');const e=yield this.alertCtrl.create({header:"Cambiar Estado de Cita",message:`Actualmente la cita esta en estado ${this.estado}`,mode:"ios",buttons:[{text:"cancelar",role:"cancel"},{text:t,handler:()=>{this.estado="PENDIENTE"===this.estado?"EN PROGRESO":"TERMINADO",this.cambiarEstado()}}]});yield e.present()})}cambiarEstado(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.almacenamiento.obtenerToken();t&&this.hojaApi.editarCita(t.token,this.active.snapshot.paramMap.get("id"),{estado:this.estado}).subscribe(t=>{console.log(t),t.exe?this.toast.toastExitoso("Estado cambiado"):this.toast.toastError("No se pudo cambiar el estado de la cita, int\xe9ntelo \xe1s tarde")},t=>{this.toast.toastError("No se pudo cambiar el estado de la cita, int\xe9ntelo \xe1s tarde")})})}}return t.\u0275fac=function(e){return new(e||t)(c.Jb(r.qb),c.Jb(r.b),c.Jb(d.a),c.Jb(n.a),c.Jb(n.g),c.Jb(b.a),c.Jb(h.a),c.Jb(l.a))},t.\u0275cmp=c.Db({type:t,selectors:[["app-hoja"]],decls:30,vars:13,consts:[[1,"ion-no-border"],["color","oscuro"],["slot","start"],["icon","chevron-back-outline","defaultHref","/central/menu"],["color","light"],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","150",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles"],[1,"content"],[1,"divider"],["class","placa",4,"ngIf"],[4,"ngIf"],["class","flexbetver",4,"ngIf"],["scrollable","true"],["class","color",3,"click",4,"ngIf"],["class","color2",4,"ngIf"],["class","color",3,"click",4,"ngFor","ngForOf"],["class","pointer","color","medium",3,"click",4,"ngIf"],["mode","ios","expand","block","color","barra",3,"click",4,"ngIf"],[1,"placa"],[1,"ion-text-wrap"],["value","",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mode","ios","color","primary","expand","block","slot","end",3,"click"],[1,"flexbetver"],["src","/assets/Hojas.png","width","70px","alt",""],[1,"tituloGrande"],[1,"color",3,"click"],[1,"none"],[1,"add"],["color","medium"],["name","add","slot","icon-only"],[1,"color2"],["animated",""],["width","100%","alt","",3,"src"],["slot","end",4,"ngIf"],["class","divider",4,"ngIf"],[4,"ngFor","ngForOf"],["slot","end"],[3,"click"],[1,"sinfondo"],[1,"nombre"],[1,"flexbet"],[1,"verdei","padd"],[1,"verdei"],[1,"flexbet","bor"],[1,"rojoi"],["side","end",4,"ngIf"],["side","end"],["color","danger",3,"click"],["name","trash","slot","icon-only"],["color","oscuro",4,"ngIf"],["class","sinfondo",4,"ngFor","ngForOf"],["color","medium",1,"pointer",3,"click"],["mode","ios","expand","block","color","barra",3,"click"]],template:function(t,e){1&t&&(c.Mb(0,"ion-header",0),c.Mb(1,"ion-toolbar",1),c.Mb(2,"ion-buttons",2),c.Kb(3,"ion-back-button",3),c.Lb(),c.Mb(4,"ion-title"),c.rc(5,"Hoja de Vida"),c.Lb(),c.Lb(),c.Lb(),c.Mb(6,"ion-content",4),c.Mb(7,"ion-refresher",5),c.Ub("ionRefresh",function(t){return e.refrescando(t)}),c.Kb(8,"ion-refresher-content",6),c.Lb(),c.Mb(9,"div",7),c.Kb(10,"div",8),c.qc(11,v,2,1,"div",9),c.Kb(12,"div",8),c.qc(13,M,10,2,"ion-list",10),c.Kb(14,"div",8),c.Mb(15,"ion-item-divider",4),c.rc(16," Registro Fotogr\xe1fico "),c.Lb(),c.qc(17,x,4,0,"div",11),c.Mb(18,"ion-segment",12),c.qc(19,O,9,0,"div",13),c.qc(20,E,4,0,"div",14),c.qc(21,L,4,0,"div",14),c.qc(22,k,4,1,"div",15),c.Lb(),c.qc(23,I,7,3,"ion-list",10),c.qc(24,_,7,3,"ion-list",10),c.Kb(25,"div",8),c.qc(26,T,3,2,"div",10),c.qc(27,K,3,2,"div",10),c.qc(28,W,3,0,"ion-item-divider",16),c.qc(29,U,2,0,"ion-button",17),c.Lb(),c.Lb()),2&t&&(c.zb(11),c.dc("ngIf","hoja"===e.tipo),c.zb(2),c.dc("ngIf",e.miid===e.idtaller),c.zb(4),c.dc("ngIf",0===e.fotos.length&&0===e.trabajos.length&&0===e.repuestos.length&&!e.cargaFotos&&"USER_ROLE"===e.role&&!e.accesos),c.zb(2),c.dc("ngIf","TALLER_ROLE"===e.role||e.accesos),c.zb(1),c.dc("ngIf",e.cargaFotos),c.zb(1),c.dc("ngIf",e.cargaFotos),c.zb(1),c.dc("ngForOf",e.fotos),c.zb(1),c.dc("ngIf","TALLER_ROLE"===e.role||e.accesos||e.repuestos.length>0),c.zb(1),c.dc("ngIf","TALLER_ROLE"===e.role||e.accesos||e.trabajos.length>0),c.zb(2),c.dc("ngIf",e.accesos),c.zb(1),c.dc("ngIf",!e.accesos),c.zb(1),c.dc("ngIf",e.miid===e.idtaller&&""===e.idu),c.zb(1),c.dc("ngIf",e.accesos))},directives:[r.z,r.lb,r.k,r.g,r.h,r.jb,r.t,r.Q,r.R,i.j,r.G,r.xb,r.V,i.i,r.L,r.K,r.F,r.X,r.Y,r.j,r.A,r.Z,r.J,r.I,r.H],pipes:[f.a],styles:[".color[_ngcontent-%COMP%]{margin:5px;max-width:150px;height:150px;border-radius:10px;background:#d7ddb8;display:flex;justify-content:center;align-items:center;flex-direction:column}.pointer[_ngcontent-%COMP%]{cursor:pointer}ion-segment[_ngcontent-%COMP%]{background-color:#fff}.content[_ngcontent-%COMP%]{max-width:800px;margin:auto}.color2[_ngcontent-%COMP%]{margin:5px;min-width:150px;height:150px;border-radius:10px;background:#f1f1f1}.color2[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{width:150px;height:100%!important;margin-top:0!important}.color[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:150px;overflow:hidden}.camarillo[_ngcontent-%COMP%]{background:#fdf2c0;padding:5px}.none[_ngcontent-%COMP%]{opacity:0;display:none}.add[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;color:var(--ion-color-medium)}.tituloGrande[_ngcontent-%COMP%]{font-size:22px;width:250px;margin:auto;text-align:center;opacity:.3;padding:8px 0}.flexbet[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.padd[_ngcontent-%COMP%]{padding-right:14px}.flexbet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:50%}.nombre[_ngcontent-%COMP%]{background-color:#fdf2c0;padding:2px 10px}.verdei[_ngcontent-%COMP%]{color:#18713c}.rojoi[_ngcontent-%COMP%]{color:red}.estadobol[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:100%}.estado-verde[_ngcontent-%COMP%]{background:#85b84f}.estado-amarillo[_ngcontent-%COMP%]{background:#fcd573}.estado-azul[_ngcontent-%COMP%]{background:#5591b1}.flexbetver[_ngcontent-%COMP%]{margin-top:15px;text-align:center}.flexbetver[_ngcontent-%COMP%]   .tituloGrande[_ngcontent-%COMP%]{opacity:.3}.placa[_ngcontent-%COMP%]{width:150px;background-color:#ffa800;color:#000;font-size:22px;text-align:center;padding:10px;border-radius:5px;font-weight:700;border:3px solid #000}"]}),t})()}];let D=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(e){return new(e||t)},imports:[[n.i.forChild(J)],n.i]}),t})();var S=o("iTUp");let V=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(e){return new(e||t)},imports:[[i.b,a.e,r.mb,D,S.a]]}),t})()},fqim:function(t,e,o){"use strict";o.d(e,"a",function(){return a});var i=o("fXoL");let a=(()=>{class t{transform(t,e){return 0===t?0:new Intl.NumberFormat(e,{minimumFractionDigits:1}).format(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=i.Ib({name:"decimales",type:t,pure:!0}),t})()}}]);